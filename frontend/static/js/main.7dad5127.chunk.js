(this.webpackJsonpSVOWebApp=this.webpackJsonpSVOWebApp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(19),r=n(92),a=n(6),s=n.n(a),o=n(20),c=n(8),u=n(9),l=n(147),d=n.n(l),p=function(){function e(t){Object(c.a)(this,e),this.closed=!1,this.observable=t}return Object(u.a)(e,[{key:"next",value:function(e){return this.observable.onNext(e)}},{key:"error",value:function(e){return this.observable.onError(e)}},{key:"complete",value:function(){return this.observable.onComplete()}}]),e}(),b=function(){function e(t){Object(c.a)(this,e),this._onSubscribe=t,this._next=function(){},this._error=function(){},this._complete=function(){}}return Object(u.a)(e,[{key:"subscribe",value:function(e){var t=this;"function"===typeof e.next&&(this._next=e.next),"function"===typeof e.error&&(this._error=e.error),"function"===typeof e.complete&&(this._complete=e.complete);var n=new p(this),i=this._onSubscribe(n);return{unsubscribe:function(){"function"===typeof i&&i(),t._next=function(){},t._error=function(){},t._complete=function(){}}}}},{key:"onNext",value:function(e){return this._next(e)}},{key:"onError",value:function(e){return this._error(e)}},{key:"onComplete",value:function(){return this._complete()}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),v=n(7),f=function(){function e(){Object(c.a)(this,e),this.pendingRequests=new Map,this.openStreams=new Map,this.socket=null}return Object(u.a)(e,[{key:"isConnected",value:function(){return!!this.socket}},{key:"onConnect",value:function(e){var t=this.socket;this.socket=e,t!==e&&this.cancelAllPendingRequests(new Error("Connection changed"))}},{key:"readMessage",value:function(){var t=Object(o.a)(s.a.mark((function t(n){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.SvPenv.Envelope.decode(new Uint8Array(n));case 2:i=t.sent,t.t0=i.type,t.next=t.t0===e.SvPenv.MessageType.response?6:t.t0===e.SvPenv.MessageType.errorResponse?8:t.t0===e.SvPenv.MessageType.streamResponse?10:t.t0===e.SvPenv.MessageType.streamErrorResponse?12:t.t0===e.SvPenv.MessageType.streamFinish?14:t.t0===e.SvPenv.MessageType.streamCancel?16:18;break;case 6:return this.onResponse(i),t.abrupt("break",19);case 8:return this.onErrorResponse(i),t.abrupt("break",19);case 10:return this.onStreamResponse(i),t.abrupt("break",19);case 12:return this.onStreamErrorResponse(i),t.abrupt("break",19);case 14:return this.onStreamFinish(i),t.abrupt("break",19);case 16:return this.onStreamCancel(i),t.abrupt("break",19);case 18:v.a.error({type:i.type},"Received message with unexpected type");case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onResponse",value:function(e){var t=e.transactionId,n=this.pendingRequests.get(t);if(n){var i=this.unwrapResponse(e);this.pendingRequests.delete(t),n.handled||(clearTimeout(n.timeout),n.resolve(i))}else v.a.error({txId:t},"Received response for unknown transaction id")}},{key:"onErrorResponse",value:function(e){var t=e.transactionId,n=this.unwrapErrorResponse(e);return this.onErrorResponseImpl(t,n)}},{key:"onErrorResponseImpl",value:function(e,t){var n=this.pendingRequests.get(e);n?(this.pendingRequests.delete(e),n.handled||(clearTimeout(n.timeout),n.reject(t))):v.a.error({txId:e},"Received response for unknown transaction id")}},{key:"cancelAllPendingRequests",value:function(e){var t,n=Object(r.a)(this.pendingRequests.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.onErrorResponseImpl(i,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"onRequestTimeout",value:function(e){var t=this.pendingRequests.get(e);t?(t.handled=!0,t.reject(new Error("Request timed out"))):v.a.error({txId:e},"Received response for unknown transaction id")}},{key:"onStreamResponse",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,i,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.transactionId,i=this.openStreams.get(n)){e.next=5;break}return v.a.info({streamId:n},"Received update for unknown stream id"),e.abrupt("return");case 5:return r=this.unwrapResponse(t),e.next=8,i.observer.next(r);case 8:this.ackStreamResponse(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onStreamErrorResponse",value:function(e){var t=e.transactionId,n=this.openStreams.get(t);if(n){var i=this.unwrapErrorResponse(e);this.openStreams.delete(t),n.observer.error(i)}else v.a.error({streamId:t},"Received error for unknown stream id")}},{key:"onStreamFinish",value:function(e){var t=e.transactionId,n=this.openStreams.get(t);n?(this.openStreams.delete(t),n.observer.complete()):v.a.error({streamId:t},"Received finish for unknown stream id")}},{key:"onStreamCancel",value:function(e){}},{key:"request",value:function(t){var n=this;return new Promise((function(i,r){if(!n.socket)return r(new Error("No socket available"));e.nextTxId+=1;var a=e.nextTxId,s=n.wrapMessage(t,a,e.SvPenv.MessageType.request),o=n.serializeEnvelope(s),c=setTimeout(n.onRequestTimeout.bind(n,a),3e4);n.pendingRequests.set(a,{resolve:i,reject:r,timeout:c}),n.socket.send(o)}))}},{key:"stream",value:function(t){var n=this;return b.create((function(i){if(!n.socket)return i.error(new Error("No socket available"));e.nextStreamId+=1;var r=e.nextStreamId,a=n.wrapMessage(t,r,e.SvPenv.MessageType.streamRequest),s=n.serializeEnvelope(a);return n.openStreams.set(r,{observer:i}),n.socket.send(s),function(){n.openStreams.delete(r),n.cancelStream(r)}}))}},{key:"cancelStream",value:function(t){if(this.socket){var n={transactionId:t,type:e.SvPenv.MessageType.streamCancel},i=e.SvPenv.Envelope.fromObject(n),r=this.serializeEnvelope(i);this.socket.send(r)}}},{key:"ackStreamResponse",value:function(t){var n=e.SvPenv.Envelope.fromObject({transactionId:t.transactionId,sequenceNumber:t.sequenceNumber,type:e.SvPenv.MessageType.streamAck}),i=this.serializeEnvelope(n);this.socket.send(i)}},{key:"wrapMessage",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.SvPenv.MessageType.request,r=this.wrapOneOf(t),a=e.SvPenv.Envelope.fromObject({payloadType:this.getPayloadTypeForOneOfMessage(r),payload:this.packToAny(r),transactionId:n,type:i});return a}},{key:"unwrapResponse",value:function(e){var t=this.unpackFromAny(e.payload);return this.unwrapOneOf(t)}},{key:"unwrapErrorResponse",value:function(e){var t=new Error(e.error.message);if(t.code=e.error.errorCode,e.error.payload){var n=this.unpackFromAny(e.error.payload);t.payload=n}return t}},{key:"wrapOneOf",value:function(t){var n=this.getFieldNameForSVRCMessage(t);return e.SvPb.SVRCMessages.create(Object(i.a)({},n,t))}},{key:"unwrapOneOf",value:function(e){return e[e.message]}},{key:"getFieldNameForSVRCMessage",value:function(e){var t=e.$type.name;return t.substr(0,1).toLowerCase()+t.substr(1)}},{key:"getPayloadTypeForOneOfMessage",value:function(e){var t=e.message;return e.$type.fields[t].id}},{key:"packToAny",value:function(e){var t=e.$type,n=t.fullName.slice(1),i=t.encode(e).finish();return{type_url:"".concat("type.googleapis.com","/").concat(n),value:i}}},{key:"unpackFromAny",value:function(t){var n=t.type_url,i=n.indexOf("/");-1!==i&&(n=n.slice(i+1));var r=e.SvPb.lookup(n);if(r)return r.decode(t.value);v.a.error({type:t.type_url},"Received message with unknown payload type")}},{key:"serializeEnvelope",value:function(t){var n=e.SvPenv.Envelope.encode(t).finish();return n.buffer.slice(n.byteOffset,n.byteOffset+n.length)}}],[{key:"init",value:function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadProto("/res/proto/Envelope.proto","SvPenv");case 2:return e.SvPenv=t.sent,t.next=5,e.loadProto("/res/proto/SVRC.proto","SvPb");case 5:return e.SvPb=t.sent,t.next=8,e.loadProto("/res/proto/SVRC.proto","SvAuth");case 8:e.SvAuth=t.sent,e.initialized=!0;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"loadProto",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.load(t);case 2:return i=e.sent,e.abrupt("return",i.lookup(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();f.SvPenv={},f.SvPb={},f.nextTxId=0,f.nextStreamId=0,f.initialized=!1},101:function(e,t,n){"use strict";t.a=n.p+"static/media/edit.962e7af9.svg"},102:function(e,t,n){"use strict";var i=n(8),r=n(9),a=n(14),s=n(13),o=n(0),c=n(902),u=n(907),l=n(908),d=n(21),p=(n(862),n(235)),b=n(1),v=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={openMenu:!1},e.renderMenuItems=function(){var t=e.props,n=t.menuItems,i=t.onClose,r=t.classes,a=t.enabled;return n.map((function(t){return Object(b.jsx)(l.a,{disabled:!a,onClick:function(){a&&(i(),e.closeMenu(),t.onClick())},className:t.className?r.menuItem+" "+t.className:r.menuItem,children:Object(b.jsxs)("div",{className:r.caption,children:[t.img?Object(b.jsx)("img",{src:t.img,alt:t.caption}):null,t.caption]})},t.key)}))},e.handleClick=function(){e.setState({openMenu:!0})},e.closeMenu=function(){e.setState({openMenu:!1}),e.props.onClose()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.buttonIcon,i=t.buttonCaption,r=t.tooltip,a=t.open,s=t.onClose,o=t.showBottomArrow,l=t.classes,d=this.state.openMenu;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("button",{className:"menu-button",onClick:this.handleClick,title:r,children:[n&&Object(b.jsx)("img",{src:n,alt:i}),i,o?Object(b.jsx)("div",{className:"bottomArrow"}):null]}),Object(b.jsx)(p.a,{onOutsideClick:function(){e.closeMenu()},children:d?Object(b.jsx)(c.a,{className:l.rootMenu,children:Object(b.jsx)(u.a,{open:a,onClose:s,children:this.renderMenuItems()})}):Object(b.jsx)("div",{})})]})}}]),n}(o.Component);v.defaultProps={open:!1,enabled:!0},t.a=Object(d.a)((function(e){return{rootMenu:{overflow:"visible",backgroundColor:"#f3f3f3",position:"absolute","& ul":{padding:0}},menuItem:{cursor:"pointer",display:"flex",justifyContent:"space-between",overflow:"visible",position:"relative",borderBottom:"0.1rem #cccccc solid","& a":{color:e.palette.common.black}},caption:{alignItems:"center",display:"flex",fontSize:"1.4rem","& img":{marginRight:"0.5rem",maxWidth:"24px"}}}}))(v)},123:function(e,t,n){"use strict";var i=n(314);var r={authEndpoint:function(e){var t=e?Object(i.parse)(e):window.location,n=t.protocol.replace("ws","http");return"".concat(n,"//").concat(t.host)}(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WEBSOCKET_SERVER_URL),websocketServerUrl:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WEBSOCKET_SERVER_URL||function(){var e=window.location,t=e.host,n=e.protocol;return"".concat("https:"===n?"wss:":"ws:","//").concat(t)}(),enableAutoSave:!1};t.a=r},144:function(e,t,n){"use strict";t.a=n.p+"static/media/close.f005b782.svg"},145:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.1114cb53.svg"},146:function(e,t,n){"use strict";var i=n(8),r=n(9),a=n(14),s=n(13),o=n(0),c=n(17),u=n(93),l=(n(860),n(53)),d=n(154),p=n(1),b=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.onClose,i=t.open,r=t.focusedViewType;switch(t.locale){case"en":e="/help/en/SVOWebApp_WebHelp.htm#cshid=".concat(d.a[r]);break;case"de":e="/help/de/SVOWebApp_WebHelp.htm#cshid=".concat(d.a[r]);break;default:e="/help/en/SVOWebApp_WebHelp.htm#cshid=".concat(d.a[r])}return Object(p.jsx)(l.a,{isFullscreen:!0,title:Object(p.jsx)(u.a,{id:"helpView"}),onClose:n,open:i,children:Object(p.jsx)("iframe",{className:"help-frame",title:"help",style:{width:"100%",height:"97%"},src:e})})}}]),n}(o.Component);b.defaultProps={open:!1,locale:"en"};t.a=Object(c.c)((function(e){return{focusedViewType:e.app.focusedViewType,locale:e.app.locale}}))(b)},152:function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(93),s=(n(737),n(1)),o=function(e){var t=e.type,n=e.intlId;return r.a.createElement(t,{className:"heading"},Object(s.jsx)(a.a,{id:"".concat(n)||"none"}))};o.defaultProps={intlId:"none"},t.a=o},154:function(e,t,n){"use strict";var i=n(31),r={PARAMETER_VIEW:i.f,LIST_VIEW:i.e,IMAGE_VIEW:i.d,PERMISSIONS:"PERMISSIONS",DEBUGGER:"DEBUGGER"};t.a=r},173:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return f}));var i=n(6),r=n.n(i),a=n(20),s=n(238),o=n.n(s),c=n(441),u=n.n(c),l=n(442),d=n(123),p=n(7),b=function(){var e=Object(a.a)(r.a.mark((function e(t,n){var i,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(d.a.authEndpoint,"/login"),e.next=3,o.a.post(i,{username:t,password:n});case 3:return a=e.sent,s=a.data.accessToken,e.next=7,v(s);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,i,a,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(d.a.authEndpoint,"/auth"),e.next=3,o.a.post(n,{accessToken:t});case 3:return i=e.sent,a=i.data.authToken,s=Object(l.a)(a),c=u()(s,["email","fullname","username"]),e.abrupt("return",{authToken:a,user:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(a.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.a.removeProxy(),!e){t.next=11;break}return n="".concat(d.a.authEndpoint,"/logout"),t.prev=3,t.next=6,o.a.post(n,{});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),p.a.warn({err:t.t0},"Error while calling /logout");case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))}},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(7),r=function(e,t){if(e){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}else i.a.info("forceDownload expects data but did not receive")}},177:function(e,t,n){"use strict";t.a=n.p+"static/media/play.f6ca6855.svg"},178:function(e,t,n){"use strict";t.a=n.p+"static/media/pause.ea3fe966.svg"},179:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i=n(92),r=n(8),a=n(9),s=n(3),o=n(6),c=n.n(o),u=n(20),l=n(231),d=n.n(l),p=n(7),b=n(57),v=n(10),f=n(66),h=n(232),m=function(e){if(!e)return"";var t=e.lastIndexOf("\\");-1!==t&&(e=e.substr(t+1));var n=e.lastIndexOf(".");return-1!==n&&(e=e.substr(0,n)),e},g=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.SvPb.GetConfigurationInfoRequest.create(),e.next=3,t.request(n);case 3:return i=e.sent,r=i.fileName,e.abrupt("return",m(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,i=v.a.SvPb.QueryMonitorListNamesRequest.create({}),e.next=5,t.request(i);case 5:r=e.sent,a=r&&r.names&&r.names.item&&r.names.item.strVal,n=(a||"").split(";"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p.a.error("Error while fetching monitor list names:",e.t0);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=v.a.SvPb.GetInspectionsRequest.create({}),e.next=4,t.request(n);case 4:return i=e.sent,e.abrupt("return",(i.inspections||[]).map((function(e){return{id:e.id,name:e.name}})));case 8:return e.prev=8,e.t0=e.catch(0),p.a.error("Error while fetching inspection name list:",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return(e||[]).map((function(e){return e.id}))},y=function(e){return(e||[]).map((function(e){return e.name}))},S=function(){var e=Object(u.a)(c.a.mark((function e(t,n,i){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,a=c.a.mark((function e(a){var s,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],o=[],e.prev=2,u=v.a.SvPb.QueryListItemRequest.create({listName:n[a],queryValues:!0,queryImages:!0,type:v.a.SvPb.ListType.all}),e.next=6,t.request(u);case 6:l=e.sent,s=l.imageDefList.map((function(e){return e.name})),o=l.valueDefList.map((function(e){return e.name})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),p.a.error("Error while fetching list item:",e.t0);case 14:i.forEach((function(e){var t=s.filter((function(t){return-1!==t.indexOf(e.name)})),i=o.filter((function(t){return-1!==t.indexOf(e.name)}));(t.length>0||i.length>0)&&r.set(e.id,{listName:n[a],images:t,values:i})}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})),s=0;case 3:if(!(s<n.length)){e.next=8;break}return e.delegateYield(a(s),"t0",5);case 5:++s,e.next=3;break;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),k=function e(t){var n=t.name,i=t.type,r=t.location,a=t.objectIDIndex,s=t.children,o=t.selected,c=(s||[]).map(e);return{id:a&&function(e){if(e.startsWith("{#")){var t=e.indexOf("}");if(!(t<0))return e=e.substr(2,t),parseInt(e,10)}}(a)||null,name:n,type:i,location:r,selected:o,children:c}},x=function(){var e=Object(u.a)(c.a.mark((function e(t,n,i){var r,a,s,o,u,l,d,b,f,h,m,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[v.a.SvPb.SearchArea.toolsetItems],inspectionID:n,instanceID:0,attribute:v.a.SvPb.ObjectAttributes.viewable,wholeArray:!0,type:v.a.SvPb.ObjectSelectorType.allValueObjects,attributesAllowed:1}),e.next=3,t.request(r);case 3:if((a=e.sent).tree){e.next=7;break}return p.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 7:for(s=k(a.tree),o=new Map,u=s&&s.children&&s.children.slice(0)||[];u.length>0;)if(l=u.shift(),d=l.id,b=l.name,f=l.type,h=l.location,m=l.children,d&&o.set(d,{id:d,name:b,type:f,location:h,fullLocation:"Inspections."+i+"."+h}),m&&m.length)for(g=0;g<m.length;++g)u.push(m[g]);return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(c.a.mark((function e(t,n,i){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[v.a.SvPb.SearchArea.toolsetItems],inspectionID:n,instanceID:0,attribute:v.a.SvPb.ObjectAttributes.viewable,wholeArray:!0,type:v.a.SvPb.ObjectSelectorType.allValueObjects,attributesAllowed:1}),e.prev=1,e.next=4,t.request(r);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),p.a.error(e.t0),e.abrupt("return",null);case 11:if(a.tree){e.next=14;break}return p.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 14:return s=k(a.tree),e.abrupt("return",{tree:s});case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,i){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(c.a.mark((function e(t,n,i){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[v.a.SvPb.SearchArea.toolsetItems],inspectionID:n,type:v.a.SvPb.ObjectSelectorType.allImageObjects,attribute:v.a.SvPb.ObjectAttributes.archivableImage,attributesAllowed:1}),e.prev=1,e.next=4,t.request(r);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),p.a.error(e.t0),e.abrupt("return",null);case 11:if(a.tree){e.next=14;break}return p.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 14:return s=k(a.tree),e.abrupt("return",{tree:s});case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,i){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.create(),e.next=3,t.request(i);case 3:if((r=e.sent).version){e.next=7;break}return p.a.error("Error while reading version via ".concat(n.name)),e.abrupt("return","Unknown Version");case 7:return e.abrupt("return",r.version);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,v.a.SvPb.GetSVObserverVersionRequest);case 2:return n=e.sent,e.next=5,C(t,v.a.SvPb.GetGatewayVersionRequest);case 5:return i=e.sent,e.next=8,C(t,v.a.SvPb.GetWebAppVersionRequest);case 8:return r=e.sent,e.abrupt("return",{svObserverVersion:n,gatewayVersion:i,webAppVersion:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(c.a.mark((function e(t,n,i,r){var a,s,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Map,s=0;case 2:if(!(s<n.length)){e.next=12;break}return o=n[s],u=i[s],e.next=7,r(t,o,u);case 7:(l=e.sent)&&a.set(o,l);case 9:++s,e.next=2;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.SvPb.GetConfigurationTreeRequest.create(),e.next=3,t.request(n);case 3:if((i=e.sent)&&i.tree){e.next=7;break}return p.a.error("Cannot get config tree"),e.abrupt("return",!1);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,E(t);case 3:if(i=e.sent,Object(f.a)((function(){return i.tree.children}))){e.next=7;break}return p.a.error("configTree is not valid"),e.abrupt("return",n);case 7:return i.tree.children.forEach((function(e){var t=e.objectID;t?n.set(t,Object(s.a)({},e)):p.a.error("Inspection without valid id: ".concat(t))})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){function e(t){Object(r.a)(this,e),this.filterArrayValuesFromTree=function(e){var t,n,i=[];for(i.push(e);i.length>0;)if(!(t=i.pop()).id&&t.children&&t.children.length){var r="";for(n=0;n<t.children.length;n+=1){if(r===t.children[n].id){t.children=[],t.id=r;break}t.children[n].id&&(r=t.children[n].id)}for(n=0;n<t.children.length;n+=1)i.push(t.children[n])}return e},Object.assign(this,t)}return Object(a.a)(e,[{key:"getSvObserverVersion",value:function(){return this.versions&&this.versions.svObserverVersion}},{key:"getGatewayVersion",value:function(){return this.versions&&this.versions.gatewayVersion}},{key:"getWebAppVersion",value:function(){return this.versions&&this.versions.webAppVersion}},{key:"getInspections",value:function(){return this.inspections}},{key:"getInspectionName",value:function(e){var t=(this.inspections||[]).find((function(t){return t.id===e}));return t&&t.name}},{key:"getValueNameForId",value:function(e,t){"string"===typeof e&&(e=parseInt(e,10));var n=this.idNameMappings.get(e);if(n){"string"===typeof t&&(t=parseInt(t,10));var i=n.get(t);if(i)return i.fullLocation}return null}},{key:"getListNameForInspection",value:function(e){var t=this.inspectionMappings.get(e);return t&&t.listName}},{key:"getValueNamesForInspection",value:function(e){var t=this.inspectionMappings.get(e);return t&&t.values}},{key:"getImageNamesForInspection",value:function(e){var t=this.inspectionMappings.get(e);return t&&t.images}},{key:"getAllListNames",value:function(){var e,t=[],n=Object(i.a)(this.inspectionMappings.values());try{for(n.s();!(e=n.n()).done;){var r=e.value.listName;-1===t.indexOf(r)&&t.push(r)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"getObjectSelectorItemsForInspection",value:function(e){return this.objectSelectorItems.get(e)}},{key:"getObjectSelectorImagesForInspection",value:function(e){return this.objectSelectorImages.get(e)}},{key:"getConfigTreeByInspectionId",value:function(e){if(e)return this.inspectionToolsetMappings.get(e);p.a.warn("getConfigTreeByInspection did not receive inspection id")}}],[{key:"discover",value:function(){var t=Object(u.a)(c.a.mark((function t(n){var i,r,a,s,o,u,l,d,b,v,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&n.isConnected()){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,g(n);case 5:return i=t.sent,t.next=8,N(n);case 8:return r=t.sent,t.next=11,j(n);case 11:return a=t.sent,t.next=14,O(n);case 14:return s=t.sent,o=w(s),u=y(s),t.next=19,S(n,a,s);case 19:return l=t.sent,t.next=22,T(n,o,u,x);case 22:return d=t.sent,t.next=25,T(n,o,u,I);case 25:return b=t.sent,t.next=28,T(n,o,u,V);case 28:return v=t.sent,t.next=31,P(n);case 31:return f=t.sent,t.abrupt("return",new e({name:i,listNames:a,inspections:s,inspectionIds:o,inspectionMappings:l,idNameMappings:d,objectSelectorItems:b,objectSelectorImages:v,versions:r,inspectionToolsetMappings:f}));case 35:return t.prev=35,t.t0=t.catch(2),p.a.error({err:t.t0},"Error loading configuration"),t.abrupt("return",null);case 39:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e){return t.apply(this,arguments)}}()},{key:"loadFromCache",value:function(){var t=Object(u.a)(c.a.mark((function t(n){var i,r,a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&n.isConnected()){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,"",r=localStorage.getItem(b.a),a=r.split(","),i=a.map((function(e){return localStorage.getItem(e)})).join(),o=d.a.decompress(i),u=JSON.parse(o,h.b),t.abrupt("return",new e(Object(s.a)({},u)));case 12:return t.prev=12,t.t0=t.catch(2),p.a.error({err:t.t0},"Error loading configuration"),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"extractConfigNameFromFileName",value:function(e){return m(e)}}]),e}()},18:function(e,t,n){"use strict";n.d(t,"G",(function(){return s})),n.d(t,"F",(function(){return u})),n.d(t,"H",(function(){return d})),n.d(t,"E",(function(){return v})),n.d(t,"y",(function(){return f})),n.d(t,"D",(function(){return h})),n.d(t,"t",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"v",(function(){return O})),n.d(t,"m",(function(){return w})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"x",(function(){return k})),n.d(t,"o",(function(){return x})),n.d(t,"h",(function(){return I})),n.d(t,"a",(function(){return V})),n.d(t,"u",(function(){return C})),n.d(t,"l",(function(){return N})),n.d(t,"f",(function(){return T})),n.d(t,"d",(function(){return E})),n.d(t,"z",(function(){return P})),n.d(t,"p",(function(){return A})),n.d(t,"i",(function(){return M})),n.d(t,"e",(function(){return D})),n.d(t,"B",(function(){return R})),n.d(t,"r",(function(){return L})),n.d(t,"j",(function(){return _})),n.d(t,"A",(function(){return F})),n.d(t,"q",(function(){return U})),n.d(t,"w",(function(){return W})),n.d(t,"n",(function(){return H})),n.d(t,"C",(function(){return q})),n.d(t,"s",(function(){return z}));var i=n(19),r=n(3),a=n(10),s=function(e){var t=new Set;return o(e,t,""),t},o=function e(t,n,i){for(var r in t.nested){var s=t.nested[r],o=r.toLowerCase(),u=i?"".concat(i,".").concat(o):o;if(!s.nested&&s.fields)if("webapp.view"===u)for(var l=a.a.SvPb.lookup("ViewType"),d=0;d<Object.keys(l.values).length;d++){var b="".concat(u,"[type=").concat(p(d),"]");c(n,b,s.fields)}else c(n,u,s.fields);else e(s,n,u)}},c=function(e,t,n){Object.keys(n).forEach((function(i){var r=n[i];if("bool"===r.type){var a=r.name.toLowerCase();e.add("".concat(t,".").concat(a))}}))},u=function e(t,n,i){for(var r in t){var a=t[r];if(-1===r.indexOf("$")){var s=i?"".concat(i,".").concat(r):r;if(Array.isArray(a)){if("webapp.view"===s)for(var o=0;o<a.length;++o){var c=a[o];e(c,n,"".concat(s,"[type=").concat(p(c.type),"]"))}}else"object"===typeof a?e(a,n,s):"boolean"===typeof a&&a&&n.add(s)}}},l=function e(t,n,a){var s=t.shift();if(t.length>0)if(s.startsWith("view[")){var o=b(s.substring(s.indexOf("[type=")+6,s.indexOf("]")));n.view||(n.view=[]);var c=n.view.findIndex((function(e){return e.type===o}));-1!==c?n.view[c]=Object(r.a)(Object(r.a)({},n.view[c]),{},Object(i.a)({},t[0],!0)):n.view.push(Object(i.a)({type:o},t[0],!0))}else Object(n[s])!==n[s]&&(n[s]={}),e(t,n[s],a);else n[s]=!0},d=function(e){var t=[];return e.forEach((function(e,n){var i={};e.groupPermissions.forEach((function(e){l(e.split("."),i,i[e])})),t.push({name:n,permissions:i})})),t},p=function(e){switch(e){case 0:return"AnyView";case 1:return"ImageView";case 2:return"ListView";case 3:return"ImageStripView";case 4:return"ParameterView";case 5:return"ToolSetView";default:return""}},b=function(e){switch(e){case"AnyView":return 0;case"ImageView":return 1;case"ListView":return 2;case"ImageStripView":return 3;case"ParameterView":return 4;case"ToolSetView":return 5;default:return 0}},v=function(e){return!!e&&e.has("webapp.configuration.save")},f=function(e){return!!e&&e.has("webapp.logs.read")},h=function(e){return!!e&&e.has("webapp.viewset.read")},m=function(e){return!!e&&e.has("webapp.viewset.edit")},g=function(e){return!!e&&e.has("webapp.viewset.remove")},j=function(e){return!!e&&(e.has("webapp.view[type=ImageView].add")||e.has("webapp.view[type=AnyView].add"))},O=function(e){return!!e&&(e.has("webapp.view[type=ImageView].read")||e.has("webapp.view[type=AnyView].read"))},w=function(e){return!!e&&(e.has("webapp.view[type=ImageView].edit")||e.has("webapp.view[type=AnyView].edit"))},y=function(e){return!!e&&(e.has("webapp.view[type=ImageView].remove")||e.has("webapp.view[type=AnyView].remove"))},S=function(e){return!!e&&(e.has("webapp.view[type=ListView].add")||e.has("webapp.view[type=AnyView].add"))},k=function(e){return!!e&&(e.has("webapp.view[type=ListView].read")||e.has("webapp.view[type=AnyView].read"))},x=function(e){return!!e&&(e.has("webapp.view[type=ListView].edit")||e.has("webapp.view[type=AnyView].edit"))},I=function(e){return!!e&&(e.has("webapp.view[type=ListView].remove")||e.has("webapp.view[type=AnyView].remove"))},V=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].add")||e.has("webapp.view[type=AnyView].add"))},C=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].read")||e.has("webapp.view[type=AnyView].read"))},N=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].edit")||e.has("webapp.view[type=AnyView].edit"))},T=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].remove")||e.has("webapp.view[type=AnyView].remove"))},E=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].add")||e.has("webapp.view[type=AnyView].add"))},P=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].read")||e.has("webapp.view[type=AnyView].read"))},A=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].edit")||e.has("webapp.view[type=AnyView].edit"))},M=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].remove")||e.has("webapp.view[type=AnyView].remove"))},D=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].add")||e.has("webapp.view[type=AnyView].add"))},R=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].read")||e.has("webapp.view[type=AnyView].read"))},L=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].edit")||e.has("webapp.view[type=AnyView].edit"))},_=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].remove")||e.has("webapp.view[type=AnyView].remove"))},F=function(e){return!!e&&e.has("svobserver.mode.read")},U=function(e){return!!e&&e.has("svobserver.mode.edit")},W=function(e){return!!e&&e.has("svobserver.inspectionstate.read")},H=function(e){return!!e&&e.has("svobserver.inspectionstate.edit")},q=function(e){return!!e&&e.has("usermanagement.userpermissions.read")},z=function(e){return!!e&&e.has("usermanagement.userpermissions.edit")}},225:function(e,t,n){"use strict";t.a=n.p+"static/media/show.6ac709c0.svg"},226:function(e,t,n){"use strict";t.a=n.p+"static/media/info.6a606506.svg"},227:function(e,t,n){"use strict";t.a=n.p+"static/media/help.64b70362.svg"},228:function(e,t,n){"use strict";t.a=n.p+"static/media/save.a6a0528c.svg"},229:function(e,t,n){"use strict";t.a=n.p+"static/media/plus.72585b6a.svg"},230:function(e,t,n){"use strict";var i=n(19),r=n(8),a=n(9),s=n(14),o=n(13),c=n(0),u=n(901),l=n(906),d=n(904),p=n(905),b=n(21),v=n(1),f=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={labelWidth:0},e.renderOptions=function(e,t,n){return n=n||e,e.map((function(e,i){return Object(v.jsx)("option",{value:e,children:n[i]},t+i)}))},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({labelWidth:this.InputLabelRef.offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props,n=t.values,r=t.labels,a=t.selectedValue,s=t.name,o=t.id,c=t.classes,b=t.disabled;return Object(v.jsxs)(u.a,{variant:"outlined",style:{width:"100%"},disabled:b,children:[Object(v.jsx)(l.a,{htmlFor:o,ref:function(t){e.InputLabelRef=t},classes:{outlined:c.label},children:s}),Object(v.jsx)(d.a,{native:!0,value:a||"",onChange:function(t){return e.props.onSelectionChanged(Object(i.a)({},o,t.target.value))},classes:{root:c.input},input:Object(v.jsx)(p.a,{name:s,labelWidth:this.state.labelWidth,id:o,classes:{input:c.select}}),children:!b&&this.renderOptions(n,o,r)})]})}}]),n}(c.Component);f.defaultProps={values:[],selectedValue:"",name:"",id:""},t.a=Object(b.a)((function(){return{input:{height:37,fontSize:"1.4rem"},select:{paddingTop:0,paddingBottom:0,fontSize:"1.4rem"},label:{transform:"translate(14px, 11px) scale(1)",fontSize:"1.4rem"}}}))(f)},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(44);function r(e,t){var n=this[e];return n instanceof Map?{dataType:"Map",value:Object(i.a)(n)}:t}function a(e,t){return"object"===typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(6),r=n.n(i),a=n(20),s=n(8),o=n(9),c=function(){function e(t){var n=t.history,i=t.trigger,r=t.isReject;Object(s.a)(this,e),this.history=n,this.trigger=i,this.isReject=r,this.useCount=0,this.images=new Map,this.values=new Map}return Object(o.a)(e,[{key:"getImage",value:function(e){return this.checkNotReleasedYet(),this.images.get(e)}},{key:"getImages",value:function(e){var t=this;return this.checkNotReleasedYet(),(e||[]).map((function(e){return t.images.get(e)}))}},{key:"getValue",value:function(e){return this.checkNotReleasedYet(),this.values.get(e)}},{key:"getValuesAsString",value:function(e){var t=this;return this.checkNotReleasedYet(),(e||[]).map((function(e){var n=t.values.has(e)&&t.values.get(e).value;return void 0===n&&(n="<UNAVAILABLE>"),{id:e,value:n.toString()}}))}},{key:"buildUrl",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,i=atob(e),r=[],a=0;a<i.length;a+=n){for(var s=i.slice(a,a+n),o=new Array(s.length),c=0;c<s.length;c++)o[c]=s.charCodeAt(c);var u=new Uint8Array(o);r.push(u)}var l=new Blob(r,{type:t});return URL.createObjectURL(l)}},{key:"addData",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,i,a,s=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.images,i=t.values,this.checkNotReleasedYet(),a=[],n.forEach((function(e){var t=e.id,n=e.image,i=e.overlays;!s.images.has(t)&&n&&n.rgbData&&a.push(s.initImage(t,n,i))})),i.forEach((function(e){var t=e.id,n=e.value;if(!s.values.has(t)&&n){var i=s.getValueFromVariant(n);s.values.set(t,{id:t,value:i})}})),e.next=7,Promise.all(a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initImage",value:function(){var e=Object(a.a)(r.a.mark((function e(t,n,i){var a,s,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildImage(n);case 2:return a=e.sent,s=a.domImage,o=a.url,e.next=7,this.initOverlayImages(i);case 7:c=e.sent,this.images.set(t,{id:t,image:n,domImage:s,overlays:i,overlayImages:c,url:o});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"buildImage",value:function(e){var t=e.rgbData,n=e.type;return new Promise((function(e,i){var r=new Uint8Array(t),a=new Blob([r],{type:n||"image/bmp"}),s=self.URL||self.webkitURL||self,o=s.createObjectURL(a),c=new Image;c.onload=function(){e({domImage:c,url:o})},c.onerror=function(e){s.revokeObjectURL(o),i(e)},c.src=o}))}},{key:"initOverlayImages",value:function(e){var t=this,n=[];return(e&&e.overlays||[]).forEach((function(e){(e.shapeGroups||[]).forEach((function(e){(e.shapes||[]).forEach((function(e){e&&e.image&&e.image.image&&e.image.image.rgbData&&n.push(t.buildImage(e.image.image).then((function(t){var n=t.domImage,i=t.url;return e.image.domImage=n,e.image.url=i,e.image})))}))}))})),Promise.all(n)}},{key:"getValueFromVariant",value:function(e){if(e)return e[e.data]}},{key:"lock",value:function(){this.useCount++}},{key:"release",value:function(){var e;null===(e=this.history)||void 0===e||e.releaseProduct(this.trigger)}},{key:"releaseImpl",value:function(){if(this.useCount<=0)throw new Error("Invalid use count ".concat(this.useCount," in Product::release()"));return this.useCount--,!(this.useCount>0)&&(this.releaseImages(),this.images.clear(),this.values.clear(),this.history=null,this.released=!0,!0)}},{key:"releaseImages",value:function(){var e=this;this.images.forEach((function(t){e.releaseImage(t),t.overlayImages.forEach((function(t){e.releaseImage(t)}))}))}},{key:"releaseImage",value:function(e){(e.domImage&&(e.domImage.onload=void 0,e.domImage.onerror=void 0,e.domImage.remove(),e.domImage=null),e.url)&&(self.URL||self.webkitURL||self).revokeObjectURL(e.url)}},{key:"checkNotReleasedYet",value:function(){if(this.released)throw new Error("Can not use Product after releasing it!")}}]),e}()},235:function(e,t,n){"use strict";var i=n(8),r=n(9),a=n(14),s=n(13),o=n(0),c=n(1),u=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onClickOutside=function(t){e.wrappedNode&&e.wrappedNode.contains(t.target)||e.props.onOutsideClick(t)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.onClickOutside,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.onClickOutside,!0)}},{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{className:"outside-click-handler-wrapper",ref:function(t){e.wrappedNode=t},children:this.props.children})}}]),n}(o.Component);t.a=u},236:function(e,t,n){"use strict";n(0),n(865);var i=n(1);t.a=function(e){var t=e.src,n=e.title;return Object(i.jsx)("div",{className:"logo-wrapper",children:Object(i.jsx)("img",{src:t,alt:n})})}},237:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.a5b69c2a.svg"},240:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var i=n(37),r=n(10),a=function(e){switch(e){case r.a.SvPb.DeviceModeType.available:return i.a.unknownMode.id;case r.a.SvPb.DeviceModeType.runMode:return i.a.runMode.id;case r.a.SvPb.DeviceModeType.stopMode:return i.a.stopMode.id;case r.a.SvPb.DeviceModeType.regressionMode:return i.a.regressionMode.id;case r.a.SvPb.DeviceModeType.testMode:return i.a.testMode.id;case r.a.SvPb.DeviceModeType.editMode:return i.a.editMode.id;case r.a.SvPb.DeviceModeType.modeChanging:return i.a.unknownMode.id;default:throw new Error("Unsupported device mode ".concat(e))}},s=function(e){switch(e){case i.a.unknownMode.id:return r.a.SvPb.DeviceModeType.available;case i.a.runMode.id:return r.a.SvPb.DeviceModeType.runMode;case i.a.stopMode.id:return r.a.SvPb.DeviceModeType.stopMode;case i.a.regressionMode.id:return r.a.SvPb.DeviceModeType.regressionMode;case i.a.testMode.id:return r.a.SvPb.DeviceModeType.testMode;case i.a.editMode.id:return r.a.SvPb.DeviceModeType.editMode;default:throw new Error("Unsupported mode ".concat(e))}},o=function(e){switch(e){case"trace":return r.a.SvPb.LogSeverity.trace;case"debug":return r.a.SvPb.LogSeverity.debug;case"info":return r.a.SvPb.LogSeverity.info;case"warn":return r.a.SvPb.LogSeverity.warning;case"error":default:return r.a.SvPb.LogSeverity.error}}},31:function(e,t,n){"use strict";n.d(t,"g",(function(){return zt})),n.d(t,"d",(function(){return Bt})),n.d(t,"f",(function(){return Gt})),n.d(t,"e",(function(){return Kt})),n.d(t,"c",(function(){return Yt})),n.d(t,"a",(function(){return Jt})),n.d(t,"b",(function(){return Zt})),n.d(t,"h",(function(){return Qt}));var i=n(8),r=n(19),a=n(3),s=n(0),o=n.n(s),c=n(38),u=n.n(c),l=n(26),d=n(9),p=n(14),b=n(13),v=n(17),f=n(148),h=n(71),m=(n(385),n.p+"static/media/overlay-list.d218d7a4.svg"),g=n(43),j=n(49),O=n(2),w=n.n(O),y=(w.a.shape({}),n(242)),S=n(955),k=n(21),x=n(451),I=n.n(x),V=n(66),C=(n(729),n(1)),N=100,T=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={expandedKeys:[Object(V.a)((function(){return e.props.data.children[0].location}))],expandedFilteredKeys:[],checkedKeys:[],filteredCheckedKeys:[],inputValue:"",filteredLocations:[],filteredTree:void 0,countedVisibleValues:0,countedPossibleValues:0,selectionLimitReached:!1,halfChecked:[]},e.setSelection=function(){var t=e.props.selection;e.setState({checkedKeys:t})},e.setExpandedKeys=function(){var t=e.props.expandedKeys;t&&e.setState({expandedKeys:t})},e.onExpand=function(t){e.state.inputValue?e.setState({expandedFilteredKeys:t}):(e.props.onExpand(t),e.setState({expandedKeys:t}))},e.onCheck=function(t,n){var i=e.limitCheckedKeys(t,N),r=(i=e.checkUnselectingAll(i,n.node)).slice();e.state.inputValue&&(i=e.updateCheckedKeys(i)),i=e.ensureSingleSelection(i),e.setChangedIds(i,n),e.setState({checkedKeys:i,filteredCheckedKeys:r,selectionLimitReached:i.length===N})},e.limitCheckedKeys=function(t,n){var i=[];(!n||n>t.length)&&(n=t.length);for(var r=[],a=Math.abs(n),s=0;0!==a&&s<t.length;)parseInt(t[s],10)?(r.push(t[s]),a--):i.push(t[s]),s++;return e.setState({halfChecked:i}),r},e.checkUnselectingAll=function(t,n){var i=e.state.halfChecked.slice();return n.halfChecked&&(i.includes(n.title)?(e.setState({halfChecked:[]}),t=[]):(i.push(n.title),e.setState({halfChecked:i}))),t},e.updateCheckedKeys=function(t){var n=t.filter((function(t){return!e.state.filteredCheckedKeys.includes(t)})),i=e.state.filteredCheckedKeys.filter((function(e){return!t.includes(e)}));return t=(t=I()(n,e.state.checkedKeys)).filter((function(e){return!i.includes(e)}))},e.ensureSingleSelection=function(t){return e.props.singleSelect?[t[t.length-1]]||!1:t},e.setChangedIds=function(t,n){var i=(t||[]).filter((function(e){return parseInt(e,10)>0}));if(e.props.singleSelect){var r=e.getSelectedLocation(n);e.props.onChange(i[i.length-1]||0,r)}else e.props.onChange(i)},e.onChangeFilter=function(t){var n=e.props.data,i=void 0,r=t.target.value||"",a=(e.cutFilterIgnoreWords(r.toLowerCase())||"").split(""),s={abortRecursion:!1,expandedFilteredKeys:[],filteredLocations:[],filteredKeys:[],countSelection:0},o={countMatches:0};if(a.length){var c=a.slice(),u=[];e.filterNodesRecursively(n,a,u,s),e.countMatchingNodesRecursively(n,c,o),i=u.length>0?u[0]:{children:[]}}var l=e.state.checkedKeys.filter((function(e){return s.filteredKeys.includes(e)}));e.setState({filteredLocations:s.filteredLocations,filteredTree:i,filteredCheckedKeys:l,expandedFilteredKeys:s.expandedFilteredKeys,inputValue:r,countedVisibleValues:s.countSelection,countedPossibleValues:o.countMatches})},e.cutFilterIgnoreWords=function(t){var n=e.props.filterIgnore;return n&&n.forEach((function(e){e=e.toLowerCase(),t.startsWith(e)&&(t=t.replace(e,"")).startsWith(".")&&(t=t.slice(1))})),t},e.filterNodesRecursively=function(t,n,i,r){if(!t)return!1;var a=[],s=[];n.length>0&&(s=e.consumeChars(t.name,n,a)),0===s.length&&(r.filteredLocations.push(t.location),t.id&&0===t.children.length&&r.filteredKeys.push(t.id)),r.filteredKeys.length>=100&&(r.abortRecursion=!0);var o=[],c=!1;t.children&&!r.abortRecursion&&t.children.forEach((function(t){!r.abortRecursion&&e.filterNodesRecursively(t,s,o,r)&&(c=!0)})),c&&r.expandedFilteredKeys.push(t.location);var u=0===s.length||c;if(u){0===t.children.length&&r.countSelection++;var l=e.createFilteredShadowNode(t,a,o);i.push(l)}return u},e.countMatchingNodesRecursively=function(t,n,i){if(!t)return!1;var r=[];n.length>0&&(r=e.consumeChars(t.name,n,[]));var a=!1;t.children&&t.children.forEach((function(t){e.countMatchingNodesRecursively(t,r,i)&&(a=!0)}));var s=0===r.length||a;return s&&0===t.children.length&&i.countMatches++,s},e.consumeChars=function(e,t,n){e=e.toLowerCase();for(var i=0;t.length;){if("."===t[0]){t=t.slice(1);break}var r=e.indexOf(t[0],i);if(-1===r)break;n.push(r),t=t.slice(1),i=r+1}return t},e.createFilteredShadowNode=function(t,n,i){var r=e.highlightAtPositions(t.name,n);return Object(a.a)(Object(a.a)({},t),{},{children:i,styledText:r})},e.highlightAtPositions=function(e,t){for(var n=[],i=0;i<e.length;i++)t.includes(i)?n.push([Object(C.jsx)("span",{className:"filteredText",children:e.charAt(i)},"strong".concat(u.a.generate()))]):n.push([e.charAt(i)]);return[Object(C.jsx)("div",{children:n},"div".concat(u.a.generate()))]},e.createTreeNodes=function(t,n){return t.children&&t.children.length>0?Object(C.jsx)(y.a,{title:t.styledText||t.name,disableCheckbox:e.props.singleSelect,children:t.children.map(n)},t.location):Object(C.jsx)(y.a,{title:t.styledText||t.name,location:t.location},t.id)},e.getSelectedLocation=function(e){return Object(V.a)((function(){return e.node.location}))?e.node.location:""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.setSelection(),this.setExpandedKeys()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selection,i=t.expandedKeys;n&&e.selection!==n&&n.length>0&&this.setSelection(),i&&e.expandedKeys!==i&&i.length>0&&this.setExpandedKeys()}},{key:"render",value:function(){var e=this,t=this.state,n=t.checkedKeys,i=t.expandedKeys,r=t.expandedFilteredKeys,a=t.filteredTree,s=t.filteredCheckedKeys,o=t.inputValue,c=t.countedVisibleValues,u=t.countedPossibleValues,l=t.selectionLimitReached,d=function t(n){if(n)return e.createTreeNodes(n,t)},p=o?"unfilteredText":"",b=o?r:i,v=o?a:this.props.data,f=o?s:n,h=v.name?d(v):v.children.map(d);return Object(C.jsxs)("div",{className:"object-selector",children:[Object(C.jsxs)("div",{className:"topmenu-wrapper",children:[Object(C.jsx)("div",{className:"w100 text",children:Object(C.jsxs)("div",{className:"infotext",children:[Object(C.jsx)("div",{className:"pr2",children:"Select objects:"}),l?Object(C.jsx)("div",{className:"warning pr2",children:"(Selection limit of ".concat(N," items reached)")}):void 0,o&&h.length>0?Object(C.jsx)("div",{className:"warning",children:"(".concat(c," of ").concat(u," matches are shown)")}):void 0]})}),Object(C.jsx)("div",{className:"w100",children:Object(C.jsx)(S.a,{label:"Filter",type:"text",variant:"outlined",style:{width:"100%"},onChange:this.onChangeFilter,value:this.state.inputValue,InputLabelProps:{classes:{root:this.props.classes.label}}})})]}),Object(C.jsx)("div",{children:h.length>0?Object(C.jsx)(y.b,{checkable:!0,showLine:!0,showIcon:!1,selectable:!1,onExpand:this.onExpand,expandedKeys:b,checkedKeys:f,onCheck:this.onCheck,className:p,children:h}):Object(C.jsx)("div",{className:"text",children:"No filter results"})})]})}}]),n}(o.a.Component);T.defaultProps={singleSelect:!1,onChange:function(){},onExpand:function(){},selection:[]};var E=Object(k.a)((function(){return{label:{fontSize:"1.4rem",transform:"translate(10px, 12px) scale(1)"}}}))(T),P=n(7),A=n(18),M=n(93),D=n(942),R=n(53),L=n(82),_=(n(732),Object(f.c)((function(e){var t=e.open,n=e.onClose,i=e.selectedAlias,r=e.intl;i.alias||(i.alias={});var o=Object(s.useRef)(Object(a.a)({},i.alias)),c=Object(s.useState)(i||{}),u=Object(l.a)(c,2),d=u[0],p=u[1];d.id!==i.id&&p(i);return Object(C.jsx)(R.a,{isInView:!0,isPopup:!0,title:r.messages["listView.AliasEditor.title"],onClose:function(){d.alias=o.current,n(d)},open:t,children:Object(C.jsxs)("div",{className:"alias-editor-wrapper",children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:[Object(C.jsx)(M.a,{id:"listView.AliasEditor.dottedName"}),":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(S.a,{id:"dottedNameLabel",fullWidth:!0,value:i.name,disabled:!0})})]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:[Object(C.jsx)(M.a,{id:"listView.AliasEditor.value"}),":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(S.a,{id:"valueLabel",fullWidth:!0,disabled:!0,value:i.value})})]}),function(){var e=[];return(L.b||[]).forEach((function(t){e.push(Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:["Alias ",t.name,":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(S.a,{id:"aliasLabel".concat(t.locale),fullWidth:!0,defaultValue:i.alias&&i.alias[t.locale],onChange:function(e){d.alias[t.locale]=e.target.value}})})]},"rowDiv".concat(t.locale).concat(i.id)))})),e}(),Object(C.jsx)("div",{className:"buttons",children:Object(C.jsx)(D.a,{variant:"contained",color:"primary",onClick:function(){return n(d,!0)},children:Object(C.jsx)(M.a,{id:"listView.AliasEditor.button"})})})]})})}))),F=n(44),U=n(471),W=n(109),H=n.p+"static/media/drag.a4b2fa8c.svg",q=(n(733),["key","index","children","draggable"]),z=Object(W.d)((function(e){return e.children})),B=Object(W.e)((function(e){return e.children})),G=Object(W.f)((function(e){return e.children})),K=function(e){var t=e.key,n=e.index,i=e.children,r=e.draggable,s=Object(U.a)(e,q);return r?Object(C.jsx)(B,{index:n,children:Object(C.jsxs)("div",Object(a.a)(Object(a.a)({},s),{},{children:[Object(C.jsx)(G,{children:Object(C.jsx)("div",{className:"draggable-table-handle",children:Object(C.jsx)("img",{src:H,alt:"Drag"})})}),i]}))},t):Object(C.jsx)("div",Object(a.a)(Object(a.a)({},s),{},{children:i}))},Y=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={data:e.props.data},e.table=o.a.createRef(),e.getContainer=function(){return e.table.current.getDOMNode().querySelector(".BaseTable__body")},e.getHelperContainer=function(){return e.table.current.getDOMNode().querySelector(".BaseTable__table")},e.rowProps=function(t){var n=Object(h.b)(e.props.rowProps);return Object(a.a)(Object(a.a)({},n),{},{draggable:e.props.draggable,tagName:K,index:t.rowIndex})},e.handleSortEnd=function(t){var n=t.oldIndex,i=t.newIndex;e.props.onSequenceChange(n,i);var r=Object(F.a)(e.state.data),a=r.splice(n,1),s=Object(l.a)(a,1)[0];r.splice(i,0,s),e.setState({data:r})},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=Object(F.a)(this.props.data);this.setState({data:t})}}},{key:"render",value:function(){return this.props.draggable?Object(C.jsx)(z,{useDragHandle:!0,getContainer:this.getContainer,helperContainer:this.getHelperContainer,onSortEnd:this.handleSortEnd,children:Object(C.jsx)(h.c,Object(a.a)(Object(a.a)({},this.props),{},{ref:this.table,data:this.state.data,rowProps:this.rowProps,className:"draggable"}))}):Object(C.jsx)(h.c,Object(a.a)(Object(a.a)({},this.props),{},{ref:this.table,data:this.state.data,rowProps:this.rowProps}))}}]),n}(o.a.PureComponent);Y.defaultProps={draggable:!0};var X=Y,J=n(51),Z=n(101),Q=n(225),$=n.p+"static/media/show-off.8787321d.svg",ee=n(5),te=(n(734),function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).setAliasColumnVisibility=function(e){r.props.updateListViewShowAliases(e),r.props.setSaveFlag(!0),r.setState({showAliases:e})},r.saveNewOrdner=function(e,t){var n=r.props.selection,i=n.splice(e,1),a=Object(l.a)(i,1)[0];n.splice(t,0,a),r.props.setViewData("selection",n),r.props.setSaveFlag(!0)},r.renderValueSelector=function(){var e=r.props,t=e.configuration,n=e.inspectionId,i=e.selection;if(t&&n){var a=t.getObjectSelectorItemsForInspection(n).tree;a=t.filterArrayValuesFromTree(a);var s=[],o=t.getInspectionName(n);return s.push("Inspections.".concat(o)),s.push("Inspections".concat(o)),s.push(o),Object(C.jsx)("div",{style:{width:"100%",overflow:"auto",height:"100%"},children:Object(C.jsx)(E,{data:a,onChange:function(e){r.props.setViewData("selection",e),r.props.setSaveFlag(!0)},onExpand:function(e){return r.setState({expandedKeys:e})},selection:i,expandedKeys:r.state.expandedKeys,filterIgnore:s})})}},r.renderList=function(){var e=r.props,t=e.intl,n=e.locale,i=e.myPermissions,s=r.state.showAliases,o=r.getListData(),c=[{key:s?"Alias/Name":"Name",dataKey:"name",title:s?"Alias/Name":"Name",width:0,flexGrow:2},{key:"Values",dataKey:"value",title:"Values",width:0,flexGrow:1}];Object(A.o)(i)&&c.push({key:"",dataKey:"editAlias",title:"",width:50});var u=o.map((function(e){return e.name=s&&e.alias&&e.alias[n]||e.name,Object(a.a)(Object(a.a)({},e),{},{editAlias:Object(C.jsx)(J.a,{tooltip:t.messages["listView.AliasEditor.title"],onClick:function(){return r.setState({selectedAlias:e,isAliasEditorOpen:!0})},iconUrl:Z.a},"editAlias")})}));return Object(C.jsxs)("div",{style:{height:"100%"},children:[Object(C.jsx)(h.a,{children:function(e){var t=e.width,n=e.height;return Object(C.jsx)(X,{columns:c,data:u,width:t,height:n,headerHeight:30,rowHeight:30,onSequenceChange:function(e,t){return r.saveNewOrdner(e,t)}})}}),r.renderAliasEditor()]})},r.renderAliasEditor=function(){var e=r.state,t=e.selectedAlias,n=e.listValues,i=e.isAliasEditorOpen,a=(n||[]).find((function(e){return e.id===t.id}));if(a&&i)return Object(C.jsx)(_,{onClose:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.closeAliasEditor(e,t)},open:r.state.isAliasEditorOpen,selectedAlias:a})},r.getListData=function(){var e=r.props.aliases,t=r.state.listValues;return e&&(t||[]).map((function(t){if(e.has(t.id)){var n=e.get(t.id);if(!n)return P.a.error("Could not load alias for objectId ".concat(t.id)),t;if(!n.alias)return P.a.info("There is no alias value stored for ".concat(n.dottedName,".")),t;t.alias=n.alias}return t})),t},r.closeAliasEditor=function(e,t){if(e){var n=r.props.aliases;Object.keys(e.alias).forEach((function(t){""===e.alias[t]&&delete e.alias[t]}));var i=0===Object.keys(e.alias).length;if(n.has(e.id)){var a=n.get(e.id);a.alias=e.alias,i?n.delete(e.id):n.set(e.id,a)}else i||n.set(e.id,{objectId:e.id,dottedName:e.name,alias:e.alias})}r.setState({isAliasEditorOpen:!1}),t&&r.props.setSaveFlag(!0)},r.state={listValues:[],expandedKeys:[],isAliasEditorOpen:!1,selectedAlias:{},showAliases:!1},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.unsubscribeFromProductStream(),!this.props.isSelectionMode&&this.props.selection.length>0&&this.subscribeToProductStream(),this.props.showAliasesInList&&this.setState({showAliases:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.unsubscribeFromProductStream(),!e.isSelectionMode&&e.selection.length>0&&this.subscribeToProductStream()}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromProductStream()}},{key:"subscribeToProductStream",value:function(){if(!this.productSub){var e=this.props,t={inspectionId:e.inspectionId,valueIds:e.selection,startAtTriggerCount:-1};this.productSub=this.props.proxy.subscribeToProductStream(t,this.onProduct.bind(this))}}},{key:"unsubscribeFromProductStream",value:function(){this.productSub&&(this.props.proxy.unsubscribeFromProductStream(this.productSub),this.productSub=null)}},{key:"onProduct",value:function(e){var t=e.product,n=this.createListValues(t);return this.setState({listValues:n}),Promise.resolve()}},{key:"createListValues",value:function(e){var t=this.props,n=t.configuration,i=t.inspectionId,r=t.selection;return e.getValuesAsString(r).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{name:n.getValueNameForId(i,e.id)})}))}},{key:"render",value:function(){var e=this.props,t=e.viewActions,n=e.isSelectionMode,i=e.myPermissions,r=Object(A.o)(i);return Object(A.x)(i)||r?Object(C.jsxs)("div",{className:"list-view-wrapper",children:[n&&r?this.renderValueSelector():this.renderList(),Object(C.jsx)(g.a,{isViewAction:!0,actions:t(this)})]}):Object(C.jsx)("div",{})}}]),n}(s.Component));te.defaultProps={viewActions:function(e){var t=[];return Object(A.o)(e.props.myPermissions)&&t.push({intlId:"listView.save",iconUrl:m,onClickHandler:function(){e.props.setViewData("isSelectionMode",!e.props.isSelectionMode),e.props.setSaveFlag(!0)}}),t.push({type:j.b,id:e.props.inspectionId,intlId:"listView.Actionbar.showAliases",iconUrl:Q.a,onClickHandler:function(){e.setAliasColumnVisibility(!0)},intlIdAlternative:"listView.Actionbar.hideAliases",iconUrlAlternative:$,onClickHandlerAlternative:function(){e.setAliasColumnVisibility(!1)},showAlternative:e.props.showAliasesInList}),t},currentMode:void 0,proxy:void 0,isSelectionMode:!0,inspections:{},selection:[]};var ne={selection:[],isSelectionMode:!0},ie={},re=Object(f.c)(Object(v.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{proxy:e.app.proxy,configuration:e.app.configuration,currentMode:e.app.currentMode,selection:e.inspections[n].views[i].selection,isSelectionMode:e.inspections[n].views[i].isSelectionMode,aliases:e.inspections[n].sharedState.listViewAliases,showAliasesInList:e.inspections[n].sharedState.showAliasesInList,locale:e.app.locale,myPermissions:e.app.myPermissions}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(ee.v)(n,i,ne,ie)),{setViewData:function(t,r){return e(Object(ee.hb)(n,i,t,r))},setSharedStateData:function(t,i){return e(Object(ee.fb)(n,t,i))},updateListViewShowAliases:function(t){return e(Object(ee.nb)(n,t))},setSaveFlag:function(t){return e(Object(ee.eb)(t))}}}))(te)),ae=n(121),se=n(23),oe=n.n(se),ce=n(80),ue=n.n(ce),le=(n(735),n.p+"static/media/one.0123db23.svg"),de=n.p+"static/media/download.c1bdaf13.svg",pe=n(226),be=n.p+"static/media/fit-to-width.ea508053.svg",ve=n.p+"static/media/fit-to-height.be413aab.svg",fe=n.p+"static/media/downloadWithOverlays.0ec8c060.svg",he=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.imageInfoClass,n=e.cursorPosition,i=e.rgbValues,r=e.imageDimensions;return Object(C.jsx)("div",{className:t,children:Object(C.jsxs)("div",{className:"info-table",children:[Object(C.jsx)("div",{className:"th",children:Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(M.a,{id:"imageView.info"})})}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(M.a,{id:"imageView.width"})}),Object(C.jsx)("div",{className:"td",children:r.width})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(M.a,{id:"imageView.height"})}),Object(C.jsx)("div",{className:"td",children:r.height})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:"".concat(i.R,", ").concat(i.G,", ").concat(i.B)}),Object(C.jsx)("div",{className:"td",style:{backgroundColor:"rgb(".concat(i.R,",").concat(i.G,",").concat(i.B,")")}})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(M.a,{id:"imageView.x"})}),Object(C.jsx)("div",{className:"td",children:n.x})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(M.a,{id:"imageView.y"})}),Object(C.jsx)("div",{className:"td",children:n.y})]})]})})}}]),n}(s.Component);he.defaultProps={imageInfoClass:"",rgbValues:{R:0,G:0,B:0},cursorPosition:{width:0,height:0},imageDimensions:{width:0,height:0}};var me=Object(v.c)((function(e,t){return function(e,t,n,i){return Object.keys(i).reduce((function(i,s){return Object(a.a)(Object(a.a)({},i),{},Object(r.a)({},s,e.inspections[t].views[n][s]))}),{})}(e,t.inspectionId,t.id,{imageDimensions:"imageDimensions",cursorPosition:"cursorPosition",rgbValues:"rgbValues"})}))(he),ge=n(85),je=n(176),Oe=n(10),we=n(37),ye=function(e){var t=e.drawTarget,n=e.zoomFactor,i=e.overlays,r=e.boundingCoordinates,a=e.width,s=e.height,o=e.currentMode;if(i&&0!==i.length){var c=t.getContext("2d");n=n||1,i&&i.length>0&&(c.setLineDash([]),i.forEach((function(e){var t=e.color&&e.color.value||0,i=Ce(t);c.fillStyle=i;var u=10/n;switch(c.lineWidth=1/n,c.font=u+"px Arial",c.strokeStyle=i,e.boundingShape.shape){case Oe.a.SvPb.OverlayBoundingShape.fields.rect.name:Se(c,n,u,i,e,r,o);break;case Oe.a.SvPb.OverlayBoundingShape.fields.slice.name:xe(c,e,r);break;case Oe.a.SvPb.OverlayBoundingShape.fields.perspective.name:Ve(c,n,e,r,a,s);break;default:return void P.a.error("Unknown boundingShape received")}})))}else P.a.error("drawInspectionOverlays expects overlays but did not receive")},Se=function(e,t,n,i,r,a,s){var o=Math.abs(a.minX)+r.boundingShape.rect.x.value||0,c=Math.abs(a.minY)+r.boundingShape.rect.y.value||0,u=r.boundingShape.rect.w.value||0,l=r.boundingShape.rect.h.value||0,d=r.displayBounding,p=r.shapeGroups,b=r.name,v=r.boundingShape.rect.angle&&r.boundingShape.rect.angle.value;e.fillText(b,o,c-10/t),p&&p.forEach((function(n){2===n.detailLevel&&s===we.a.runMode.id||n.shapes.forEach((function(n){var r=n.color&&n.color.value,s=Ce(r),d=n.shape,p=v&&v>0&&d!==Oe.a.SvPb.OverlayShape.fields.arrow.name;switch(p&&ke(e,v,o,c),d){case Oe.a.SvPb.OverlayShape.fields.arrow.name:var b=Math.abs(a.minX)+n.arrow.x1.value||0,f=Math.abs(a.minY)+n.arrow.y1.value||0,h=Math.abs(a.minX)+n.arrow.x2.value||0,m=Math.abs(a.minY)+n.arrow.y2.value||0,g=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(h-b,m-f);e.beginPath(),e.strokeStyle=s||i,e.moveTo(b,f),e.lineTo(h,m),e.moveTo(h,m);var j=Math.PI*(g+135)/180;e.lineTo(h+15*Math.cos(j),m+15*Math.sin(j)),e.moveTo(h,m);var O=Math.PI*(g-135)/180;e.lineTo(h+15*Math.cos(O),m+15*Math.sin(O)),e.stroke(),e.closePath();break;case Oe.a.SvPb.OverlayShape.fields.rectArray.name:e.beginPath(),e.strokeStyle=s||i,n.rectArray.rectArray.forEach((function(t){var n=-t.angle;n&&n<0&&ke(e,n,o+t.x,c+t.y),e.rect(o+t.x||0,c+t.y||0,t.w||0,t.h||0),n&&n<0&&e.restore()})),e.stroke(),e.closePath();break;case Oe.a.SvPb.OverlayShape.fields.graph.name:if(e.beginPath(),e.strokeStyle=s||i,n.graph.x.length===n.graph.y.length&&n.graph.x.length>0){e.moveTo(o+n.graph.x[0]*u/n.graph.maxValueX,c+n.graph.y[0]*l/n.graph.maxValueY);for(var w=0;w<n.graph.x.length;w++)e.lineTo(o+n.graph.x[w]*u/n.graph.maxValueX,c+l-n.graph.y[w]*l/n.graph.maxValueY)}e.stroke(),e.closePath();break;case Oe.a.SvPb.OverlayShape.fields.marker.name:if(e.beginPath(),e.strokeStyle=s||i,1===n.marker.orientationType)if(1===n.marker.sizeType){e.moveTo(o+n.marker.value.value,c+l/2-10),e.lineTo(o+n.marker.value.value,c+l/2+10)}else e.moveTo(o+n.marker.value.value*u/n.marker.maxValue+1,c),e.lineTo(o+n.marker.value.value*u/n.marker.maxValue+1,c+l);else if(1===n.marker.sizeType){e.moveTo(o+u/2-10,c+n.marker.value.value),e.lineTo(o+u/2+10,c+n.marker.value.value)}else e.moveTo(o,c+l-n.marker.value.value*l/n.marker.maxValue+1),e.lineTo(o+u,c+l-n.marker.value.value*l/n.marker.maxValue+1);e.stroke(),e.closePath();break;case Oe.a.SvPb.OverlayShape.fields.markers.name:if(e.beginPath(),e.strokeStyle=s||i,1===n.markers.orientationType)if(1===n.markers.sizeType)for(var y=0;y<n.markers.value.length;y++)e.moveTo(o+n.markers.value[y],c+l/2-10),e.lineTo(o+n.markers.value[y],c+l/2+10);else for(var S=0;S<n.markers.value.length;S++)e.moveTo(o+n.markers.value[S],c),e.lineTo(o+n.markers.value[S],c+l);else if(1===n.markers.sizeType)for(var k=0;k<n.markers.value.length;k++)e.moveTo(o+u/2-10,c+n.markers.value[k]),e.lineTo(o+u/2+10,c+n.markers.value[k]);else for(var x=0;x<n.markers.value.length;x++)e.moveTo(o,c+n.markers.value[x]),e.lineTo(o+u,c+n.markers.value[x]);e.stroke(),e.closePath();break;case Oe.a.SvPb.OverlayShape.fields.blockMarker.name:for(var I=n.blockMarker.colors,V=n.blockMarker.changePos,C=0,N=0;N<=V.length;N++)e.beginPath(),e.lineWidth=10/t,e.strokeStyle=Ce(I[N%I.length]),e.moveTo(o+C,c+l/2),N<V.length?e.lineTo(o+V[N],c+l/2):e.lineTo(o+u,c+l/2),C=V[N],e.stroke(),e.closePath(),e.lineWidth=1/t;break;case Oe.a.SvPb.OverlayShape.fields.image.name:var T=n.image,E=T.domImage,A=T.x,M=T.y,D=T.w,R=T.h;E&&e.drawImage(E,o+(A&&A.value||0),c+(M&&M.value||0),D&&D.value||100,R&&R.value||100);break;default:P.a.warn("Received unknown overlay shape",d)}p&&e.restore()}))})),d&&(v&&v>0&&ke(e,v,o,c),e.save(),e.beginPath(),e.strokeStyle=i,e.rect(o,c,u,l),e.stroke(),e.closePath(),v&&v>0&&e.restore()),e.restore();var f=o+e.measureText(b).width;De(a,o,c-n,Math.max(o+u,f),c+l)},ke=function(e,t,n,i){e.save(),e.translate(n,i),e.rotate(t*Math.PI/180),e.translate(-n,-i)},xe=function(e,t,n){var i=t.name,r=Math.abs(n.minX)+t.boundingShape.slice.centerX.value,a=Math.abs(n.minY)+t.boundingShape.slice.centerY.value,s=t.boundingShape.slice.innerRadius.value,o=t.boundingShape.slice.outerRadius.value,c=Ie(t.boundingShape.slice.endAngle.value),u=Ie(t.boundingShape.slice.startAngle.value);e.fillText(i,r-20,a+20),e.beginPath(),u-c<=2*Math.PI?(e.arc(r,a,s,c,u),e.lineTo(r,a),e.arc(r,a,o,c,u),e.lineTo(r,a)):(e.arc(r,a,s,c,c+1.99*Math.PI),e.arc(r,a,s+1,c+1.99*Math.PI,c+2*Math.PI),e.arc(r,a,s+2,c+2*Math.PI,c+2.01*Math.PI),e.arc(r,a,s+3,c+2.01*Math.PI,u),e.lineTo(r,a),e.arc(r,a,o,c,c+1.99*Math.PI),e.arc(r,a,o+1,c+1.99*Math.PI,c+2*Math.PI),e.arc(r,a,o+2,c+2*Math.PI,c+2.01*Math.PI),e.arc(r,a,o+3,c+2.01*Math.PI,u),e.lineTo(r,a)),e.stroke(),e.closePath();var l=r-20+e.measureText(i).width;De(n,r-o,a-o,Math.max(r+o,l),a+o)},Ie=function(e){return(360-e)*Math.PI/180},Ve=function(e,t,n,i,r,a){var s=n.name,o=e.measureText(s).width;e.fillText(s,r/2-o/2,50);var c=Math.abs(i.minX)||0,u=Math.abs(i.minY)||0,l=r||0,d=a||0,p=n.boundingShape.perspective.offset&&n.boundingShape.perspective.offset.value,b=n.boundingShape.perspective.orientation;0===b&&(e.moveTo(c,u+d/2),e.lineTo(c+p,u+1/t),e.lineTo(c+l-p,u+1/t),e.lineTo(c+l,u+d/2),e.lineTo(c+l-p,u+d-1/t),e.lineTo(c+p,u+d-1/t),e.lineTo(c,u+d/2)),1===b&&(e.moveTo(c+1/t,u+p),e.lineTo(c+l/2,u),e.lineTo(c+l-1/t,u+p),e.lineTo(c+l-1/t,u+d-p),e.lineTo(c+l/2,u+d),e.lineTo(c+1/t,u+d-p),e.lineTo(c+1/t,u+p)),e.stroke(),e.closePath()},Ce=function(e){if("number"!==typeof e||isNaN(e))return P.a.debug("Could not parse value into color."),"pink";var t=e>>8&255,n=e>>16&255;return"rgba(".concat(255&e,", ").concat(t,", ").concat(n,", ").concat(1,")")},Ne=function(e){var t=e.overlay,n=e.product,i=e.fontSize,r=e.boundingCoordinates,a=e.dispatch,s={x:0,y:0,width:0,height:0};Pe(n,t,s,a);var o=Ee(t.label,i);De(r,s.x,s.y-2*i,Math.max(s.x+s.width,s.x+o),s.y+s.height)},Te=function(e){var t=e.overlay,n=e.fontSize,i=e.boundingCoordinates,r={x:0,y:0,width:0,height:0};Ae(t,r);var a=Ee(t.name,n);De(i,r.x,r.y-2*n,Math.max(r.x+r.width,r.x+a),r.y+r.height)},Ee=function(e,t){var n=document.createElement("canvas").getContext("2d");return n.font=t+"px Arial",n.measureText(e).width},Pe=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=Number(Re(e,t.offsetLeftVariable))||t.offsetLeft,a=Number(Re(e,t.xVariable))||t.x;n.x=a+r;var s=Number(Re(e,t.offsetTopVariable))||t.offsetTop,o=Number(Re(e,t.yVariable))||t.y;n.y=o+s,n.width=Number(Re(e,t.widthVariable))||t.width,n.height=Number(Re(e,t.heightVariable))||t.height,0!==t.maxHeightFallback&&0!==t.maxWidthFallback&&0!==t.minHeightFallback&&0!==t.minWidthFallback&&(n.x<t.minWidthFallback&&(n.x=t.minWidthFallback,i(Object(ee.o)("X","".concat(t.minWidthFallback,"  -   ").concat(t.maxWidthFallback)))),n.x>t.maxWidthFallback&&(n.x=t.maxWidthFallback,i(Object(ee.o)("X","".concat(t.minWidthFallback,"  -   ").concat(t.maxWidthFallback)))),n.y<t.minHeightFallback&&(n.y=t.minHeightFallback,i(Object(ee.o)("Y","".concat(t.minHeightFallback,"  -   ").concat(t.maxHeightFallback)))),n.y>t.maxHeightFallback&&(n.y=t.maxHeightFallback,i(Object(ee.o)("Y","".concat(t.minHeightFallback,"  -   ").concat(t.maxHeightFallback)))))},Ae=function(e,t){e.boundingShape.rect&&(t.x=e.boundingShape.rect.x.value||0,t.y=e.boundingShape.rect.y.value||0,t.width=e.boundingShape.rect.w.value||0,t.height=e.boundingShape.rect.h.value||0)},Me=function(e,t){e.x+=Math.abs(t.minX),e.y+=Math.abs(t.minY)},De=function(e,t,n,i,r){t<e.minX&&(e.minX=t),n<e.minY&&(e.minY=n),i>e.maxX&&(e.maxX=i),r>e.maxY&&(e.maxY=r)},Re=function(e,t){if(e&&t){var n=e.getValue(t);return n&&n.value}},Le=function(e,t){if(e&&!e.released){var n=e.getImage(t);if(n)return n&&n.overlays&&n.overlays.overlays&&n.overlays.overlays.length>0&&n.overlays.overlays||[]}},_e=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={image:new Image,left:0,top:0,zoomFactor:1,currentCursorPosition:{x:0,y:0},canvasDimension:{width:0,height:0}},e.setBoundingCoordinates=function(t,n){var i={minX:0,minY:0,maxX:t.width||0,maxY:t.height||0},r=10/n;return e.getBoundingCoordinatesFromCustomOverlays(i,r),e.getBoundingCoordinatesFromInspectionOverlays(i,r),i},e.setCanvasDimensions=function(t,n,i){var r=Math.abs(n.minX)+n.maxX,a=Math.abs(n.minY)+n.maxY;t.width=Math.ceil(r*i),t.height=Math.ceil(a*i),e.setState({canvasDimension:{width:r,height:a},boundingCoordinates:n})},e.getBoundingCoordinatesFromCustomOverlays=function(t,n){var i,r=e.props,a=r.product,s=r.customOverlays,o=e.state.image,c=null===o||void 0===o?void 0:o.width,u=null===o||void 0===o?void 0:o.height,l=Number(2*-c),d=Number(2*c),p=Number(2*-u),b=Number(2*u);(i=s.filter((function(e){return e.isActive}))).map((function(e){return Object.assign(e,{minWidthFallback:l,maxWidthFallback:d,minHeightFallback:p,maxHeightFallback:b})})),i.forEach((function(i){Ne({overlay:i,product:a,fontSize:n,boundingCoordinates:t,dispatch:e.props.dispatch})}))},e.getBoundingCoordinatesFromInspectionOverlays=function(t,n){var i=e.props,r=i.product,a=i.imageId,s=Le(r,a);s&&s.forEach((function(e){Te({overlay:e,fontSize:n,boundingCoordinates:t})}))},e.setImageInfo=function(){var t=e.props.isImageInfoOpen,n=e.state.currentCursorPosition;if(n&&t){var i=n.x,r=n.y;e.setRgbValues(i,r)}},e.handleScroll=function(t){var n=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;if(n){var i=t.offsetX,r=t.offsetY;e.zoom(n,i,r)}return t.preventDefault(),!1},e.handleMouseDown=function(t){var n={x:t.pageX,y:t.pageY},i=e.state,r={left:i.left,top:i.top};e.setState({dragging:!0,dragStart:n,dragStartPos:r})},e.handleMouseUp=function(){e.setState({dragging:!1,dragStart:null})},e.handleDrag=function(t){var n=e.state,i=n.dragging,r=n.dragStart,a=n.dragStartPos;if(i){var s=t.pageX-r.x,o=t.pageY-r.y;e.setState({left:a.left+s,top:a.top+o})}},e.handleMouseMove=function(t){if(e.props.isImageInfoOpen){var n=e.getMouseCoordinatesOnElement(t,e.canvas);e.setCursorPosition(n),e.setRgbValues(n.x,n.y)}},e.getMouseCoordinatesOnElement=function(t){for(var n=e.state,i=n.zoomFactor,r=n.boundingCoordinates,a=t.offsetX,s=t.offsetY,o=t.target;o!==e.containerRef;)a+=o.offsetLeft,s+=o.offsetTop,o=o.parentNode;var c=(a-e.canvas.offsetLeft)/i,u=(s-e.canvas.offsetTop)/i;return r&&(c+=r.minX,u+=r.minY),{x:Math.trunc(c),y:Math.trunc(u)}},e.setRgbValues=function(t,n){var i=e.state.image,r=document.createElement("canvas");r.width=i.width,r.height=i.height;var a=r.getContext("2d");a.drawImage(i,0,0);var s=a.getImageData(t,n,1,1).data,o=s[0],c=s[1],u=s[2];e.props.setViewData("rgbValues",{R:o,G:c,B:u})},e.setCursorPosition=function(t){var n=e.state.currentCursorPosition,i=e.trimPositionsOnImageSize(t);e.props.setViewData("cursorPosition",i),n.x===i.x&&n.y===i.y||e.setState({currentCursorPosition:t})},e.trimPositionsOnImageSize=function(t){var n=e.state.image;return t.x<0||t.y<0||t.x>n.width||t.y>n.height?{x:0,y:0}:t},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadViewSettings(),this.props.product.lock(),this.initImage(this.props),this.bindEventListeners()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,i=n.zoomFactor,r=n.left,a=n.top,s=e.product!==this.props.product,o=e.currentMode!==this.props.currentMode,c=t.zoomFactor!==i,u=!ue()(this.props.customOverlays,e.customOverlays),l=t.left!==r||t.top!==a;s&&(e.product.release(),this.props.product.lock()),(s||o||c||u)&&this.initImage(this.props),(c||l)&&this.props.saveImageSettings(i,{left:r,top:a})}},{key:"componentWillUnmount",value:function(){this.props.product.release()}},{key:"loadViewSettings",value:function(){var e=this.props.viewSettings,t=e.zoomFactor,n=e.imagePosition;t&&this.setState({zoomFactor:t}),n&&n.left&&this.setState({left:n.left}),n&&n.top&&this.setState({top:n.top})}},{key:"initImage",value:function(e){if(e&&e.product&&e.imageId){var t=e.product.getImage(e.imageId);t&&t.domImage&&this.onImageLoaded(t.domImage)}}},{key:"onImageLoaded",value:function(e){var t=this.state,n=t.zoomFactor,i=t.canvasDimension,r=i.height,a=i.width;this.setState({image:e}),this.initCanvas({canvas:this.canvas,height:r,width:a,zoomFactor:n}),this.props.setViewData("imageDimensions",{width:e.width,height:e.height}),this.draw(this.canvas,e,n),this.setImageInfo()}},{key:"initCanvas",value:function(e){var t=e.canvas,n=e.height,i=e.width,r=e.zoomFactor;t.width=Math.ceil(i*r),t.height=Math.ceil(n*r),this.props.setViewData("imageDimensions",{width:i,height:n})}},{key:"draw",value:function(e,t,n){if(e&&t){var i=this.setBoundingCoordinates(t,n);this.setCanvasDimensions(e,i,n);var r=e.getContext("2d");r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,r.save(),r.clearRect(0,0,Math.abs(i.minX)+i.maxX,Math.abs(i.minY)+i.maxY),r.scale(n,n),r.drawImage(t,Math.abs(i.minX),Math.abs(i.minY)),this.drawOverlays(e,n,i,t.width,t.height),r.restore()}else console.error("Can not draw because we do not have a canvas")}},{key:"drawOverlays",value:function(e,t,n,i,r){var a=this.props,s=a.product,o=a.customOverlays,c=a.imageId,u=a.currentMode,l=Le(s,c);!function(e){var t=e.drawTarget,n=e.customOverlays,i=e.product,r=e.zoomFactor,a=e.boundingCoordinates;if(n&&0!==n.length){var s=t.getContext("2d"),o=n.filter((function(e){return e.isActive}));r=r||1,o.forEach((function(e){s.beginPath();var t={x:0,y:0,width:0,height:0};Pe(i,e,t),Me(t,a);var n,o=Re(i,e.colorVariable);n=o?Ce(o):e.color,s.rect(t.x,t.y,t.width,t.height),s.fillStyle=n,s.lineWidth=1/r;var c=10/r;switch(s.font=c+"px Arial",s.fillText(e.label,t.x,t.y-c),e.lineStyle){case"dashed":s.setLineDash([5]);break;case"dotted":s.setLineDash([2,5]);break;default:s.setLineDash([])}s.strokeStyle=n,s.stroke(),s.closePath()}))}}({drawTarget:e,customOverlays:o,product:s,zoomFactor:t,boundingCoordinates:n}),ye({drawTarget:e,overlays:l,zoomFactor:t,boundingCoordinates:n,width:i,height:r,currentMode:u})}},{key:"bindEventListeners",value:function(){Object(A.m)(this.props.myPermissions)&&(this.containerRef.addEventListener("mousewheel",this.handleScroll),this.containerRef.addEventListener("DOMMouseScroll",this.handleScroll),this.containerRef.addEventListener("mousedown",this.handleMouseDown),this.containerRef.addEventListener("mouseup",this.handleMouseUp),this.containerRef.addEventListener("mouseleave",this.handleMouseUp),this.containerRef.addEventListener("mousemove",this.handleDrag)),this.containerRef.addEventListener("mousemove",this.handleMouseMove)}},{key:"zoom",value:function(e,t,n){var i=Math.pow(1.1,e),r=this.state.zoomFactor*i;if(!(r<.05||r>20)){var a=this.state.canvasDimension;if(!(Math.max(a.width*r,a.height*r)>4096)){var s=this.state,o=s.left,c=s.top,u=t*(1-i),l=n*(1-i);this.setState({left:o+u,top:c+l,zoomFactor:r})}}}},{key:"clamp",value:function(e,t,n){return Math.max(Math.min(e,n),t)}},{key:"resetZoom",value:function(){var e=this.state,t=e.boundingCoordinates,n=e.zoomFactor;this.setState({zoomFactor:1,left:t.minX*n,top:t.minY*n})}},{key:"fitToHeight",value:function(){var e=this.getViewSize().height,t=this.state,n=t.image,i=t.boundingCoordinates,r=t.zoomFactor;this.setState({zoomFactor:e/n.height,left:i.minX*r,top:i.minY*r})}},{key:"fitToWidth",value:function(){var e=this.getViewSize().width,t=this.state,n=t.image,i=t.boundingCoordinates,r=t.zoomFactor;this.setState({zoomFactor:e/n.width,left:i.minX*r,top:i.minY*r})}},{key:"getViewSize",value:function(){return{width:this.containerRef&&this.containerRef.getBoundingClientRect().width||200,height:this.containerRef&&this.containerRef.getBoundingClientRect().height||200}}},{key:"downloadOriginalImage",value:function(){var e=this;Object(V.a)((function(){return e.state.image.src}))?Object(je.a)(this.state.image.src,"image.bmp"):P.a.info("downloadOriginalImage can not find image source")}},{key:"downloadOriginalImageWithOverlays",value:function(){var e=this.state,t=e.canvasDimension,n=e.image,i=document.createElement("canvas");i.width=t.width,i.height=t.height,this.draw(i,n,1),i.toBlob((function(e){var t=self.URL||self.webkitURL||self,n=t.createObjectURL(e);Object(je.a)(n),t.revokeObjectURL(n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.zoomFactor,i=t.canvasDimension,r=t.left,a=t.top,s=i.height*n,o=i.width*n;return Object(C.jsx)("div",{style:{height:"100%",width:"100%"},ref:function(t){e.containerRef=t},children:Object(C.jsx)("canvas",{className:"imageCanvas",style:{position:"absolute",left:r,top:a,width:o,height:s},ref:function(t){e.canvas=t}})})}}]),n}(s.Component),Fe=Object(ge.c)(Object(v.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{customOverlays:e.inspections[n].sharedState.views[i].overlays,currentMode:e.app.currentMode,viewSettings:e.inspections[n].views[i],myPermissions:e.app.myPermissions}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return{setViewData:function(t,r){return e(Object(ee.hb)(n,i,t,r))},saveImageSettings:function(t,r){return e(Object(ee.H)(n,i,t,r))},dispatch:function(){return e.apply(void 0,arguments)}}}),null,{forwardRef:!0})(_e)),Ue=n(952),We=function(e,t){return t.map((function(t){return t.id===e.id?e:t}))},He=(n(736),function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={selectAll:!1,selectedRowIndex:-1},e.checkAndUpdateAllSelected=function(){var t=e.props.overlays,n=!0;(t||[]).forEach((function(e){e.isActive||(n=!1)})),e.setState({selectAll:n})},e.handleSelectAll=function(t){e.setState({selectAll:t}),e.props.onSelectAll(t)},e.handleSingleSelect=function(t,n){var i=e.props.overlays,r=Object(a.a)(Object(a.a)({},n),{},{isActive:t}),s=We(r,i);e.checkAndUpdateAllSelected(s),e.props.updateOverlayList(s)},e.getTableDataFromOverlays=function(){var t=e.props.overlays;return t&&t.map((function(t){return{checkbox:e.getCheckboxDefinition4Cell(t.id),name:t.label,id:t.id}}))},e.getColumnDefinition4OverlayTable=function(){return[{key:"checkbox",dataKey:"checkbox",title:"",width:40},{key:"name",dataKey:"name",title:"Overlays",width:0,flexGrow:1}]},e.getCheckboxDefinition4Cell=function(t){var n=e.props.overlays.filter((function(e){return e.id===t}))[0],i=!!n&&n.isActive;return Object(C.jsx)(Ue.a,{checked:i,onChange:function(t){return e.handleSingleSelect(t.target.checked,n)},style:{padding:0},color:"primary"},"checkbox_".concat(t))},e.getSelectedRowClass=function(t){return e.props.currentOverlay&&e.props.currentOverlay.id===t?"overlay-table-selected-row":""},e.headerRenderer=function(t){t.cells;var n=t.columns,i=[];return n.forEach((function(t,r){0===r?i.push(Object(C.jsx)("div",{className:"base-table-header-column",style:{width:n[r].width},children:Object(C.jsx)(Ue.a,{checked:e.state.selectAll,onChange:function(t){return e.handleSelectAll(t.target.checked)},style:{padding:0},color:"primary"},"select-all-checkbox")},"header_".concat(r))):i.push(Object(C.jsx)("div",{className:"base-table-header-column",style:{padding:" 0 7.5px"},children:n[r].title},"header_".concat(r)))})),i},e.rowEventHandlers={onClick:function(t){t.rowData;var n=t.rowIndex,i=e.props,r=i.overlays,a=i.updateCurrentOverlay;e.setState({selectedRowIndex:n}),a(r.filter((function(e){return e.id===r[n].id}))[0])}},e.setRowClassName=function(t){t.rowData;var n=t.rowIndex;return e.state.selectedRowIndex===n?"overlay-table-selected-row":""},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.checkAndUpdateAllSelected(this.props.overlays),this.props.canSelectRow&&this.setState({selectedRowIndex:0})}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.checkAndUpdateAllSelected(this.props.overlays)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.overlays,i=t.canSelectRow,r=t.hasActionBar;if(!n)return null;var a=this.getTableDataFromOverlays(),s=this.getColumnDefinition4OverlayTable();return Object(C.jsx)(h.a,{children:function(t){var n=t.width,o=t.height;return Object(C.jsx)(h.c,{headerRenderer:e.headerRenderer,columns:s,data:a,width:n,height:r?o-30:o,headerHeight:30,rowHeight:30,rowEventHandlers:i?e.rowEventHandlers:{},rowClassName:e.setRowClassName},"overlay-table")}},"autoresizer")}}]),n}(s.Component));He.defaultProps={overlays:[],hasActionBar:!0};var qe=He,ze=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={viewSizeChangeCounter:e.props.viewSizeChangeCounter,isOverlayInfoOpen:!1,isImageInfoOpen:!1,canvasInitResize:!1,subscribedSource:void 0},e.updateViewSize=function(t){(t>e.state.viewSizeChangeCounter||void 0===e.state.viewSizeChangeCounter)&&e.setState({viewSizeChangeCounter:t})},e.resubscribeToProductStream=function(t,n){t&&(e.unsubscribeFromProductStream(),e.subscribeToProductStream(t,n),e.setState({subscribedSource:t}))},e.subscribeToProductStream=function(t,n){if(!e.productSub){var i={inspectionId:e.props.inspectionId,imageIds:[t],valueIds:e.getUsedVariablesFromOverlay(n),startAtTriggerCount:-1};e.productSub=e.props.proxy.subscribeToProductStream(i,e.onProduct)}},e.unsubscribeFromProductStream=function(){e.productSub&&(e.props.proxy.unsubscribeFromProductStream(e.productSub),e.productSub=null)},e.getUsedVariablesFromOverlay=function(e){var t=[];return e&&e.forEach((function(e){Object.keys(e).forEach((function(n){n.indexOf("Variable")>-1&&e[n]&&!t.includes(e[n])&&t.push(e[n])}))})),t},e.setAllOverlaysActive=function(t){var n=e.props.overlays.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{isActive:t})}));e.props.setSharedStateData("overlays",n),e.props.setSaveFlag(!0)},e.createActiveOverlayList=function(e){return e.filter((function(e){return e.isActive}))},e.createActiveOverlayIdList=function(e){return e.filter((function(e){return e.isActive})).map((function(e){return e.id}))},e.onProduct=function(t){var n=t.product,i=e.props.sourceImage;e.setState({imageId:i,product:n}),e.state.canvasInitResize||e.setState({canvasInitResize:!0})},e.toggleOverlayInfo=function(){e.setState({isOverlayInfoOpen:!e.state.isOverlayInfoOpen,isImageInfoOpen:!1})},e.toggleImageInfo=function(){e.setState({isImageInfoOpen:!e.state.isImageInfoOpen,isOverlayInfoOpen:!1})},e.setSourceImageId=function(t){t?e.props.setSharedStateData("sourceImage",t):P.a.error("OjectSelector did not return a valid id ".concat(t,"."))},e.updateOverlayList=function(t){e.props.setSharedStateData("overlays",t),e.props.setSaveFlag(!0)},e.setTitleFromConfig=function(){var t=e.props,n=t.sourceImage,i=t.inspectionId,r=t.configuration;if(r){var a=r.getValueNameForId(i,n);a&&e.props.setViewData("windowName",a)}},e.renderObjectSelector=function(){var t=e.props,n=t.configuration,i=t.inspectionId;if(n&&i)return Object(C.jsx)("div",{style:{width:"100%",overflow:"auto"},children:Object(C.jsx)(E,{singleSelect:!0,data:n.getObjectSelectorImagesForInspection(i).tree,onChange:function(t,n){e.setSourceImageId(t),e.props.setViewData("windowName",n),e.props.setSaveFlag(!0)}})})},e.renderImageView=function(){var t=e.props.viewActions;return Object(C.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(C.jsx)("div",{style:{height:"100%",width:"100%"},children:e.renderImageViewImpl()}),Object(C.jsx)(g.a,{isViewAction:!0,actions:t(Object(ae.a)(e))})]})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.resubscribeToProductStream(this.props.sourceImage,this.props.overlays))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateViewSize(e.viewSizeChangeCounter);var t=this.getUsedVariablesFromOverlay(this.props.overlays),n=this.getUsedVariablesFromOverlay(e.overlays);(!ue()(t,n)||this.state.subscribedSource!==e.sourceImage&&e.sourceImage)&&this.resubscribeToProductStream(e.sourceImage,e.overlays),this.props.isBrowserWindowVisible!==e.isBrowserWindowVisible&&(e.isBrowserWindowVisible?this.resubscribeToProductStream(this.props.sourceImage,this.props.overlays):this.unsubscribeFromProductStream())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromProductStream()}},{key:"renderImageViewImpl",value:function(){var e=this.state.product;return!e||e.released?Object(C.jsx)("div",{children:"<UNAVAILABLE>"}):[this.renderImageEditor(),this.renderImageInfo(),this.renderOverlayList()]}},{key:"renderImageEditor",value:function(){var e=this,t=this.props,n=t.inspectionId,i=t.id,r=this.state,a=r.product,s=r.imageId,o=r.isImageInfoOpen;return Object(C.jsx)(Fe,{ref:function(t){e.imageEditor=t},id:i,inspectionId:n,imageId:s,product:a,isImageInfoOpen:o},"ImageEditor".concat(i))}},{key:"renderImageInfo",value:function(){var e=this.props,t=e.inspectionId,n=e.id;if(this.state.isImageInfoOpen)return Object(C.jsx)(me,{id:n,inspectionId:t,imageInfoClass:oe()({"info-box":!0})},"ImageInfo".concat(n))}},{key:"renderOverlayList",value:function(){var e=this,t=this.props,n=t.overlays,i=t.id;if(this.state.isOverlayInfoOpen)return Object(C.jsx)("div",{className:oe()({"info-box":!0}),children:Object(C.jsx)(qe,{overlays:n,updateOverlayList:this.updateOverlayList,canSelectRow:!1,onSelectAll:function(t){return e.setAllOverlaysActive(t)},hasActionBar:!1})},"OverlayList".concat(i))}},{key:"render",value:function(){var e=this.props,t=e.sourceImage,n=e.myPermissions;return this.setTitleFromConfig(),Object(A.v)(n)||Object(A.m)(n)?Object(C.jsx)("div",{className:"image-view-wrapper",children:t?this.renderImageView():this.renderObjectSelector()}):Object(C.jsx)("div",{})}}]),n}(s.Component);ze.defaultProps={viewActions:function(e){var t=[],n=Object(A.m)(e.props.myPermissions);return n&&(t.push({intlId:"imageView.zoomOut",iconUrl:le,onClickHandler:function(){e.imageEditor&&e.imageEditor.resetZoom()}}),t.push({intlId:"imageView.fitToWidth",iconUrl:be,onClickHandler:function(){e.imageEditor&&e.imageEditor.fitToWidth()}}),t.push({intlId:"imageView.fitToHeight",iconUrl:ve,onClickHandler:function(){e.imageEditor&&e.imageEditor.fitToHeight()}})),(Object(A.v)(e.props.myPermissions)||n)&&(t.push({type:j.a}),t.push({intlId:"imageView.save",iconUrl:de,onClickHandler:function(){e.imageEditor&&e.imageEditor.downloadOriginalImage()}}),t.push({intlId:"imageView.saveWithOverlays",iconUrl:fe,onClickHandler:function(){e.imageEditor&&e.imageEditor.downloadOriginalImageWithOverlays()}}),t.push({type:j.a}),t.push({intlId:"imageView.overlayListToggle",iconUrl:m,onClickHandler:function(){e.toggleOverlayInfo()}}),t.push({intlId:"imageView.imageInfoToggle",iconUrl:pe.a,onClickHandler:function(){e.toggleImageInfo()}})),t},overlayActions:function(){return[]},inRunMode:!1,currentMode:void 0,proxy:void 0,rgbValues:{R:0,G:0,B:0},cursorPosition:{width:0,height:0}};var Be={scaleFactor:0,rgbValues:{R:0,G:0,B:0},imageDimensions:{width:0,height:0},cursorPosition:{x:0,y:0}},Ge={overlays:[],sourceImage:0},Ke=Object(v.c)((function(e,t){var n=t.inspectionId,i=t.id,r={proxy:e.app.proxy,configuration:e.app.configuration,currentMode:e.app.currentMode,viewSizeChangeCounter:e.viewSet.viewSizeChangeCounter,myPermissions:e.app.myPermissions,isBrowserWindowVisible:e.app.isBrowserWindowVisible};try{return Object(a.a)(Object(a.a)({},r),{},{overlays:e.inspections[n].sharedState.views[i].overlays,sourceImage:Number(e.inspections[n].sharedState.views[i].sourceImage)})}catch(s){return r}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(ee.v)(n,i,Be,Ge)),{setViewData:function(t,r){return e(Object(ee.hb)(n,i,t,r))},setSharedStateData:function(t,r){return e(Object(ee.fb)(n,t,r,i))},addImageNotAvailableNotification:function(){return e(Object(ee.d)())},setSaveFlag:function(t){return e(Object(ee.eb)(t))}}}))(ze),Ye=n(81),Xe=n(228),Je=n(152),Ze=n(144),Qe=n.p+"static/media/before.53297893.svg",$e=function(e){var t=e.children;return Object(C.jsx)("div",{className:"overflow-scroll absolute w-100 h-100 pa2 top-0 left-0",children:t})},et=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderConfiguration=function(e){return Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("span",{className:"sans-serif mr2 basis-100",children:[Object(C.jsx)(M.a,{id:e.intlId}),":"]}),Object(C.jsx)("span",{className:"basis-100",children:Object(C.jsx)("select",{className:"bn w-100 tc",children:e.options.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.title},e.title)}))})})]})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.configurations,i=t.viewActions;return Object(C.jsxs)("div",{children:[Object(C.jsx)($e,{children:Object(C.jsxs)("div",{className:"pa3 flex items-center",children:[Object(C.jsxs)("div",{className:"basis-100",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(Je.a,{type:"h3",intlId:"name"}),Object(C.jsx)("input",{type:"text",className:"w-100 bg-near-white mb3 ba b--near-white outline-0 pa1"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)(Je.a,{type:"h3",intlId:"comment"}),Object(C.jsx)("textarea",{className:"w-100 h4 bg-near-white ba b--near-white outline-0 pa1"})]})]}),Object(C.jsxs)("div",{className:"basis-100 pa4 pt0 self-baseline",children:[Object(C.jsx)(Je.a,{type:"h3",intlId:"configuration"}),n.map((function(t){return Object(C.jsx)("div",{className:"bb b--near-white pa1 mb1",children:e.renderConfiguration(t)},u.a.generate())}))]})]})}),Object(C.jsx)(g.a,{isViewAction:!0,actions:i})]})}}]),n}(s.Component);et.defaultProps={viewActions:[{intlId:"back",iconUrl:Ye.a},{intlId:"before",iconUrl:Qe},{intlId:"save",iconUrl:Xe.a},{intlId:"cancel",iconUrl:Ze.a}]};var tt=Object(f.c)(et),nt=n(456),it=(n(815),n.p+"static/media/take-over.e8760b3a.svg"),rt=n.p+"static/media/delete-dustbin.8c1d9e0c.svg",at=n.p+"static/media/down.17f143ff.svg",st=n.p+"static/media/up.32f62e1a.svg",ot=(w.a.arrayOf(w.a.shape({id:w.a.string,value:w.a.string,onClick:w.a.func})),Object(W.b)((function(e){var t=e.value;return Object(C.jsx)("li",{className:"filter-list-row",children:Object(C.jsx)("span",{className:"filter-list-row-item",children:t})},t)}))),ct=Object(W.a)((function(e){var t=e.items;return Object(C.jsx)("ul",{children:t.map((function(e,t){return Object(C.jsx)(ot,{index:t,value:e.value},e.value)}))})})),ut=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex;r.setState({CurrentFilterListItems:Object(W.c)(r.state.CurrentFilterListItems,t,n)})},r.state={CurrentFilterListItems:r.props.CurrentFilterListItems},r}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.AvailableFilterListItems,n=e.AvailableFilterListActions,i=e.CurrentFilterListActions;return Object(C.jsxs)("div",{className:"parameter-view-filter-wrapper",children:[Object(C.jsxs)("div",{className:"available-filters filter-list",children:[Object(C.jsx)("div",{className:"filter-header",children:"Available Filters"}),Object(C.jsx)("ul",{className:"filter-content",children:t.map((function(e){return Object(C.jsx)("li",{className:"filter-list-row",children:Object(C.jsx)("span",{className:"filter-list-row-item",children:e.value})},e.value)}))}),Object(C.jsx)("div",{className:"filter-list-actions",children:Object(C.jsx)(g.a,{actions:n})})]}),Object(C.jsxs)("div",{className:"current-filters filter-list",children:[Object(C.jsx)("div",{className:"filter-header",children:"Available Filters"}),Object(C.jsx)("ul",{className:"filter-content",children:Object(C.jsx)(ct,{helperClass:"filter-list-row-item-on-drag",items:this.state.CurrentFilterListItems,onSortEnd:this.onSortEnd})}),Object(C.jsx)("div",{className:"filter-list-actions",children:Object(C.jsx)(g.a,{actions:i})})]}),Object(C.jsx)("div",{className:"property-container",children:Object(C.jsx)("div",{className:"filter-header",children:"Properties"})})]})}}]),n}(s.Component);ut.defaultProps={AvailableFilterListItems:[{id:"",value:"Closing Filter",onClick:function(){}},{id:"",value:"Custom Filter",onClick:function(){}},{id:"",value:"Custom2 Filter",onClick:function(){}},{id:"",value:"Dilation Filter",onClick:function(){}},{id:"",value:"EdgeDetect Filter",onClick:function(){}},{id:"",value:"EdgeDetect2 Filter",onClick:function(){}},{id:"",value:"Erosion Filter",onClick:function(){}},{id:"",value:"HorizonEdge Filter",onClick:function(){}},{id:"",value:"LaplacianEdge Filter",onClick:function(){}},{id:"",value:"LaplacianEdge2 Filter",onClick:function(){}},{id:"",value:"MAX MIN Filter",onClick:function(){}},{id:"",value:"Opening Filter",onClick:function(){}},{id:"",value:"Ranking Filter",onClick:function(){}},{id:"",value:"Sharpen Filter",onClick:function(){}},{id:"",value:"Sharpen2 Filter",onClick:function(){}},{id:"",value:"Skeleton Filter",onClick:function(){}},{id:"",value:"Smooth Filter",onClick:function(){}},{id:"",value:"Thickening Filter",onClick:function(){}},{id:"",value:"Thinning Filter",onClick:function(){}},{id:"",value:"VertEdge Filter",onClick:function(){}},{id:"",value:"Watershed Filter",onClick:function(){}}],AvailableFilterListActions:[{intlId:"before",iconUrl:it,onClickHandler:function(){}}],CurrentFilterListActions:[{intlId:"down",iconUrl:at,onClickHandler:function(){}},{intlId:"up",iconUrl:st,onClickHandler:function(){}},{intlId:"delete",iconUrl:rt,onClickHandler:function(){}}],CurrentFilterListItems:[{id:"",value:"Custom Filter",onClick:function(){}},{id:"",value:"Dilation Filter",onClick:function(){}},{id:"",value:"Closing Filter",onClick:function(){}}]};var lt=ut,dt=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).setup=function(t){switch(t.name){case"Equation":e.props.setupParameterView({component:Object(C.jsx)(lt,{})})}},e.viewSetFactory=new Qt,e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e){e.node!==this.props.node&&this.setup(this.props.node)}},{key:"render",value:function(){return null}}]),n}(s.Component);dt.defaultProps={node:void 0};var pt=Object(v.c)((function(e){return{currentViewSet:e.viewSet.currentViewSet}}),(function(e){return{setupParameterView:function(t){e(Object(ee.Z)(t))},setViewSet:function(t){e(Object(ee.ib)(t))}}}))(dt),bt={tree:{base:{whiteSpace:"nowrap",listStyle:"none",backgroundColor:"transparent",margin:0,padding:0,color:"black",fontFamily:"lucida grande ,tahoma,verdana,arial,sans-serif",fontSize:"14px"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:"transparent"},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-7px 0 0 -7px",height:"10px"},height:10,width:10,arrow:{fill:"#9DA5AB",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:"black"},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"10px"},loading:{color:"#E2C089"}}}},vt=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).getToolsetData=function(){var e,t=r.props.configuration.getConfigTreeByInspectionId(r.props.inspectionId);return(t&&t.children||[]).map((function(t){return t.children?(e=t.children.map((function(e){return{name:e.name}})),{name:t.name,toggled:!1,children:e}):{name:t.name}}))},r.onNodeClicked=function(e,t){r.state&&r.state.cursor&&r.setState({cursor:{active:!1}}),e.active=!0,e.children&&(e.toggled=t),r.setState({cursor:e})},r.buildTreebearViewModel=function(e){return e.map((function(e){return e.children?{name:e.name,children:e.children,toggled:e.toggled}:{name:e.name}}))},r.treeModel=r.buildTreebearViewModel(r.getToolsetData()),r}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.viewActions,n=e.myPermissions;return Object(A.B)(n)||Object(A.r)(n)?Object(C.jsxs)("div",{children:[Object(C.jsx)($e,{children:Object(C.jsxs)("div",{className:"treebeard",children:[Object(C.jsx)(pt,{node:this.state&&this.state.cursor}),Object(C.jsx)(nt.Treebeard,{data:this.treeModel,onToggle:this.onNodeClicked,style:bt})]})}),Object(C.jsx)(g.a,{isViewAction:!0,actions:t})]}):Object(C.jsx)("div",{})}}]),n}(s.Component);vt.defaultProps={viewActions:[]};var ft=Object(v.c)((function(e,t){try{return{proxy:e.app.proxy,configuration:e.app.configuration,myPermissions:e.app.myPermissions}}catch(n){return{}}}),(function(e){return{setParameter:function(t){return e(Object(ee.Z)(t))}}}))(vt),ht=(n(816),n(817),n(229)),mt=n(944),gt=n(943),jt=n(467),Ot=n(945),wt=n(230),yt=n(145),St=Object(jt.a)({typography:{useNextVariants:!0,htmlFontSize:10}}),kt=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onChange=function(t){e.props.setSaveFlag(!0),e.props.onChange(t)},e.renderTextField=function(t){var n=t.name,i=t.id,a=t.disabled,s=e.props,o=s.currentOverlay,c=s.classes;return Object(C.jsx)(S.a,{label:n,style:{width:"100%"},id:i,type:"text",variant:"outlined",disabled:a||!o,InputProps:{classes:{input:c.input}},InputLabelProps:{classes:{root:c.label}},value:o&&o[i]||"",onChange:function(t){return e.onChange(Object(r.a)({},i,t.target.value))}})},e.renderNumberField=function(t){var n=t.name,i=t.id,a=t.min,s=t.max,o=t.disabled,c=e.props,u=c.currentOverlay,l=c.classes,d=u&&u[i]||"";return Object(C.jsx)(S.a,{label:n,style:{width:"100%"},id:i,type:"number",variant:"outlined",disabled:o||!u,InputProps:{classes:{input:l.input},inputProps:{min:a,max:s}},InputLabelProps:{classes:{root:l.label}},value:d,onChange:function(t){return e.onChange(Object(r.a)({},i,function(e,t,n){var i=Number(n);return i>t&&(i=t),i<e&&(i=e),i}(a,s,t.target.value)))}})},e.renderSelection=function(t){var n=t.name,i=t.id,r=t.options,a=t.disabled,s=e.props.currentOverlay;return Object(C.jsx)(wt.a,{selectedValue:s&&s[i],values:r,onSelectionChanged:e.onChange,name:n,id:i,disabled:a||!s})},e.renderObjectSelector=function(t){var n=t.name,i=t.id,a=t.disabled,s=e.props,o=s.currentOverlay,c=s.classes,u=s.inspectionId,l=s.configuration,d=o&&o[i]&&l.getValueNameForId(u,o[i])||"";return Object(C.jsx)(S.a,{label:n,style:{width:"100%"},id:i,type:"text",variant:"outlined",disabled:a||!o,InputProps:{classes:{input:c.input},endAdornment:Object(C.jsx)(mt.a,{position:"end",children:Object(C.jsx)(gt.a,{edge:"end","aria-label":"clear",onClick:function(){return e.onChange(Object(r.a)({},i,""))},title:i,children:Object(C.jsx)("img",{src:yt.a,alt:"x"})})})},InputLabelProps:{classes:{root:c.label}},value:d,onFocus:function(){return e.props.openSelection(n,i)}})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.imageDimensions,i=e.myPermissions,r=null===n||void 0===n?void 0:n.width,a=null===n||void 0===n?void 0:n.height,s=Number(2*-r),o=Number(2*r),c=Number(2*-a),u=Number(2*a),l=Object(A.p)(i);return Object(C.jsx)("div",{className:"parameter-view-overlay-overlaypropertylist",children:Object(C.jsxs)(Ot.a,{theme:St,children:[Object(C.jsx)("label",{className:t.header,children:"Overlay parameters"}),this.renderTextField({name:"Label",id:"label",disabled:!l}),this.renderNumberField({name:"X",id:"x",min:s,max:o,disabled:!l}),this.renderObjectSelector({name:"X Variable",id:"xVariable",disabled:!l}),this.renderNumberField({name:"Offset Left",id:"offsetLeft",min:s,max:o,disabled:!l}),this.renderObjectSelector({name:"Offset Left Variable",id:"offsetLeftVariable",disabled:!l}),this.renderNumberField({name:"Y",id:"y",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Y Variable",id:"yVariable",disabled:!l}),this.renderNumberField({name:"Offset Top",id:"offsetTop",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Offset Top Variable",id:"offsetTopVariable",disabled:!l}),this.renderNumberField({name:"Width",id:"width",min:s,max:o,disabled:!l}),this.renderObjectSelector({name:"Width Variable",id:"widthVariable",disabled:!l}),this.renderNumberField({name:"Height",id:"height",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Height Variable",id:"heightVariable",disabled:!l}),this.renderTextField({name:"Color",id:"color",disabled:!l}),this.renderObjectSelector({name:"Color Variable",id:"colorVariable",disabled:!l}),this.renderSelection({name:"Line Style",id:"lineStyle",options:["solid","dotted","dashed"],disabled:!l})]})})}}]),n}(s.Component),xt=Object(v.c)((function(e){return{configuration:e.app.configuration,myPermissions:e.app.myPermissions}}),(function(e){return{setSaveFlag:function(t){return e(Object(ee.eb)(t))}}}))(Object(k.a)((function(){return{header:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:30},input:{height:37,fontSize:"1.4rem"},label:{fontSize:"1.4rem",transform:"translate(14px, 11px) scale(1)"}}}))(kt)),It=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).setSelection=function(t){e.props.onClose(t)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.open,i=t.title,r=t.configuration,a=t.inspectionId;if(r&&a){var s=r.getObjectSelectorItemsForInspection(a).tree;s=r.filterArrayValuesFromTree(s);var o=[],c=r.getInspectionName(a);return o.push("Inspections.".concat(c)),o.push("Inspections".concat(c)),o.push(c),Object(C.jsx)(R.a,{isInView:!0,isPopup:!0,title:i,onClose:function(){return e.props.onClose()},open:n,children:Object(C.jsx)("div",{className:"objectselector-in-dialog-wrapper",children:Object(C.jsx)(E,{singleSelect:!0,data:s,onChange:function(t){return e.setSelection(t)},filterIgnore:o})})})}}}]),n}(s.Component);It.defaultProps={open:!1,title:""};var Vt=Object(v.c)((function(e){try{return{configuration:e.app.configuration}}catch(t){return{}}}))(It),Ct=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={currentOverlay:void 0,isObjectSelectorOpen:!1,variableName:"Variables",variableId:"",selectedVariables:[]},e.setInitialOverlay=function(t){!e.state.currentOverlay&&t&&t.length>0&&e.setState({currentOverlay:t[0]})},e.setAllOverlaysActive=function(t){try{var n=e.props.overlays.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{isActive:t})}));e.props.setSharedStateData("overlays",n),e.props.setSaveFlag(!0)}catch(i){}},e.addNewOverlay=function(){var t=e.props.overlays,n={color:"#ebfc02",height:100,id:Math.floor(1e4*Math.random()),isActive:!0,label:"Overlay",lineStyle:"solid",width:100,x:10,y:20,offsetLeft:null,offsetTop:null};try{e.props.setSharedStateData("overlays",[].concat(Object(F.a)(t),[n])),e.setState({currentOverlay:n})}catch(i){}},e.deleteCurrentOverlay=function(){if(e.state.currentOverlay)try{var t=e.props.overlays,n=t.filter((function(t){return t.id!==e.state.currentOverlay.id}));e.props.setSharedStateData("overlays",n);var i=e.getNeighborOverlayId(e.state.currentOverlay.id,t);e.setState({currentOverlay:t.filter((function(e){return e.id===i}))[0]})}catch(r){}},e.getNeighborOverlayId=function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e){if(t[n-1])return t[n-1].id;if(t[n+1])return t[n+1].id}return-1},e.updateCurrentOverlay=function(t){e.setState({currentOverlay:t})},e.updateOverlayList=function(t){e.props.setSharedStateData("overlays",t),e.props.setSaveFlag(!0)},e.renderPlaceholder=function(){return Object(C.jsx)("div",{className:"parameter-view-overlay-placeholder",children:"Please select a source for this parameter view."})},e.setVariableSelection=function(t){if(t){var n=e.props.overlays,i=e.state,s=i.currentOverlay,o=i.variableId,c=i.selectedVariables,u=Object(a.a)(Object(a.a)({},s),{},Object(r.a)({},o,t));t&&!c.includes(t)&&c.push(t);var l=We(u,n);e.props.setSharedStateData("overlays",l),e.setState({isObjectSelectorOpen:!1,selectedVariables:c}),e.props.setSaveFlag(!0)}else e.setState({isObjectSelectorOpen:!1})},e.saveChangeToOverlays=function(t,n){var i=e.props.overlays,r=Object(a.a)(Object(a.a)({},n),t),s=We(r,i);e.props.setSharedStateData("overlays",s)},e}return Object(d.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.overlays&&this.state.currentOverlay){var n=e.overlays.filter((function(e){return e.id===t.state.currentOverlay.id}))[0];this.setState({currentOverlay:n})}e.overlays&&this.setInitialOverlay(e.overlays)}},{key:"render",value:function(){var e=this,t=this.props,n=t.overlayActions,i=t.overlays,r=t.inspectionId,a=t.id,s=t.imageDimensions,o=this.state.currentOverlay;return i?Object(C.jsxs)("div",{className:"parameter-view-overlay-wrapper",children:[Object(C.jsxs)("div",{className:"parameter-view-overlay-table-wrapper",children:[Object(C.jsx)(qe,{overlays:i,currentOverlay:o,updateCurrentOverlay:this.updateCurrentOverlay,updateOverlayList:this.updateOverlayList,canSelectRow:!0,onSelectAll:function(t){return e.setAllOverlaysActive(t)}}),Object(C.jsx)(g.a,{actions:n(this)})]}),Object(C.jsx)(xt,{inspectionId:r,viewId:a,currentOverlay:o,imageDimensions:s,onChange:function(t){return e.saveChangeToOverlays(t,o)},openSelection:function(t,n){e.setState({isObjectSelectorOpen:!0,variableName:t,variableId:n})}}),Object(C.jsx)(Vt,{title:this.state.variableName,onClose:function(t){return e.setVariableSelection(t)},open:this.state.isObjectSelectorOpen,inspectionId:r})]}):this.renderPlaceholder()}}]),n}(s.Component),Nt={overlayActions:function(e){var t=[],n=Object(A.p)(e.props.myPermissions);return n&&t.push({intlId:"parameterview.overlay.add",iconUrl:ht.a,onClickHandler:function(){e.props.setSaveFlag(!0),e.addNewOverlay()}}),n&&t.push({intlId:"parameterview.overlay.delete",iconUrl:rt,onClickHandler:function(){e.props.setSaveFlag(!0),e.deleteCurrentOverlay()}}),t}};w.a.array,j.c,w.a.object;Ct.defaultProps=Nt;var Tt=Object(v.c)((function(e,t){try{var n=t.inspectionId,i=e.inspections[n].sharedState.editingViewId,r=e.inspections[n].sharedState.views[i].overlays,a=e.inspections[n].views[i].imageDimensions,s=e.app.myPermissions;return{overlays:r,proxy:e.app.proxy,imageDimensions:a,myPermissions:s}}catch(o){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(ee.v)(n,i,{},{})),{setSharedStateData:function(t,i){return e(Object(ee.fb)(n,t,i))},setSaveFlag:function(t){return e(Object(ee.eb)(t))}}}))(Ct),Et=(n(818),function(e){var t=e.children;return Object(C.jsx)("div",{className:"container",children:t})}),Pt=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).doSomething=function(){},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parameter,n=e.myPermissions;return Object(A.z)(n)||Object(A.p)(n)?Object(C.jsxs)("div",{className:"parameter-view-wrapper",children:[Object(C.jsx)(Et,{children:t.component||Object(C.jsx)(Tt,{inspectionId:this.props.inspectionId,id:this.props.id})}),Object(C.jsx)(g.a,{isViewAction:!0,actions:[]})]}):Object(C.jsx)("div",{})}}]),n}(s.Component);Pt.defaultProps={};var At=Object(f.c)(Object(v.c)((function(e){return{parameter:e.toolSet.parameter,myPermissions:e.app.myPermissions}}))(Pt)),Mt=(n(819),n(820),function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.images,n=e.onImageClick;return Object(C.jsx)("div",{className:"film-strip-container",children:t.map((function(e){return Object(C.jsx)("button",{className:"reject-image",onClick:function(){n(e.product)},children:Object(C.jsx)("img",{src:e.combinedSrc,alt:""})},e.product.trigger)}))})}}]),n}(s.Component)),Dt=n(177),Rt=n(178),Lt=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).onProduct=function(e){var t=e.product;if(r.state.images.find((function(e){return e.product===t})))t.release();else{r.updateImageDimensions(t);var n=[{combinedSrc:r.drawImageAndOverlaysToCanvas({drawTarget:r.canvas,product:t}),product:t}].concat(Object(F.a)(r.state.images));n.sort((function(e,t){return t.product.trigger-e.product.trigger}));var i=[];n.length>r.imageStripLength&&(i=n.splice(r.imageStripLength).map((function(e){return e.product}))),r.setState({images:n}),r.releaseProducts(i)}},r.updateImageDimensions=function(e){if(e)if(e.isReject){var t=r.props.sourceImage,n=e.getImage(t).image;if(n){var i=n.height,a=n.width;r.state.imageWidth&&r.state.imageHeigt&&r.state.imageWidth===a&&r.state.imageHeigt===i||r.setState({imageHeigt:i,imageWidth:a})}else P.a.error("Product does not contain an Image.")}else P.a.error("updateImageDimensions requires product that is a reject.");else P.a.error("updateImageDimensions requires product but did not receive.")},r.setSourceImageIndex=function(e){e?r.props.setSharedStateData("sourceImage",e):P.a.error("OjectSelector did not return a valid id.")},r.drawImageAndOverlaysToCanvas=function(e){var t=e.drawTarget,n=e.product;if(t&&n){var i=r.props.sourceImage,a=n.getImage(i);if(a&&a.domImage){var s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.drawImage(a.domImage,0,0);var o=Le(n,i),c={minX:0,minY:0,maxX:a.width||0,maxY:a.height||0};return ye({drawTarget:t,overlays:o,zoomFactor:1,boundingCoordinates:c,width:a.width,height:a.height}),r.canvas.toDataURL("image/bmp")}P.a.warn("ImageStrip expected an image onReject but didn't receive")}else P.a.error("drawImageAndOverlaysToCanvas expects drawTarget and product but did not receive.")},r.renderObjectSelector=function(){var e=r.props,t=e.configuration,n=e.inspectionId;if(t&&n){var i=t.getObjectSelectorImagesForInspection(n),a=i?i.tree:null;return Object(C.jsx)("div",{style:{width:"100%",overflow:"auto"},children:Object(C.jsx)(E,{singleSelect:!0,data:a,onChange:function(e,t){r.setSourceImageIndex(e),r.props.setViewData("windowName",t),r.props.setSaveFlag(!0)}})})}},r.setTitleFromConfig=function(){var e=r.props,t=e.sourceImage,n=e.inspectionId,i=e.configuration;if(i){var a=i.getValueNameForId(n,t);a&&r.props.setViewData("windowName",a)}},r.showPause=function(){var e=r.props,t=e.pausedInspections,n=e.inspectionId,i=!1;return n&&(t.includes(n)||(i=!0)),i},r.renderFilmStrip=function(){var e=r.props,t=e.inspectionId,n=e.myPermissions,i=r.state,a=i.imageWidth,s=i.imageHeigt,o=[];return Object(A.n)(n)&&o.push({type:j.b,id:t,intlId:"imageStripView.play",iconUrl:Dt.a,onClickHandler:function(){r.resumeStream()},intlIdAlternative:"imageStripView.pause",iconUrlAlternative:Rt.a,onClickHandlerAlternative:function(){r.pauseStream()},showAlternative:r.showPause()}),Object(C.jsx)("div",{className:"reject-view-container",children:Object(C.jsxs)(Et,{children:[Object(C.jsx)("canvas",{style:{display:"none"},width:a,height:s,className:"imageCanvas",ref:function(e){r.canvas=e}}),r.state.images&&r.state.images.length>0&&Object(C.jsx)(Mt,{onImageClick:function(e){return r.selectProduct(e)},images:r.state.images}),Object(C.jsx)(g.a,{isViewAction:!0,actions:o})]})})},r.state={images:[],data:null},r.productSub=null,r.imageStripLength=10,r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.subscribeToProductStream(this.props.sourceImage))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.sourceImage&&e.sourceImage!==this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.subscribeToProductStream(e.sourceImage)),void 0!==this.props.isBrowserWindowVisible&&this.props.isBrowserWindowVisible!==e.isBrowserWindowVisible&&(e.isBrowserWindowVisible?this.subscribeToProductStream(e.sourceImage):this.unsubscribeFromProductStream())}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){var e=(this.state.images||[]).map((function(e){return e.product}));this.releaseProducts(e),this.unsubscribeFromProductStream()}},{key:"subscribeToProductStream",value:function(e){if(!this.productSub){var t={inspectionId:this.props.inspectionId,startAtTriggerCount:-1*this.imageStripLength,rejectImageIds:[e],allowOldTrigger:!0,manualRelease:!0};this.productSub=this.props.proxy.subscribeToProductStream(t,this.onProduct)}}},{key:"unsubscribeFromProductStream",value:function(){this.productSub&&(this.props.proxy.unsubscribeFromProductStream(this.productSub),this.productSub=null),(this.state.images||[]).forEach((function(e){var t;null===(t=e.product)||void 0===t||t.release()})),this.setState({images:[]})}},{key:"releaseProducts",value:function(e){(e||[]).forEach((function(e){return e.release()}))}},{key:"selectProduct",value:function(e){this.pauseStream(),this.props.proxy.replayProduct(this.props.inspectionId,e)}},{key:"resumeStream",value:function(){this.props.proxy.resumeRejectStream(this.props.inspectionId),this.props.setSaveFlag(!0)}},{key:"pauseStream",value:function(){this.props.proxy.pauseRejectStream(this.props.inspectionId),this.props.setSaveFlag(!0)}},{key:"render",value:function(){var e=this.props,t=e.sourceImage,n=e.myPermissions;this.setTitleFromConfig();var i=Object(A.l)(n);return Object(A.u)(n)||i?Object(C.jsx)("div",{className:"reject-view-container",children:!t&&i?this.renderObjectSelector():this.renderFilmStrip()}):Object(C.jsx)("div",{})}}]),n}(s.Component);Lt.defaultProps={imageData:[],proxy:void 0,configuration:null};var _t={},Ft={sourceImage:0},Ut=Object(v.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{proxy:e.app.proxy,configuration:e.app.configuration,sourceImage:Number(e.inspections[n].sharedState.views[i].sourceImage),pausedInspections:e.app.pausedInspections,myPermissions:e.app.myPermissions,isBrowserWindowVisible:e.app.isBrowserWindowVisible}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(ee.v)(n,i,_t,Ft)),{setViewData:function(t,r){return e(Object(ee.hb)(n,i,t,r))},setSharedStateData:function(t,r){return e(Object(ee.fb)(n,t,r,i))},setSaveFlag:function(t){return e(Object(ee.eb)(t))}}}))(Lt),Wt=function(e){return e.reduce((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t.id,t))}),{})},Ht=[{title:"No. of Cameras",intlId:"noOfCameras",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]},{title:"No. of Triggers",intlId:"noOfTriggers",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]},{title:"No. of MonitorLists",intlId:"noOfMonitors",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]}],qt="CONFIG_VIEW",zt="TOOLSET_VIEW",Bt="IMAGE_VIEW",Gt="PARAMETER_VIEW",Kt="LIST_VIEW",Yt="IMAGE_STRIP_VIEW",Xt="DEFAULT_RECIPE_VIEWSET",Jt="DEFAULT_VIEWSET",Zt="Initial",Qt=function e(){var t=this;Object(i.a)(this,e),this.getViewSet=function(e){switch(e){case Jt:return t.buildEmptyViewSet();case"DEFAULT_EDIT_VIEWSET":case Xt:default:return null}},this.createViewInstance=function(e,n){var i=t.getViewById(e.viewComponentClassId);if(!i)return!1;var r="".concat(e.viewComponentClassId,"_").concat(e.id,"_").concat(e.inspectionId),o=Object(a.a)(Object(a.a)({},i.passedProps),n);switch(i.viewComponentClassId){case qt:return Object(s.createElement)(tt,Object(a.a)(Object(a.a)({},o),{},{key:r}));case zt:return Object(s.createElement)(ft,Object(a.a)(Object(a.a)({},o),{},{key:r}));case Bt:return Object(s.createElement)(Ke,Object(a.a)(Object(a.a)({},o),{},{key:r}));case Gt:return Object(s.createElement)(At,Object(a.a)(Object(a.a)({},o),{},{key:r}));case Yt:return Object(s.createElement)(Ut,Object(a.a)(Object(a.a)({},o),{},{key:r}));case Kt:return Object(s.createElement)(re,Object(a.a)(Object(a.a)({},o),{},{key:r}));default:return Object(C.jsxs)("div",{children:["Unknown Component ",i.viewComponentClassId]})}},this.getViewById=function(e){switch(e){case qt:return{id:u.a.generate(),titleId:"recipeViewInspectionTemplate",viewComponentClassId:qt,passedProps:{configurations:Ht}};case zt:return{id:u.a.generate(),titleId:"toolsetView.inspectionTemplate",viewComponentClassId:zt};case Bt:return{id:u.a.generate(),titleId:"imageView.inspectionTemplate",viewComponentClassId:Bt};case Gt:return{id:u.a.generate(),titleId:"parameterView.inspectionTemplate",viewComponentClassId:Gt};case Yt:return{id:u.a.generate(),titleId:"imageStripView.inspectionTemplate",viewComponentClassId:Yt};case Kt:return{id:u.a.generate(),titleId:"listView.inspectionTemplate",viewComponentClassId:Kt};default:return null}},this.buildRecipeViewSet=function(){var e=[t.getViewById(Bt),t.getViewById(Kt),t.getViewById(Yt)];return{id:Xt,viewSet:Wt(e),initialValue:{first:{direction:"row",splitPercentage:60,first:e[0].id,second:e[1].id},direction:"column",splitPercentage:75,second:e[2].id}}},this.buildEmptyViewSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=u.a.generate();return{id:e,name:e,viewSet:Object(r.a)({},t,{}),initialValue:t}},this.buildEditViewSet=function(){var e=[t.getViewById(zt),t.getViewById(Bt),t.getViewById(Gt)];return{id:Jt,viewSet:Wt(e),initialValue:{direction:"row",first:e[0].id,splitPercentage:30,second:{direction:"column",splitPercentage:45,first:e[1].id,second:e[2].id}}}},this.createNewViewSet=function(){var e=[{id:u.a.generate(),viewComponentClassId:zt,titleId:"toolsetViewInspectionTemplate"}];return{id:"NEW_VIEWSET",viewSet:Wt(e),initialValue:e[0].id}}}},37:function(e,t,n){"use strict";var i=n.p+"static/media/run.eb40f6de.svg",r=n(101),a=n.p+"static/media/stop.44c5645f.svg",s=n.p+"static/media/test.47d9c7ad.svg",o=n.p+"static/media/regression.f027695f.svg",c={unknownMode:{id:"UNKNOWN_MODE",iconSrc:n(227).a,text:""},runMode:{id:"RUN_MODE",iconSrc:i,text:""},stopMode:{id:"STOP_MODE",iconSrc:a,text:""},regressionMode:{id:"REGRESSION_MODE",iconSrc:o,text:""},testMode:{id:"TEST_MODE",iconSrc:s,text:""},editMode:{id:"EDIT_MODE",iconSrc:r.a,text:""}};t.a=c},43:function(e,t,n){"use strict";n(0);var i=n(38),r=n.n(i),a=n(148),s=(n(672),n(51)),o=n(7),c=(n(676),n(1)),u=function(e){var t=e.id,n=e.intl,i=e.intlId,r=e.iconUrl,a=e.onClickHandler,u=e.intlIdAlternative,l=e.iconUrlAlternative,d=e.onClickHandlerAlternative,p=e.showAlternative;n&&i&&r&&a&&u&&l&&d||o.a.error("ToggleButton component did not receive required parameters");return p?Object(c.jsx)(s.a,{tooltip:n.messages["".concat(u)],onClick:function(){d()},iconUrl:l},t):Object(c.jsx)(s.a,{tooltip:n.messages["".concat(i)],onClick:function(){a()},iconUrl:r},i)},l=n(49),d=function(e){var t=e.actions,n=e.intl,i=e.isViewAction;return Object(c.jsx)("div",{className:"action-bar-wrapper",style:{position:i?"absolute":"relative"},children:t&&t.map((function(e){return e&&e.type===l.a?Object(c.jsx)("div",{className:"action-bar-separator",children:Object(c.jsx)("div",{className:"separator"})},"separator_".concat(r.a.generate())):e&&e.type===l.b?Object(c.jsx)(u,{id:e.id,intl:n,intlId:e.intlId,iconUrl:e.iconUrl,onClickHandler:e.onClickHandler,intlIdAlternative:e.intlIdAlternative,iconUrlAlternative:e.iconUrlAlternative,onClickHandlerAlternative:e.onClickHandlerAlternative,showAlternative:e.showAlternative},e.id):Object(c.jsx)(s.a,{tooltip:n.messages["".concat(e.intlId)],onClick:function(){e.onClickHandler()},iconUrl:e.iconUrl},e.intlId)}))})};d.defaultProps={isViewAction:!1};t.a=Object(a.c)(d)},438:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var i=n(6),r=n.n(i),a=n(20),s=n(8),o=n(10),c=n(439),u=n(7),l=n(5),d=function t(n,i,d){var p=this;Object(s.a)(this,t),this.connect=function(){p.disconnect(),p.authToken?p.websocketConnector=new c.a(p.onConnect,p.onMessage,p.onClose,p.onError,p.url,p.authToken):u.a.info("[ProtobufConnector] cannot connect yet. no auth token available")},this.connectWithToken=function(e){p.authToken=e,p.connect()},this.disconnect=function(){p.websocketConnector&&(p.websocketConnector.closeSocket(),p.websocketConnector=null)},this.onMessage=function(e){p.protobuf.readMessage(e)},this.onConnect=function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p.connectionLost){t.next=4;break}return p.connectionLost=!1,e((function(){window.location.href="".concat(window.location.origin,"/")})),t.abrupt("return");case 4:p.dispatch(Object(l.bb)(p.protobuf,n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onClose=function(){p.connectionLost=!0,p.dispatch(Object(l.bb)(p.protobuf,null))},this.onError=function(e){console.error("Websocket error: ",e)},this.url=n,this.dispatch=i,this.protobuf=new o.a,this.websocketConnector=null,this.connectionLost=!1,this.authToken=d,this.connect()}}).call(this,n(182).setImmediate)},439:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(8),r=n(9),a=n(440),s=function(){function e(t,n,r,s,o,c){var u=this;Object(i.a)(this,e),this.onClose=r;var l=c?["access_token",c]:void 0;this.socket=new a.a(o,l,{debug:!1}),this.socket.binaryType="arraybuffer",this.socket.onopen=function(){t&&t(u.socket)},this.socket.onmessage=function(e){return n&&n(e.data,u.socket)},this.socket.onerror=function(e){return s&&s(e)},this.socket.onclose=function(){return r&&r(u.socket)},this.socket.onconnecting=function(e){return console.log("CONNECTING!",e)}}return Object(r.a)(e,[{key:"closeSocket",value:function(){this.socket&&this.socket.close()}}]),e}()},457:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));var i=n(3),r=n(6),a=n.n(r),s=n(20),o=n(8),c=n(9),u=(n(0),n(93)),l=n(231),d=n.n(l),p=n(7),b=n(37),v=n(18),f=n(458),h=n(57),m=n(459),g=n(232),j=n(179),O=n(469),w=n(10),y=n(470),S=n(240),k=n(5),x=n(1),I=function(){function t(e){var n=this;Object(o.a)(this,t),this.sendLogsToServer=function(){var e=Object(s.a)(a.a.mark((function e(t){var i,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.map((function(e){return n.mapLogEntry(e)})),r=w.a.SvPb.StoreClientLogsRequest.create({client:"WebApp",logs:i}),e.prev=2,!n.protobuf){e.next=6;break}return e.next=6,n.protobuf.request(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Error while sending logs to server:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this.loadProject=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.loading){e.next=3;break}return n.loadProjectRequested=!0,e.abrupt("return");case 3:return n.loading=!0,n.showLoadingSplashScreen(),e.prev=5,e.next=8,n.getMyPermissions();case 8:return e.next=10,n.discoverConfiguration();case 10:return e.next=12,n.discoverDeviceMode();case 12:if(n.subscribeToNotificationAndMessageStreams(),!n.currentConfiguration){e.next=19;break}return n.dispatch(Object(k.db)(!0)),e.next=17,n.loadClientChunk();case 17:e.next=22;break;case 19:return e.next=21,n.resetClientChunk();case 21:n.dispatch(Object(k.db)(!1));case 22:n.hideLoadingSplashScreen(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),n.showLoadingErrorOverlay(e.t0);case 28:n.loading=!1,n.loadProjectRequested&&(n.loadProjectRequested=!1,n.loadProject());case 30:case"end":return e.stop()}}),e,null,[[5,25]])}))),this.discoverDeviceMode=Object(s.a)(a.a.mark((function e(){var t,i,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,i=null,e.prev=2,r=w.a.SvPb.GetDeviceModeRequest.create({}),e.next=6,n.protobuf.request(r);case 6:s=e.sent,i=s.mode,t=Object(S.b)(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),p.a.error({err:e.t0},"Error while fetching mode");case 14:if(null!==t&&n.mode!==t){e.next=16;break}return e.abrupt("return");case 16:if(null!==n.mode){e.next=19;break}return n.mode=t,e.abrupt("return");case 19:return p.a.info({oldMode:n.mode,newMode:t,newModeName:i},"Discovered new mode"),n.mode=t,n.dispatch(Object(k.f)(t)),e.abrupt("return",n.dispatch(Object(k.N)(t)));case 23:case"end":return e.stop()}}),e,null,[[2,11]])}))),this.dispatch=e,this.currentConfiguration=null,this.loading=!1,this.mode=null,this.protobuf=null,this.protobufInitialized=!1,this.observerNotificationSubscription=null,this.observerMessageSubscription=null,this.lockAcquisitionSubscription=null,this.gatewayNotificationSubscription=null,this.gatewayMessageSubscription=null,this.nextSubId=0,this.productHistoryManager=new O.a,this.subscriptionManager=new y.a({productHistoryManager:this.productHistoryManager}),this.showConnectingSplashScreen()}return Object(c.a)(t,[{key:"setMode",value:function(e){this.onCurrentModeChanged(e)}},{key:"setProtobufStaticInitialized",value:function(){this.protobufInitialized=!0,this.onProtobufChangedImpl()}},{key:"setProtobuf",value:function(e){this.protobuf=e,this.subscriptionManager.setProtobuf(e),this.onProtobufChangedImpl()}},{key:"onProtobufChangedImpl",value:function(){var t=this;this.protobuf&&this.protobuf.isConnected()&&this.protobufInitialized?(this.hideConnectingSplashScreen(),e((function(){return t.loadProject()}))):this.showConnectingSplashScreen()}},{key:"mapLogEntry",value:function(e){return{severity:Object(S.a)(e.levelName),message:JSON.stringify(e)}}},{key:"showConnectingSplashScreen",value:function(){var t=this;e((function(){t.dispatch(Object(k.kb)({message:Object(x.jsx)("p",{children:"Connecting"})}))}))}},{key:"hideConnectingSplashScreen",value:function(){var t=this;e((function(){t.dispatch(Object(k.t)())}))}},{key:"showLoadingSplashScreen",value:function(){this.dispatch(Object(k.kb)({message:Object(x.jsx)("p",{children:"Loading Configuration"})}))}},{key:"showLoadingErrorOverlay",value:function(e){this.dispatch(Object(k.kb)({message:Object(x.jsxs)("p",{children:["Error while loading Configuration: ","".concat(e)]})}))}},{key:"hideLoadingSplashScreen",value:function(){this.dispatch(Object(k.t)())}},{key:"getConfigurationInfo",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.protobuf.request(w.a.SvPb.GetConfigurationInfoRequest.create());case 3:if(t=e.sent,0!==Object.keys(t).length){e.next=7;break}return p.a.warn("Empty response for GetConfigurationInfoRequest, configuration in SVO not loaded"),e.abrupt("return",null);case 7:return t.lastModified||(t=Object(i.a)(Object(i.a)({},t),{},{lastModified:t.loadedSince})),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0),p.a.error("GetConfigurationInfoRequest ERROR",e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"discoverConfiguration",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,i,r,s,o,c,u,l,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getConfigurationInfo();case 3:if((n=e.sent)&&n.loadedSince){e.next=7;break}return this.currentConfiguration=null,e.abrupt("return");case 7:return e.prev=7,e.next=10,JSON.parse(localStorage.getItem(h.c));case 10:t=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),p.a.error({err:e.t0},"Timestamp request failed");case 16:if(!n||!t||t.hash!==n.hash||Number(t.lastModified)!==n.lastModified){e.next=25;break}return e.next=19,j.a.loadFromCache(this.protobuf);case 19:i=e.sent,this.currentConfiguration=i,this.dispatch(Object(k.K)(i)),this.setUpProductHistories(i),e.next=29;break;case 25:return e.next=27,j.a.discover(this.protobuf);case 27:if(r=e.sent){for(this.currentConfiguration=r,s=d.a.compress(JSON.stringify(r,g.a)),o=Object(m.a)(s,1e6),c=[],u=0;u<o.length;u++)l=o[u],b="".concat(h.b).concat(u),localStorage.setItem(b,l),c.push(b);localStorage.setItem(h.a,c.join(",")),localStorage.setItem(h.c,JSON.stringify(n)),this.setUpProductHistories(r),this.dispatch(Object(k.K)(r)),this.dispatch(Object(k.r)())}else this.currentConfiguration=null;case 29:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onCurrentModeChanged",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,i,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mode=b.a.unknownMode.id,n=Object(S.c)(t),i=w.a.SvPb.SetDeviceModeRequest.create({mode:n}),r=null,e.prev=4,e.next=7,this.protobuf.request(i);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),p.a.error({err:e.t0},"Error while changing the mode"),e.abrupt("return");case 14:if(!r.hResult){e.next=17;break}return p.a.error({hResult:r.hResult},"Error while changing the mode"),e.abrupt("return");case 17:setTimeout(this.discoverDeviceMode,500);case 18:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadClientChunk",value:function(){return this.dispatch(Object(k.w)(this.protobuf))}},{key:"resetClientChunk",value:function(){return this.dispatch(Object(k.E)(this.protobuf))}},{key:"subscribeToNotificationAndMessageStreams",value:function(){this.subscribeToObserverNotificationStream(),this.subscribeToObserverMessageStream(),this.subscribeToGatewayNotificationStream(),this.subscribeToGatewayMessageStream()}},{key:"subscribeToObserverNotificationStream",value:function(){var e=this;this.unsubscribeFromObserverNotificationStream();var t=w.a.SvPb.GetNotificationStreamRequest.create({});this.observerNotificationSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onObserverNotification(t)},error:function(t){return e.onObserverNotificationError(t)},complete:function(){return p.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromObserverNotificationStream",value:function(){this.observerNotificationSubscription&&this.observerNotificationSubscription.unsubscribe()}},{key:"onObserverNotification",value:function(e){var t,n,i=e.type,r=e.parameter;switch(i){case w.a.SvPb.NotifyType.currentMode:var a=this.getVariantValue(r);p.a.debug({mode:a},"Notification currentMode"),this.discoverDeviceMode();break;case w.a.SvPb.NotifyType.lastModified:var s=1e3*this.getVariantValue(r);p.a.debug({timestamp:new Date(s)},"Notification lastModified"),this.dispatch(Object(k.h)()),this.loadProject();break;case w.a.SvPb.NotifyType.configLoaded:t=this.getVariantValue(r),n=j.a.extractConfigNameFromFileName(t),p.a.debug({fileName:t,configName:n},"Notification configLoaded"),this.dispatch(Object(k.g)(t)),this.loadProject();break;case w.a.SvPb.NotifyType.configUnloaded:t=this.getVariantValue(r),n=j.a.extractConfigNameFromFileName(t),p.a.debug({fileName:t,configName:n},"Notification configUnloaded"),this.dispatch(Object(k.i)(t)),this.loadProject();break;default:p.a.warn({type:i,parameter:r},"Unknown notification type")}}},{key:"getVariantValue",value:function(e){return e&&e[e.data]}},{key:"formatMessageNotification",value:function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(u.a,{id:"notifications.checkSvimOutput"}),e&&Object(x.jsxs)("div",{children:[t?"(".concat(t,")"):" "," ",e]})]})}},{key:"onObserverNotificationError",value:function(e){p.a.error({err:e},"Notification error"),this.unsubscribeFromObserverNotificationStream()}},{key:"subscribeToObserverMessageStream",value:function(){var e=this;this.unsubscribeFromObserverMessageStream();var t=w.a.SvPb.GetMessageStreamRequest.create({});this.observerMessageSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onObserverMessage(t)},error:function(t){return e.onObserverMessageError(t)},complete:function(){return p.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromObserverMessageStream",value:function(){this.observerMessageSubscription&&this.observerMessageSubscription.unsubscribe()}},{key:"onObserverMessage",value:function(e){var t=this,n=e.type,r=e.messageList.messages;switch(p.a.debug(Object(i.a)({},e),"SVObserver message stream event"),n){case w.a.SvPb.MessageType.startMsgBox:if(!r||1!==r.length)return void p.a.warn({type:n,messages:r},"Expected exactly one message in the message event");var a=r[0],s=this.formatMessageNotification(a.messageText,a.messageCode);this.dispatch(Object(k.kb)({message:s}));break;case w.a.SvPb.MessageType.endMsgBox:this.dispatch(Object(k.t)());break;case w.a.SvPb.MessageType.msgLog:(r||[]).forEach((function(e){var n=e.messageCode,i=e.messageText;t.dispatch(Object(k.k)(i,n))}));break;default:p.a.warn({type:n},"Unknown message event type")}}},{key:"onObserverMessageError",value:function(e){p.a.error({err:e},"SVObserver message stream error"),this.unsubscribeFromObserverMessageStream()}},{key:"subscribeToLockAcquisitionStream",value:function(e){var t=this;this.unsubscribeFromLockAcquisitionStream();var n=w.a.SvPb.LockAcquisitionStreamRequest.create(e);this.lockAcquisitionSubscription=this.protobuf.stream(n).subscribe({next:function(e){return t.onLockAcquisition(e)},error:function(e){return t.onLockAcquisitionError(e)},complete:function(){return p.a.debug("Lock acquisition observable completed")}})}},{key:"unsubscribeFromLockAcquisitionStream",value:function(){this.lockAcquisitionSubscription&&this.lockAcquisitionSubscription.unsubscribe()}},{key:"onLockAcquisition",value:function(e){var t=e[e.message];switch(p.a.debug("message type: "+JSON.stringify(e,void 0,2)),e.message){case"lockAcquiredNotification":this.onLockAcquiredNotification(t);break;case"lockTakeoverNotification":this.onLockTakeoverNotification(t);break;case"lockReleasedNotification":this.onLockReleasedNotification(t);break;case"lockAlreadyLockedNotification":this.onLockAlreadyLockedNotification(t);break;default:p.a.warn({type:e.message},"Unknown lock acquisition notification type")}}},{key:"onLockAcquisitionError",value:function(e){if(p.a.error({err:e},"Lock acquisition error: "+JSON.stringify(e,void 0,2)),403===e.code)this.dispatch(Object(k.a)());else if(404===e.code)this.dispatch(Object(k.l)());else{var t={lockId:void 0,reason:"ExplicitRelease"};this.onLockReleasedNotification(t)}}},{key:"onLockAcquiredNotification",value:function(e){var t=e.lockId,n=e.description,i=e.user,r=e.host;this.dispatch(Object(k.T)(t,n,i,r))}},{key:"onLockTakeoverNotification",value:function(e){var t=e.takeoverId,n=e.message,i=e.user,r=e.host;this.dispatch(Object(k.X)(t,n,i,r))}},{key:"onLockReleasedNotification",value:function(e){var t=e.lockId,n=e.reason;this.dispatch(Object(k.W)(t,n))}},{key:"onLockAlreadyLockedNotification",value:function(e){var t=e.lockId,n=e.description,i=e.user,r=e.host;this.dispatch(Object(k.U)(t,n,i,r))}},{key:"onLockReset",value:function(){this.dispatch(Object(k.F)())}},{key:"onLockReacquired",value:function(){this.dispatch(Object(k.V)())}},{key:"passConfigLock",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.a.SvPb.LockTakeoverRequest.create(t),e.prev=1,e.next=4,this.protobuf.request(n);case 4:this.onLockReset(),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),404===e.t0.code?(this.dispatch(Object(k.m)()),this.onLockReacquired()):this.dispatch(Object(k.e)()),p.a.error({err:e.t0},"Error while perfroming config lock takeover"),e.abrupt("return");case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToGatewayNotificationStream",value:function(){var e=this;this.unsubscribeFromGatewayNotificationStream();var t=w.a.SvPb.GetGatewayNotificationStreamRequest.create({});this.gatewayNotificationSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onGatewayNotification(t)},error:function(t){return e.onGatewayNotificationError(t)},complete:function(){return p.a.debug("Gateway Notification observable completed")}})}},{key:"unsubscribeFromGatewayNotificationStream",value:function(){this.gatewayNotificationSubscription&&this.gatewayNotificationSubscription.unsubscribe()}},{key:"onGatewayNotification",value:function(e){var t=e[e.message];switch(e.message){case"rejectStreamPaused":var n=t.pausedInspectionIds;p.a.debug({pausedInspectionIds:n},"Notification rejectStreamPaused"),this.onPauseNotification(n);break;default:p.a.warn({type:e.message},"Unknown gateway notification type")}}},{key:"onGatewayNotificationError",value:function(e){p.a.error({err:e},"Gateway Notification error"),this.unsubscribeFromGatewayNotificationStream()}},{key:"subscribeToGatewayMessageStream",value:function(){var e=this;this.unsubscribeFromGatewayMessageStream();var t=w.a.SvPb.GetGatewayMessageStreamRequest.create({});this.GatewayMessageSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onGatewayMessage(t)},error:function(t){return e.onGatewayMessageError(t)},complete:function(){return p.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromGatewayMessageStream",value:function(){this.GatewayMessageSubscription&&this.GatewayMessageSubscription.unsubscribe()}},{key:"onGatewayMessage",value:function(e){var t=this,n=e.type,r=e.messageList.messages,a=void 0===r?[]:r;switch(p.a.debug(Object(i.a)({},e),"Gateway message stream event"),n){case w.a.SvPb.MessageType.startMsgBox:if(1!==a.length)return void p.a.warn({type:n,messages:a},"Expected exactly one message in the message event");var s=a[0],o=this.formatMessageNotification(s.messageText,s.messageCode);this.dispatch(Object(k.kb)({message:o}));break;case w.a.SvPb.MessageType.endMsgBox:this.dispatch(Object(k.t)());break;case w.a.SvPb.MessageType.msgLog:a.forEach((function(e){var n=e.messageCode,i=e.messageText;t.dispatch(Object(k.k)(i,n))}));break;default:p.a.warn({type:n},"Unknown message event type")}}},{key:"onGatewayMessageError",value:function(e){p.a.error({err:e},"Gateway message stream error"),this.unsubscribeFromGatewayMessageStream()}},{key:"subscribeToProductStream",value:function(e,t){var n=this._getNextSubId();return this.subscriptionManager.addSubscription(n,e,t),n}},{key:"unsubscribeFromProductStream",value:function(e){this.subscriptionManager.removeSubscription(e)}},{key:"_getNextSubId",value:function(){return"".concat(++this.nextSubId)}},{key:"setUpProductHistories",value:function(e){var t=e.getInspections();this.productHistoryManager.init(t)}},{key:"replayProduct",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchMissingProductData(t,n);case 2:this.subscriptionManager.replayProduct(t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchMissingProductData",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var i,r,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getMissingProductImages(t,n),r=this.getMissingProductValues(t,n),0!==i.length||0!==r.length){e.next=4;break}return e.abrupt("return");case 4:return s=w.a.SvPb.GetProductDataRequest.create({inspectionId:t,trigger:n.trigger,imageIds:i,valueIds:r,includeOverlays:!0}),e.prev=5,e.next=8,this.protobuf.request(s);case 8:return o=e.sent,e.next=11,n.addData({trigger:o.trigger,imageIds:i,images:o.images,overlays:o.overlays,valueIds:r,values:o.values});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),p.a.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMissingProductImages",value:function(e,t){return this.subscriptionManager.getSubscribedImages(e).filter((function(e){return void 0===t.getImage(e)}))}},{key:"getMissingProductValues",value:function(e,t){return this.subscriptionManager.getSubscribedValues(e).filter((function(e){return void 0===t.getValue(e)}))}},{key:"onPauseNotification",value:function(e){this.dispatch(Object(k.j)(e)),this.subscriptionManager.updatePausedInspections(e),this.dispatch(Object(k.ab)(e))}},{key:"pauseRejectStream",value:function(e){this.pauseRejectStreamImpl(!0,e)}},{key:"resumeRejectStream",value:function(e){this.pauseRejectStreamImpl(!1,e)}},{key:"pauseRejectStreamImpl",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.SetRejectStreamPauseStateRequest.create({inspectionId:n||void 0,pause:t}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),p.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMyPermissions",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,n=w.a.SvPb.GetMyPermissionsRequest.create(),e.next=5,this.protobuf.request(n);case 5:t=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),p.a.error("Cannot get my permissions, fall back to default permissions"),t=f.a;case 12:if(t&&t.permissions){e.next=15;break}return p.a.error("Cannot get my permissions"),e.abrupt("return",!1);case 15:if(i=new Set,Object(v.F)(t.permissions,i,""),this.dispatch(Object(k.Y)(i)),!Object(v.C)(i)&&!Object(v.s)(i)){e.next=21;break}return e.next=21,this.getGroupPermissions();case 21:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getGroupPermissions",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.SvPb.GetGroupDetailsRequest.create(),e.next=3,this.protobuf.request(t);case 3:if((n=e.sent)&&n.groupDetails){e.next=7;break}return p.a.error("Cannot get group permissions"),e.abrupt("return",!1);case 7:i=this.flattenPermissions(n.groupDetails),this.dispatch(Object(k.R)(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"flattenPermissions",value:function(e){var t=new Map;return(e||[]).forEach((function(e){var n=new Set;Object(v.F)(e.permissions,n,""),t.set(e.name,{groupPermissions:n,users:e.users})})),t}},{key:"setUserPermissions",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.a.SvPb.UpdateGroupPermissionsRequest.create({groupPermissions:t}),e.prev=1,!this.protobuf){e.next=7;break}return e.next=5,this.protobuf.request(n);case 5:return e.next=7,this.getGroupPermissions();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.a.error({e:e.t0},"Error while setting user permissions");case 12:p.a.info("Successfully saved user permissions");case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(182).setImmediate)},458:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={permissions:{webapp:{configuration:{save:!0},logs:{read:!0},viewset:{add:!0,read:!0,edit:!0,remove:!0},view:[{type:0,add:!0,read:!0,edit:!0,remove:!0}]},svobserver:{mode:{read:!0,edit:!0},inspectionstate:{read:!0,edit:!0},value:{read:!0,edit:!0},tool:{read:!0,edit:!0,add:!0,remove:!0},configuration:{read:!0,write:!0},notifications:{subscribe:!0},clientlogs:{store:!0},file:{read:!0,write:!0},machinestate:{set:!0},command:{execute:!0}},usermanagement:{userpermissions:{read:!1,edit:!1}}}}},459:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){for(var n=Math.ceil(e.length/t),i=new Array(n),r=0,a=0;r<n;++r,a+=t)i[r]=e.substr(a,t);return i}},461:function(e,t,n){"use strict";(function(e){var i=n(6),r=n.n(i),a=n(20),s=n(8),o=n(9),c=n(14),u=n(13),l=n(34),d=n(93),p=n(0),b=n(17),v=n(18),f=n(462),h=n(227),m=n(463),g=n(226),j=n(464),O=n(465),w=n(102),y=n(468),S=n(146),k=n(466),x=(n(868),n(1)),I=function(t){Object(c.a)(i,t);var n=Object(u.a)(i);function i(){var e;Object(s.a)(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).state={shortcutViewOpen:!1,isHelpViewOpen:!1,isAboutViewOpen:!1,gotoPermissions:!1},e}return Object(o.a)(i,[{key:"render",value:function(){var t=this,n=this.props,i=n.user,s=n.myPermissions,o=[{key:"help",caption:Object(x.jsx)(d.a,{id:"topNavigation.help"}),img:h.a,onClick:function(){t.setState({isHelpViewOpen:!0})}},{key:"shortcuthelp",caption:Object(x.jsx)(d.a,{id:"topNavigation.shortcut"}),img:m.a,onClick:function(){t.setState({shortcutViewOpen:!t.state.shortcutViewOpen})}},{key:"about",caption:Object(x.jsx)(d.a,{id:"topNavigation.about"}),img:g.a,onClick:function(){t.setState({isAboutViewOpen:!0})}},{key:"logout",caption:Object(x.jsx)(d.a,{id:"topNavigation.logout"}),img:j.a,onClick:function(){var t=Object(a.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(){return window.location.href="".concat(window.location.origin,"/logout")}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}];return(Object(v.C)(s)||Object(v.s)(s))&&(o.unshift({key:"permissions",caption:Object(x.jsx)(d.a,{id:"topNavigation.permissions"}),img:O.a,onClick:function(){t.setState({gotoPermissions:!0})}}),this.state.gotoPermissions)?Object(x.jsx)(l.a,{to:"/permissions"}):Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"flex",children:Object(x.jsx)(w.a,{buttonIcon:f.a,buttonCaption:i.fullname,menuItems:o,showBottomArrow:!0,onClose:function(){},open:!1})}),Object(x.jsxs)("div",{children:[Object(x.jsx)(S.a,{open:this.state.isHelpViewOpen,onClose:function(){return t.setState({isHelpViewOpen:!1})}}),Object(x.jsx)(y.a,{open:this.state.shortcutViewOpen,onClose:function(){return t.setState({shortcutViewOpen:!1})}}),Object(x.jsx)(k.a,{open:this.state.isAboutViewOpen,onClose:function(){return t.setState({isAboutViewOpen:!1})}})]})]})}}]),i}(p.Component);t.a=Object(b.c)((function(e){return{user:e.app.user,myPermissions:e.app.myPermissions}}),null)(Object(l.f)(I))}).call(this,n(182).setImmediate)},462:function(e,t,n){"use strict";t.a=n.p+"static/media/user.71fbff7c.svg"},463:function(e,t,n){"use strict";t.a=n.p+"static/media/shortcut-help.d16d3001.svg"},464:function(e,t,n){"use strict";t.a=n.p+"static/media/logout.34533d8e.svg"},465:function(e,t,n){"use strict";t.a=n.p+"static/media/permissions.ce764429.svg"},466:function(e,t,n){"use strict";var i=n(8),r=n(9),a=n(14),s=n(13),o=n(0),c=n(17),u=n(93),l=n(148),d=n(53),p=n(236),b=n(237),v=(n(866),n(1)),f=function(e){Object(a.a)(o,e);var t=Object(s.a)(o);function o(){return Object(i.a)(this,o),t.apply(this,arguments)}return Object(r.a)(o,[{key:"render",value:function(){var e=this.props,t=e.onClose,i=e.open,r=e.intl,a=e.configuration;if(!a)return Object(v.jsx)("div",{});var s=a.getSvObserverVersion(),o=a.getGatewayVersion(),c=a.getWebAppVersion(),l=n(867).name;return Object(v.jsxs)(d.a,{title:Object(v.jsx)(u.a,{id:"aboutView"}),onClose:t,open:i,children:[Object(v.jsx)("div",{className:"appname",children:l}),Object(v.jsxs)("div",{className:"table",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:r.messages["aboutView.applicationVersion"]}),Object(v.jsx)("div",{className:"cell",children:c})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:r.messages["aboutView.svoVersion"]}),Object(v.jsx)("div",{className:"cell",children:s})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:r.messages["aboutView.gatewayVersion"]}),Object(v.jsx)("div",{className:"cell",children:o})]})]}),Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)(p.a,{src:b.a,title:"logo"})})]})}}]),o}(o.Component);f.defaultProps={open:!1};t.a=Object(c.c)((function(e,t){try{return{configuration:e.app.configuration}}catch(n){return{}}}))(Object(l.c)(f))},468:function(e,t,n){"use strict";n(0);var i=n(93),r=[{title:"shortcutView.fullscreenTitle",description:"shortcutView.fullscreenDescription"},{title:"shortcutView.helpTitle",description:"shortcutView.helpDescription"}],a=n(53),s=n(38),o=n.n(s),c=(n(863),n(2)),u=n.n(c),l=(n(864),n(152)),d=n(1),p=(u.a.node.isRequired,u.a.node.isRequired,function(e){var t=e.title,n=e.description;return Object(d.jsxs)("li",{className:"shortcut-list-item",children:[Object(d.jsx)(l.a,{type:"h3",intlId:t}),Object(d.jsx)(i.a,{id:n})]})}),b=function(e){var t=e.shortcuts;return Object(d.jsx)("ul",{className:"shortcut-list",children:t.map((function(e){return Object(d.jsx)(p,{title:e.title,description:e.description},o.a.generate())}))})},v=function(e){var t=e.open,n=e.onClose;return Object(d.jsx)(a.a,{title:Object(d.jsx)(i.a,{id:"shortcutView.title"}),onClose:n,open:t,children:Object(d.jsx)(b,{shortcuts:r})})};v.defaultProps={open:!1};t.a=v},469:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(6),r=n.n(i),a=n(20),s=n(8),o=n(9),c=n(233),u=function(){function e(t){Object(s.a)(this,e),this.inspectionId=t,this.history=[]}return Object(o.a)(e,[{key:"addProductData",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,i,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.trigger,i=t.isReject,a=this.history.find((function(e){return e.trigger===n})),s=null,a?s=a.product:(s=new c.a({trigger:n,isReject:i,history:this}),this.history.push({trigger:n,product:s})),e.next=6,s.addData(t);case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"releaseProduct",value:function(e){var t=this.history.find((function(t){return t.trigger===e}));t&&(t.product.releaseImpl()&&(this.history=this.history.filter((function(e){return e!==t}))))}}]),e}(),l=function(){function e(){Object(s.a)(this,e),this.productHistories=new Map}return Object(o.a)(e,[{key:"init",value:function(e){var t=this;this.productHistories.clear(),(e||[]).forEach((function(e){var n=e.id,i=new u(n);t.productHistories.set(n,i)}))}},{key:"addProductData",value:function(){var e=Object(a.a)(r.a.mark((function e(t,n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.productHistories.get(t)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,i.addProductData(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},470:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(26),r=n(92),a=n(8),s=n(9),o=n(7),c=n(6),u=n.n(c),l=n(20),d=n(315),p=n.n(d),b=n(10),v=function(){function e(t){var n=t.inspectionId,i=t.productHistoryManager,r=t.protobuf,s=t.paused;Object(a.a)(this,e),this.inspectionId=n,this.productHistoryManager=i,this.protobuf=r,this.lastTrigger=-1,this.subsById=new Map,this.paused=s,this.selectedTrigger=null,this.baseSub=null}return Object(s.a)(e,[{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.selectedTrigger=null}},{key:"replayProduct",value:function(e){this.selectedTrigger=e.trigger,this.emitProductToAllSubscriptions(e)}},{key:"addSubscription",value:function(e,t,n){var i={id:e,desc:t,cb:n};this.subsById.set(e,i);var r=t.inspectionId;if(this.inspectionId!==r)throw new Error("Insection id does not match");this.resubscribeToStream()}},{key:"removeSubscription",value:function(e){var t=this.subsById.get(e);t?(this.swapLastProduct(t,null),this.subsById.delete(e),this.resubscribeToStream()):o.a.warn({id:e},"Unable to unsubscribe listener: unknown id")}},{key:"isEmpty",value:function(){return 0===this.subsById.size}},{key:"getSubscribedImages",value:function(){return this.uniqueIds("imageIds")}},{key:"getSubscribedValues",value:function(){return this.uniqueIds("valueIds")}},{key:"setProtobuf",value:function(e){this.protobuf=e}},{key:"resubscribeToStream",value:function(){this.unsubscribeFromStream(),this.isEmpty()||this.subscribeToStream()}},{key:"subscribeToStream",value:function(){var e=this,t=this.buildReqParams(),n=b.a.SvPb.GetProductStreamRequest.create(t);this.baseSub=this.protobuf.stream(n).subscribe({next:function(t){return e.onStreamEvent(n,t)},error:function(t){return e.onStreamError(t)},complete:function(){return o.a.debug("Product observable completed")}})}},{key:"buildReqParams",value:function(){return{inspectionId:this.inspectionId,startAtTriggerCount:this.getStartAtTriggerCount(),includeFailStatusValues:!0,valueIds:this.uniqueIds("valueIds"),imageIds:this.uniqueIds("imageIds"),rejectValueIds:this.uniqueIds("rejectValueIds"),rejectImageIds:this.uniqueIds("rejectImageIds"),rejectsOnly:this.isRejectsOnly(),imageFormat:b.a.SvPb.ImageFormatEnum.bmp,includeOverlays:!0}}},{key:"getStartAtTriggerCount",value:function(){var e=0;return this.subsById.forEach((function(t){!isNaN(t.desc.startAtTriggerCount)&&t.desc.startAtTriggerCount<e&&(e=t.desc.startAtTriggerCount)})),-1===e&&this.trigger>0?this.trigger:e}},{key:"isRejectsOnly",value:function(){var e=!0;return this.subsById.forEach((function(t){t.desc.rejectsOnly||(e=!1)})),e}},{key:"uniqueIds",value:function(e){var t=new Set;return this.subsById.forEach((function(n){p()(n.desc[e],(function(e){return t.add(e)}))})),Array.from(t)}},{key:"unsubscribeFromStream",value:function(){this.baseSub&&this.baseSub.unsubscribe&&this.baseSub.unsubscribe(),this.baseSub=null}},{key:"onStreamEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var i,r,a,s,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.trigger,r=n.isReject,a=this.gatherImages(t,n),s=this.gatherValues(t,n),o={trigger:i,isReject:r,images:a,values:s},e.next=6,this.productHistoryManager.addProductData(this.inspectionId,o);case 6:c=e.sent,this.lastTrigger=i,this.emitProductToAllSubscriptions(c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"gatherImages",value:function(e,t){var n=e.imageIds,i=e.rejectImageIds,r=t.isReject,a=t.images,s=t.rejectImages,o=t.overlays,c=t.rejectOverlays,u=new Map;return n.forEach((function(e,t){var n=(a||[])[t],i=(o||[])[t];n&&u.set(e,{id:e,image:n,overlays:i})})),r&&i.forEach((function(e,t){var n=(s||[])[t],i=(c||[])[t];n&&u.set(e,{id:e,image:n,overlays:i})})),u}},{key:"gatherValues",value:function(e,t){var n=e.valueIds,i=e.rejectValueIds,r=t.isReject,a=t.values,s=t.rejectValues,o=new Map;return n.forEach((function(e,t){var n=(a||[])[t];n&&o.set(e,{id:e,value:n})})),r&&i.forEach((function(e,t){var n=(s||[])[t];n&&o.set(e,{id:e,value:n})})),o}},{key:"emitProductToAllSubscriptions",value:function(e){var t=this;this.subsById.forEach((function(n){t.emitProductToSubscription(n,e)}))}},{key:"emitProductToSubscription",value:function(e,t){var n=this.hasAllRequestedDataForSubscription(t,e),i=this.isInterestedInNewPorduct(t,e);n&&i&&(t.lock(),e.cb({product:t}),this.swapLastProduct(e,t))}},{key:"hasAllRequestedDataForSubscription",value:function(e,t){return!!(t.desc.imageIds||t.desc.valueIds||e.isReject)&&(this.hasDataForSubscriptionInList(t.desc.valueIds,e.values)||this.hasDataForSubscriptionInList(t.desc.rejectValueIds,e.values)||this.hasDataForSubscriptionInList(t.desc.imageIds,e.images)||this.hasDataForSubscriptionInList(t.desc.rejectImageIds,e.images))}},{key:"isInterestedInNewPorduct",value:function(e,t){return this.selectedTrigger?this.selectedTrigger===e.trigger:!t.lastProduct||(t.desc.allowOldTrigger||t.lastProduct.trigger<e.trigger)}},{key:"hasDataForSubscriptionInList",value:function(e,t){for(var n=e||[],i=0;i<n.length;++i)if(!t.has(n[i]))return!1;return!0}},{key:"swapLastProduct",value:function(e,t){e.lastProduct&&!e.desc.manualRelease&&e.lastProduct.release(),e.lastProduct=t}},{key:"onStreamError",value:function(e){o.a.error({err:e},"Stream error")}}]),e}(),f=function(){function e(t){var n=t.productHistoryManager;Object(a.a)(this,e),this.productHistoryManager=n,this.inspectionIdBySubId=new Map,this.subsByInspectionId=new Map,this.pausedInspectionIds=[],this.protobuf=null}return Object(s.a)(e,[{key:"updatePausedInspections",value:function(e){this.pausedInspectionIds=e;var t,n=Object(r.a)(this.subsByInspectionId.entries());try{for(n.s();!(t=n.n()).done;){var a=Object(i.a)(t.value,2),s=a[0],o=a[1];e.includes(s)?o.pause():o.resume()}}catch(c){n.e(c)}finally{n.f()}}},{key:"replayProduct",value:function(e,t){var n=this.subsByInspectionId.get(e);n&&n.replayProduct(t)}},{key:"addSubscription",value:function(e,t,n){var i=t.inspectionId,r=t.startAtTriggerCount;this.inspectionIdBySubId.set(e,i);var a=this.pausedInspectionIds.includes(i),s=this.subsByInspectionId.get(i);s||(s=new v({inspectionId:i,startAtTriggerCount:r,productHistoryManager:this.productHistoryManager,paused:a,protobuf:this.protobuf}),this.subsByInspectionId.set(i,s)),s.addSubscription(e,t,n)}},{key:"removeSubscription",value:function(e){var t=this.inspectionIdBySubId.get(e);if(t){var n=this.subsByInspectionId.get(t);n?(n.removeSubscription(e),n.isEmpty()&&this.subsByInspectionId.delete(t)):o.a.warn({id:e},"Unable to unsubscribe listener: unknown inspection id")}else o.a.warn({id:e},"Unable to unsubscribe listener: unknown id")}},{key:"getSubscribedImages",value:function(e){var t=this.subsByInspectionId.get(e);return t?t.getSubscribedImages():[]}},{key:"getSubscribedValues",value:function(e){var t=this.subsByInspectionId.get(e);return t?t.getSubscribedValues():[]}},{key:"setProtobuf",value:function(e){this.protobuf=e,this.subsByInspectionId.forEach((function(t){return t.setProtobuf(e)}))}}]),e}()},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var i=n(2),r=n.n(i),a=r.a.arrayOf(r.a.shape({intlId:r.a.string,iconUrl:r.a.string})),s=r.a.oneOfType([a,r.a.func]),o="TOGGLE_BUTTON",c="SEPARATOR";t.c=s},5:function(e,t,n){"use strict";n.d(t,"S",(function(){return A})),n.d(t,"cb",(function(){return M})),n.d(t,"bb",(function(){return D})),n.d(t,"K",(function(){return R})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return U})),n.d(t,"f",(function(){return W})),n.d(t,"n",(function(){return H})),n.d(t,"g",(function(){return q})),n.d(t,"i",(function(){return z})),n.d(t,"h",(function(){return B})),n.d(t,"k",(function(){return G})),n.d(t,"j",(function(){return K})),n.d(t,"o",(function(){return Y})),n.d(t,"a",(function(){return X})),n.d(t,"l",(function(){return J})),n.d(t,"m",(function(){return Z})),n.d(t,"e",(function(){return Q})),n.d(t,"p",(function(){return $})),n.d(t,"x",(function(){return ee})),n.d(t,"kb",(function(){return te})),n.d(t,"t",(function(){return ne})),n.d(t,"ib",(function(){return ie})),n.d(t,"D",(function(){return re})),n.d(t,"lb",(function(){return ae})),n.d(t,"Z",(function(){return se})),n.d(t,"mb",(function(){return oe})),n.d(t,"u",(function(){return ce})),n.d(t,"I",(function(){return ue})),n.d(t,"gb",(function(){return le})),n.d(t,"O",(function(){return de})),n.d(t,"y",(function(){return pe})),n.d(t,"eb",(function(){return ve})),n.d(t,"G",(function(){return fe})),n.d(t,"w",(function(){return he})),n.d(t,"E",(function(){return me})),n.d(t,"db",(function(){return je})),n.d(t,"jb",(function(){return Oe})),n.d(t,"B",(function(){return we})),n.d(t,"r",(function(){return ye})),n.d(t,"C",(function(){return Se})),n.d(t,"q",(function(){return ke})),n.d(t,"L",(function(){return xe})),n.d(t,"M",(function(){return Ie})),n.d(t,"N",(function(){return Ve})),n.d(t,"ab",(function(){return Ce})),n.d(t,"v",(function(){return Ne})),n.d(t,"hb",(function(){return Te})),n.d(t,"H",(function(){return Ee})),n.d(t,"fb",(function(){return Pe})),n.d(t,"P",(function(){return Ae})),n.d(t,"nb",(function(){return De})),n.d(t,"Q",(function(){return Re})),n.d(t,"A",(function(){return Le})),n.d(t,"z",(function(){return _e})),n.d(t,"s",(function(){return Fe})),n.d(t,"R",(function(){return We})),n.d(t,"Y",(function(){return He})),n.d(t,"J",(function(){return qe})),n.d(t,"T",(function(){return ze})),n.d(t,"V",(function(){return Be})),n.d(t,"X",(function(){return Ge})),n.d(t,"W",(function(){return Ke})),n.d(t,"U",(function(){return Ye})),n.d(t,"F",(function(){return Xe}));var i=n(6),r=n.n(i),a=n(20),s=(n(0),n(93)),o=n(173),c=n(26),u=n(19),l=n(47),d=n.n(l),p=n(7),b=n(10),v=n(147),f=n.n(v),h=function(e){var t=f.a.util.utf8.length(e),n=new Uint8Array(t);return f.a.util.utf8.write(e,n,0),n},m=function(e){return f.a.util.utf8.read(e,0,e.length)},g=n(31),j=new g.h,O="WebApp.json",w="WebAppIds.json",y="5.0.0",S={VERSION:"version",SV_OBSERVER_VERSION:"svObserverVersion",GATEWAY_VERSION:"gatewayVersion",WEBAPP_VERSION:"webAppVersion",CREATED_VIEW_SETS:"createdViewSets",CURRENT_VIEW_SETS:"currentViewSet",INSPECTION_OVERLAYS:"inspectionOverlays",INSPECTION_LIST_SELECTION:"inspectionListSelection",INSPECTION_EDITING_VIEW_IDS:"inspectionEditingViewIds",INSPECTION_LIST_ALIASES:"inspectionListAliases",INSPECTION_IMAGE_VIEW_SETTINGS:"inspectionImageViewSettings"},k=function(e,t,n){return function(){var i=Object(a.a)(r.a.mark((function i(a){var s,o,c,l,d,v,f,m,g,j,w;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=n.setSaveOperationInProcess,c=n.setSaveFlag,l=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,overlays:Object.keys(i.sharedState.views).map((function(e){return{viewId:e,overlays:i.sharedState.views[e]&&i.sharedState.views[e].overlays,sourceImage:i.sharedState.views[e]&&i.sharedState.views[e].sourceImage}}))}})),d=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,listSelection:Object.keys(i.views).map((function(e){return{viewId:e,selection:i.views[e]&&i.views[e].selection,isSelectionMode:i.views[e]&&i.views[e].isSelectionMode,selectAll:i.views[e]&&i.views[e].selectAll}}))}})),v=Object.keys(t.inspections).map((function(e){return{inspectionId:parseInt(e,10),editingViewId:t.inspections[e].sharedState.editingViewId}})),f=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return i.sharedState.listViewAliases?{inspectionId:n,aliases:x(i.sharedState.listViewAliases),showInList:i.sharedState.showAliasesInList}:{}})),m=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,imageViewSettings:Object.keys(i.views).map((function(e){return{viewId:e,zoomFactor:i.views[e]&&i.views[e].zoomFactor,imagePosition:i.views[e]&&i.views[e].imagePosition}}))}})),s={},Object(u.a)(s,S.VERSION,y),Object(u.a)(s,S.SV_OBSERVER_VERSION,t.app.configuration.getSvObserverVersion()),Object(u.a)(s,S.GATEWAY_VERSION,t.app.configuration.getGatewayVersion()),Object(u.a)(s,S.WEBAPP_VERSION,t.app.configuration.getWebAppVersion()),Object(u.a)(s,S.CREATED_VIEW_SETS,t.viewSet.createdViewSets),Object(u.a)(s,S.CURRENT_VIEW_SETS,t.viewSet.currentViewSet),Object(u.a)(s,S.INSPECTION_OVERLAYS,l),Object(u.a)(s,S.INSPECTION_LIST_SELECTION,d),Object(u.a)(s,S.INSPECTION_EDITING_VIEW_IDS,v),Object(u.a)(s,S.INSPECTION_LIST_ALIASES,f),Object(u.a)(s,S.INSPECTION_IMAGE_VIEW_SETTINGS,m),g=s,j=JSON.stringify(g),i.next=10,a(o(!0));case 10:return i.prev=10,w=b.a.SvPb.PutFileRequest.create({destinationPath:O,fileData:h(j),saveInConfig:!0}),i.next=14,e.request(w);case 14:i.next=20;break;case 16:return i.prev=16,i.t0=i.catch(10),p.a.error({err:i.t0},"Error while saving client chunk"),i.abrupt("return");case 20:return i.next=22,a(o(!1));case 22:a(c(!1));case 23:case"end":return i.stop()}}),i,null,[[10,16]])})));return function(e){return i.apply(this,arguments)}}()},x=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t},I=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(i){var a,s,o,c,u,l,v,f,h,g,j,w,k,x,I,V,N;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.setSharedStateData,s=t.setClientChunk,o=t.setViewData,c=t.setEditingFocus,u=t.addIncompatibilityDetectedNotification,l=t.setListViewAliases,v=t.saveImageSettings,f=b.a.SvPb.GetFileRequest.create({sourcePath:O}),h=null,n.prev=3,n.next=6,e.request(f);case 6:h=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),p.a.error({err:n.t0},"Error while loading client chunk");case 12:if(!h.hResult){n.next=15;break}return p.a.info("There is no web app configuration to restore"),n.abrupt("return");case 15:return g=m(h.fileData),j=JSON.parse(g.toString()),n.next=19,C(e,j);case 19:if(j=n.sent,w=d.a.coerce(j.version),k=w.version,!d.a.satisfies(k,"<5.0.0")){n.next=23;break}throw new Error("Unable to load deprecated config file");case 23:for(x=Object.keys(j),I=Object.keys(S).map((function(e){return S[e]})),V=0;V<I.length;V++)N=I[V],x.includes(N)||p.a.warn('"'.concat(N,'" can not be found in loaded config'));if(d.a.valid(k)){n.next=29;break}throw p.a.error("Config version is invalid!"),new Error("Selected config version is invalid");case 29:if("major"!==d.a.diff(y,k)){n.next=32;break}throw p.a.error("Selected config is not compatible with the current Web App version"),new Error("Selected config is not compatible with the current Web App version");case 32:"minor"===d.a.diff(y,k)&&d.a.gt(k,y)&&i(u()),d.a.satisfies(k,">=3.0.0")&&(j.inspectionOverlays.forEach((function(e){return e.overlays.forEach((function(t){i(a(e.inspectionId,"overlays",t.overlays,t.viewId)),i(a(e.inspectionId,"sourceImage",t.sourceImage,t.viewId))}))})),j.inspectionListSelection.forEach((function(e){return e.listSelection.forEach((function(t){i(o(e.inspectionId,t.viewId,"selection",t.selection)),i(o(e.inspectionId,t.viewId,"isSelectionMode",t.isSelectionMode)),i(o(e.inspectionId,t.viewId,"selectAll",t.selectAll))}))}))),d.a.satisfies(k,">=3.1.0")&&j.inspectionEditingViewIds.forEach((function(e){e.inspectionId&&e.editingViewId&&i(c(e.inspectionId,e.editingViewId))})),d.a.satisfies(k,">=5.0.0")&&((j.inspectionListAliases||[]).forEach((function(e){if(e.inspectionId&&Array.isArray(e.aliases)){var t=new Map;e.aliases.forEach((function(e){return t.set(e.objectId,e)})),i(l(e.inspectionId,t,e.showInList))}})),(j.inspectionImageViewSettings||[]).forEach((function(e){(e.imageViewSettings||[]).forEach((function(t){i(v(e.inspectionId,t.viewId,t.zoomFactor,t.imagePosition))}))}))),i(s(j));case 37:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}()},V=function(e,t){return function(){var e=Object(a.a)(r.a.mark((function e(n){var i,a,s,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.setClientChunk,s=g.b,o=j.buildEmptyViewSet(s),c=Object(u.a)({},s,o),i={},Object(u.a)(i,S.VERSION,y),Object(u.a)(i,S.SV_OBSERVER_VERSION,"UNDEFINED"),Object(u.a)(i,S.GATEWAY_VERSION,"UNDEFINED"),Object(u.a)(i,S.WEBAPP_VERSION,"UNDEFINED"),Object(u.a)(i,S.CREATED_VIEW_SETS,c),Object(u.a)(i,S.CURRENT_VIEW_SETS,o),Object(u.a)(i,S.INSPECTION_OVERLAYS,[]),Object(u.a)(i,S.INSPECTION_LIST_SELECTION,[]),Object(u.a)(i,S.INSPECTION_EDITING_VIEW_IDS,[]),Object(u.a)(i,S.INSPECTION_LIST_ALIASES,[]),Object(u.a)(i,S.INSPECTION_IMAGE_VIEW_SETTINGS,[]),n(a(i));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(a.a)(r.a.mark((function e(t,n){var i,a,s,o,c,u,l,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.a.coerce(n.version),a=i.version,!d.a.satisfies(a,">=5.0.0")&&!d.a.satisfies(a,"<4.0.0")){e.next=3;break}return e.abrupt("return",n);case 3:return w,s=b.a.SvPb.GetFileRequest.create({sourcePath:"WebAppIds.json"}),e.prev=5,e.next=8,t.request(s);case 8:o=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),p.a.error({err:e.t0},"Error while loading id mapping"),new Error("Unable to load id mapping file");case 15:if(!o.hResult){e.next=18;break}throw p.a.info('The file "'.concat(w,'" does not exist.')),new Error("Unable to load id mapping file");case 18:e.prev=18,u=m(o.fileData),c=JSON.parse(u.toString()),e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(18),p.a.error({err:e.t1},"Error while parsing content of ".concat(w)),e.abrupt("return",n);case 27:if(l=N(c.guidToObjectIdMapping),E(n,l,v={hasError:!1}),n.version="5.0.0",n.patchedIds=!0,!v.hasError){e.next=36;break}throw new Error("Selected config is not compatible with the current Web App version (could not migrate all string GUIDs to int ObjectIds)");case 36:p.a.debug("Successfully migrated string GUIDs to int ObjectIds");case 37:return e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,null,[[5,11],[18,23]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){var t=new Map;return Object.entries(e||{}).forEach((function(e){var n=Object(c.a)(e,2),i=n[0],r=n[1],a=i.toLowerCase().replace("{","").replace("}","");t.set(a,r)})),t},T=function(e,t){if(t.has(e))return t.get(e);var n=e.toLowerCase();return t.has(n)?t.get(n):void 0},E=function e(t,n,i){for(var r in t)if("object"===typeof t[r]&&null!==t[r])"selection"===r&&(t[r]=t[r].map((function(e){var t=T(e,n);return t||(i.hasError=!0,void p.a.error("There is a guid in the config which is not included in the mapping: ".concat(e)))})).filter((function(e){return!!e}))),e(t[r],n,i);else if("inspectionId"===r||"sourceImage"===r||"xVariable"===r||"offsetLeftVariable"===r||"yVariable"===r||"offsetTopVariable"===r||"widthVariable"===r||"heightVariable"===r||"colorVariable"===r){var a=T(t[r],n);a?t[r]=a:(t[r]=void 0,i.hasError=!0,p.a.error("There is a guid in the config which is not included in the mapping: ".concat(t[r])))}},P=n(1),A=function(e){return{type:"SET_LOCALE",locale:e}},M=function(){return{type:"SET_PROTOBUF_STATIC_INITIALIZED"}},D=function(e,t){return{type:"SET_PROTOBUF",protobuf:e,socket:t}},R=function(e){return{type:"SET_CONFIGURATION",configuration:e}},L=function(e,t){return{type:"ADD_NOTIFICATION",notification:{type:e,message:t}}},_=function(){return L("warning",Object(P.jsx)(s.a,{id:"imageNotAvailable"}))},F=function(){return L("info",Object(P.jsx)(s.a,{id:"notifications.websocket.connectionEstablished"}))},U=function(){return L("warning",Object(P.jsx)(s.a,{id:"notifications.websocket.connectionLost"}))},W=function(e){return L("info",Object(P.jsxs)("span",{children:[Object(P.jsx)(s.a,{id:"notifications.modeSwitch.userSwitchedModeTo"})," ",e]}))},H=function(e){return L("info",Object(P.jsxs)("span",{children:[Object(P.jsx)(s.a,{id:"notifications.userSwitchedLanguage"}),e]}))},q=function(e){return L("info",'A new project was loaded: "'.concat(e,'"'))},z=function(e){return L("info",'The project was unloaded: "'.concat(e,'"'))},B=function(){return L("info","Project was modified. Reloading.")},G=function(e,t){return L("info","Server reported: ".concat(e," ").concat(t))},K=function(e){return L("info",Array.isArray(e)&&e.length>0?Object(P.jsx)(s.a,{id:"notifications.rejectStreamPaused"}):Object(P.jsx)(s.a,{id:"notifications.rejectStreamResumed"}))},Y=function(e,t){return L("warning",Object(P.jsx)(s.a,{id:"notifications.variableValueShouldBeInTheRange",values:{variableName:e,range:t}}))},X=function(){return L("warning",Object(P.jsx)(s.a,{id:"notifications.configAlreadyLockedByYou"}))},J=function(){return L("warning",Object(P.jsx)(s.a,{id:"notifications.takeoverCandidateNotFound"}))},Z=function(){return L("warning",Object(P.jsx)(s.a,{id:"notifications.takeoverRequestExpired"}))},Q=function(){return L("warning",Object(P.jsx)(s.a,{id:"notifications.lockTakeoverError"}))},$=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)(e);case 2:return i=t.sent,a=i.authToken,s=i.user,t.abrupt("return",n({type:"LOG_IN",authToken:a,user:s}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ee=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var t=Object(a.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.c)(e);case 2:return t.abrupt("return",n({type:"LOG_OUT"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},te=function(e){return{type:"SHOW_GLOBAL_MESSAGE_OVERLAY",message:e.message}},ne=function(){return{type:"HIDE_GLOBAL_MESSAGE_OVERLAY"}},ie=function(e,t){return{type:"SET_VIEWSET",viewSet:e,viewSetId:t}},re=function(e,t,n){return{type:"REPLACE_VIEW_IN_CURRENT_VIEWSET",viewId:e,replacementComponentId:t,inspectionId:n}},ae=function(e){return{type:"SWITCH_VIEWSET",viewSet:e}},se=function(e){return{type:"SET_PARAMETER",parameter:e}},oe=function(e){return{type:"TOGGLE_FULLSCREEN_MODE",componentDescriptor:{id:e.props.id,setFullscreen:e.setFullscreen}}},ce=function(){return{type:"INCREASE_VIEW_SIZE_CHANGE_COUNTER"}},ue=function(e){return{type:"SET_BOTTOM_NAV_HIDDEN",hidden:!!e}},le=function(e){return{type:"SET_TOP_NAV_HIDDEN",hidden:!!e}},de=function(e){return{type:"SET_DEFAULT_VIEWSET_NAME",name:e}},pe=function(e,t){return{type:"NEW_VIEW_SET",name:e,mode:t}},be=function(e){return{type:"UPDATE_SAVE_OPERATION_IN_PROCESS",inProcess:e}},ve=function(e){return{type:"SET_SAVE_FLAG",hasChanges:e}},fe=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(i){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={setSaveOperationInProcess:be,setSaveFlag:ve},n.next=3,i(k(e,t,a));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={setSharedStateData:Pe,setClientChunk:ge,setViewData:Te,setEditingFocus:Ae,addIncompatibilityDetectedNotification:Ue,setListViewAliases:Me,saveImageSettings:Ee,setSVOConfigLoaded:je},t.next=3,n(I(e,i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=function(e){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={setClientChunk:ge,setSVOConfigLoaded:je},e.next=3,t(V(0,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ge=function(e){return{type:"LOAD_CLIENT_CHUNK",chunk:e}},je=function(e){return{type:"SET_SVO_CONFIG_LOADED",isLoaded:e}},Oe=function(e){return{type:"SET_VIEWSET_FOR_MODE",mode:e}},we=function(e){return{type:"REMOVE_VIEWSET",name:e}},ye=function(){return{type:"CLEAR_CURRENT_VIEW"}},Se=function(e,t){return{type:"RENAME_VIEWSET",oldName:e,newName:t}},ke=function(e){return{type:"CHANGE_VIEWSET_AFTER_LOADING",name:e}},xe=function(e){return{type:"SET_CURRENT_LAYOUT",layout:e}},Ie=function(e){return{type:"SET_CURRENT_MODE",mode:e}},Ve=function(e){return{type:"SET_CURRENT_MODE_DONE",mode:e}},Ce=function(e){return{type:"SET_PAUSED_INSPECTIONS",pausedInspections:e}},Ne=function(e,t,n,i){return{type:"INIT_VIEW_STATE",inspectionId:e,viewId:t,initState:n,initSharedState:i}},Te=function(e,t,n,i){return{type:"SET_VIEW_DATA",inspectionId:e,viewId:t,key:n,data:i}},Ee=function(e,t,n,i){return{type:"SAVE_IMAGE_SETTINGS",inspectionId:e,viewId:t,zoomFactor:n,imagePosition:i}},Pe=function(e,t,n,i){return{type:"SET_SHARED_STATE_DATA",inspectionId:e,key:t,data:n,viewId:i}},Ae=function(e,t){return{type:"SET_EDITING_FOCUS",inspectionId:e,viewId:t}},Me=function(e,t,n){return{type:"SET_LIST_VIEW_ALIASES",inspectionId:e,aliases:t,showInList:n}},De=function(e,t){return{type:"UPDATE_LIST_VIEW_SHOW_ALIASES",inspectionId:e,showInList:t}},Re=function(e){return{type:"SET_FOCUSED_VIEW_TYPE",viewType:e}},Le=function(e,t){return{type:"PURGE_VIEW_STATE",inspectionId:e,viewId:t}},_e=function(){return{type:"OPEN_HELP_VIEW",isHelpViewOpen:!0}},Fe=function(){return{type:"CLOSE_HELP_VIEW",isHelpViewOpen:!1}},Ue=function(){return L("info",Object(P.jsx)(s.a,{id:"incompatibilityNotification"}))},We=function(e){return{type:"SET_GROUP_PERMISSIONS",groupPermissions:e}},He=function(e){return{type:"SET_MY_PERMISSIONS",myPermissions:e}},qe=function(e){return{type:"SET_BROWSER_WINDOW_VISIBILITY",visible:e}},ze=function(e,t,n,i){return{type:"SET_LOCK_ACQUIRED",id:e,description:t,user:n,host:i}},Be=function(){return{type:"SET_LOCK_REACQUIRED"}},Ge=function(e,t,n,i){return{type:"SET_LOCK_TAKEOVER",id:e,message:t,user:n,host:i}},Ke=function(e,t){return{type:"SET_LOCK_RELEASED",id:e,reason:t}},Ye=function(e,t,n,i){return{type:"SET_LOCK_ALREADY_LOCKED",id:e,description:t,user:n,host:i}},Xe=function(){return{type:"RESET_LOCK"}}},51:function(e,t,n){"use strict";var i=n(3),r=(n(0),n(444)),a=(n(674),n(1)),s=function(e){var t=e.iconUrl,n=e.onClick,s=e.tooltip,o=e.style;return Object(a.jsx)("div",{className:"icon-button-wrapper",children:Object(a.jsx)(r.Tooltip,{title:s,trigger:"mouseenter",duration:1,delay:1e3,children:Object(a.jsx)("button",{style:Object(i.a)(Object(i.a)({},o),{},{backgroundImage:"url(".concat(t,")"),backgroundPosition:"center",backgroundSize:"100% 100%"}),onClick:n,className:"icon-button"})})})};s.defaultProps={tooltip:void 0},t.a=s},523:function(e,t){},525:function(e,t){},53:function(e,t,n){"use strict";var i=n(8),r=n(9),a=n(14),s=n(13),o=n(23),c=n.n(o),u=n(0),l=n(148),d=(n(731),n(144)),p=n(51),b=n(43),v=(n(49),n(1)),f=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClose,i=e.dialogActions,r=e.title,a=e.intl,s=e.open,o=e.isInView,u=e.isHeight100,l=e.isFullscreen,f=e.isPopup,h=c()({dialog:!0,"dialog--open":s,"is-in-view":o,"is-height-100":u}),m=c()({"dialog-wrapper":!0,"is-height-100":o||l,"is-width-100":l,isPopup:f}),g=c()({"dialog-content-wrapper":!0,"is-padding-0":o,isPopup:f});return!!s&&Object(v.jsx)("div",{className:h,children:Object(v.jsxs)("div",{className:m,children:[Object(v.jsxs)("div",{className:"dialog-toolbar",children:[Object(v.jsx)("div",{className:"dialog-title",children:r}),Object(v.jsx)("div",{className:"dialog-controll-wrapper",children:Object(v.jsx)(p.a,{tooltip:a.messages["viewSetManager.close"],iconUrl:d.a,onClick:function(){n()}})})]}),Object(v.jsx)("div",{className:g,children:t}),Object(v.jsx)("div",{className:"dialog-action-wrapper",children:i&&Object(v.jsx)(b.a,{isViewAction:!0,actions:i})})]})})}}]),n}(u.Component);f.defaultProps={open:!1,title:void 0,dialogActions:void 0,isInView:!1,isFullscreen:!1,isPopup:!1},t.a=Object(l.c)(f)},57:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l}));var i="svAuthToken",r="svObserverUser",a="configInfo",s="configChunk_",o="configChunkList",c=function(){var e=localStorage.getItem(i);if(!e)return{};var t,n=localStorage.getItem(r);try{t=JSON.parse(n)}catch(a){return{}}return t?{authToken:e,user:t}:{}},u=function(){localStorage.removeItem(i),localStorage.removeItem(r),localStorage.removeItem(a),localStorage.removeItem(o)},l=function(e,t){localStorage.setItem(i,e),localStorage.setItem(r,JSON.stringify(t))}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){try{return e()}catch(t){return}}},672:function(e,t,n){},674:function(e,t,n){},676:function(e,t,n){},7:function(e,t,n){"use strict";var i=n(3),r=n(8),a=n(9),s=n(434),o=n.n(s),c=n(435),u=n.n(c),l=n(436),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.proxy=null,this.pendingMessages=[],this.opts=t,this.start()}return Object(a.a)(e,[{key:"start",value:function(){var e=this,t=this.opts.throttleInterval;!function n(){e.currentThrottleTimeout=setTimeout((function(){var t=e.pendingMessages;e.pendingMessages=[],t.length>0&&(e.proxy?e.proxy.sendLogsToServer(t):e.pendingMessages=t),n()}),t)}()}},{key:"setProxy",value:function(e){this.proxy=e,this.proxy&&this.pendingMessages.length>0&&(this.proxy.sendLogsToServer(this.pendingMessages),this.pendingMessages=[])}},{key:"removeProxy",value:function(){this.proxy=null,this.pendingMessages=[]}},{key:"write",value:function(e){if(this.currentThrottleTimeout){var t=this.pendingMessages.findIndex((function(t){return t.level===e.level&&t.msg===e.msg}));t>=0?(this.pendingMessages[t].sameMessageCount||(this.pendingMessages[t]=Object(i.a)(Object(i.a)({},this.pendingMessages[t]),{},{sameMessageCount:1})),this.pendingMessages[t].sameMessageCount++):this.pendingMessages.push(e)}}}]),e}(),p=function(){function e(){Object(r.a)(this,e);var t=o()({label:!1});this.impl=u()({outputMode:"short",color:!1},t)}return Object(a.a)(e,[{key:"write",value:function(e){this.impl.write(JSON.stringify(e))}}]),e}(),b=new d({throttleInterval:3e3}),v=new p,f=Object(l.a)({name:"SvWebApp",streams:[{level:"warn",stream:b,type:"raw"},{level:"debug",stream:v,type:"stream"}]});f.setProxy=function(e){return b.setProxy(e)},f.removeProxy=function(e){return b.removeProxy(e)},t.a=f},729:function(e,t,n){},731:function(e,t,n){},732:function(e,t,n){},733:function(e,t,n){},734:function(e,t,n){},735:function(e,t,n){},736:function(e,t,n){},737:function(e,t,n){},81:function(e,t,n){"use strict";t.a=n.p+"static/media/back.c6197e51.svg"},815:function(e,t,n){},816:function(e,t,n){},817:function(e,t,n){},818:function(e,t,n){},819:function(e,t,n){},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var i=n(3),r=(n(0),n(93)),a={"topNavigation.language.german":"Deutsch","topNavigation.language.english":"Englisch","topNavigation.lock":"Lock config (translate)","topNavigation.release":"Release config (translate)","topNavigation.logout":"Abmelden","topNavigation.help":"Hilfe","topNavigation.about":"Info","topNavigation.shortcut":"Shortcut","topNavigation.inspectionState":"Inspektionsstatus ({runningInspections} von {numberOfInspections} aktiv)","topNavigation.permissions":"Rechte",editMode:"Edit Mode",unknownMode:"Unbekannter Mode",runMode:"Run Mode",stopMode:"Stop Mode",regressionMode:"Regression Mode",testMode:"Test Mode","lockStateHandler.alertDialog.lockAlreadyLocked":"Configuration lock is already owned by: {user}","lockStateHandler.alertDialog.lockDescription":"Lock description: {description}","lockStateHandler.alertDialog.takeoverAttempt":"{user} would like to takeover configuration lock","lockStateHandler.alertDialog.takeoverMessage":"Takeover message: {message}","lockStateHandler.formDialog.lockConfigRequestTitle":"Lock configuration request","lockStateHandler.formDialog.lockConfigRequestContent":"To lock configuration, please enter all details here. SVOGateway will send updates occasionally.","lockStateHandler.formDialog.lockScope":"Lock scope","lockStateHandler.formDialog.lockTimeout":"Lock timeout","lockStateHandler.formDialog.lockDescription":"Lock description","lockStateHandler.formDialog.takeoverRequest":"Takeover request","lockStateHandler.formDialog.takeoverTimeout":"Takeover timeout","lockStateHandler.formDialog.takeoverMessage":"Takeover message","imageStripView.inspectionTemplate":"{inspectionName} Filmstreifen","imageStripView.play":"Play","imageStripView.pause":"Pause",listView:"Liste","listView.inspectionTemplate":"{inspectionName} Liste","listView.AliasEditor.title":"Bearbeite Alias f\xfcr den Pfadnamen","listView.Actionbar.hideAliases":"Zeige Namen","listView.Actionbar.showAliases":"Zeige Aliase","listView.AliasEditor.dottedName":"Pfadname","listView.AliasEditor.value":"Wert","listView.AliasEditor.button":"Speichern",helpView:"Hilfe",aboutView:"\xdcber","aboutView.applicationName":"Applicationsname:","aboutView.applicationVersion":"Applikationsversion:","aboutView.svoVersion":"SVObserver-Version:","aboutView.gatewayVersion":"Gateway-Version:","viewTypeSelection.imageStripView":"Filmstreifen","viewTypeSelection.imageView":"Bild","viewTypeSelection.parameterView":"Parameter","viewTypeSelection.ListView":"Liste","viewTypeSelection.toolset":"Toolset","viewTypeSelection.back":"Zur\xfcck","viewTypeSelection.cancel":"Abbrechen","viewTypeSelection.chooseViewTooltip":"View-Typ ausw\xe4hlen","viewTypeSelection.selectViewType":"W\xe4hlen Sie einen Typ f\xfcr diese View:","inspectionSelection.selectInspection":"W\xe4hlen Sie eine Inspektion f\xfcr diese View:","parameterview.overlay.delete":"L\xf6schen","parameterview.overlay.add":"Hinzuf\xfcgen","parameterview.overlay.showAll":"Alle einblenden","parameterview.overlay.hideAll":"Alle ausblenden","imageView.inspectionTemplate":"{inspectionName} Bild","imageView.zoomIn":"Hineinzoomen","imageView.zoomOut":"Herauszoomen","imageView.fitToWidth":"An Breite anpassen","imageView.fitToHeight":"An H\xf6he anpassen","imageView.saveWithOverlays":"Bild mit Overlays herunterladen","imageView.overlayListToggle":"Overlay-Liste","imageView.imageInfoToggle":"Bildinfo","imageView.save":"Bild herunterladen","imageView.showOverlays":"Overlays anzeigen","imageView.hideOverlays":"Overlays ausblenden","imageView.info":"Info","imageView.width":"Breite:","imageView.height":"H\xf6he:","imageView.x":"X:","imageView.y":"Y:",parameterView:"Parameter","parameterView.inspectionTemplate":"{inspectionName} Parameter","toolsetView.inspectionTemplate":"{inspectionName} Toolset","aboutView.title":"\xdcber ",viewSetManager:"ViewSet Manager","viewSetManager.title":"View Set Manager","viewSetManager.remove":"Entfernen","viewSetManager.viewSetName":"Name","viewSetManager.save":"Alle View Sets speichern","viewSetManager.close":"Schlie\xdfen","viewSetManager.editViewSetHeadline":"Viewsets editieren:","viewSetManager.newViewSet":"Neues Viewset erstellen","viewSetManager.editViewSetName":"Viewset-Namen editieren","viewSetManager.changeViewSetName":"Viewset-Namen \xe4ndern","viewSetManager.apply":"\xc4nderungen \xfcbernehmen","viewSetManager.export":"Aktuelle Ansicht exportieren","viewSetManager.import":"Ansicht aus Datei importieren","viewSetManager.importConfirm.title":"Aktuelle Ansicht \xfcberschreiben","viewSetManager.importConfirm.message":"Das Importieren einer Ansicht aus einer Datei \xfcberschreibt die aktuelle Ansicht. Wollen Sie das wirklich?","viewSetManager.deleteConfirm.message":"Wollen Sie das Viewset {viewsetName} wirklich entfernen?","viewSetManager.deleteIconTooltip":"Viewset l\xf6schen","shortcutView.title":"Shortcuts","shortcutView.fullscreenTitle":"Vollbild","shortcutView.fullscreenDescription":"Dr\xfccken Sie in einer aktiven View STRG-F","shortcutView.helpTitle":"Hilfe","shortcutView.helpDescription":"Dr\xfccken Sie in einer aktiven View F1","notifications.modeSwitch.userSwitchedModeTo":"Benutzer hat Mode ge\xe4ndert zu:","notifications.websocket.connectionEstablished":"Websocket-Verbindung ge\xf6ffnet auf Port:","notifications.websocket.connectionLost":"Websocket-Verbindung verloren","notifications.userSwitchedLanguage":"Benutzer hat Sprache ge\xe4ndert zu:","notifications.rejectStreamPaused":"Reject stream wurde angehalten","notifications.rejectStreamResumed":"Reject stream wurde fortgesetzt","notifications.checkSvimOutput":"Bitte Ausgabe am SVIM \xfcberpr\xfcfen","notifications.incompatibilityWarning":"Ausgew\xe4hlte Konfiguration ist m\xf6glicherweise nicht mit der aktuellen WebApp version kompatibel","notifications.errorOccurred":"Ein Fehler ist aufgetreten","notifications.error.loadingFile":"Daten aus der Datei konnten nicht geladen werden.","notifications.successfulAction":"Erfolgreiche Aktion","notifications.successfullyLoadedFile":"Ansicht konnte erfolgreich aus der Datei geladen werden.","notifications.viewsetVersionIncompatibleTitle":"Datei-Version inkompatibel","notifications.viewsetVersionIncompatibleMessage":"Die Datei-Version ist inkompatibel. Die Ansicht kann nicht geladen werden.","notifications.minorVersionDiffTitle":"Unterversion weicht ab","notifications.minorVersionDiffMessage":"Aufgrund unterschiedlicher Unterversionen zwischen Applikation und Datei kann es zu inkorrekter Darstellung der Ansicht kommen.","notifications.variableValueShouldBeInTheRange":"Der Wert der eingegebenen Variable {variableName} muss im Bereich von {range} liegen.","notifications.configAlreadyLockedByYou":"You have already locked the configuration! (Translate)","notifications.takeoverCandidateNotFound":"Could not find takeover candidate! You are still config lock owner. (Translate)","notifications.takeoverRequestExpired":"Takeover request already expired! You are still config lock owner. (Translate)","notifications.lockTakeoverError":"Error while perfroming config lock takeover! (Translate)","listView.save":"Speichern","svoView.emptyViewInspectionTemplate":"{inspectionName}","svoView.closeView":"View schlie\xdfen","svoView.closeViewConfirmation":"Wollen Sie die View wirklich schlie\xdfen?",cancel:"Abbrechen",submit:"Submit (translate)",close:"Close (translate)",agree:"Agree (translate)",disagree:"Disagree (translate)",milliseconds:"milliseconds (translate)",noConfigName:"[Keine Konfiguration]",unknownConfigName:"[Unbekannte Konfiguration]",noConfigLoaded:"Keine Konfiguration geladen im SVObserver","permissions.backToWebApp":"Zur\xfcck zur WebApp","permissions.helpText":'Sie k\xf6nnen die aufgelisteten Rechte f\xfcr die jeweilige Gruppe (Spalte) anpassen. Rechte der Gruppe "Common" werden allen anderen Gruppen zugeordnet. Die Rechte haben m\xf6glicherweise Auswirkungen auf die WebApp und/oder den SVObserver.',"permissions.permissions":"Rechte","permissions.permissionManagement":"Rechte-Verwaltung","permissions.description":"Beschreibung","permissionDescription.webapp.configuration.save":"Nutzer\xa0kann\xa0aktuelle\xa0Konfiguration\xa0mit\xa0allen\xa0View\xa0Sets\xa0speichern","permissionDescription.webapp.logs.read":"Nutzer\xa0kann\xa0Logs\xa0sehen\xa0in\xa0der\xa0oberen\xa0Navigationsleiste","permissionDescription.webapp.viewset.add":"Nutzer\xa0kann\xa0View\xa0Sets\xa0hinzuf\xfcgen","permissionDescription.webapp.viewset.read":"Nutzer\xa0kann\xa0View\xa0Sets\xa0sehen(Wechseln\xa0zwischen\xa0View\xa0Sets,\xa0ViewSet\xa0Manager\xa0\xf6ffnen)","permissionDescription.webapp.viewset.edit":"Nutzer\xa0kann\xa0View\xa0Sets\xa0sehen\xa0und\xa0editieren(Gr\xf6\xdfe\xa0der\xa0Views\xa0ver\xe4ndern,\xa0neue\xa0Views\xa0hinzuf\xfcgen,\xa0Wechseln\xa0zwischen\xa0View\xa0Sets,\xa0ViewSet\xa0Manager\xa0\xf6ffnen,\xa0View\xa0Set\xa0umbenennen)","permissionDescription.webapp.viewset.remove":"Nutzer\xa0kann\xa0ein\xa0View\xa0Set\xa0entfernen","permissionDescription.webapp.view[type=AnyView].add":"Nutzer\xa0kann\xa0Views\xa0eines\xa0BELIEBIGEN\xa0Typs\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=AnyView].read":"Nutzer\xa0kann\xa0Views\xa0eines\xa0BELIEBIGEN\xa0Typs\xa0sehen","permissionDescription.webapp.view[type=AnyView].edit":"Nutzer\xa0kann\xa0Views\xa0eines\xa0BELIEBIGEN\xa0Typs\xa0sehen\xa0und\xa0editieren","permissionDescription.webapp.view[type=AnyView].remove":"Nutzer\xa0kann\xa0Views\xa0eines\xa0BELIEBIGEN\xa0Typs\xa0entfernen","permissionDescription.webapp.view[type=ImageView].add":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=ImageView].read":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0sehen(auch\xa0Bilder\xa0herunterladen,\xa0Liste\xa0eigener\xa0Overlays\xa0sehen,\xa0Bildinfos\xa0sehen)","permissionDescription.webapp.view[type=ImageView].edit":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0sehen\xa0und\xa0editieren(Auswahl\xa0von\xa0Inspektion\xa0und\xa0Tool,\xa0\xc4ndern\xa0der\xa0Bildgr\xf6\xdfe,\xa0Bilder\xa0herunterladen,\xa0Liste\xa0eigener\xa0Overlays\xa0sehen,\xa0Bildinfos\xa0sehen)","permissionDescription.webapp.view[type=ImageView].remove":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0entfernen","permissionDescription.webapp.view[type=ListView].add":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0LIST\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=ListView].read":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0LIST\xa0sehen","permissionDescription.webapp.view[type=ListView].edit":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0LIST\xa0sehen\xa0und\xa0editieren(Auswahl\xa0von\xa0Inspektion\xa0und\xa0Tool,\xa0Editieren\xa0von\xa0Aliasen)","permissionDescription.webapp.view[type=ListView].remove":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0LIST\xa0entfernen","permissionDescription.webapp.view[type=ImageStripView].add":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0STRIP\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=ImageStripView].read":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0STRIP\xa0sehen","permissionDescription.webapp.view[type=ImageStripView].edit":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0STRIP\xa0sehen\xa0und\xa0editieren(Auswahl\xa0von\xa0Inspektion\xa0und\xa0Tool)","permissionDescription.webapp.view[type=ImageStripView].remove":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0IMAGE\xa0STRIP\xa0entfernen","permissionDescription.webapp.view[type=ParameterView].add":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0PARAMETER\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=ParameterView].read":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0PARAMETER\xa0sehen","permissionDescription.webapp.view[type=ParameterView].edit":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0PARAMETER\xa0sehen\xa0und\xa0editieren(Hinzuf\xfcgen\xa0/\xa0editieren\xa0/\xa0entfernen\xa0von\xa0eigenen\xa0Overlays)","permissionDescription.webapp.view[type=ParameterView].remove":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0PARAMETER\xa0entfernen","permissionDescription.webapp.view[type=ToolSetView].add":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0TOOLSET\xa0hinzuf\xfcgen","permissionDescription.webapp.view[type=ToolSetView].read":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0TOOLSET\xa0sehen","permissionDescription.webapp.view[type=ToolSetView].edit":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0TOOLSET\xa0sehen\xa0und\xa0editieren","permissionDescription.webapp.view[type=ToolSetView].remove":"Nutzer\xa0kann\xa0Views\xa0des\xa0Typs\xa0TOOLSET\xa0entfernen","permissionDescription.svobserver.mode.read":"Nutzer\xa0kann\xa0den\xa0aktuellen\xa0Mode\xa0vom\xa0SVObserver\xa0in\xa0der\xa0oberen\xa0Navigationsleiste\xa0sehen","permissionDescription.svobserver.mode.edit":"Nutzer\xa0kann\xa0den\xa0aktuellen\xa0Mode\xa0vom\xa0SVObserver\xa0in\xa0der\xa0oberen\xa0Navigationsleiste\xa0sehen\xa0und\xa0\xe4ndern","permissionDescription.svobserver.inspectionstate.read":"Nutzer\xa0kann\xa0den\xa0Status\xa0aller\xa0Inspektionen\xa0in\xa0der\xa0oberen\xa0Navigationsleiste\xa0sehen","permissionDescription.svobserver.inspectionstate.edit":"Nutzer\xa0kann\xa0den\xa0Status\xa0aller\xa0Inspektionen\xa0in\xa0der\xa0oberen\xa0Navigationsleiste\xa0sehen\xa0/\xa0\xe4ndern\xa0und\xa0den\xa0Status\xa0im\xa0IMAGE\xa0STRIP\xa0View\xa0wechseln","permissionDescription.svobserver.value.read":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Werte\xa0sehen\xa0darf","permissionDescription.svobserver.value.edit":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Werte\xa0editieren\xa0darf","permissionDescription.svobserver.tool.add":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0neue\xa0Tool\xa0hinzuf\xfcgen\xa0darf","permissionDescription.svobserver.tool.read":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Tools\xa0lesen\xa0darf","permissionDescription.svobserver.tool.edit":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0existierende\xa0Tools\xa0editieren\xa0darf","permissionDescription.svobserver.tool.remove":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Tools\xa0entfernen\xa0darf","permissionDescription.svobserver.configuration.read":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0die\xa0SVObserver\xa0Konfiguration\xa0lesen\xa0darf","permissionDescription.svobserver.configuration.write":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0die\xa0SVObserver\xa0Konfiguration\xa0speichern\xa0darf","permissionDescription.svobserver.notifications.subscribe":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0SVObserver\xa0Nachrichten\xa0erhalten\xa0darf","permissionDescription.svobserver.clientlogs.store":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Client\xa0Logs\xa0an\xa0den\xa0SVObserver\xa0senden\xa0darf","permissionDescription.svobserver.file.read":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Dateien\xa0im\xa0SVIM\xa0RUN\xa0Ordner\xa0lesen\xa0darf","permissionDescription.svobserver.file.write":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Dateien\xa0im\xa0SVIM\xa0RUN\xa0Ordner\xa0schreiben\xa0darf","permissionDescription.svobserver.machinestate.set":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0den\xa0Maschinenstatus\xa0setzen\xa0darf\xa0(Herunterfahren\xa0oder\xa0Neustarten\xa0des\xa0SVIMs)","permissionDescription.svobserver.command.execute":"SVObserver\xa0pr\xfcft,\xa0ob\xa0Nutzer\xa0Kommandos\xa0ausf\xfchren\xa0darf","permissionDescription.usermanagement.userpermissions.read":"Nutzer\xa0kann\xa0Gruppen-Rechte\xa0vom\xa0SVObserver\xa0laden,\xa0den\xa0Men\xfc-Eintrag\xa0zum\xa0Wechsel\xa0in\xa0die\xa0Rechte-Verwaltung\xa0sehen,\xa0alle\xa0Rechte\xa0in\xa0Rechte-Verwaltung\xa0sehen","permissionDescription.usermanagement.userpermissions.edit":"Nutzer\xa0kann\xa0Gruppen-Rechte\xa0vom\xa0SVObserver\xa0laden,\xa0den\xa0Men\xfc-Eintrag\xa0zum\xa0Wechsel\xa0in\xa0die\xa0Rechte-Verwaltung\xa0sehen,\xa0alle\xa0Rechte\xa0in\xa0Rechte-Verwaltung\xa0sehen\xa0und\xa0editieren","debugger.title":"Debugger","debugger.backToWebApp":"Zur\xfcck zur WebApp","debugger.requestsListHeader":"Request list","debugger.noParametersMessage":"This request has no parameters","debugger.noItemsMessage":"(no items)","debugger.nothingToConfigureMessage":"(nothing to configure)","debugger.addItemButtonText":"Add","debugger.sendRequest":"Send request","debugger.noFilteredResultsMessage":"No filtered results","debugger.copyToClipboard":"Copy to clipboard"},s={"topNavigation.language.german":"German","topNavigation.language.english":"English","topNavigation.lock":"Lock config","topNavigation.release":"Release config","topNavigation.logout":"Logout","topNavigation.help":"Help","topNavigation.about":"Info","topNavigation.shortcut":"Shortcut","topNavigation.inspectionState":"Inspection state ({runningInspections} of {numberOfInspections} running)","topNavigation.permissions":"Permissions",editMode:"Edit Mode",unknownMode:"Unknown mode",runMode:"Run Mode",stopMode:"Stop Mode",regressionMode:"Regression Mode",testMode:"Test Mode","lockStateHandler.alertDialog.lockAlreadyLocked":"Configuration lock is already owned by: {user}","lockStateHandler.alertDialog.lockDescription":"Lock description: {description}","lockStateHandler.alertDialog.takeoverAttempt":"{user} would like to takeover configuration lock","lockStateHandler.alertDialog.takeoverMessage":"Takeover message: {message}","lockStateHandler.formDialog.lockConfigRequestTitle":"Lock configuration request","lockStateHandler.formDialog.lockConfigRequestContent":"To lock configuration, please enter all details here. SVOGateway will send updates occasionally.","lockStateHandler.formDialog.lockScope":"Lock scope","lockStateHandler.formDialog.lockTimeout":"Lock timeout","lockStateHandler.formDialog.lockDescription":"Lock description","lockStateHandler.formDialog.takeoverRequest":"Takeover request","lockStateHandler.formDialog.takeoverTimeout":"Takeover timeout","lockStateHandler.formDialog.takeoverMessage":"Takeover message","imageStripView.inspectionTemplate":"{inspectionName} Image Strip","imageStripView.play":"Play","imageStripView.pause":"Pause",listView:"List","listView.inspectionTemplate":"{inspectionName} List","listView.AliasEditor.title":"Set alias for dotted name","listView.Actionbar.hideAliases":"Hide aliases","listView.Actionbar.showAliases":"Show aliases","listView.AliasEditor.dottedName":"Dotted name","listView.AliasEditor.value":"Value","listView.AliasEditor.button":"Save",helpView:"Help",aboutView:"About","aboutView.applicationName":"Application Name:","aboutView.applicationVersion":"Application Version:","aboutView.svoVersion":"SVObserver Version:","aboutView.gatewayVersion":"Gateway Version:","viewTypeSelection.imageStripView":"Image Strip","viewTypeSelection.imageView":"Image","viewTypeSelection.parameterView":"Parameter","viewTypeSelection.ListView":"List","viewTypeSelection.toolset":"Toolset","viewTypeSelection.back":"Back","viewTypeSelection.cancel":"Cancel","viewTypeSelection.chooseViewTooltip":"Choose view type","viewTypeSelection.selectViewType":"Select a type for this view:","inspectionSelection.selectInspection":"Select an inspection for this view:","parameterview.overlay.delete":"Delete","parameterview.overlay.add":"Add","parameterview.overlay.showAll":"Show all","parameterview.overlay.hideAll":"Hide all","imageView.inspectionTemplate":"{inspectionName} Image","imageView.zoomIn":"Zoom in","imageView.zoomOut":"Zoom out","imageView.fitToWidth":"Fit to width","imageView.fitToHeight":"Fit to height","imageView.saveWithOverlays":"Download image with overlays","imageView.overlayListToggle":"Overlay list","imageView.imageInfoToggle":"Image info","imageView.save":"Download image","imageView.showOverlays":"Show overlays","imageView.hideOverlays":"Hide overlays","imageView.info":"Info","imageView.width":"Width:","imageView.height":"Height:","imageView.x":"X:","imageView.y":"Y:",parameterView:"Parameter","parameterView.inspectionTemplate":"{inspectionName} Parameter","toolsetView.inspectionTemplate":"{inspectionName} Toolset","aboutView.title":"About ",viewSetManager:"ViewSet Manager","viewSetManager.title":"View Set Manager","viewSetManager.viewSetName":"Name","viewSetManager.remove":"Remove","viewSetManager.save":"Save all view sets","viewSetManager.close":"Close","viewSetManager.editViewSetHeadline":"Edit viewsets:","viewSetManager.newViewSet":"Create new viewset","viewSetManager.editViewSetName":"Edit view set name","viewSetManager.changeViewSetName":"Change view set name","viewSetManager.apply":"Apply changes","viewSetManager.export":"Export current view layout","viewSetManager.import":"Import a view layout from file","viewSetManager.importConfirm.title":"Overwriting viewset","viewSetManager.importConfirm.message":"Importing a viewset from file will overwrite your existing viewset. Do you want to continue?","viewSetManager.deleteConfirm.message":'Do you really want to delete viewset "{viewsetName}"?',"viewSetManager.deleteIconTooltip":"Delete view set","shortcutView.title":"Shortcuts","shortcutView.fullscreenTitle":"Fullscreen","shortcutView.fullscreenDescription":"Focus a view and press CTRL-F","shortcutView.helpTitle":"Help","shortcutView.helpDescription":"Focus a view and press F1","notifications.modeSwitch.userSwitchedModeTo":"User switched mode to:","notifications.websocket.connectionEstablished":"Websocket connection established on port:","notifications.websocket.connectionLost":"Websocket connection lost","notifications.userSwitchedLanguage":"User switched language to: ","notifications.rejectStreamPaused":"Reject stream was paused","notifications.rejectStreamResumed":"Reject stream was resumed","notifications.checkSvimOutput":"Please check output on SVIM","notifications.incompatibilityWarning":"Selected config might not be compatible with the current WebApp","notifications.errorOccurred":"An error occurred","notifications.error.loadingFile":"Could not load data from file.","notifications.successfulAction":"Successful action","notifications.successfullyLoadedFile":"Successfully loaded viewset from file.","notifications.viewsetVersionIncompatibleTitle":"File version incompatible","notifications.viewsetVersionIncompatibleMessage":"The file version is incompatible. Can not load viewset.","notifications.minorVersionDiffTitle":"Minor version differs","notifications.minorVersionDiffMessage":"Minor version differs between application and file. The presentation of the viewset might be incorrect.","notifications.variableValueShouldBeInTheRange":"Value of the variable {variableName} should be in the range of {range}.","notifications.configAlreadyLockedByYou":"You have already locked the configuration!","notifications.takeoverCandidateNotFound":"Could not find takeover candidate! You are still config lock owner.","notifications.takeoverRequestExpired":"Takeover request already expired! You are still config lock owner.","notifications.lockTakeoverError":"Error while perfroming config lock takeover!","listView.save":"Save","svoView.emptyViewInspectionTemplate":"{inspectionName}","svoView.closeView":"Close view","svoView.closeViewConfirmation":"Do you really want to close this view?",cancel:"Cancel",submit:"Submit",close:"Close",agree:"Agree",disagree:"Disagree",milliseconds:"milliseconds",noConfigName:"[No configuration]",unknownConfigName:"[Unknown configuration]",noConfigLoaded:"No configuration loaded in SVObserver","permissions.backToWebApp":"Back to WebApp","permissions.helpText":"You can change the listed permissions for each group (column). Common permissions are applied to all other groups. Permissions may have effect on the webapp and/or the SVObserver.","permissions.permissions":"Permissions","permissions.permissionManagement":"Permission Management","permissions.description":"Description","permissionDescription.webapp.configuration.save":"User can save the current configuration with all view sets","permissionDescription.webapp.logs.read":"User can see logs in top navigation bar","permissionDescription.webapp.viewset.add":"User can add new view sets","permissionDescription.webapp.viewset.read":"User can see view sets (switch between view sets, open view set manager)","permissionDescription.webapp.viewset.edit":"User can see and edit view sets (change size of views, add new views to view set, switch between view sets, open view set manager, rename view set)","permissionDescription.webapp.viewset.remove":"User can remove a view set","permissionDescription.webapp.view[type=AnyView].add":"User can add views of ANY type","permissionDescription.webapp.view[type=AnyView].read":"User can see views of ANY type","permissionDescription.webapp.view[type=AnyView].edit":"User can see and edit views of ANY type","permissionDescription.webapp.view[type=AnyView].remove":"User can remove views of ANY type","permissionDescription.webapp.view[type=ImageView].add":"User can add views of type IMAGE","permissionDescription.webapp.view[type=ImageView].read":"User can see views of type IMAGE (also download image, see custom overlay list, see image info)","permissionDescription.webapp.view[type=ImageView].edit":"User can see and edit views of type IMAGE (choose inspection and tool, change size of image, download image, see custom overlay list, see image info)","permissionDescription.webapp.view[type=ImageView].remove":"User can remove views of type IMAGE","permissionDescription.webapp.view[type=ListView].add":"User can add views of type LIST","permissionDescription.webapp.view[type=ListView].read":"User can see views of type LIST","permissionDescription.webapp.view[type=ListView].edit":"User can see and edit views of type LIST (choose inspection and tool, edit aliases)","permissionDescription.webapp.view[type=ListView].remove":"User can remove views of type LIST","permissionDescription.webapp.view[type=ImageStripView].add":"User can add views of type IMAGE STRIP","permissionDescription.webapp.view[type=ImageStripView].read":"User can see views of type IMAGE STRIP","permissionDescription.webapp.view[type=ImageStripView].edit":"User can see and edit views of type IMAGE STRIP (choose inspection and tool)","permissionDescription.webapp.view[type=ImageStripView].remove":"User can remove views of type IMAGE STRIP","permissionDescription.webapp.view[type=ParameterView].add":"User can add views of type PARAMETER","permissionDescription.webapp.view[type=ParameterView].read":"User can see views of type PARAMETER","permissionDescription.webapp.view[type=ParameterView].edit":"User can see and edit views of type PARAMETER (add/edit/delete custom overlays)","permissionDescription.webapp.view[type=ParameterView].remove":"User can remove views of type PARAMETER","permissionDescription.webapp.view[type=ToolSetView].add":"User can add views of type TOOLSET","permissionDescription.webapp.view[type=ToolSetView].read":"User can see views of type TOOLSET","permissionDescription.webapp.view[type=ToolSetView].edit":"User can see and edit views of type TOOLSET","permissionDescription.webapp.view[type=ToolSetView].remove":"User can remove views of type TOOLSET","permissionDescription.svobserver.mode.read":"User can see the current mode of SVObserver in top navigation bar","permissionDescription.svobserver.mode.edit":"User can see and change the current mode of SVObserver in top navigation bar","permissionDescription.svobserver.inspectionstate.read":"User can see the inspection state of all inspections in the top navigation bar","permissionDescription.svobserver.inspectionstate.edit":"User can see and change the inspection state of all inspections in the top navigation bar and toggle the state in IMAGE STRIP view","permissionDescription.svobserver.value.read":"SVObserver checks if user is allowed to see values","permissionDescription.svobserver.value.edit":"SVObserver checks if user is allowed to edit values","permissionDescription.svobserver.tool.add":"SVObserver checks if user is allowed to add new tools","permissionDescription.svobserver.tool.read":"SVObserver checks if user is allowed to read tools","permissionDescription.svobserver.tool.edit":"SVObserver checks if user is allowed to edit existing tools","permissionDescription.svobserver.tool.remove":"SVObserver checks if user is allowed to remove tools","permissionDescription.svobserver.configuration.read":"SVObserver checks if user is allowed to read the SVObserver configuration","permissionDescription.svobserver.configuration.write":"SVObserver checks if user is allowed to save the SVObserver configuration","permissionDescription.svobserver.notifications.subscribe":"SVObserver checks if user is allowed to subscribe to SVObserver notifications","permissionDescription.svobserver.clientlogs.store":"SVObserver checks if user is allowed to send client logs to the SVObserver","permissionDescription.svobserver.file.read":"SVObserver checks if user is allowed to read arbitrary files in SVIM RUN folder","permissionDescription.svobserver.file.write":"SVObserver checks if user is allowed to write arbitrary files in SVIM RUN folder","permissionDescription.svobserver.machinestate.set":"SVObserver checks if user is allowed to set the machine state (shut down or restart SVIM)","permissionDescription.svobserver.command.execute":"SVObserver checks if user is allowed to execute commands","permissionDescription.usermanagement.userpermissions.read":"User can load group permissions from backend/can see menu entry to switch to permission management page/can see all permissions in permission management","permissionDescription.usermanagement.userpermissions.edit":"User can load group permissions from backend/can see menu entry to switch to permission management page/can see all permissions in permission management/can edit permissions","debugger.title":"Debugger","debugger.backToWebApp":"Back to WebApp","debugger.requestsListHeader":"Request list","debugger.noParametersMessage":"This request has no parameters","debugger.noItemsMessage":"(no items)","debugger.nothingToConfigureMessage":"(nothing to configure)","debugger.addItemButtonText":"Add","debugger.sendRequest":"Send request","debugger.noFilteredResultsMessage":"No filtered results","debugger.copyToClipboard":"Copy to clipboard"},o=n(1),c={de:Object(i.a)({},a),en:Object(i.a)({},s)},u=[{locale:"de",name:Object(o.jsx)(r.a,{id:"topNavigation.language.german"})},{locale:"en",name:Object(o.jsx)(r.a,{id:"topNavigation.language.english"})}];t.a=c},820:function(e,t,n){},828:function(e,t,n){},829:function(e,t,n){},830:function(e,t,n){},831:function(e,t,n){},832:function(e,t,n){},860:function(e,t,n){},861:function(e,t,n){},862:function(e,t,n){},863:function(e,t,n){},864:function(e,t,n){},865:function(e,t,n){},866:function(e,t,n){},867:function(e){e.exports=JSON.parse('{"name":"SVOWebApp","version":"10.10.0-113-g5261f9efc","private":true,"dependencies":{"@material-ui/core":"^4.11.4","axios":"^0.21.1","browser-bunyan":"^1.5.3","browser-stdout":"^1.3.1","bunyan-format":"^0.2.1","classnames":"^2.2.6","jwt-decode":"^3.1.2","lint-staged":"^5.0.0","lodash":"^4.17.15","lz-string":"^1.4.4","moment":"^2.29.1","moment-timezone":"^0.5.33","normalize.css":"^8.0.1","prop-types":"^15.7.2","protobufjs":"^6.8.8","rc-tree":"^2.1.2","react":"^17.0.2","react-base-table":"^1.12.0","react-dom":"^17.0.2","react-dropzone":"^11.3.4","react-intl":"^5.20.4","react-live-clock":"^5.2.0","react-moment":"^1.1.1","react-mosaic-component":"^5.0.0","react-redux":"^7.1.0","react-router":"^5.0.1","react-router-dom":"^5.0.1","react-router-redux":"^4.0.8","react-scripts":"4.0.3","react-sortable-hoc":"^2.0.0","react-tippy":"^1.2.3","react-treebeard":"^3.2.4","reconnecting-websocket":"^4.1.10","redux":"^4.0.4","redux-thunk":"^2.3.0","shortid":"^2.2.14","tachyons":"^4.12.0","typescript":"^4.3.5"},"devDependencies":{"@cypress/react":"^5.9.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^12.0.0","@testing-library/user-event":"^13.1.9","@types/jest":"^26.0.15","@types/node":"^14.17.1","@types/react":"^17.0.13","@types/react-dom":"^17.0.0","@types/react-router-dom":"^5.1.7","autoprefixer":"^10.2.6","core-js":"^3.15.2","cross-env":"^7.0.3","cypress":"^7.6.0","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.6","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-prettier":"^3.4.0","jsdom":"^16.6.0","mocha":"^9.0.2","mochawesome":"^6.2.2","mochawesome-merge":"^4.2.0","mochawesome-report-generator":"^5.2.0","postcss":"^8.3.5","prettier":"^2.3.2","react-test-renderer":"^17.0.2","sass":"^1.35.1","semver":"^7.3.5","sinon":"^11.1.1","web-vitals":"^2.1.0"},"scripts":{"start":"cross-env NODE_ENV=development react-scripts start","prebuild":"node scripts/prepare-build.js","build":"cross-env npm version --no-git-tag-version --allow-same-version $(git describe --tags);cross-env NODE_ENV=production react-scripts build","test":"cross-env NODE_ENV=development react-scripts test","eject":"react-scripts eject","cypress:open":"cross-env NODE_ENV=production cypress open","cypress:run":"cross-env NODE_ENV=production cypress run --browser chrome --headless","cypress:merge":"mochawesome-merge ./mochawesome-report/*.json > report.json","test:eslint":"eslint --max-warnings=0 \\"{src,cli}/**/*.{ts,js,tsx,jsx}\\"","format":"prettier --write \\"{src,cli}/**/*.{ts,js,tsx,jsx}\\""},"lint-staged":{"src/**/*.{js,jsx,json,css}":["eslint test","git add"]},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},868:function(e,t,n){},874:function(e,t,n){},875:function(e,t,n){},876:function(e,t,n){},877:function(e,t,n){},878:function(e,t,n){},879:function(e,t,n){},880:function(e,t,n){},881:function(e,t,n){},882:function(e,t,n){},883:function(e,t,n){},884:function(e,t,n){},885:function(e,t,n){},886:function(e,t,n){},887:function(e,t,n){},888:function(e,t,n){},889:function(e,t,n){},890:function(e,t,n){},891:function(e,t,n){},892:function(e,t,n){},893:function(e,t,n){},894:function(e,t,n){},895:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(27),s=n.n(a),o=n(945),c=(n(329),n(6)),u=n.n(c),l=n(20),d=n(26),p=n(432),b=n(17),v=n(85),f=n(10),h=n(437),m=n(44),g=n(3),j=n(80),O=n.n(j),w=n(7),y=n(438),S=n(457),k=n(57);function x(e,t){var n=Object(m.a)(t.notifications),i=function(e,t){var n=new Date,i={day:"2-digit",month:"2-digit",year:"numeric"},r={hour:"2-digit",minute:"2-digit",second:"2-digit"},a="".concat(n.toLocaleString(t,i)," ").concat(n.toLocaleString(t,r));return e=Object(g.a)(Object(g.a)({},e),{},{timestamp:a})}(e,t.locale);return function(e,t){if(t&&t.length>0)return O()(e.message,t[0].message);return!1}(i,n)?n[0]=I(n[0]):(i=I(i),n.unshift(i)),n&&n.length>50&&n.splice(-1,1),n}function I(e){var t=e.count;return void 0===t?t=1:t++,e=Object(g.a)(Object(g.a)({},e),{},{count:t})}var V=function(e){var t=function(e){var t=e.websocketUrl,n=e.dispatch,i=e.user,r=e.authToken,a=new y.a(t,n,r),s=new S.a(n),o=localStorage.getItem("CURRENT_LOCALE");return w.a.setProxy(s),{connection:null,notifications:[],mode:0,navigationHidden:!1,locale:o||"en",authToken:r,user:i,currentMode:null,pausedInspections:[],connector:a,protobuf:void 0,socket:void 0,proxy:s,saveOperationInProcess:!1,currentClientChunkRevision:0,modalNotificationData:null,focusedViewType:null,isHelpViewOpen:!1,configuration:null,isBrowserWindowVisible:!0}}(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_PROTOBUF_STATIC_INITIALIZED":return e.proxy.setProtobufStaticInitialized(),e;case"SET_PROTOBUF":var i=n.protobuf,r=n.socket;return i.onConnect(r),e.proxy.setProtobuf(i),Object.assign({},e,{protobuf:i,socket:r});case"ADD_NOTIFICATION":var a=x(n.notification,e);return Object.assign({},e,{notifications:a});case"LOG_IN":return Object(k.f)(n.authToken,n.user),e.connector.connectWithToken(n.authToken),Object(g.a)(Object(g.a)({},e),{},{authToken:n.authToken,user:n.user});case"LOG_OUT":return Object(k.e)(),setTimeout((function(){return e.connector.disconnect()})),e;case"AUTH_TOKEN_EXPIRED":return Object(k.e)(),Object(g.a)(Object(g.a)({},e),{},{authToken:void 0,user:void 0});case"SET_LOCALE":return localStorage.setItem("CURRENT_LOCALE",n.locale),Object(g.a)(Object(g.a)({},e),{},{locale:n.locale});case"ON_NAVIGATION_HIDDEN":return Object.assign({},e,{navigationHidden:!e.navigationHidden});case"SHOW_GLOBAL_MESSAGE_OVERLAY":var s=n.message;return w.a.info({message:s},"Showing global message overlay"),Object(g.a)(Object(g.a)({},e),{},{modalNotificationData:{message:s}});case"HIDE_GLOBAL_MESSAGE_OVERLAY":return w.a.info("Hiding global message overlay"),Object(g.a)(Object(g.a)({},e),{},{modalNotificationData:null});case"SET_CURRENT_MODE":return e.proxy.setMode(n.mode),e;case"SET_CURRENT_MODE_DONE":return Object(g.a)(Object(g.a)({},e),{},{currentMode:n.mode});case"SET_PAUSED_INSPECTIONS":return Object(g.a)(Object(g.a)({},e),{},{pausedInspections:n.pausedInspections});case"UPDATE_CLIENT_CHUNK_REVISION":return Object(g.a)(Object(g.a)({},e),{},{currentClientChunkRevision:n.revision});case"UPDATE_SAVE_OPERATION_IN_PROCESS":return Object(g.a)(Object(g.a)({},e),{},{saveOperationInProcess:n.inProcess});case"SET_CONFIGURATION":return Object(g.a)(Object(g.a)({},e),{},{configuration:n.configuration});case"SET_FOCUSED_VIEW_TYPE":return Object(g.a)(Object(g.a)({},e),{},{focusedViewType:n.viewType});case"OPEN_HELP_VIEW":case"CLOSE_HELP_VIEW":return Object(g.a)(Object(g.a)({},e),{},{isHelpViewOpen:n.isHelpViewOpen});case"SET_GROUP_PERMISSIONS":return Object(g.a)(Object(g.a)({},e),{},{groupPermissions:n.groupPermissions});case"SET_MY_PERMISSIONS":return Object(g.a)(Object(g.a)({},e),{},{myPermissions:n.myPermissions});case"SET_BROWSER_WINDOW_VISIBILITY":return Object(g.a)(Object(g.a)({},e),{},{isBrowserWindowVisible:n.visible});default:return e}}},C=n(19),N=n(31),T=new N.h,E=function(){return{currentViewSet:void 0,createdViewSets:{},fullscreenMode:!1,fullscreenComponentDescriptor:void 0,viewSizeChangeCounter:0,bottomNavHidden:"true"===localStorage.getItem("BOTTOM_NAVIGATION_HIDDEN")||!1,topNavHidden:"true"===localStorage.getItem("TOP_NAVIGATION_HIDDEN")||!1,defaultViewSetName:localStorage.getItem("DEFAULT_VIEWSET_NAME")||null,isSVOConfigLoaded:!1,unsavedChanges:!1}},P=function(e,t){return e.setFullscreen(!0),Object(g.a)(Object(g.a)({},t),{},{fullscreenMode:!0,fullscreenComponentDescriptor:e})},A=function(e,t){return e.setFullscreen(!1),Object(g.a)(Object(g.a)({},t),{},{fullscreenMode:!1,fullscreenComponentDescriptor:void 0})},M=function(e,t){var n=Object.keys(t).find((function(n){return t[n]&&t[n].name===e}));return n&&t[n]},D=function(e,t){var n=e.id,i=t.createdViewSets[n],r=i||T.getViewSet(n),a=i?{}:Object(C.a)({},n,r);return Object(g.a)(Object(g.a)({},t),{},{currentViewSet:r,createdViewSets:Object.assign({},t.createdViewSets,a)})},R=function(e,t,n){return Object(g.a)(Object(g.a)({},e),{},{currentViewSet:t,createdViewSets:Object(g.a)(Object(g.a)({},e.createdViewSets),{},Object(C.a)({},n,t)),unsavedChanges:!0})},L=function(e,t){var n=e.createdViewSets,i=Object.keys(n).filter((function(e){return e!==t})).reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},t,n[t]))}),{});if(0===Object.keys(i).length){var r=N.b;i=Object(C.a)({},r,T.buildEmptyViewSet(r))}return{createdViewSets:i,currentViewSet:i[Object.keys(i)[0]],unsavedChanges:!0}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_OUT":return E();case"SET_VIEWSET":return R(e,t.viewSet,t.viewSetId);case"REPLACE_VIEW_IN_CURRENT_VIEWSET":var n=t.viewId,i=t.inspectionId,r=t.replacementComponentId,a=T.getViewById(r);a.inspectionId=i;var s=e.currentViewSet.id,o=Object(g.a)(Object(g.a)({},e.currentViewSet),{},{viewSet:Object(g.a)(Object(g.a)({},e.currentViewSet.viewSet),{},Object(C.a)({},n,a))});return R(e,o,s);case"SWITCH_VIEWSET":return D(t.viewSet,e);case"ENTER_FULLSCREEN_MODE":return e.fullscreenComponentDescriptor&&e.fullscreenComponentDescriptor.id!==t.componentDescriptor.id&&A(e.fullscreenComponentDescriptor,e),P(t.componentDescriptor,e);case"LEAVE_FULLSCREEN_MODE":return A(t.componentDescriptor,e);case"TOGGLE_FULLSCREEN_MODE":return e.fullscreenComponentDescriptor?e.fullscreenComponentDescriptor.id===t.componentDescriptor.id?e.fullscreenMode?A(t.componentDescriptor,e):P(t.componentDescriptor,e):e:P(t.componentDescriptor,e);case"INCREASE_VIEW_SIZE_CHANGE_COUNTER":return Object(g.a)(Object(g.a)({},e),{},{viewSizeChangeCounter:e.viewSizeChangeCounter+1});case"SET_BOTTOM_NAV_HIDDEN":return localStorage.setItem("BOTTOM_NAVIGATION_HIDDEN",t.hidden),Object(g.a)(Object(g.a)({},e),{},{bottomNavHidden:t.hidden});case"CHANGE_VIEWSET_AFTER_LOADING":return Object(g.a)(Object(g.a)({},e),{},{changeViewSetToName:t.name});case"SET_TOP_NAV_HIDDEN":return localStorage.setItem("TOP_NAVIGATION_HIDDEN",t.hidden),Object(g.a)(Object(g.a)({},e),{},{topNavHidden:t.hidden});case"SET_DEFAULT_VIEWSET_NAME":return localStorage.setItem("DEFAULT_VIEWSET_NAME",t.name),Object(g.a)(Object(g.a)({},e),{},{defaultViewSetName:t.name});case"NEW_VIEW_SET":var c=Object(C.a)({},t.name,T.buildEmptyViewSet(t.name));return Object(g.a)(Object(g.a)({},e),{},{createdViewSets:Object(g.a)(Object(g.a)({},e.createdViewSets),c),unsavedChanges:!0});case"REMOVE_VIEWSET":var u=L(e,t.name),l=u.createdViewSets,d=u.currentViewSet;return Object(g.a)(Object(g.a)({},e),{},{currentViewSet:d,createdViewSets:l,unsavedChanges:!0});case"CLEAR_CURRENT_VIEW":var p;if(!(null===e||void 0===e||null===(p=e.currentViewSet)||void 0===p?void 0:p.name))return e;var b=T.buildEmptyViewSet(e.currentViewSet.name);return e.createdViewSets[e.currentViewSet.name]=b,Object(g.a)(Object(g.a)({},e),{},{currentViewSet:b,unsavedChanges:!0});case"RENAME_VIEWSET":var v=e.createdViewSets[t.oldName],f=Object(g.a)(Object(g.a)({},v),{},{id:t.newName,name:t.newName}),h=Object.keys(e.createdViewSets).reduce((function(n,i){return i===t.oldName?Object(g.a)(Object(g.a)({},n),{},Object(C.a)({},t.newName,f)):Object(g.a)(Object(g.a)({},n),{},Object(C.a)({},i,e.createdViewSets[i]))}),{});return t.oldName===e.currentViewSet.name?Object(g.a)(Object(g.a)({},e),{},{createdViewSets:h,currentViewSet:f,unsavedChanges:!0}):Object(g.a)(Object(g.a)({},e),{},{createdViewSets:h,unsavedChanges:!0});case"SET_CURRENT_LAYOUT":return t.layout?Object(g.a)(Object(g.a)({},e),{},{createdViewSets:Object.assign({},e.createdViewSets,Object(C.a)({},e.currentViewSet.id,Object(g.a)(Object(g.a)({},e.currentViewSet),{},{initialValue:t.layout}))),currentViewSet:Object(g.a)(Object(g.a)({},e.currentViewSet),{},{initialValue:t.layout}),currentLayout:t.layout,unsavedChanges:!0}):e;case"LOAD_CLIENT_CHUNK":if(e.changeViewSetToName){var m=M(e.changeViewSetToName,t.chunk.createdViewSets);if(m){var j=Object(g.a)(Object(g.a)({},e),{},{currentViewSet:m,createdViewSets:t.chunk.createdViewSets,changeViewSetToName:void 0});return D(m,j)}}var O={createdViewSets:t.chunk.createdViewSets,currentViewSet:t.chunk.currentViewSet};return Object(g.a)(Object(g.a)({},e),O);case"SET_SVO_CONFIG_LOADED":return Object(g.a)(Object(g.a)({},e),{},{isSVOConfigLoaded:t.isLoaded,unsavedChanges:!1});case"SET_SAVE_FLAG":return Object(g.a)(Object(g.a)({},e),{},{unsavedChanges:t.hasChanges});default:return e}},F={parameter:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PARAMETER":return Object(g.a)(Object(g.a)({},e),{},{parameter:t.parameter});default:return e}},W=n(214),H=n.n(W),q=n(66),z=function(e,t){return Object.keys(t).find((function(n){return t[n]&&t[n].views&&!!t[n].views[e]}))},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.inspectionId,i=t.viewId,r=t.key;switch(t.type){case"PURGE_VIEW_STATE":var a=t.inspectionId||z(t.viewId,e);return a?H()(e,["".concat(a,".sharedState.views.").concat(t.viewId),"".concat(a,".views.").concat(t.viewId),e[a].sharedState.editingViewId===t.viewId&&"".concat(a,".sharedState.editingViewId")]):e;case"SET_EDITING_FOCUS":return e[n]?Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{sharedState:Object(g.a)(Object(g.a)({},e[n].sharedState),{},{editingViewId:i})}))):e;case"SET_LIST_VIEW_ALIASES":return e[n]?Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{sharedState:Object(g.a)(Object(g.a)({},e[n].sharedState),{},{listViewAliases:t.aliases,showAliasesInList:t.showInList})}))):e;case"UPDATE_LIST_VIEW_SHOW_ALIASES":return e[n]?Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{sharedState:Object(g.a)(Object(g.a)({},e[n].sharedState),{},{showAliasesInList:t.showInList})}))):e;case"SET_VIEW_DATA":return Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{views:Object(g.a)(Object(g.a)({},e[n]?e[n].views:{}),{},Object(C.a)({},i,Object(g.a)(Object(g.a)({},e[n]&&e[n].views?e[n].views[i]:{}),{},Object(C.a)({},r,t.data))))})));case"SAVE_IMAGE_SETTINGS":return Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{views:Object(g.a)(Object(g.a)({},e[n]?e[n].views:{}),{},Object(C.a)({},i,Object(g.a)(Object(g.a)({},e[n]&&e[n].views?e[n].views[i]:{}),{},{zoomFactor:t.zoomFactor,imagePosition:t.imagePosition})))})));case"SET_SHARED_STATE_DATA":var s=t.viewId||e[n].sharedState.editingViewId,o=Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{sharedState:Object(g.a)(Object(g.a)({},e[n]?e[n].sharedState:{}),{},{views:Object(g.a)(Object(g.a)({},e[n]?e[n].sharedState.views:{}),{},Object(C.a)({},s,Object(g.a)(Object(g.a)({},e[n]?e[n].sharedState.views[s]:{}),{},Object(C.a)({},r,t.data))))})})));return o;case"INIT_VIEW_STATE":var c=t.initState,u=t.initSharedState,l=Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},n,Object(g.a)(Object(g.a)({},e[n]),{},{sharedState:Object(g.a)(Object(g.a)({},e[n]?e[n].sharedState:{}),{},{views:Object(g.a)(Object(g.a)({},e[n]?e[n].sharedState.views:{}),{},Object(C.a)({},i,Object(q.a)((function(){return e[n].sharedState.views[i]}))?Object(g.a)(Object(g.a)({},u),e[n].sharedState.views[i]):u))}),views:Object(g.a)(Object(g.a)({},e[n]?e[n].views:{}),{},Object(C.a)({},i,Object(q.a)((function(){return e[n].views[i]}))?Object(g.a)(Object(g.a)({},c),e[n].views[i]):c))}))),d=l[n]&&l[n].sharedState&&(l[n].sharedState.listViewAliases||new Map);return l[n].sharedState.listViewAliases=d,l;default:return e}},G={status:0,lockId:void 0,description:"",user:"",host:"",takeoverId:void 0,takeoverMsg:"",takeoverUser:"",takeoverHost:"",releaseId:void 0,releaseReason:""},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_LOCK":return Object(g.a)(Object(g.a)({},e),{},{status:0});case"SET_LOCK_RELEASED":return Object(g.a)(Object(g.a)({},e),{},{status:0,releaseId:t.id,releaseReason:t.reason});case"SET_LOCK_ACQUIRED":return Object(g.a)(Object(g.a)({},e),{},{status:1,lockId:t.id,description:t.description,user:t.user,host:t.host});case"SET_LOCK_REACQUIRED":return Object(g.a)(Object(g.a)({},e),{},{status:1});case"SET_LOCK_ALREADY_LOCKED":return Object(g.a)(Object(g.a)({},e),{},{status:2,lockId:t.id,description:t.description,user:t.user,host:t.host});case"SET_LOCK_TAKEOVER":return Object(g.a)(Object(g.a)({},e),{},{status:3,takeoverId:t.id,takeoverMsg:t.message,takeoverUser:t.user,takeoverHost:t.host});default:return e}};var Y=function(e){return Object(v.b)({app:V(e),viewSet:_,toolSet:U,inspections:B,lockState:K,routing:h.routerReducer})},X=n(5),J=n(98),Z=n(34),Q=n(8),$=n(9),ee=n(14),te=n(13),ne=n(1),ie=function(e){var t={};try{e.substr(1).split("&").forEach((function(e){var n=e.split("="),i=n[0],r=n[1]&&decodeURIComponent(n[1]);t[i]=r}))}catch(n){w.a.error(n)}return t},re=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).state={authenticated:!1,queryParams:ie(i.props.location.search)},i}return Object($.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setTopNavHidden("true"===this.state.queryParams.hideTopNavigation),this.props.setBottomNavHidden("true"===this.state.queryParams.hideBottomNavigation),this.props.setLocale(this.state.queryParams.locale||"en"),this.props.setDefaultViewSetName(this.state.queryParams.viewSet||null),this.state.queryParams.token&&this.props.authenticate(this.state.queryParams.token).then((function(){return e.setState({authenticated:!0})})).catch((function(t){return e.setState({authError:t})}))}},{key:"render",value:function(){return this.state.queryParams.token?this.state.authError?Object(ne.jsxs)("div",{children:["Invalid token provided. Error: ",null===(e=this.state.authError.response)||void 0===e?void 0:e.status," Status:"," ",null===(t=this.state.authError.response)||void 0===t?void 0:t.statusText]}):this.state.authenticated?Object(ne.jsx)(Z.a,{to:{pathname:"/app",state:{viewSetTemplate:this.state.queryParams.viewSet}}}):Object(ne.jsx)("div",{children:"Fetching auth token for provided access token"}):Object(ne.jsx)("div",{children:"Malformed query params"});var e,t}}]),n}(i.Component),ae=Object(b.c)(null,(function(e){return{setLocale:function(t){return e(Object(X.S)(t))},authenticate:function(t){return e(Object(X.p)(t))},setTopNavHidden:function(t){return e(Object(X.gb)(t))},setBottomNavHidden:function(t){return e(Object(X.I)(t))},setDefaultViewSetName:function(t){return e(Object(X.O)(t))}}}))(re),se=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).state={loggedOut:!1},i}return Object($.a)(n,[{key:"render",value:function(){var e=this;return this.props.onLogOut().then((function(){e.setState({loggedOut:!0})})),this.state.loggedOut?(Object(k.e)(),this.props.onLoggedOut(),Object(ne.jsx)(Z.a,{to:{pathname:"/",state:{loggedOut:!0}}})):null}}]),n}(i.Component),oe=Object(b.c)(null,(function(e){return{onLogOut:function(){return e(Object(X.x)())}}}))(se),ce=n(2),ue=n.n(ce),le=n(951),de=n(316),pe=n.n(de),be=n(23),ve=n.n(be),fe=n(153),he=n(93),me=(n(828),ue.a.shape({id:ue.a.string})),ge=(ue.a.oneOfType([me,ue.a.string]),n(942)),je=n(53),Oe=(n(829),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,i=e.title,r=e.message;return Object(ne.jsx)("div",{children:Object(ne.jsxs)(je.a,{title:i||"",onClose:function(){return t(!1)},open:n,children:[Object(ne.jsx)("div",{className:"message-wrapper",children:r}),Object(ne.jsxs)("div",{className:"button-wrapper",children:[Object(ne.jsx)(ge.a,{color:"primary",onClick:function(){return t(!0)},children:"Okay"}),Object(ne.jsx)(ge.a,{color:"primary",onClick:function(){return t(!1)},children:Object(ne.jsx)(he.a,{id:"cancel"})})]})]})})}}]),n}(i.Component)),we=n(38),ye=n.n(we),Se=n(148),ke=n(51),xe=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleKeyEvent=function(t){switch("".concat(t.ctrlKey?"ctrl+":"").concat(t.key)){case"ctrl+f":t.preventDefault(),e.props.dispatch(Object(X.mb)(e.props.view));break;case"F1":t.preventDefault(),e.props.dispatch(Object(X.z)());break;default:return}t.stopPropagation()},e.handleClick=function(t){var n=e.props,i=n.view,r=n.editingViewIds,a=n.dispatch,s=n.helpSection;if(i)try{var o=i.props.id,c=i.props.views.viewSet[o].inspectionId,u=i.props.views.viewSet[o].viewComponentClassId;u===N.d&&(a(Object(X.P)(c,o)),r.includes(o)||a(Object(X.eb)(!0))),a(Object(X.Q)(u))}catch(l){}else s&&a(Object(X.Q)(s))},e}return Object($.a)(n,[{key:"componentDidMount",value:function(){this.node.addEventListener("keydown",this.handleKeyEvent),this.node.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){this.node.removeEventListener("keydown",this.handleKeyEvent),this.node.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.children;return Object(ne.jsx)("div",{tabIndex:"0",style:{width:"100%",height:"100%"},ref:function(t){e.node=t},children:t&&t})}}]),n}(i.Component);xe.defaultProps={children:void 0};n(830);var Ie=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.headline,n=e.selectionItems,i=e.onSelection,r=e.cancelButtonProps,a=e.showCancel;return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("h3",{children:t}),Object(ne.jsxs)("ul",{className:"list-wrapper",children:[n.map((function(e){return Object(ne.jsx)("li",{className:"selection-item",children:Object(ne.jsxs)(ge.a,{variant:"outlined",onClick:function(){return i(e.id)},children:[e.icon&&Object(ne.jsx)("img",{src:e.icon,alt:"inspection.name",className:"image-item"}),e.text]},"button".concat(e.id))},"li".concat(e.id))})),a?Object(ne.jsx)("li",{className:"selection-item",children:Object(ne.jsxs)(ge.a,{variant:"contained",color:"primary",onClick:r.goBack,children:[r.icon&&Object(ne.jsx)("img",{src:r.icon,alt:"type.id",className:"image-item"}),r.text]})},"liCancel"):null]})]})}}]),n}(i.Component);Ie.defaultProps={showCancel:!1,headline:"",selectionItems:[],cancelButtonProps:{}};var Ve=Ie,Ce=n(225),Ne=n(81),Te=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).getSelectionItems=function(){var t=e.props.configuration;return(t&&t.getInspections()||[]).map((function(e){return{id:e.id,text:e.name,icon:Ce.a}}))},e}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onSelection,n=e.goBack,i=e.showCancel,r={text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.back"}),icon:Ne.a,goBack:n},a=this.getSelectionItems();return Object(ne.jsx)("div",{children:Object(ne.jsx)(Ve,{headline:Object(ne.jsx)(he.a,{id:"inspectionSelection.selectInspection"}),onSelection:t,cancelButtonProps:r,showCancel:i,selectionItems:a})})}}]),n}(i.Component);Te.defaultProps={};var Ee=Object(b.c)((function(e){return{configuration:e.app.configuration}}))(Te),Pe=n.p+"static/media/image.ab9e385a.svg",Ae=n.p+"static/media/parameter.417d04e6.svg",Me=n.p+"static/media/filmstrip.c43ef800.svg",De=n.p+"static/media/list.7380903e.svg",Re=n.p+"static/media/toolset.f1f1d3b2.svg",Le=n(18),_e=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onSelection,n=e.goBack,i=e.myPermissions,r=[];Object(Le.b)(i)&&r.push({id:N.d,text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.imageView"}),icon:Pe}),Object(Le.d)(i)&&r.push({id:N.f,text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.parameterView"}),icon:Ae}),Object(Le.a)(i)&&r.push({id:N.c,text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.imageStripView"}),icon:Me}),Object(Le.c)(i)&&r.push({id:N.e,text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.ListView"}),icon:De}),Object(Le.e)(i)&&r.push({id:N.g,text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.toolset"}),icon:Re});var a={text:Object(ne.jsx)(he.a,{id:"viewTypeSelection.back"}),icon:Ne.a,goBack:n};return Object(ne.jsx)("div",{children:Object(ne.jsx)(Ve,{headline:Object(ne.jsx)(he.a,{id:"viewTypeSelection.selectViewType"}),onSelection:t,cancelButtonProps:a,showCancel:!0,selectionItems:r})})}}]),n}(i.Component);_e.defaultProps={};var Fe=Object(b.c)((function(e){return{myPermissions:e.app.myPermissions}}))(_e),Ue=(n(831),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={visibleComponent:"ViewTypeSelection",selectedInspectionId:0,selectedViewType:""},e.setSelectedInspectionId=function(t){e.setState({visibleComponent:"",selectedInspectionId:t}),e.props.changeTitle(t),e.updateView(t)},e.setSelectedViewType=function(t){e.setState({visibleComponent:"InspectionSelection",selectedViewType:t})},e.goBackToViewTypeSelection=function(){e.setState({visibleComponent:"ViewTypeSelection",selectedInspectionId:0})},e.cancelViewSelection=function(){(0,e.props.changeContent)()},e.updateView=function(t){var n=e.props,i=n.replaceViewInCurrentViewSet,r=n.viewId,a=n.changeContent;i(r,e.state.selectedViewType,t),a()},e}return Object($.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.viewToShowWithoutInspection;e&&this.setState({visibleComponent:"InspectionSelection",selectedViewType:e})}},{key:"render",value:function(){var e=this,t=this.props.showCancel,n=this.state.visibleComponent;return Object(ne.jsx)("div",{className:"view-selection-wrapper",children:function(){switch(n){case"InspectionSelection":return Object(ne.jsx)(Ee,{onSelection:e.setSelectedInspectionId,goBack:e.goBackToViewTypeSelection,showCancel:t});case"ViewTypeSelection":return Object(ne.jsx)(Fe,{onSelection:e.setSelectedViewType,goBack:e.cancelViewSelection});default:return Object(ne.jsx)("div",{})}}()})}}]),n}(i.Component)),We=Object(b.c)(null,(function(e){return{replaceViewInCurrentViewSet:function(t,n,i){e(Object(X.A)(void 0,t)),e(Object(X.D)(t,n,i))}}}))(Ue),He=(n(832),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){return Object(ne.jsx)("div",{className:"no-config-loaded-wrapper",children:Object(ne.jsx)(he.a,{id:"noConfigLoaded"})})}}]),n}(i.Component)),qe=n(144),ze=n(101),Be=new N.h,Ge=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).setFullscreen=function(e){return setTimeout((function(){return i.setState({isFullscreen:e})}),0)},i.resetView=function(){i.setState({resetView:!0})},i.removeIdsForUnknownInspectionIds=function(e,t){var n=e.viewSet;Object.keys(n).forEach((function(e){var i=n[e].inspectionId;t.includes(i)||(delete n[e].id,delete n[e].inspectionId)}))},i.canEditCurrentView=function(){var e=i.props,t=e.id,n=e.views,r=e.myPermissions;if(n&&n.viewSet&&n.viewSet[t])switch(n.viewSet[t].viewComponentClassId){case N.d:return Object(Le.m)(r);case N.e:return Object(Le.o)(r);case N.c:return Object(Le.l)(r);case N.f:return Object(Le.p)(r);case N.g:return Object(Le.r)(r);default:return!1}return!1},i.canDeleteCurrentView=function(){var e=i.props,t=e.id,n=e.views,r=e.myPermissions;if(n&&n.viewSet&&n.viewSet[t])switch(n.viewSet[t].viewComponentClassId){case N.d:return Object(Le.g)(r);case N.e:return Object(Le.h)(r);case N.c:return Object(Le.f)(r);case N.f:return Object(Le.i)(r);case N.g:return Object(Le.j)(r);default:return!1}return!1},i.getInspectionId=function(){var e=i.props,t=e.id,n=e.views;return i.state.selectedInspectionId||n.viewSet[t]&&n.viewSet[t].inspectionId},i.state={isFullscreen:!1,resetView:!1,selectedInspectionId:0,isConfirmOpen:!1},i}return Object($.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.configuration,i=t.id,r=t.path,a=t.views,s=t.dispatch,o=t.editingViewIds,c=t.intl,u=t.windowName,l=t.isSVOConfigLoaded,d=t.myPermissions,p=this.state,b=p.isFullscreen,v=p.resetView,f=p.selectedInspectionId,h=ve()({fullscreen:b,"editing-focus":o.includes(i)}),m=this.getInspectionId(),j="<UNKNOWN INSPECTION>";if(n){var O=n.getInspectionName(m);O&&O.length>0&&(j="[".concat(O,"]")),u&&!v&&(j="".concat(j," ").concat(u));var w=n&&n.inspections&&n.inspections.map((function(e){return e.id}));w&&this.removeIdsForUnknownInspectionIds(a,w)}var y=a.viewSet&&a.viewSet[i]&&a.viewSet[i].inspectionId,S=!y&&a.viewSet&&a.viewSet[i]&&a.viewSet[i].viewComponentClassId,k=[];return Object(Le.t)(d)&&k.push(Object(ne.jsx)(fe.SplitButton,{},"splitButton")),this.canEditCurrentView()&&k.push(Object(ne.jsx)(ke.a,{tooltip:c.messages["viewTypeSelection.chooseViewTooltip"],onClick:function(){return e.resetView(i)},iconUrl:ze.a},"swapButton")),(v||!y||this.canDeleteCurrentView())&&k.push(Object(ne.jsx)(ke.a,{tooltip:c.messages["svoView.closeView"],onClick:function(){return e.props.onCloseView()},iconUrl:qe.a,style:{width:"18px",height:"18px"}},"customRemoveButton")),Object(ne.jsx)(fe.MosaicWindow,{className:h,createNode:function(){return ye.a.generate()},title:(f||a.viewSet&&a.viewSet[i]&&a.viewSet[i].titleId)&&this.props.intl.formatMessage({id:f||u?"svoView.emptyViewInspectionTemplate":a.viewSet[i].titleId},{inspectionName:j}),toolbarControls:l?k:[],path:r,draggable:Object(Le.t)(d),children:Object(ne.jsx)(xe,{view:this,dispatch:s,editingViewIds:o,children:!v&&y?Be.createViewInstance(a.viewSet[i],Object(g.a)(Object(g.a)({},a.viewSet[i].passedProps),{},{id:i,inspectionId:a.viewSet[i].inspectionId})):l?Object(ne.jsx)(We,{viewId:i,changeContent:function(){return e.setState({resetView:!1,selectedInspectionId:0})},changeTitle:function(t){return e.setState({selectedInspectionId:t})},showCancel:v,viewToShowWithoutInspection:S}):Object(ne.jsx)(He,{})})})}}]),n}(i.Component);Ge.defaultProps={editingViewIds:[]};var Ke=Object(b.c)((function(e,t){var n=t.views,i=t.id,r=Object(q.a)((function(){return n.viewSet[i].inspectionId})),a=e.app.configuration,s=e.viewSet.isSVOConfigLoaded,o=e.app.myPermissions,c=Object(q.a)((function(){return e.inspections[r].views[i].windowName}));if(c){var u=a.getInspectionName(r);return{configuration:a,windowName:c=c.replace("Inspections.".concat(u,"."),""),isSVOConfigLoaded:s,myPermissions:o}}return{configuration:a,isSVOConfigLoaded:s,myPermissions:o}}),(function(){return{}}))(Object(Se.c)(Ge)),Ye=function(e){var t=e.views,n=e.onChange,r=e.topNavHidden,a=e.bottomNavHidden,s=e.increaseChangeCounter,o=e.dispatch,c=e.inspections,u=e.myPermissions,l=Object(i.useRef)(null),p=Object(i.useState)(void 0),b=Object(d.a)(p,2),v=b[0],f=b[1],h=ve()({"view-set-wrapper":!0,"bottom-nav-offset":!a,"top-nav-hidden":!r});if(!t)return!1;var m=Object.keys(c).map((function(e){return c[e].sharedState&&c[e].sharedState.editingViewId})),g=function(){var e=v.viewId,n=v.path,i=v.remove,r=t.viewSet[e]&&t.viewSet[e].inspectionId;"string"===typeof t.initialValue&&o(Object(X.r)()),o(Object(X.A)(r,e)),i(n)};return Object(ne.jsxs)("div",{className:h,children:[Object(ne.jsx)(Oe,{open:void 0!==v,onClose:function(e){return function(e){e&&g(),f(void 0)}(e)},message:Object(ne.jsx)(he.a,{id:"svoView.closeViewConfirmation"})}),Object(ne.jsx)(fe.Mosaic,{onChange:function(e){n(e),s()},ref:l,renderTile:function(e,n){return Object(ne.jsx)(fe.MosaicContext.Consumer,{children:function(i){var r=i.mosaicActions.remove;return Object(ne.jsx)(Ke,{id:e,path:n,views:t,dispatch:o,editingViewIds:m,onCloseView:function(){f({viewId:e,path:n,remove:r})}})}})},initialValue:t.initialValue,resize:Object(Le.t)(u)?"":"DISABLED"})]})};Ye.defaultProps={topNavHidden:!1,bottomNavHidden:!1,views:void 0};var Xe=Object(b.c)((function(e){return{inspections:e.inspections,myPermissions:e.app.myPermissions}}),(function(e){return{increaseChangeCounter:function(){return e(Object(X.u)())},dispatch:function(t){return e(t)}}}))(Ye),Je=n(146),Ze=n(82),Qe=n(121),$e=(n(861),n(37)),et=n(461),tt=n(322),nt=n.n(tt),it=(n(874),n(875),function(e){var t=e.children;return Object(ne.jsx)("div",{className:"box-wrapper",children:t})});it.defaultProps={children:void 0};var rt=it,at=function(){return Object(ne.jsx)(rt,{children:Object(ne.jsxs)("div",{className:"date-time-wrapper",children:[Object(ne.jsx)(nt.a,{className:"date",format:"DD.MM.YYYY",ticking:!0}),Object(ne.jsx)(nt.a,{className:"time",format:"HH:mm:ss",ticking:!0})]})})},st=n(236),ot=n(237),ct=(n(876),n(102)),ut=function(e){var t=e.changeMode,n=e.currentMode,i=e.modes,r=e.open,a=e.handleClose,s=e.enabled,o=Object(b.e)((function(e){return e.app.myPermissions})),c=Object.keys(i).filter((function(e){return"unknownMode"!==e})),u=Object(Le.A)(o),l=Object(Le.q)(o),d=c.map((function(e){return{key:e,onClick:function(){t(e,i[e].id)},caption:Object(ne.jsx)(he.a,{id:e}),img:i[e].iconSrc}}));return u||l?Object(ne.jsx)("div",{children:Object(ne.jsx)(ct.a,{buttonCaption:n,buttonIcon:i[n.props.id].iconSrc,menuItems:d,onClose:a,open:r,showBottomArrow:!0,enabled:s&&l})}):Object(ne.jsx)("div",{})};ut.defaultProps={open:!1,currentMode:void 0,modes:$e.a,handleClose:function(){}};ue.a.shape({id:ue.a.string,iconSrc:ue.a.string,text:ue.a.string});var lt=ut,dt=(n(877),n(235)),pt=n.p+"static/media/description.7b05d18e.svg",bt=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={statusListActive:!1},e.closeStatusList=function(t){e.setState({statusListActive:!1})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.notifications,i=t.myPermissions;return Object(Le.y)(i)?Object(ne.jsx)(dt.a,{onOutsideClick:function(){e.closeStatusList()},ref:function(t){e.wrapper=t},children:n&&n.length>0?Object(ne.jsxs)("div",{style:{position:"relative"},children:[Object(ne.jsxs)("div",{role:"button",tabIndex:"0",className:"status-bar",onClick:function(){e.setState({statusListActive:!e.state.statusListActive})},children:[Object(ne.jsx)("img",{src:pt,alt:"Log"}),Object(ne.jsx)("p",{className:"".concat(n[0].type," pb1 ma0 "),children:n[0].message})]}),Object(ne.jsx)("div",{className:"bottomArrow"}),Object(ne.jsx)("div",{className:"status-list ".concat(this.state.statusListActive?"":"hidden"),children:Object(ne.jsx)("div",{className:"status-container",children:n.map((function(e){return Object(ne.jsxs)("p",{className:"".concat(e.type," status"),children:[e.timestamp,": ",Object(ne.jsx)("b",{children:e.message})," ",e.count>1?"(".concat(e.count,")"):""]},ye.a.generate())}))})})]}):Object(ne.jsx)("div",{})}):Object(ne.jsx)("div",{})}}]),n}(i.Component);bt.defaultProps={notifications:void 0};var vt=Object(b.c)((function(e){return{notifications:e.app.notifications,myPermissions:e.app.myPermissions}}))(Object(Se.c)(bt)),ft=n(177),ht=n.p+"static/media/play-multiple.92160d4a.svg",mt=n(178),gt=function(){var e=Object(b.e)((function(e){return e.app})),t=e.proxy,n=e.configuration,i=e.pausedInspections,r=e.myPermissions,a=n&&n.getInspections()||[],s=0===i.length,o=Object(Le.w)(r),c=Object(Le.n)(r),u=a.map((function(e){var n=(i||[]).includes(e.id);return{key:e.id,onClick:function(){n?t.resumeRejectStream(e.id):t.pauseRejectStream(e.id)},caption:e.name,img:n?ft.a:mt.a,className:n?"paused-inspection":void 0}})),l={key:"globalResumePause",onClick:function(){s?t.pauseRejectStream():t.resumeRejectStream()},caption:s?"Pause all inspections":"Resume all inspections",img:s?mt.a:ft.a,className:"all-inspections"};return u.unshift(l),o||c?Object(ne.jsx)("div",{children:Object(ne.jsx)(ct.a,{buttonCaption:Object(ne.jsx)(he.a,{id:"topNavigation.inspectionState",values:{runningInspections:a.length-i.length,numberOfInspections:a.length}}),buttonIcon:ht,menuItems:u,onClose:function(){},showBottomArrow:!0,enabled:c})}):Object(ne.jsx)("div",{})},jt=n.p+"static/media/language.0be28bcb.svg",Ot=(n(878),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).changeLocation=function(t){var n=e.props,i=n.changeLocale,r=n.dispatchUserSwitchedLanguageNotification;i(t),r(t)},e}return Object($.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.languages,i=t.locale,r=n.map((function(t){return{key:t.locale,caption:t.name,onClick:function(){e.changeLocation(t.locale)}}}));return Object(ne.jsx)("div",{className:"flex",children:Object(ne.jsx)(ct.a,{buttonIcon:jt,buttonCaption:i,menuItems:r,showBottomArrow:!0,onClose:function(){},open:!1})})}}]),n}(i.Component));Ot.defaultProps={languages:Ze.b};var wt=Object(b.c)((function(e){return{locale:e.app.locale}}),(function(e){return{changeLocale:function(t){return e(Object(X.S)(t))},dispatchUserSwitchedLanguageNotification:function(t){return e(Object(X.n)(t))}}}))(Ot),yt=n(955),St=n(954),kt=n(949),xt=n(947),It=n(948),Vt=n(946),Ct=n(944),Nt=n(952),Tt=n(950),Et=n.p+"static/media/icons8-lock.b22b5188.svg",Pt=n.p+"static/media/icons8-padlock.048e7769.svg",At=function(e){return Object(ne.jsxs)(St.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(ne.jsx)(Vt.a,{id:"alert-dialog-title",children:e.title}),Object(ne.jsx)(xt.a,{children:Object(ne.jsx)(It.a,{id:"alert-dialog-description",children:e.contentText})}),Object(ne.jsx)(kt.a,{children:e.children})]})},Mt=(n(879),function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},t.name,t.value))}),Dt=function(){return Object(ne.jsx)("img",{src:Et,alt:"Lock icon"})},Rt=function(){return Object(ne.jsx)("img",{src:Pt,alt:"Padlock icon"})},Lt=function(){var e=Object(b.e)((function(e){return e.app.proxy})),t=Object(b.e)((function(e){return e.lockState})),n=Object(i.useState)(!1),r=Object(d.a)(n,2),a=r[0],s=r[1],o=Object(i.useReducer)(Mt,{scope:1,requestTakeover:!1}),c=Object(d.a)(o,2),u=c[0],l=c[1],p=function(){return 1===t.status},v=function(e){var t="checkbox"===e.target.type;l({name:e.target.name,value:t?e.target.checked:e.target.value})},f=function(){s(!1),m()},h=function(t){t.preventDefault(),s(!1),e.subscribeToLockAcquisitionStream(u),m()},m=function(){l({name:"lockExpire",value:0}),l({name:"takeoverTimeout",value:0})};return Object(ne.jsxs)("div",{className:"lock-state-handler-wrapper",children:[Object(ne.jsx)(ge.a,{className:"lock-button",onClick:function(){if(p()){e.unsubscribeFromLockAcquisitionStream();var n={lockId:t.lockId,reason:"ExplicitRelease"};e.onLockReleasedNotification(n)}else s(!0)},startIcon:p()?Object(ne.jsx)(Rt,{}):Object(ne.jsx)(Dt,{}),children:p()?Object(ne.jsx)(he.a,{id:"topNavigation.release"}):Object(ne.jsx)(he.a,{id:"topNavigation.lock"})}),Object(ne.jsxs)(St.a,{open:a,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(ne.jsx)(Vt.a,{id:"form-dialog-title",children:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.lockConfigRequestTitle"})}),Object(ne.jsxs)(xt.a,{children:[Object(ne.jsx)(It.a,{children:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.lockConfigRequestContent"})}),Object(ne.jsx)(yt.a,{InputLabelProps:{shrink:!0},autoFocus:!0,margin:"dense",id:"lock-scope-id",name:"scope",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.lockScope"}),type:"number",defaultValue:"1",onChange:v,fullWidth:!0}),Object(ne.jsx)(yt.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"lock-timeout-id",name:"lockExpire",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.lockTimeout"}),type:"number",InputProps:{endAdornment:Object(ne.jsx)(Ct.a,{position:"end",children:"milliseconds"})},defaultValue:"0",onChange:v,fullWidth:!0}),Object(ne.jsx)(yt.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"lock-description-id",name:"description",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.lockDescription"}),type:"text",onChange:v,fullWidth:!0}),Object(ne.jsx)(Tt.a,{margin:"dense",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.takeoverRequest"}),control:Object(ne.jsx)(Nt.a,{onChange:v,checked:u.requestTakeover,id:"takeover-request-id",name:"requestTakeover",color:"primary"})}),u.requestTakeover&&Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(yt.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"takeover-timeout-id",name:"takeoverTimeout",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.takeoverTimeout"}),type:"number",InputProps:{endAdornment:Object(ne.jsx)(Ct.a,{position:"end",children:Object(ne.jsx)(he.a,{id:"milliseconds"})})},defaultValue:"0",onChange:v,fullWidth:!0}),Object(ne.jsx)(yt.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"takeover-message-id",name:"takeoverMessage",label:Object(ne.jsx)(he.a,{id:"lockStateHandler.formDialog.takeoverMessage"}),type:"text",onChange:v,fullWidth:!0})]})]}),Object(ne.jsxs)(kt.a,{children:[Object(ne.jsx)(ge.a,{onClick:f,color:"primary",children:Object(ne.jsx)(he.a,{id:"cancel"})}),Object(ne.jsx)(ge.a,{onClick:h,color:"primary",children:Object(ne.jsx)(he.a,{id:"submit"})})]})]}),Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(At,{open:2===t.status,title:Object(ne.jsx)(he.a,{id:"lockStateHandler.alertDialog.lockAlreadyLocked",values:{user:t.user}}),contentText:Object(ne.jsx)(he.a,{id:"lockStateHandler.alertDialog.lockDescription",values:{description:t.description}}),children:Object(ne.jsx)(ge.a,{onClick:function(){return e.onLockReset()},color:"primary",children:Object(ne.jsx)(he.a,{id:"close"})})}),Object(ne.jsxs)(At,{open:3===t.status,title:Object(ne.jsx)(he.a,{id:"lockStateHandler.alertDialog.takeoverAttempt",values:{user:t.takeoverUser}}),contentText:Object(ne.jsx)(he.a,{id:"lockStateHandler.alertDialog.takeoverMessage",values:{message:t.takeoverMsg}}),children:[Object(ne.jsx)(ge.a,{onClick:function(){e.passConfigLock({lockId:t.lockId,takeoverId:t.takeoverId})},color:"primary",children:Object(ne.jsx)(he.a,{id:"agree"})}),Object(ne.jsx)(ge.a,{onClick:function(){return e.onLockReacquired()},color:"primary",children:Object(ne.jsx)(he.a,{id:"disagree"})})]})]})]})},_t=new N.h,Ft=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).handleChange=function(e,t,n){return i.setState({value:n})},i.openModePopover=function(e){e.preventDefault(),i.setState({anchorEl:e.currentTarget,open:!0})},i.handleRequestClose=function(){i.setState({open:!1})},i.changeMode=function(e,t){i.props.setCurrentMode(t),i.handleRequestClose()},i.getConfigName=function(){var e=i.props,t=e.configuration;return e.isSVOConfigLoaded?t&&t.name?Object(ne.jsx)("span",{children:t.name}):Object(ne.jsx)(he.a,{id:"unknownConfigName"}):Object(ne.jsx)(he.a,{id:"noConfigName"})},i.state={value:0,open:!1},i.handleChange=i.handleChange.bind(Object(Qe.a)(i)),i.handleRequestClose=i.handleRequestClose.bind(Object(Qe.a)(i)),i}return Object($.a)(n,[{key:"mapModeIdToKey",value:function(e){return Object.keys($e.a).find((function(t){return $e.a[t].id===e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.topNavHidden,i=t.isSVOConfigLoaded,r=this.props.currentMode||$e.a.unknownMode.id,a=this.mapModeIdToKey(r),s=Object(ne.jsx)(he.a,{id:a}),o=this.getConfigName(),c=ve()({nav:!0,"nav-hidden":n});return Object(ne.jsxs)("div",{className:c,children:[Object(ne.jsx)("button",{className:"hider",onClick:function(){e.props.setTopNavHidden(!n)},children:n?"show":"hide"}),Object(ne.jsxs)("div",{className:"flex-container",children:[Object(ne.jsxs)("div",{className:"config-wrapper",children:[Object(ne.jsx)(st.a,{src:ot.a,title:"logo"}),this.props.unsavedChanges?Object(ne.jsxs)("div",{style:{fontStyle:"italic"},children:[o,"*"]}):o]}),Object(ne.jsx)(lt,{changeMode:this.changeMode,open:this.state.open,anchorEl:this.state.anchorEl,handleRequestClose:this.handleRequestClose,openModePopover:this.openModePopover,currentMode:s,enabled:i}),Object(ne.jsx)(vt,{}),i&&Object(ne.jsx)(gt,{}),Object(ne.jsx)(Lt,{})]}),Object(ne.jsxs)("div",{className:"flex-container",children:[Object(ne.jsx)(et.a,{onChangeUser:function(){},onLoggedOut:this.props.onLoggedOut}),Object(ne.jsx)(wt,{}),Object(ne.jsx)("div",{className:"separator",children:Object(ne.jsx)(at,{date:new Date})})]})]})}}]),n}(i.Component);Ft.defaultProps={fullscreenMode:!1,currentMode:void 0};var Ut=Object(Se.c)(Object(b.c)((function(e){return{activeAppState:e.app.activeAppState,appStateConnection:e.app.appStateConnection,appMode:e.app.mode,currentMode:e.app.currentMode,fullscreenMode:e.viewSet.fullscreenMode,saveOperationInProcess:e.app.saveOperationInProcess,configuration:e.app.configuration,topNavHidden:e.viewSet.topNavHidden,proxy:e.app.proxy,pausedInspections:e.app.pausedInspections,isSVOConfigLoaded:e.viewSet.isSVOConfigLoaded,unsavedChanges:e.viewSet.unsavedChanges}}),(function(e){return{setTopNavHidden:function(t){return e(Object(X.gb)(t))},setViewSetForMode:function(t){return e(Object(X.jb)(t))},changeViewSet:function(t){return e(Object(X.ib)(_t.getViewSet(t)))},setCurrentMode:function(t){return e(Object(X.M)(t))},setPausedInspections:function(t){return e(Object(X.ab)(t))}}}))(Ft)),Wt=(n(880),n.p+"static/media/view-manager.8d715a8f.svg"),Ht=(n(881),n(882),function(e){var t=e.id,n=e.title,i=e.onClick,r=e.active,a=ve()({"preset-button":!0,"preset-button-active":r});return Object(ne.jsx)(rt,{children:Object(ne.jsx)("button",{id:t,onClick:i,className:a,children:Object(ne.jsx)("span",{children:n})})})});Ht.defaultProps={id:void 0,onClick:function(){},active:!1};var qt=Ht,zt=function(e){var t=e.currentViewSet,n=e.createdViewSets,i=e.switchViewSet,r=e.myPermissions;return Object(Le.D)(r)||Object(Le.t)(r)?Object(ne.jsx)("div",{className:"preset-slider-wrapper",children:n&&n.map((function(e){return Object(ne.jsx)(qt,{title:e.name||e.id,onClick:function(){return i(e)},active:t&&t.id===e.id},e.id)}))}):Object(ne.jsx)("div",{})};zt.defaultProps={currentViewSet:void 0,createdViewSets:[]};var Bt=Object(b.c)((function(e){return{createdViewSets:Object.keys(e.viewSet.createdViewSets).map((function(t){return e.viewSet.createdViewSets[t]})),currentViewSet:e.viewSet.currentViewSet,myPermissions:e.app.myPermissions}}),(function(e){return{switchViewSet:function(t){return e(Object(X.lb)(t))}}}))(zt),Gt=n(47),Kt=n.n(Gt),Yt=n(71),Xt=n(229),Jt=n.p+"static/media/delete.85c719f0.svg",Zt=n(228),Qt=n.p+"static/media/export.6f1edad0.svg",$t=n.p+"static/media/import.2817cb78.svg",en=n.p+"static/media/check.069f9f99.svg",tn=(n(883),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,i=e.title,r=e.message;return Object(ne.jsx)("div",{children:Object(ne.jsxs)(je.a,{title:i,onClose:t,open:n,children:[Object(ne.jsx)("div",{className:"message-wrapper",children:r}),Object(ne.jsx)("div",{className:"button-wrapper",children:Object(ne.jsx)(ge.a,{color:"primary",onClick:t,children:"Okay"})})]})})}}]),n}(i.Component)),nn=n(176),rn=(n(884),Object(Se.c)((function(e){var t=e.onClose,n=e.onSave,r=e.intl,a=Object(i.useRef)(null),s=Object(b.d)(),o=Object(b.e)((function(e){return e.viewSet.createdViewSets})),c=Object(b.e)((function(e){return e.viewSet.currentViewSet})),p=Object(b.e)((function(e){return e.inspections})),v=Object(b.e)((function(e){return e.app.configuration})),f=Object(b.e)((function(e){return e.app.myPermissions})),h=Object(Le.t)(f),m=Object(Le.k)(f),g=Object(i.useState)(c.name),j=Object(d.a)(g,2),O=j[0],y=j[1],S=Object(i.useState)(!1),k=Object(d.a)(S,2),x=k[0],I=k[1],V=Object(i.useState)(""),C=Object(d.a)(V,2),N=C[0],T=C[1],E=Object(i.useState)(null),P=Object(d.a)(E,2),A=P[0],M=P[1],D=Object(i.useState)(!1),R=Object(d.a)(D,2),L=R[0],_=R[1],F=Object(i.useState)(""),U=Object(d.a)(F,2),W=U[0],H=U[1],q=Object(i.useState)(""),z=Object(d.a)(q,2),B=z[0],G=z[1],K=Object(i.useState)(!1),Y=Object(d.a)(K,2),J=Y[0],Z=Y[1],Q=Object(i.useState)(""),$=Object(d.a)(Q,2),ee=$[0],te=$[1],ie="1.0.0",re=function(e){return Object.keys(o).filter((function(t){return t===e})).length>0},ae=function(){var e=function(e){for(var t=e,n=1;re(t);)t="".concat(e).concat(n),n++;return t}("Initial");s(Object(X.y)(e))},se=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.getWebAppVersion(),n={currentViewSet:c,editingViewIds:oe(),timestamp:new Date,version:"1.0.0",webAppVersion:t},e.next=4,ce(n);case 4:me();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=[];return Object.keys(p).forEach((function(t){var n=parseInt(t,10);p[t]&&p[t].sharedState&&p[t].sharedState.editingViewId&&e.push({inspectionId:n,editingViewId:p[t].sharedState.editingViewId})})),e},ce=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),i=new Blob([n],{type:"application/json"}),e.next=4,URL.createObjectURL(i);case 4:r=e.sent,Object(nn.a)(r,"viewset.json");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){try{var t=JSON.parse(e);if(pe(t.currentViewSet.id))return I(!0),void M(t);be(t)}catch(n){we(),w.a.error(n)}},le=function(e){T(""),e&&s(Object(X.B)(N))},de=function(){be(A)},pe=function(e){return c.id===e},be=function(e){return ge(),ve(e.version)?(fe(e.version)&&Se(),e.currentViewSet.id?(s(Object(X.ib)(e.currentViewSet,e.currentViewSet.id)),e.editingViewIds&&e.editingViewIds.forEach((function(e){s(Object(X.P)(e.inspectionId,e.editingViewId))})),s(Object(X.A)()),void xe()):(we(),void w.a.error("Could not load viewset id."))):(ye(),void w.a.error("Version of file is not valid."))},ve=function(e){return ie===e||!(!Kt.a.valid(e)||"major"===Kt.a.diff(ie,e))},fe=function(e){return"minor"===Kt.a.diff(ie,e)&&Kt.a.gt(e,ie)},me=function(){t()},ge=function(){H(Object(ne.jsx)(he.a,{id:"notifications.successfulAction"})),G(Object(ne.jsx)(he.a,{id:"notifications.successfullyLoadedFile"})),Z(!0)},we=function(){H(Object(ne.jsx)(he.a,{id:"notifications.errorOccurred"})),G(Object(ne.jsx)(he.a,{id:"notifications.error.loadingFile"})),_(!0)},ye=function(){H(Object(ne.jsx)(he.a,{id:"notifications.viewsetVersionIncompatibleTitle"})),G(Object(ne.jsx)(he.a,{id:"notifications.viewsetVersionIncompatibleMessage"})),_(!0)},Se=function(){H(Object(ne.jsx)(he.a,{id:"notifications.minorVersionDiffTitle"})),G(Object(ne.jsx)(he.a,{id:"notifications.minorVersionDiffMessage"})),Z(!0)},xe=function(){_(!0)},Ie=function(e){if(h)return ee!==e?Object(ne.jsx)(ke.a,{onClick:function(){te(e),y(e)},tooltip:r.messages["viewSetManager.editViewSetName"],iconUrl:ze.a}):Object(ne.jsx)(ke.a,{onClick:function(){ee!==O&&Object.keys(o).includes(O)?alert("Viewset with this name already exists."):(s(Object(X.C)(ee,O)),te(""),y(""))},tooltip:r.messages["viewSetManager.changeViewSetName"],iconUrl:en})},Ve=function(e){e.cells;var t=e.columns,n=[];return t.forEach((function(e,i){"delete"===e.key?n.push(Object(ne.jsx)("div",{style:{width:t[i].width,paddingRight:3},children:Object(ne.jsx)(ke.a,{tooltip:r.messages["viewSetManager.newViewSet"],iconUrl:Xt.a,onClick:function(){return ae()}})},"header_".concat(i))):n.push(Object(ne.jsx)("div",{className:"viewsetmanager-header-wrapper",children:t[i].title},"header_".concat(i)))})),n},Ce=function(){var e=[];return Object(Le.E)(f)&&e.push({intlId:"viewSetManager.save",iconUrl:Zt.a,onClickHandler:function(){n(),me()}}),Object(Le.D)(f)&&e.push({intlId:"viewSetManager.export",iconUrl:Qt,onClickHandler:function(){se()}}),h&&e.push({intlId:"viewSetManager.import",iconUrl:$t,onClickHandler:function(){a.current.click()}}),e}(),Ne=o&&Object.keys(o).map((function(e){return{edit:Ie(e),delete:m?Object(ne.jsx)(ke.a,{onClick:function(){return T(e)},tooltip:r.messages["viewSetManager.deleteIconTooltip"],iconUrl:Jt}):void 0,name:ee===e?Object(ne.jsx)("div",{className:"viewsetmanager-edit-viewset-name-wrapper",children:Object(ne.jsx)(yt.a,{fullWidth:!0,type:"text",inputProps:{style:{height:29}},value:O,onChange:function(e){return y(e.target.value.substring(0,20))}})}):e,id:e}})),Te=[{key:"name",dataKey:"name",title:"Name",width:0,flexGrow:1},{key:"edit",dataKey:"edit",title:"",width:40},{key:"delete",dataKey:"delete",title:"",width:40}];return Object(ne.jsxs)("div",{children:[Object(ne.jsxs)(je.a,{title:Object(ne.jsx)(he.a,{id:"viewSetManager.title"}),dialogActions:Ce,onClose:function(){me()},open:!0,children:[Object(ne.jsx)("div",{className:"viewsetmanager-headline-wrapper",children:Object(ne.jsx)(he.a,{id:"viewSetManager.editViewSetHeadline"})}),Object(ne.jsx)("div",{className:"viewsetmanager-table-wrapper",children:Object(ne.jsx)(Yt.a,{children:function(e){var t=e.width,n=e.height;return Object(ne.jsx)(Yt.c,{headerRenderer:Ve,columns:Te,data:Ne,width:t,height:n-20,headerHeight:30,rowHeight:30},"viewset-table")}},"autoresizer")})]}),Object(ne.jsx)(Oe,{open:x,onClose:function(e){return function(e){I(!1),e?de():a.current.value=""}(e)},title:Object(ne.jsx)(he.a,{id:"viewSetManager.importConfirm.title"}),message:Object(ne.jsx)(he.a,{id:"viewSetManager.importConfirm.message"})}),Object(ne.jsx)(Oe,{open:""!==N,onClose:function(e){return le(e)},message:Object(ne.jsx)(he.a,{id:"viewSetManager.deleteConfirm.message",values:{viewsetName:N}})}),Object(ne.jsx)(tn,{onClose:function(){_(!1),J&&me()},open:L,title:W,message:B}),Object(ne.jsx)("input",{ref:a,style:{display:"none"},type:"file",onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsText(t),n.onload=function(e){ue(e.target.result)}}}})]})}))),an=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={selectedIndex:0,viewSetManagerOpen:!1},e.select=function(t){return e.setState({selectedIndex:t})},e}return Object($.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSave,i=t.bottomNavHidden,r=t.isSVOConfigLoaded,a=t.myPermissions;return Object(ne.jsxs)("div",{className:"bottom-nav-wrapper ".concat(i?"bottom-nav-hidden":""),children:[Object(ne.jsxs)("div",{className:"bottom-nav",children:[r&&Object(ne.jsx)(Bt,{}),r&&(Object(Le.D)(a)||Object(Le.t)(a))?Object(ne.jsxs)("div",{className:"view-manager",onClick:function(){e.setState({viewSetManagerOpen:!e.state.viewSetManagerOpen})},children:[Object(ne.jsx)("img",{src:Wt,alt:""}),Object(ne.jsx)(he.a,{id:"viewSetManager"})]}):void 0]}),Object(ne.jsx)("button",{className:"bottom-hider",onClick:function(){e.props.setBottomNavHidden(!i)},children:i?"show":"hide"}),r&&Object(ne.jsx)("div",{children:this.state.viewSetManagerOpen&&Object(ne.jsx)(rn,{onClose:function(){return e.setState({viewSetManagerOpen:!1})},onSave:n})})]})}}]),n}(i.Component),sn=Object(Se.c)(Object(b.c)((function(e){return{fullscreenMode:e.viewSet.fullscreenMode,bottomNavHidden:e.viewSet.bottomNavHidden,isSVOConfigLoaded:e.viewSet.isSVOConfigLoaded,myPermissions:e.app.myPermissions}}),(function(e){return{setBottomNavHidden:function(t){return e(Object(X.I)(t))}}}))(an)),on=(ue.a.shape({request:ue.a.func.isRequired}),n(885),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object($.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.message;return!!t&&Object(ne.jsx)("div",{className:"modal-fullscreen-style",children:Object(ne.jsx)("div",{className:"modal-fullscreen-inner",children:n})})}}]),n}(i.Component));on.defaultProps={visible:!1,message:void 0};var cn=on,un=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={viewSetFactory:new N.h,throttledWindwResizeHandler:pe()((function(){return e.props.increaseChangeCounter()}),500)},e.onWebsocketConnect=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.addConnectionEstablishedNotification();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onWebsocketDisconnect=function(){e.props.addConnectionLostNotification()},e}return Object($.a)(n,[{key:"handleBeforeUnload",value:function(e){e.preventDefault(),e.returnValue=""}},{key:"componentDidMount",value:function(){if(!this.props.currentViewSet){var e=N.a,t=this.state.viewSetFactory.getViewSet(e);this.props.setViewSet(t,t.id)}this.props.defaultViewSetName&&this.props.changeViewSetAfterLoading(this.props.defaultViewSetName),this.props.protobuf&&this.props.socket&&this.onWebsocketConnect(this.props.protobuf),window.addEventListener("resize",this.state.throttledWindwResizeHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.state.throttledWindwResizeHandler)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.socket!==this.props.socket&&e.protobuf&&e.socket&&this.onWebsocketConnect(e.protobuf),e.socket===this.props.socket||e.socket||this.onWebsocketDisconnect()}},{key:"componentDidUpdate",value:function(e){this.props.unsavedChanges&&e.currentViewSet?window.addEventListener("beforeunload",this.handleBeforeUnload):window.removeEventListener("beforeunload",this.handleBeforeUnload)}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,i=t.currentViewSet,r=t.bottomNavHidden,a=t.topNavHidden,s=t.protobuf,o=t.modalNotificationData,c=t.isHelpViewOpen,u=t.closeHelpView;return this.props.user&&this.props.authToken?Object(ne.jsx)(le.a,{locale:n,messages:Ze.a[n],children:Object(ne.jsxs)("div",{className:"vh-100 center",children:[Object(ne.jsx)(cn,{visible:!!o,message:o&&o.message}),Object(ne.jsx)(Ut,{onLoggedOut:this.props.onLoggedOut}),Object(ne.jsx)(Xe,{views:i,onChange:function(t){e.props.setLayout(t)},bottomNavHidden:r,topNavHidden:a}),Object(ne.jsx)(sn,{onSave:function(){var t=e.context.store.getState();e.props.saveClientChunk(s,t)}}),Object(ne.jsx)(Je.a,{open:c,onClose:function(){return u()}})]})}):Object(ne.jsx)(Z.a,{to:"/"})}}]),n}(i.Component);un.contextType=b.b,un.defaultProps={bottomNavHidden:!1,topNavHidden:!1,protobuf:void 0,viewSetTemplate:void 0,user:void 0,authToken:void 0,location:{state:{}},currentViewSet:void 0};var ln=Object(b.c)((function(e){return{isHelpViewOpen:e.app.isHelpViewOpen,locale:e.app.locale,protobuf:e.app.protobuf,socket:e.app.socket,user:e.app.user,authToken:e.app.authToken,currentViewSet:e.viewSet.currentViewSet,bottomNavHidden:e.viewSet.bottomNavHidden,topNavHidden:e.viewSet.topNavHidden,defaultViewSetName:e.viewSet.defaultViewSetName,createdViewSets:e.app.createdViewSets,modalNotificationData:e.app.modalNotificationData,increaseChangeCounter:ue.a.func.isRequired,unsavedChanges:e.viewSet.unsavedChanges}}),(function(e,t){return{closeHelpView:function(){e(Object(X.s)())},setViewSet:function(t,n){e(Object(X.ib)(t,n))},setLayout:function(t){e(Object(X.L)(t))},addConnectionEstablishedNotification:function(){e(Object(X.b)())},addConnectionLostNotification:function(){e(Object(X.c)())},saveClientChunk:function(t,n){e(Object(X.G)(t,n))},increaseChangeCounter:function(){e(Object(X.u)())},changeViewSetAfterLoading:function(t){e(Object(X.q)(t))}}}))(un),dn=n(92),pn=n(241),bn=n.n(pn),vn=(n(886),function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).loadCurrentPermissions=function(e){if(e){var t=e,n=bn()(t);i.setState({initiallySelectedPermissions:t,currentSelectedPermissions:n})}},i.savePermissions=function(e){var t=Object(Le.H)(e);i.props.proxy.setUserPermissions(t)},i.onSaveClicked=function(){i.savePermissions(i.state.currentSelectedPermissions)},i.onResetClicked=function(){i.setState({currentSelectedPermissions:bn()(i.state.initiallySelectedPermissions)})},i.allAvailablePermissions=new Set,i.state={redirect:!1,initiallySelectedPermissions:new Map,currentSelectedPermissions:new Map},i}return Object($.a)(n,[{key:"componentDidMount",value:function(){f.a.SvPb.Permissions&&(this.allAvailablePermissions=Object(Le.G)(f.a.SvPb.Permissions),this.loadCurrentPermissions(this.props.groupPermissions))}},{key:"componentDidUpdate",value:function(e){(void 0===e.groupPermissions&&this.props.groupPermissions||e.groupPermissions!==this.props.groupPermissions)&&this.loadCurrentPermissions(this.props.groupPermissions)}},{key:"onCheck",value:function(e,t,n){var i=bn()(this.state.currentSelectedPermissions);i.has(e)||i.set(e,{groupPermissions:new Set,users:[]}),n?i.get(e).groupPermissions.add(t):i.get(e).groupPermissions.delete(t),this.setState({currentSelectedPermissions:i})}},{key:"mapsAreEqual",value:function(e,t){if(e.size!==t.size)return!1;var n,i=Object(dn.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r[0]))return!1;var a=t.get(r[0]).groupPermissions;if(r[1].groupPermissions.size!==a.size)return!1;var s,o=Object(dn.a)(r[1].groupPermissions);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(!a.has(c))return!1}}catch(u){o.e(u)}finally{o.f()}}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"getColGroup",value:function(){var e=this.state.currentSelectedPermissions,t=[];return t.push(Object(ne.jsx)("col",{style:{width:"200px"}},"col_permissions")),e.forEach((function(e,n){t.push(Object(ne.jsx)("col",{style:{width:"80px"}},"col_".concat(n)))})),t.push(Object(ne.jsx)("col",{style:{width:"*"}},"col_descriptions")),t}},{key:"getTableHead",value:function(){var e=this.state.currentSelectedPermissions,t=[];return t.push(Object(ne.jsx)("td",{children:Object(ne.jsx)("div",{className:"permission-management-permissions-header-left",children:Object(ne.jsx)(he.a,{id:"permissions.permissions"})})},"header_td_permissions")),e.forEach((function(e,n){t.push(Object(ne.jsxs)("td",{children:[Object(ne.jsx)("div",{className:"permission-management-permissions-header",children:n}),Object(ne.jsx)("div",{className:"permission-management-permissions-subheader",children:Array.isArray(e.users)&&e.users.length>0?"(".concat(e.users.join(", "),")"):void 0})]},"header_td_".concat(n)))})),t.push(Object(ne.jsx)("td",{children:Object(ne.jsx)("div",{className:"permission-management-permissions-header",children:Object(ne.jsx)(he.a,{id:"permissions.description"})})},"header_td_description")),Object(ne.jsx)("tr",{children:t})}},{key:"getData",value:function(e){var t=this,n=this.state.currentSelectedPermissions,i=[];return this.allAvailablePermissions.forEach((function(r){var a=[];a.push(Object(ne.jsx)("td",{children:Object(ne.jsx)("div",{className:"permission-management-label",children:r})},"body_td_permission_".concat(r))),n.forEach((function(n,i){var s=n.groupPermissions.has(r);a.push(Object(ne.jsx)("td",{children:Object(ne.jsx)(Nt.a,{type:"checkbox",checked:s,name:"checkbox_".concat(i,"_").concat(r),color:"primary",className:"permission-management-checkbox",onClick:function(n){return e&&"sdm"!==i?t.onCheck(i,r,n.target.checked):void 0},disabled:!e||"sdm"===i})},"body_td_".concat(i,"_").concat(r)))})),a.push(Object(ne.jsx)("td",{children:Object(ne.jsx)("div",{className:"permission-management-label",children:Object(ne.jsx)(he.a,{id:"permissionDescription.".concat(r)})})},"body_td_description_".concat(r))),i.push(Object(ne.jsx)("tr",{children:a},"body_tr_".concat(r)))})),i}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirect,i=t.initiallySelectedPermissions,r=t.currentSelectedPermissions,a=this.props.myPermissions,s=Object(Le.C)(a),o=Object(Le.s)(a);if(n)return Object(ne.jsx)(Z.a,{to:"/app"});var c=!this.mapsAreEqual(i,r),u=this.getColGroup(),l=this.getTableHead(),d=this.getData(o);return Object(ne.jsxs)("div",{className:"permission-management-wrapper",children:[Object(ne.jsxs)("div",{className:"permission-management-fixed-header",children:[Object(ne.jsxs)(ge.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({redirect:!0})},children:[Object(ne.jsx)("img",{src:Ne.a,alt:"back",className:"image-item"}),Object(ne.jsx)(he.a,{id:"permissions.backToWebApp"})]}),Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",disabled:!c,onClick:this.onSaveClicked,children:"Save"}),Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",disabled:!c,onClick:this.onResetClicked,children:"Reset"})]}),Object(ne.jsx)("h1",{children:Object(ne.jsx)(he.a,{id:"permissions.permissionManagement"})}),Object(ne.jsx)("h3",{children:Object(ne.jsx)(he.a,{id:"permissions.helpText"})}),s||o?Object(ne.jsxs)("table",{className:"permission-management-table-wrapper",children:[Object(ne.jsx)("colgroup",{children:u}),Object(ne.jsx)("thead",{children:l}),Object(ne.jsx)("tbody",{children:d})]}):void 0]})}}]),n}(i.Component)),fn=Object(b.c)((function(e){return{groupPermissions:e.app.groupPermissions,proxy:e.app.proxy,user:e.app.user,myPermissions:e.app.myPermissions}}),null)(vn),hn=n(154),mn=function(){var e=Object(b.d)(),t=Object(b.e)((function(e){return e.app})),n=t.isHelpViewOpen,i=t.locale;return Object(ne.jsx)(le.a,{locale:i,messages:Ze.a[i],children:Object(ne.jsxs)(xe,{dispatch:e,helpSection:hn.a.PERMISSIONS,children:[Object(ne.jsx)(fn,{}),Object(ne.jsx)(Je.a,{open:n,onClose:function(){return e(Object(X.s)())}})]})})},gn=n(120),jn=(n(887),n(943)),On=n(145),wn=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback,r=e.fieldType,a=e.defaultValue;return Object(ne.jsx)(yt.a,{fullWidth:!0,type:r,variant:"outlined",value:t||a,onChange:function(e){return n&&n(e.target.value)},InputProps:i?{endAdornment:Object(ne.jsx)(Ct.a,{position:"end",children:Object(ne.jsx)(jn.a,{edge:"end","aria-label":"remove",onClick:function(){return i()},title:"Remove",children:Object(ne.jsx)("img",{src:On.a,alt:"x"})})})}:null})},yn=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback,r=e.typeName;return Object(ne.jsx)(wn,{value:t,typeName:r,changeCallback:n,removeCallback:i,fieldType:"text",defaultValue:""})},Sn=function(e){for(var t=e.value,n=e.changeCallback,i=e.typeName,r=e.defaultValue,a=e.options,s=e.labels,o=e.SingleParameterComponent,c=t&&t.length||0,u=[],l=function(e){u.push(Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsxs)("div",{className:"field-name-type",children:[e,Object(ne.jsx)("small",{children:i})]}),Object(ne.jsx)("div",{className:"field-settings",children:Object(ne.jsx)(o,{value:t[e],changeCallback:function(i){var r=Object(m.a)(t||[]);r[e]=i,n(r)},options:a,labels:s,removeCallback:function(){return function(e){var i=Object(m.a)(t);i.splice(e,1),n(i)}(e)}})})]},"".concat(i,"_array_").concat(e)))},d=0;d<c;d++)l(d);return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{className:"field-container is-array",children:u.length?u:Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsx)("div",{className:"field-name-type",children:Object(ne.jsx)("em",{children:Object(ne.jsx)(he.a,{id:"debugger.noItemsMessage"})})}),Object(ne.jsx)("div",{className:"field-settings"})]})}),Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",onClick:function(){n([].concat(Object(m.a)(t||[]),[r]))},children:Object(ne.jsx)(he.a,{id:"debugger.addItemButtonText"})})]})},kn=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(ne.jsx)(Sn,{value:t,changeCallback:n,typeName:i,defaultValue:"",SingleParameterComponent:yn})},xn=n(230),In=function(e){var t=e.value,n=e.options,r=e.labels,a=e.changeCallback,s=e.removeCallback;Object(i.useEffect)((function(){"undefined"===typeof t&&a&&a(n[0])}));var o=[];return r?(n.forEach((function(e,t){return o.push({option:e,label:r[t]})})),o=o.sort((function(e,t){return e.label.localeCompare(t.label)})),n=o.map((function(e){return e.option})),r=o.map((function(e){return e.label}))):n=n.sort(),Object(ne.jsx)(xn.a,{selectedValue:t,values:n,labels:r,onSelectionChanged:function(e){a&&a(e.param)},id:"param",InputProps:s?{endAdornment:Object(ne.jsx)(Ct.a,{position:"end",children:Object(ne.jsx)(jn.a,{edge:"end","aria-label":"remove",onClick:function(){return s()},title:"Remove",children:Object(ne.jsx)("img",{src:On.a,alt:"x"})})})}:null})},Vn=function(e){var t=e.value,n=e.changeCallback;e.removeCallback;return Object(ne.jsx)(In,{value:t&&"false"!==t?"true":"false",options:["true","false"],changeCallback:function(e){return n("true"===e)}})},Cn=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(ne.jsx)(Sn,{value:t,changeCallback:n,typeName:i,defaultValue:!1,SingleParameterComponent:Vn})},Nn=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback;return Object(ne.jsx)(wn,{value:t,changeCallback:n,removeCallback:i,fieldType:"number",defaultValue:0})},Tn=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(ne.jsx)(Sn,{value:t,changeCallback:n,typeName:i,defaultValue:0,SingleParameterComponent:Nn})},En=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback;return Object(ne.jsx)(wn,{value:t,changeCallback:n,removeCallback:i,fieldType:"number",defaultValue:0})},Pn=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(ne.jsx)(Sn,{value:t,changeCallback:n,typeName:i,defaultValue:0,SingleParameterComponent:En})},An=function(e){var t=e.value,n=e.changeCallback;e.removeCallback;return Object(ne.jsx)(yt.a,{fullWidth:!0,type:"file",variant:"outlined",value:t||"",onChange:function(e){return n&&n(e.target.value)}})},Mn=function(e){var t=e.value,n=e.options,i=e.changeCallback;e.removeCallback;return Object(ne.jsx)(In,{value:String(t),options:Object.values(n),labels:Object.keys(n),changeCallback:function(e){return i(e)}})},Dn=function(e){var t=e.value,n=e.options,i=e.changeCallback;return Object(ne.jsx)(Sn,{value:(t||[]).map((function(e){return String(e)})),changeCallback:i,options:Object.values(n),labels:Object.keys(n),SingleParameterComponent:In})},Rn=function(e){var t=e.name,n=e.onResponse,r=Object(b.e)((function(e){return e.app.protobuf})),a=Object(i.useState)({}),s=Object(d.a)(a,2),o=s[0],c=s[1],p=Object(i.useState)({}),v=Object(d.a)(p,2),h=v[0],j=v[1],O=Object(i.useState)(""),w=Object(d.a)(O,2),y=w[0],S=w[1];if(Object(i.useEffect)((function(){y!==t&&(c({}),j({}),S(t))}),[t,y]),!f.a.SvPb[t])return Object(ne.jsx)("div",{});var k=function(){var e=Object(l.a)(u.a.mark((function e(){var i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(""),"MyDummyRequest"!==t){e.next=4;break}return n(o),e.abrupt("return");case 4:return i=f.a.SvPb[t].create(o),console.dir(o),e.prev=6,e.next=9,r.request(i);case 9:a=e.sent,n(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),n("An error occured: ".concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),x=function(e,t,n){var i,r,a=(i=o,(r=n?"".concat(n,".").concat(e.name):e.name)?Object(gn.get)(i,r):i);switch(e.type){case"string":return t?function(e,t,n){return Object(ne.jsx)(kn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,n)}})}(e,n,a):function(e,t,n){return Object(ne.jsx)(yn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,n)}},"txt_".concat(e.name))}(e,n,a);case"bool":return t?function(e,t,n){return Object(ne.jsx)(Cn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,n)}})}(e,n,a):function(e,t,n){return Object(ne.jsx)(Vn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,n)}},"bool_".concat(e.name))}(e,n,a);case"int32":case"int64":case"uint32":case"uint64":case"sint32":case"sint64":case"fixed32":case"fixed64":case"sfixed32":case"sfixed64":return t?function(e,t,n){return Object(ne.jsx)(Tn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,Number(n))}})}(e,n,a):function(e,t,n){return Object(ne.jsx)(Nn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,Number(n))}},"integer_".concat(e.name))}(e,n,a);case"double":case"float":return t?function(e,t,n){return Object(ne.jsx)(Pn,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,Number(n))}})}(e,n,a):function(e,t,n){return Object(ne.jsx)(En,{typeName:e.type,value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,Number(n))}},"decimal_".concat(e.name))}(e,n,a);case"bytes":return function(e,t,n){return Object(ne.jsx)(An,{value:n,changeCallback:function(n){return I(t?"".concat(t,".").concat(e.name):e.name,n)}},"bytes_".concat(e.name))}(e,n,a);default:var s=f.a.SvPb.lookup(e.type);if(s&&"Enum"===s.constructor.name)return t?function(e,t,n,i){return Object(ne.jsx)(Dn,{value:i,options:e.values,changeCallback:function(e){I(n?"".concat(n,".").concat(t.name):t.name,e)}})}(s,e,n,a):function(e,t,n,i){return Object(ne.jsx)(Mn,{value:i,options:e.values,changeCallback:function(e){I(n?"".concat(n,".").concat(t.name):t.name,e)}})}(s,e,n,a);var c=n?"".concat(n,".").concat(e.name):e.name;return t?N(s,c,a):V(s,c,a)}},I=function(e,t){var n=Object(gn.cloneDeep)(o);Object(gn.set)(n,e,t),c(n)},V=function(e,t){var n=[],i=(null===e||void 0===e?void 0:e.fields)?Object.keys(e.fields):[];return e.oneofs&&Object.keys(e.oneofs).forEach((function(i){n.push(Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsxs)("div",{className:"field-name-type",children:[i,Object(ne.jsx)("small",{children:"oneof type"})]}),Object(ne.jsx)("div",{className:"field-settings",children:Object(ne.jsx)(In,{value:h["".concat(t,".").concat(i)],options:e.oneofs[i].oneof,changeCallback:function(e){j(Object(g.a)(Object(g.a)({},h),{},Object(C.a)({},"".concat(t,".").concat(i),e)))}})})]},"div_".concat(i)))})),i.forEach((function(i){var r=e.fields[i];r&&(r.partOf&&r.name!==h["".concat(t,".").concat(r.partOf.name)]||n.push(Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsxs)("div",{className:"field-name-type",children:[r.name,Object(ne.jsxs)("small",{children:[r.rule," ",r.type,r.required?"*":""]})]}),Object(ne.jsx)("div",{className:"field-settings",children:x(r,"repeated"===r.rule,t)})]},"div_".concat(r.name))))})),!i.length&&t.length&&n.push(Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsx)("div",{className:"field-name-type",children:Object(ne.jsx)("em",{children:Object(ne.jsx)(he.a,{id:"debugger.nothingToConfigureMessage"})})}),Object(ne.jsx)("div",{className:"field-settings"})]},"div_type.name")),n},N=function(e,t,n){var i=[];return(n||[]).forEach((function(r,a){i.push(Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsxs)("div",{className:"field-name-type",children:[a,Object(ne.jsx)("small",{children:e.name})]}),Object(ne.jsx)("div",{className:"field-settings",children:V(e,t?"".concat(t,".").concat(a):a,n[a])})]},"".concat(e.name,"_array_").concat(a)))})),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{className:"field-container is-array",children:i.length?i:Object(ne.jsxs)("div",{className:"field-container",children:[Object(ne.jsx)("div",{className:"field-name-type",children:Object(ne.jsx)("em",{children:Object(ne.jsx)(he.a,{id:"debugger.noItemsMessage"})})}),Object(ne.jsx)("div",{className:"field-settings"})]})}),Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",onClick:function(){return function(e,t){var n=t?Object(m.a)(t):[];n.push({}),I(e,n)}(t,n)},children:"Add"})]})},T=V(f.a.SvPb[t],"");return Object(ne.jsxs)("div",{className:"request-parameters-container",children:[Object(ne.jsxs)("div",{className:"request-name-type",children:[t,Object(ne.jsx)("small",{children:"Request"})]}),Object(ne.jsx)("div",{className:"request-parameters-fields-container",children:T&&T.length?T:Object(ne.jsx)(he.a,{id:"debugger.noParametersMessage"})}),Object(ne.jsx)(ge.a,{className:"send-button",variant:"contained",color:"primary",onClick:function(){return k()},children:Object(ne.jsx)(he.a,{id:"debugger.sendRequest"})})]})},Ln=n(233),_n=(n(888),function(e){var t=e.response,n=Object(i.useState)(""),r=Object(d.a)(n,2),a=r[0],s=r[1],o=Object(i.useState)(""),c=Object(d.a)(o,2),p=c[0],b=c[1];Object(i.useEffect)((function(){if(t&&t.imageData){var e=new Ln.a({history:null,trigger:null,isReject:!1});s(e.buildUrl(t.imageData))}else s("")}),[t]),Object(i.useEffect)((function(){if(t&&t.fileData){var e=new Blob(t.fileData,{type:"octet/stream"});b(window.URL.createObjectURL(e))}else b("")}),[t]);var v=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.clipboard){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.clipboard.writeText(f);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=t?JSON.stringify(t,null,2):"";return Object(ne.jsxs)("div",{className:"response-body-container",children:[Object(ne.jsxs)("div",{className:"response-body-header",children:[Object(ne.jsxs)("div",{className:"response-name-type",children:[t?t.constructor.name:"Response",Object(ne.jsx)("small",{children:"Response"})]}),Object(ne.jsx)("div",{children:Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",onClick:v,disabled:!f,children:Object(ne.jsx)(he.a,{id:"debugger.copyToClipboard"})})})]}),Object(ne.jsxs)("div",{className:"response-content",children:[a?Object(ne.jsx)("img",{src:a,alt:""}):void 0,p?Object(ne.jsx)("a",{href:p,children:"Download"}):void 0,Object(ne.jsx)("pre",{className:"response-formatter",children:f})]})]})}),Fn=(n(889),function(e){var t=e.proto,n=e.chooseCallback,r=Object(i.useState)(""),a=Object(d.a)(r,2),s=a[0],o=a[1],c=Object(i.useState)(null),u=Object(d.a)(c,2),l=u[0],p=u[1],b=Object.keys(t).sort().reduce((function(e,t){return t.toLowerCase().includes(s)?[].concat(Object(m.a)(e),[Object(ne.jsx)("li",{requestname:t,className:l===t?"active":"",onClick:function(){n(t),p(t)},children:t},"li_".concat(t))]):e}),[]);return Object(i.useEffect)((function(){l||(n(b[0].props.requestname),p(b[0].props.requestname))}),[l,n,b]),Object(ne.jsxs)("div",{className:"requests-list",children:[Object(ne.jsxs)("div",{className:"request-list-header",children:[Object(ne.jsx)(he.a,{id:"debugger.requestsListHeader"}),Object(ne.jsx)("small",{children:"Choose one from the list below"})]}),Object(ne.jsx)("div",{className:"requests-filter",children:Object(ne.jsx)(yt.a,{fullWidth:!0,type:"text",variant:"outlined",value:s,onChange:function(e){return o(e.target.value.toLowerCase())},placeholder:"Search..."})}),Object(ne.jsx)("div",{className:"requests",children:Object(ne.jsx)("ul",{children:b})})]})}),Un=(n(890),function(){var e=Object(i.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),s=Object(d.a)(a,2),o=s[0],c=s[1],u=Object.keys(f.a.SvPb).sort().reduce((function(e,t){return t.endsWith("Request")?t.endsWith("StreamRequest")||f.a.SvPb[t].filename.includes("InspectionCommands")&&"InspectionCmdRequest"!==t||f.a.SvPb[t].filename.includes("ConfigCommands")&&"ConfigCommandRequest"!==t?e:Object(g.a)(Object(g.a)({},e),{},Object(C.a)({},t,f.a.SvPb[t])):e}),{});return Object(ne.jsxs)("div",{className:"debugger-wrapper",children:[Object(ne.jsx)("div",{className:"debugger-header",children:Object(ne.jsxs)(ge.a,{component:J.b,variant:"contained",color:"primary",to:"/app",children:[Object(ne.jsx)("img",{src:Ne.a,alt:"back",className:"image-item"}),Object(ne.jsx)(he.a,{id:"debugger.backToWebApp"})]})}),Object(ne.jsx)("div",{className:"request-list-container",children:Object(ne.jsx)(Fn,{proto:u,chooseCallback:function(e){r(e),c(null)}})}),Object(ne.jsx)("div",{className:"request-container",children:Object(ne.jsx)(Rn,{name:n,onResponse:function(e){return c(e)}})}),Object(ne.jsx)("div",{className:"response-container",children:Object(ne.jsx)(_n,{response:o})})]})}),Wn=function(){var e=Object(b.e)((function(e){return e.app})).locale;return Object(ne.jsx)(le.a,{locale:e,messages:Ze.a[e],children:Object(ne.jsx)(Un,{})})},Hn=function(e){var t=e.user,n=e.authToken,i=e.onLoggedOut;return Object(b.d)()({type:"LOG_IN",authToken:n,user:t}),Object(ne.jsx)(J.a,{children:Object(ne.jsxs)("div",{children:[Object(ne.jsx)(Z.b,{exact:!0,path:"/",render:function(){return Object(ne.jsx)(Z.a,{to:"/app"})}}),Object(ne.jsx)(Z.b,{path:"/app",render:function(e){return Object(ne.jsx)(ln,Object(g.a)(Object(g.a)({},e),{},{onLoggedOut:i}))}}),Object(ne.jsx)(Z.b,{path:"/hmi-v1",component:ae}),Object(ne.jsx)(Z.b,{path:"/permissions",component:mn}),Object(ne.jsx)(Z.b,{path:"/logout",render:function(e){return Object(ne.jsx)(oe,Object(g.a)(Object(g.a)({},e),{},{onLoggedOut:i}))}}),Object(ne.jsx)(Z.b,{path:"/debugger",component:Wn})]})})},qn=n(902),zn=n(173),Bn={width:400,margin:20,padding:25,display:"inline-block"},Gn=function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).onSubmit=function(e){e.preventDefault(),Object(zn.b)(i.state.username,i.state.password).then((function(e){return i.props.onLogin(e)})).catch((function(){return i.setState({loginFailed:!0})}))},i.state={username:null,password:null},i}return Object($.a)(n,[{key:"render",value:function(){var e=this;return Object(ne.jsx)("div",{className:"flex items-center justify-center",id:"login-page",children:Object(ne.jsxs)(qn.a,{elevation:5,style:Bn,children:[this.state.loginFailed?Object(ne.jsx)("p",{className:"red",children:"Log In failed"}):null,Object(ne.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(ne.jsx)(yt.a,{label:"Username",style:{width:"100%"},margin:"dense",type:"username",onChange:function(t){e.setState({username:t.target.value})}}),Object(ne.jsx)("br",{}),Object(ne.jsx)(yt.a,{label:"Password",style:{width:"100%"},autoComplete:"current-password",margin:"dense",type:"password",onChange:function(t){e.setState({password:t.target.value})}}),Object(ne.jsx)("br",{}),Object(ne.jsx)("br",{}),Object(ne.jsx)(ge.a,{variant:"contained",color:"primary",type:"submit",children:"LogIn"})]})]})})}}]),n}(i.Component),Kn=n(123),Yn=(n(891),n(892),n(893),function(){var e=Object(i.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(""),s=Object(d.a)(a,2),o=s[0],c=s[1],h=Object(i.useState)(null),m=Object(d.a)(h,2),g=m[0],j=m[1],O=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return function(t){return function(n){if(Kn.a.enableAutoSave){var i=e.getState();if("SET_"===n.type.substr(0,4)&&!i.app.saveOperationInProcess&&i.app.protobuf){var r=i.app,a=r.currentClientChunkRevision,s=r.protobuf,o=r.user;e.dispatch(Object(X.G)(s,o,i,a))}}return t(n)}}},n=Object(v.d)(Y({websocketUrl:Kn.a.websocketServerUrl,dispatch:function(e){return n.dispatch(e)}}),Object(v.c)(Object(v.a)(p.a,t),window.devToolsExtension?window.devToolsExtension():function(e){return e})),e.next=4,f.a.init();case 4:n.dispatch(Object(X.cb)()),j(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){(n&&o||"/hmi-v1"===window.location.pathname)&&O()}),[n,o]);var w=Object(k.d)();return w&&(w.user&&!n&&r(w.user),w.authToken&&!o&&c(w.authToken)),n&&o||"/hmi-v1"===window.location.pathname?g?(document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?(g.dispatch(Object(X.J)(!0)),clearTimeout(this.hibernateTimer)):this.hibernateTimer=setTimeout((function(){g.dispatch(Object(X.J)(!1))}),1e4)})),Object(ne.jsx)(b.a,{store:g,children:Object(ne.jsx)(Hn,{user:n,authToken:o,onLoggedOut:function(){return r(null),void c("")}})})):Object(ne.jsx)("div",{}):Object(ne.jsx)(Gn,{onLogin:function(e){return function(e){e&&e.user&&e.authToken&&(r(e.user),c(e.authToken))}(e)}})}),Xn=n(467),Jn=Object(Xn.a)({palette:{primary:{main:"rgb(135, 135, 135)"}},typography:{useNextVariants:!0,htmlFontSize:10}}),Zn=(n(894),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,957)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),a(e),s(e)}))});s.a.render(Object(ne.jsxs)(r.a.StrictMode,{children:[Object(ne.jsx)(o.a,{theme:Jn,children:Object(ne.jsx)(Yn,{})}),","]}),document.getElementById("root")),Zn()}},[[895,1,2]]]);
//# sourceMappingURL=main.7dad5127.chunk.js.map