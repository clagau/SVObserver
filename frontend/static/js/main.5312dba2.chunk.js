(this.webpackJsonpSVOWebApp=this.webpackJsonpSVOWebApp||[]).push([[0],{116:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(6),r=function(e,t){if(e){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}else i.a.info("forceDownload expects data but did not receive")}},117:function(e,t,n){"use strict";var i=n(11),r=n(10),a=n(19),o=n(21),s=n(0),c=n(476),u=n(178),l=n(53),d=(n(823),n(1)),p=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,i=e.title,r=e.message;return Object(d.jsx)("div",{children:Object(d.jsxs)(l.a,{title:i||"",onClose:function(){return t(!1)},open:n,children:[Object(d.jsx)("div",{className:"message-wrapper",children:r}),Object(d.jsxs)("div",{className:"button-wrapper",children:[Object(d.jsx)(c.a,{color:"primary",onClick:function(){return t(!0)},children:"Okay"}),Object(d.jsx)(c.a,{color:"primary",onClick:function(){return t(!1)},children:Object(d.jsx)(u.a,{id:"cancel"})})]})]})})}}]),n}(s.Component);t.a=p},120:function(e,t,n){"use strict";var i=n(310);var r={authEndpoint:function(e){var t=e?Object(i.parse)(e):window.location,n=t.protocol.replace("ws","http");return"".concat(n,"//").concat(t.host)}("ws://192.168.1.21"),websocketServerUrl:"ws://192.168.1.21",enableAutoSave:!1};t.a=r},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n(20),r=n(11),a=n(10),o=n(3),s=n(12),c=n(5),u=n.n(c),l=n(319),d=n.n(l),p=n(33);function f(e,t){var n=this[e];return n instanceof Map?{dataType:"Map",value:Object(p.a)(n)}:t}function v(e,t){return"object"===typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}var h=n(56),b=n(6),m=n(64),g=function(e,t){for(var n=Math.ceil(e.length/t),i=new Array(n),r=0,a=0;r<n;++r,a+=t)i[r]=e.substr(a,t);return i},j=n(7),w=function(e){if(!e)return"";var t=e.lastIndexOf("\\");-1!==t&&(e=e.substr(t+1));var n=e.lastIndexOf(".");return-1!==n&&(e=e.substr(0,n)),e},O=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.SvPb.GetConfigurationInfoRequest.create(),e.next=3,t.request(n);case 3:return i=e.sent,r=i.fileName,e.abrupt("return",w(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=j.a.SvPb.GetInspectionsRequest.create({}),e.next=4,t.request(n);case 4:return i=e.sent,e.abrupt("return",(i.inspections||[]).map((function(e){return{id:e.id,name:e.name}})));case 8:return e.prev=8,e.t0=e.catch(0),b.a.error("Error while fetching inspection name list:",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return(e||[]).map((function(e){return e.id}))},k=function(e){return(e||[]).map((function(e){return e.name}))},I=function e(t){var n=t.name,i=t.type,r=t.location,a=t.objectIDIndex,o=t.children,s=t.selected,c=(o||[]).map(e);return{id:a&&function(e){if(e.startsWith("{#")){var t=e.indexOf("}");if(!(t<0))return e=e.substr(2,t),parseInt(e,10)}}(a)||null,name:n,type:i,location:r,selected:s,children:c}},x=function(){var e=Object(s.a)(u.a.mark((function e(t,n,i){var r,a,o,s,c,l,d,p,f,v,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[j.a.SvPb.SearchArea.toolsetItems],inspectionID:n,instanceID:0,attribute:j.a.SvPb.ObjectAttributes.viewable,wholeArray:!0,type:j.a.SvPb.ObjectSelectorType.allValueObjects,attributesAllowed:1}),e.next=3,t.request(r);case 3:if((a=e.sent).tree){e.next=7;break}return b.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 7:for(o=I(a.tree),s=new Map,c=o&&o.children&&o.children.slice(0)||[];c.length>0;)if(l=c.shift(),d=l.id,p=l.name,f=l.type,v=l.location,h=l.children,d&&s.set(d,{id:d,name:p,type:f,location:v,fullLocation:"Inspections."+i+"."+v}),h&&h.length)for(m=0;m<h.length;++m)c.push(h[m]);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var i,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[j.a.SvPb.SearchArea.toolsetItems],inspectionID:n,instanceID:0,attribute:j.a.SvPb.ObjectAttributes.viewable,wholeArray:!0,type:j.a.SvPb.ObjectSelectorType.allValueObjects,attributesAllowed:1}),e.prev=1,e.next=4,t.request(i);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),b.a.error(e.t0),e.abrupt("return",null);case 11:if(r.tree){e.next=14;break}return b.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 14:return a=I(r.tree),e.abrupt("return",{tree:a});case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var i,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=j.a.SvPb.GetObjectSelectorItemsRequest.create({areas:[j.a.SvPb.SearchArea.toolsetItems],inspectionID:n,type:j.a.SvPb.ObjectSelectorType.allImageObjects,attribute:j.a.SvPb.ObjectAttributes.archivableImage,attributesAllowed:1}),e.prev=1,e.next=4,t.request(i);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),b.a.error(e.t0),e.abrupt("return",null);case 11:if(r.tree){e.next=14;break}return b.a.error("GetObjectSelectorItemsRequest response does not contain a tree"),e.abrupt("return",null);case 14:return a=I(r.tree),e.abrupt("return",{tree:a});case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.create(),e.next=3,t.request(i);case 3:if((r=e.sent).version){e.next=7;break}return b.a.error("Error while reading version via ".concat(n.name)),e.abrupt("return","Unknown Version");case 7:return e.abrupt("return",r.version);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(u.a.mark((function e(t,n,i,r){var a,o,s,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Map,o=0;case 2:if(!(o<n.length)){e.next=12;break}return s=n[o],c=i[o],e.next=7,r(t,s,c);case 7:(l=e.sent)&&a.set(s,l);case 9:++o,e.next=2;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.SvPb.GetConfigurationTreeRequest.create(),e.next=3,t.request(n);case 3:if((i=e.sent)&&i.tree){e.next=7;break}return b.a.error("Cannot get config tree"),e.abrupt("return",!1);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,e.next=3,E(t);case 3:if(i=e.sent,Object(m.a)((function(){return i.tree.children}))){e.next=7;break}return b.a.error("configTree is not valid"),e.abrupt("return",n);case 7:return i.tree.children.forEach(function(){var e=Object(s.a)(u.a.mark((function e(i){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.objectID){e.next=4;break}return b.a.error("Inspection without valid id: ".concat(r)),e.abrupt("return");case 4:return a=0,e.prev=5,e.next=8,A(t,r,i.name);case 8:a=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),b.a.error("Could not load tool set id for ".concat(i.name," (").concat(r,")")),e.abrupt("return");case 15:n.set(r,Object(o.a)(Object(o.a)({},i),{},{toolSetId:a}));case 16:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(u.a.mark((function e(t,n,i){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.SvPb.InspectionCmdRequest.create({inspectionID:n||void 0,getObjectIdRequest:{name:"".concat(i,".Tool Set")}}),e.prev=1,e.next=4,t.request(r);case 4:return o=e.sent,e.abrupt("return",null===o||void 0===o||null===(a=o.getObjectIdResponse)||void 0===a?void 0:a.objectId);case 8:e.prev=8,e.t0=e.catch(1),b.a.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,i){return e.apply(this,arguments)}}(),M=function(){function e(t){Object(r.a)(this,e),this.filterArrayValuesFromTree=function(e){var t,n,i=[];for(i.push(e);i.length>0;)if(!(t=i.pop()).id&&t.children&&t.children.length){var r="";for(n=0;n<t.children.length;n+=1){if(r===t.children[n].id){t.children=[],t.id=r;break}t.children[n].id&&(r=t.children[n].id)}for(n=0;n<t.children.length;n+=1)i.push(t.children[n])}return e},this.name="",this.inspections=[],this.inspectionIds=[],this.inspectionNames=[],this.idNameMappings=new Map,this.objectSelectorItems=new Map,this.objectSelectorImages=new Map,this.versions={},this.inspectionToolsetMappings=new Map,0!==Object.keys(t).length&&Object.assign(this,t)}return Object(a.a)(e,[{key:"discoverInspectionsWithConfigName",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.all([O(t),y(t)]);case 6:n=e.sent,r=Object(i.a)(n,2),a=r[0],o=r[1],this.name=a,this.inspections=o,this.inspectionIds=S(o),this.inspectionNames=k(o),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(3),b.a.error({err:e.t0},"Error while discovering configuration"),e.abrupt("return");case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"discoverPartsInBackground",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,s,c,l,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.all([T(t,j.a.SvPb.GetSVObserverVersionRequest),T(t,j.a.SvPb.GetGatewayVersionRequest),T(t,j.a.SvPb.GetWebAppVersionRequest),N(t,this.inspectionIds,this.inspectionNames,x),N(t,this.inspectionIds,this.inspectionNames,C),N(t,this.inspectionIds,this.inspectionNames,V),P(t)]);case 6:n=e.sent,r=Object(i.a)(n,7),a=r[0],o=r[1],s=r[2],c=r[3],l=r[4],d=r[5],p=r[6],this.versions={svObserverVersion:a,gatewayVersion:o,webAppVersion:s},this.idNameMappings=c,this.objectSelectorItems=l,this.objectSelectorImages=d,this.inspectionToolsetMappings=p,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(3),b.a.error({err:e.t0},"Error while discovering configuration"),e.abrupt("return");case 19:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSvObserverVersion",value:function(){return this.versions&&this.versions.svObserverVersion}},{key:"getGatewayVersion",value:function(){return this.versions&&this.versions.gatewayVersion}},{key:"getWebAppVersion",value:function(){return this.versions&&this.versions.webAppVersion}},{key:"getInspections",value:function(){return this.inspections}},{key:"getInspectionName",value:function(e){var t=(this.inspections||[]).find((function(t){return t.id===e}));return t&&t.name}},{key:"getValueNameForId",value:function(e,t){"string"===typeof e&&(e=parseInt(e,10));var n=this.idNameMappings.get(e);if(n){"string"===typeof t&&(t=parseInt(t,10));var i=n.get(t);if(i)return i.fullLocation}return null}},{key:"setIdNameMappings",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:if(0!==this.idNameMappings.size||0===this.inspectionIds.length||0===this.inspectionNames.length){e.next=10;break}return e.next=6,N(t,this.inspectionIds,this.inspectionNames,x);case 6:n=e.sent,this.idNameMappings=n,e.next=11;break;case 10:b.a.warn("setIdNameMappings: id name mappings already set");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getObjectSelectorItemsForInspection",value:function(e){return this.objectSelectorItems.get(e)}},{key:"setObjectSelectorItems",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:if(0!==this.objectSelectorItems.size||0===this.inspectionIds.length||0===this.inspectionNames.length){e.next=10;break}return e.next=6,N(t,this.inspectionIds,this.inspectionNames,C);case 6:n=e.sent,this.objectSelectorItems=n,e.next=11;break;case 10:b.a.warn("setObjectSelectorItems: object selector items already set");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getObjectSelectorImagesForInspection",value:function(e){return this.objectSelectorImages.get(e)}},{key:"setObjectSelectorImages",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:if(0!==this.objectSelectorImages.size||0===this.inspectionIds.length||0===this.inspectionNames.length){e.next=10;break}return e.next=6,N(t,this.inspectionIds,this.inspectionNames,V);case 6:n=e.sent,this.objectSelectorImages=n,e.next=11;break;case 10:b.a.warn("setObjectSelectorImages: object selector images already set");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInspectionIdToToolsetMappings",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isConnected()){e.next=3;break}return b.a.error("Protobuf is invalid!"),e.abrupt("return");case 3:if(0!==this.inspectionToolsetMappings.size){e.next=10;break}return e.next=6,P(t);case 6:n=e.sent,this.inspectionToolsetMappings=n,e.next=11;break;case 10:b.a.warn("setInspectionIdToToolsetMappings: mappings already done");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfigTreeByInspectionId",value:function(e){if(e){if(0!==this.inspectionToolsetMappings.size)return this.inspectionToolsetMappings.get(e);b.a.warn("inspectionToolsetMappings is empty")}else b.a.warn("getConfigTreeByInspection did not receive inspection id")}}],[{key:"loadFromCache",value:function(){var t=Object(s.a)(u.a.mark((function t(){var n,i,r,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"",i=localStorage.getItem(h.a),r=i.split(","),n=r.map((function(e){return localStorage.getItem(e)})).join(),a=d.a.decompress(n),s=JSON.parse(a,v),t.abrupt("return",new e(Object(o.a)({},s)));case 10:return t.prev=10,t.t0=t.catch(0),b.a.error({err:t.t0},"Error loading configuration"),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"saveToCache",value:function(){var e=Object(s.a)(u.a.mark((function e(t,n){var i,r,a,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=d.a.compress(JSON.stringify(t,f)),r=g(i,1e6),a=[],o=0;o<r.length;o++)s=r[o],c="".concat(h.b).concat(o),localStorage.setItem(c,s),a.push(c);localStorage.setItem(h.a,a.join(",")),localStorage.setItem(h.c,JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractConfigNameFromFileName",value:function(e){return w(e)}}]),e}()},144:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.1114cb53.svg"},146:function(e,t,n){"use strict";t.a=n.p+"static/media/overlay-list.d218d7a4.svg"},147:function(e,t,n){"use strict";t.a=n.p+"static/media/close.f005b782.svg"},148:function(e,t,n){"use strict";t.a=n.p+"static/media/save.a6a0528c.svg"},149:function(e,t,n){"use strict";var i=n(11),r=n(10),a=n(19),o=n(21),s=n(0),c=n(178),u=n(15),l=(n(828),n(53)),d=n(154),p=n(1),f=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.onClose,i=t.open,r=t.focusedViewType;switch(t.locale){case"en":default:e="/help/en/SVOWebApp_WebHelp.htm#cshid=".concat(d.a[r]);break;case"de":e="/help/de/SVOWebApp_WebHelp.htm#cshid=".concat(d.a[r])}return Object(p.jsx)(l.a,{isFullscreen:!0,title:Object(p.jsx)(c.a,{id:"helpView"}),onClose:n,open:i,children:Object(p.jsx)("iframe",{className:"help-frame",title:"help",style:{width:"100%",height:"97%"},src:e})})}}]),n}(s.Component);f.defaultProps={open:!1,locale:"en"};t.a=Object(u.c)((function(e){return{focusedViewType:e.app.focusedViewType,locale:e.app.locale}}))(f)},153:function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(178),o=(n(748),n(1)),s=function(e){var t=e.type,n=e.intlId;return r.a.createElement(t,{className:"heading"},Object(o.jsx)(a.a,{id:"".concat(n)||"none"}))};s.defaultProps={intlId:"none"},t.a=s},154:function(e,t,n){"use strict";var i=n(29),r={PARAMETER_VIEW:i.f,LIST_VIEW:i.e,IMAGE_VIEW:i.d,PERMISSIONS:"PERMISSIONS",DEBUGGER:"DEBUGGER"};t.a=r},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(11),r=n(10),a=function(){function e(t){Object(i.a)(this,e),this.lockId=void 0,this.takeoverId=void 0,this.owner=void 0,this.takeoverUser=void 0,this.host="",this.lockDescription="",this.takeoverMessage="",this.status=0,this.lockedInSameAppInstance=!1,this.isTakeoverAttempt=!1,this.configAlreadyLocked=!1,this.isWaitingForResponse=!1,this.ownerRejectedTakeover=!1,0!==Object.keys(t).length&&Object.assign(this,t)}return Object(r.a)(e,[{key:"isLocked",value:function(){return 1===this.status}},{key:"isUnlocked",value:function(){return 0===this.status}},{key:"isSameUserAsOwner",value:function(e){return e.username===this.owner}},{key:"isLockedBySameUser",value:function(e){return this.isLocked()&&this.isSameUserAsOwner(e)}},{key:"isLockedByOtherUser",value:function(e){return this.isLocked()&&!this.isSameUserAsOwner(e)}},{key:"isLockedInDifferentAppInstance",value:function(){return this.isLocked()&&!this.lockedInSameAppInstance}},{key:"isTakeoverAttemptFromOtherUser",value:function(){return this.isTakeoverAttempt}},{key:"isConfigAlreadyLocked",value:function(){return this.configAlreadyLocked}},{key:"isWaitingForTakeoverResponse",value:function(){return this.isWaitingForResponse}},{key:"isOwnerRejectedTakeover",value:function(){return this.ownerRejectedTakeover}},{key:"resetTakeoverAttempt",value:function(){this.isTakeoverAttempt=!1}},{key:"resetAlertDialogFlags",value:function(){this.configAlreadyLocked=!1,this.ownerRejectedTakeover=!1}},{key:"handleLockAcquiredNotification",value:function(e){this.lockId=e.lockId,this.owner=e.user,this.host=e.host,this.lockDescription=e.description,this.status=1,this.lockedInSameAppInstance=!0,this.isWaitingForResponse=!1}},{key:"handleLockTakeoverNotification",value:function(e){this.takeoverId=e.takeoverId,this.takeoverMessage=e.message,this.takeoverUser=e.user,this.isTakeoverAttempt=!0}},{key:"handleLockReleasedNotification",value:function(){this.lockId=void 0,this.owner=void 0,this.host="0.0.0.0",this.lockDescription="",this.status=0}},{key:"handleLockAlreadyLockedNotification",value:function(e){this.lockId=e.lockId,this.owner=e.user,this.host=e.host,this.lockDescription=e.description,this.status=1,this.configAlreadyLocked=!0}},{key:"handleLockTakeoverRejectedNotification",value:function(){this.isWaitingForResponse=!1,this.ownerRejectedTakeover=!0}},{key:"waitForTakeoverResponse",value:function(){this.isWaitingForResponse=!0}}]),e}()},17:function(e,t,n){"use strict";n.d(t,"I",(function(){return o})),n.d(t,"H",(function(){return u})),n.d(t,"J",(function(){return d})),n.d(t,"F",(function(){return v})),n.d(t,"y",(function(){return h})),n.d(t,"E",(function(){return b})),n.d(t,"t",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"v",(function(){return w})),n.d(t,"m",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return S})),n.d(t,"x",(function(){return k})),n.d(t,"o",(function(){return I})),n.d(t,"h",(function(){return x})),n.d(t,"a",(function(){return C})),n.d(t,"u",(function(){return V})),n.d(t,"l",(function(){return T})),n.d(t,"f",(function(){return N})),n.d(t,"d",(function(){return E})),n.d(t,"z",(function(){return P})),n.d(t,"p",(function(){return A})),n.d(t,"i",(function(){return M})),n.d(t,"e",(function(){return D})),n.d(t,"C",(function(){return L})),n.d(t,"r",(function(){return R})),n.d(t,"j",(function(){return _})),n.d(t,"B",(function(){return F})),n.d(t,"q",(function(){return U})),n.d(t,"w",(function(){return H})),n.d(t,"n",(function(){return W})),n.d(t,"D",(function(){return z})),n.d(t,"s",(function(){return q})),n.d(t,"A",(function(){return B})),n.d(t,"G",(function(){return G}));var i=n(9),r=n(3),a=n(7),o=function(e){var t=new Set;return s(e,t,""),t},s=function e(t,n,i){for(var r in t.nested){var o=t.nested[r],s=r.toLowerCase(),u=i?"".concat(i,".").concat(s):s;if(!o.nested&&o.fields)if("webapp.view"===u)for(var l=a.a.SvPb.lookup("ViewType"),d=0;d<Object.keys(l.values).length;d++){var f="".concat(u,"[type=").concat(p(d),"]");c(n,f,o.fields)}else c(n,u,o.fields);else e(o,n,u)}},c=function(e,t,n){Object.keys(n).forEach((function(i){var r=n[i];if("bool"===r.type){var a=r.name.toLowerCase();e.add("".concat(t,".").concat(a))}}))},u=function e(t,n,i){for(var r in t){var a=t[r];if(-1===r.indexOf("$")){var o=i?"".concat(i,".").concat(r):r;if(Array.isArray(a)){if("webapp.view"===o)for(var s=0;s<a.length;++s){var c=a[s];e(c,n,"".concat(o,"[type=").concat(p(c.type),"]"))}}else"object"===typeof a?e(a,n,o):"boolean"===typeof a&&a&&n.add(o)}}},l=function e(t,n,a){var o=t.shift();if(t.length>0)if(o.startsWith("view[")){var s=f(o.substring(o.indexOf("[type=")+6,o.indexOf("]")));n.view||(n.view=[]);var c=n.view.findIndex((function(e){return e.type===s}));-1!==c?n.view[c]=Object(r.a)(Object(r.a)({},n.view[c]),{},Object(i.a)({},t[0],!0)):n.view.push(Object(i.a)({type:s},t[0],!0))}else Object(n[o])!==n[o]&&(n[o]={}),e(t,n[o],a);else n[o]=!0},d=function(e){var t=[];return e.forEach((function(e,n){var i={};e.groupPermissions.forEach((function(e){l(e.split("."),i,i[e])})),t.push({name:n,permissions:i})})),t},p=function(e){switch(e){case 0:return"AnyView";case 1:return"ImageView";case 2:return"ListView";case 3:return"ImageStripView";case 4:return"ParameterView";case 5:return"ToolSetView";default:return""}},f=function(e){switch(e){case"AnyView":default:return 0;case"ImageView":return 1;case"ListView":return 2;case"ImageStripView":return 3;case"ParameterView":return 4;case"ToolSetView":return 5}},v=function(e){return!!e&&e.has("webapp.configuration.save")},h=function(e){return!!e&&e.has("webapp.logs.read")},b=function(e){return!!e&&e.has("webapp.viewset.read")},m=function(e){return!!e&&e.has("webapp.viewset.edit")},g=function(e){return!!e&&e.has("webapp.viewset.remove")},j=function(e){return!!e&&(e.has("webapp.view[type=ImageView].add")||e.has("webapp.view[type=AnyView].add"))},w=function(e){return!!e&&(e.has("webapp.view[type=ImageView].read")||e.has("webapp.view[type=AnyView].read"))},O=function(e){return!!e&&(e.has("webapp.view[type=ImageView].edit")||e.has("webapp.view[type=AnyView].edit"))},y=function(e){return!!e&&(e.has("webapp.view[type=ImageView].remove")||e.has("webapp.view[type=AnyView].remove"))},S=function(e){return!!e&&(e.has("webapp.view[type=ListView].add")||e.has("webapp.view[type=AnyView].add"))},k=function(e){return!!e&&(e.has("webapp.view[type=ListView].read")||e.has("webapp.view[type=AnyView].read"))},I=function(e){return!!e&&(e.has("webapp.view[type=ListView].edit")||e.has("webapp.view[type=AnyView].edit"))},x=function(e){return!!e&&(e.has("webapp.view[type=ListView].remove")||e.has("webapp.view[type=AnyView].remove"))},C=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].add")||e.has("webapp.view[type=AnyView].add"))},V=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].read")||e.has("webapp.view[type=AnyView].read"))},T=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].edit")||e.has("webapp.view[type=AnyView].edit"))},N=function(e){return!!e&&(e.has("webapp.view[type=ImageStripView].remove")||e.has("webapp.view[type=AnyView].remove"))},E=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].add")||e.has("webapp.view[type=AnyView].add"))},P=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].read")||e.has("webapp.view[type=AnyView].read"))},A=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].edit")||e.has("webapp.view[type=AnyView].edit"))},M=function(e){return!!e&&(e.has("webapp.view[type=ParameterView].remove")||e.has("webapp.view[type=AnyView].remove"))},D=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].add")||e.has("webapp.view[type=AnyView].add"))},L=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].read")||e.has("webapp.view[type=AnyView].read"))},R=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].edit")||e.has("webapp.view[type=AnyView].edit"))},_=function(e){return!!e&&(e.has("webapp.view[type=ToolSetView].remove")||e.has("webapp.view[type=AnyView].remove"))},F=function(e){return!!e&&e.has("svobserver.mode.read")},U=function(e){return!!e&&e.has("svobserver.mode.edit")},H=function(e){return!!e&&e.has("svobserver.inspectionstate.read")},W=function(e){return!!e&&e.has("svobserver.inspectionstate.edit")},z=function(e){return!!e&&e.has("usermanagement.userpermissions.read")},q=function(e){return!!e&&e.has("usermanagement.userpermissions.edit")},B=function(e){return!!e&&e.has("svobserver.configuration.read")},G=function(e){return!!e&&e.has("svobserver.configuration.write")}},175:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h}));var i=n(12),r=n(5),a=n.n(r),o=n(235),s=n.n(o),c=n(443),u=n(444),l=n.n(u),d=n(120),p=n(6),f=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var i,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(d.a.authEndpoint,"/login"),e.next=3,s.a.post(i,{username:t,password:n});case 3:return r=e.sent,o=r.data.accessToken,e.next=7,v(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,i,r,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(d.a.authEndpoint,"/auth"),e.next=3,s.a.post(n,{accessToken:t});case 3:return i=e.sent,r=i.data.authToken,o=Object(c.a)(r),u=l()(o,["email","fullname","username"]),e.abrupt("return",{authToken:r,user:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(i.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.a.removeProxy(),!e){t.next=11;break}return n="".concat(d.a.authEndpoint,"/logout"),t.prev=3,t.next=6,s.a.post(n,{});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),p.a.warn({err:t.t0},"Error while calling /logout");case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))}},176:function(e,t,n){"use strict";t.a=n.p+"static/media/pause.ea3fe966.svg"},177:function(e,t,n){"use strict";t.a=n.p+"static/media/play.f6ca6855.svg"},214:function(e,t,n){"use strict";var i=n(9),r=n(11),a=n(10),o=n(19),s=n(21),c=n(0),u=n(898),l=n(899),d=n(897),p=n(900),f=n(22),v=n(1),h=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={labelWidth:0},e.renderOptions=function(e,t,n){return n=n||e,e.map((function(e,i){return Object(v.jsx)("option",{value:e,children:n[i]},t+i)}))},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({labelWidth:this.InputLabelRef.offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props,n=t.values,r=t.labels,a=t.selectedValue,o=t.name,s=t.id,c=t.classes,f=t.disabled;return Object(v.jsxs)(u.a,{variant:"outlined",style:{width:"100%"},disabled:f,children:[Object(v.jsx)(l.a,{htmlFor:s,ref:function(t){e.InputLabelRef=t},classes:{outlined:c.label},children:o}),Object(v.jsx)(d.a,{native:!0,value:a||"",onChange:function(t){return e.props.onSelectionChanged(Object(i.a)({},s,t.target.value))},classes:{root:c.input},input:Object(v.jsx)(p.a,{name:o,labelWidth:this.state.labelWidth,id:s,classes:{input:c.select}}),children:!f&&this.renderOptions(n,s,r)})]})}}]),n}(c.Component);h.defaultProps={values:[],selectedValue:"",name:"",id:""},t.a=Object(f.a)((function(){return{input:{height:37,fontSize:"1.4rem"},select:{paddingTop:0,paddingBottom:0,fontSize:"1.4rem"},label:{transform:"translate(14px, 11px) scale(1)",fontSize:"1.4rem"}}}))(h)},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(12),r=n(11),a=n(10),o=n(5),s=n.n(o),c=function(){function e(t){var n=t.history,i=t.trigger,a=t.isReject;Object(r.a)(this,e),this.history=n,this.trigger=i,this.isReject=a,this.useCount=0,this.images=new Map,this.values=new Map}return Object(a.a)(e,[{key:"getImage",value:function(e){return this.checkNotReleasedYet(),this.images.get(e)}},{key:"getImages",value:function(e){var t=this;return this.checkNotReleasedYet(),(e||[]).map((function(e){return t.images.get(e)}))}},{key:"getValue",value:function(e){return this.checkNotReleasedYet(),this.values.get(e)}},{key:"getValuesAsString",value:function(e){var t=this;return this.checkNotReleasedYet(),(e||[]).map((function(e){var n=t.values.has(e)&&t.values.get(e).value;return void 0===n&&(n="<UNAVAILABLE>"),{id:e,value:n.toString()}}))}},{key:"buildUrl",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,i=atob(e),r=[],a=0;a<i.length;a+=n){for(var o=i.slice(a,a+n),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o.charCodeAt(c);var u=new Uint8Array(s);r.push(u)}var l=new Blob(r,{type:t});return URL.createObjectURL(l)}},{key:"addData",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,i,r,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.images,i=t.values,this.checkNotReleasedYet(),r=[],n.forEach((function(e){var t=e.id,n=e.image,i=e.overlays;!a.images.has(t)&&n&&n.rgbData&&r.push(a.initImage(t,n,i))})),i.forEach((function(e){var t=e.id,n=e.value;if(!a.values.has(t)&&n){var i=a.getValueFromVariant(n);a.values.set(t,{id:t,value:i})}})),e.next=7,Promise.all(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initImage",value:function(){var e=Object(i.a)(s.a.mark((function e(t,n,i){var r,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildImage(n);case 2:return r=e.sent,a=r.domImage,o=r.url,e.next=7,this.initOverlayImages(i);case 7:c=e.sent,this.images.set(t,{id:t,image:n,domImage:a,overlays:i,overlayImages:c,url:o});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"buildImage",value:function(e){var t=e.rgbData,n=e.type;return new Promise((function(e,i){var r=new Uint8Array(t),a=new Blob([r],{type:n||"image/bmp"}),o=self.URL||self.webkitURL||self,s=o.createObjectURL(a),c=new Image;c.onload=function(){e({domImage:c,url:s})},c.onerror=function(e){o.revokeObjectURL(s),i(e)},c.src=s}))}},{key:"initOverlayImages",value:function(e){var t=this,n=[];return(e&&e.overlays||[]).forEach((function(e){(e.shapeGroups||[]).forEach((function(e){(e.shapes||[]).forEach((function(e){e&&e.image&&e.image.image&&e.image.image.rgbData&&n.push(t.buildImage(e.image.image).then((function(t){var n=t.domImage,i=t.url;return e.image.domImage=n,e.image.url=i,e.image})))}))}))})),Promise.all(n)}},{key:"getValueFromVariant",value:function(e){if(e)return e[e.data]}},{key:"lock",value:function(){this.useCount++}},{key:"release",value:function(){var e;null===(e=this.history)||void 0===e||e.releaseProduct(this.trigger)}},{key:"releaseImpl",value:function(){if(this.useCount<=0)throw new Error("Invalid use count ".concat(this.useCount," in Product::release()"));return this.useCount--,!(this.useCount>0)&&(this.releaseImages(),this.images.clear(),this.values.clear(),this.history=null,this.released=!0,!0)}},{key:"releaseImages",value:function(){var e=this;this.images.forEach((function(t){e.releaseImage(t),t.overlayImages.forEach((function(t){e.releaseImage(t)}))}))}},{key:"releaseImage",value:function(e){(e.domImage&&(e.domImage.onload=void 0,e.domImage.onerror=void 0,e.domImage.remove(),e.domImage=null),e.url)&&(self.URL||self.webkitURL||self).revokeObjectURL(e.url)}},{key:"checkNotReleasedYet",value:function(){if(this.released)throw new Error("Can not use Product after releasing it!")}}]),e}()},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var i=n(6),r=n(45),a=(n(663),n(1)),o=function(e){var t=e.id,n=e.intl,o=e.intlId,s=e.iconUrl,c=e.onClickHandler,u=e.intlIdAlternative,l=e.iconUrlAlternative,d=e.onClickHandlerAlternative,p=e.showAlternative;n&&o&&s&&c&&u&&l&&d||i.a.error("ToggleButton component did not receive required parameters");return p?Object(a.jsx)(r.a,{tooltip:n.messages["".concat(u)],onClick:function(){d()},iconUrl:l},t):Object(a.jsx)(r.a,{tooltip:n.messages["".concat(o)],onClick:function(){c()},iconUrl:s},o)}},225:function(e,t,n){"use strict";t.a=n.p+"static/media/help.64b70362.svg"},226:function(e,t,n){"use strict";t.a=n.p+"static/media/download.c1bdaf13.svg"},227:function(e,t,n){"use strict";t.a=n.p+"static/media/info.6a606506.svg"},228:function(e,t,n){"use strict";t.a=n.p+"static/media/show.6ac709c0.svg"},229:function(e,t,n){"use strict";t.a=n.p+"static/media/plus.72585b6a.svg"},230:function(e,t,n){"use strict";t.a=n.p+"static/media/delete.85c719f0.svg"},231:function(e,t,n){"use strict";t.a=n.p+"static/media/image.ab9e385a.svg"},232:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.a5b69c2a.svg"},233:function(e,t,n){"use strict";n(0),n(840);var i=n(1);t.a=function(e){var t=e.src,n=e.title;return Object(i.jsx)("div",{className:"logo-wrapper",children:Object(i.jsx)("img",{src:t,alt:n})})}},238:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(34),r=n(7),a=function(e){switch(e){case r.a.SvPb.DeviceModeType.available:return i.a.unknownMode.id;case r.a.SvPb.DeviceModeType.runMode:return i.a.runMode.id;case r.a.SvPb.DeviceModeType.stopMode:return i.a.stopMode.id;case r.a.SvPb.DeviceModeType.regressionMode:return i.a.regressionMode.id;case r.a.SvPb.DeviceModeType.testMode:return i.a.testMode.id;case r.a.SvPb.DeviceModeType.editMode:return i.a.editMode.id;case r.a.SvPb.DeviceModeType.modeChanging:return i.a.unknownMode.id;default:throw new Error("Unsupported device mode ".concat(e))}},o=function(e){switch(e){case i.a.unknownMode.id:return r.a.SvPb.DeviceModeType.available;case i.a.runMode.id:return r.a.SvPb.DeviceModeType.runMode;case i.a.stopMode.id:return r.a.SvPb.DeviceModeType.stopMode;case i.a.regressionMode.id:return r.a.SvPb.DeviceModeType.regressionMode;case i.a.testMode.id:return r.a.SvPb.DeviceModeType.testMode;case i.a.editMode.id:return r.a.SvPb.DeviceModeType.editMode;default:throw new Error("Unsupported mode ".concat(e))}},s=function(e){switch(e){case"trace":return r.a.SvPb.LogSeverity.trace;case"debug":return r.a.SvPb.LogSeverity.debug;case"info":return r.a.SvPb.LogSeverity.info;case"warn":return r.a.SvPb.LogSeverity.warning;default:return r.a.SvPb.LogSeverity.error}}},29:function(e,t,n){"use strict";n.d(t,"g",(function(){return kn})),n.d(t,"d",(function(){return In})),n.d(t,"f",(function(){return xn})),n.d(t,"e",(function(){return Cn})),n.d(t,"c",(function(){return Vn})),n.d(t,"a",(function(){return Nn})),n.d(t,"b",(function(){return En})),n.d(t,"h",(function(){return Pn}));var i=n(10),r=n(11),a=n(9),o=n(3),s=n(0),c=n.n(s),u=n(38),l=n.n(u),d=n(12),p=n(33),f=n(19),v=n(21),h=n(5),b=n.n(h),m=n(15),g=(n(659),n(176)),j=n(177),w=n(44),O=n(946),y=n(22),S=n(446),k=n.n(S),I=n(239),x=n(64),C=(n(718),n(1)),V=100,T=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={expandedKeys:[Object(x.a)((function(){return e.props.data.children[0].location}))],expandedFilteredKeys:[],checkedKeys:[],filteredCheckedKeys:[],inputValue:"",filteredLocations:[],filteredTree:void 0,countedVisibleValues:0,countedPossibleValues:0,selectionLimitReached:!1,halfChecked:[]},e.setSelection=function(){var t=e.props.selection;e.setState({checkedKeys:t})},e.setExpandedKeys=function(){var t=e.props.expandedKeys;t&&e.setState({expandedKeys:t})},e.onExpand=function(t){e.state.inputValue?e.setState({expandedFilteredKeys:t}):(e.props.onExpand(t),e.setState({expandedKeys:t}))},e.onCheck=function(t,n){var i=e.limitCheckedKeys(t,V),r=(i=e.checkUnselectingAll(i,n.node)).slice();e.state.inputValue&&(i=e.updateCheckedKeys(i)),i=e.ensureSingleSelection(i),e.setChangedIds(i,n),e.setState({checkedKeys:i,filteredCheckedKeys:r,selectionLimitReached:i.length===V})},e.limitCheckedKeys=function(t,n){var i=[];(!n||n>t.length)&&(n=t.length);for(var r=[],a=Math.abs(n),o=0;0!==a&&o<t.length;)parseInt(t[o],10)?(r.push(t[o]),a--):i.push(t[o]),o++;return e.setState({halfChecked:i}),r},e.checkUnselectingAll=function(t,n){var i=e.state.halfChecked.slice();return n.halfChecked&&(i.includes(n.title)?(e.setState({halfChecked:[]}),t=[]):(i.push(n.title),e.setState({halfChecked:i}))),t},e.updateCheckedKeys=function(t){var n=t.filter((function(t){return!e.state.filteredCheckedKeys.includes(t)})),i=e.state.filteredCheckedKeys.filter((function(e){return!t.includes(e)}));return t=(t=k()(n,e.state.checkedKeys)).filter((function(e){return!i.includes(e)}))},e.ensureSingleSelection=function(t){return e.props.singleSelect?[t[t.length-1]]||!1:t},e.setChangedIds=function(t,n){var i=(t||[]).filter((function(e){return parseInt(e,10)>0}));if(e.props.singleSelect){var r=e.getSelectedLocation(n);e.props.onChange(i[i.length-1]||0,r)}else e.props.onChange(i)},e.onChangeFilter=function(t){var n=e.props.data,i=void 0,r=t.target.value||"",a=(e.cutFilterIgnoreWords(r.toLowerCase())||"").split(""),o={abortRecursion:!1,expandedFilteredKeys:[],filteredLocations:[],filteredKeys:[],countSelection:0},s={countMatches:0};if(a.length){var c=a.slice(),u=[];e.filterNodesRecursively(n,a,u,o),e.countMatchingNodesRecursively(n,c,s),i=u.length>0?u[0]:{children:[]}}var l=e.state.checkedKeys.filter((function(e){return o.filteredKeys.includes(e)}));e.setState({filteredLocations:o.filteredLocations,filteredTree:i,filteredCheckedKeys:l,expandedFilteredKeys:o.expandedFilteredKeys,inputValue:r,countedVisibleValues:o.countSelection,countedPossibleValues:s.countMatches})},e.cutFilterIgnoreWords=function(t){var n=e.props.filterIgnore;return n&&n.forEach((function(e){e=e.toLowerCase(),t.startsWith(e)&&(t=t.replace(e,"")).startsWith(".")&&(t=t.slice(1))})),t},e.filterNodesRecursively=function(t,n,i,r){if(!t)return!1;var a=[],o=[];n.length>0&&(o=e.consumeChars(t.name,n,a)),0===o.length&&(r.filteredLocations.push(t.location),t.id&&0===t.children.length&&r.filteredKeys.push(t.id)),r.filteredKeys.length>=100&&(r.abortRecursion=!0);var s=[],c=!1;t.children&&!r.abortRecursion&&t.children.forEach((function(t){!r.abortRecursion&&e.filterNodesRecursively(t,o,s,r)&&(c=!0)})),c&&r.expandedFilteredKeys.push(t.location);var u=0===o.length||c;if(u){0===t.children.length&&r.countSelection++;var l=e.createFilteredShadowNode(t,a,s);i.push(l)}return u},e.countMatchingNodesRecursively=function(t,n,i){if(!t)return!1;var r=[];n.length>0&&(r=e.consumeChars(t.name,n,[]));var a=!1;t.children&&t.children.forEach((function(t){e.countMatchingNodesRecursively(t,r,i)&&(a=!0)}));var o=0===r.length||a;return o&&0===t.children.length&&i.countMatches++,o},e.consumeChars=function(e,t,n){e=e.toLowerCase();for(var i=0;t.length;){if("."===t[0]){t=t.slice(1);break}var r=e.indexOf(t[0],i);if(-1===r)break;n.push(r),t=t.slice(1),i=r+1}return t},e.createFilteredShadowNode=function(t,n,i){var r=e.highlightAtPositions(t.name,n);return Object(o.a)(Object(o.a)({},t),{},{children:i,styledText:r})},e.highlightAtPositions=function(e,t){for(var n=[],i=0;i<e.length;i++)t.includes(i)?n.push([Object(C.jsx)("span",{className:"filteredText",children:e.charAt(i)},"strong".concat(l.a.generate()))]):n.push([e.charAt(i)]);return[Object(C.jsx)("div",{children:n},"div".concat(l.a.generate()))]},e.createTreeNodes=function(t,n){return t.children&&t.children.length>0?Object(C.jsx)(I.a,{title:t.styledText||t.name,disableCheckbox:e.props.singleSelect,children:t.children.map(n)},t.location):Object(C.jsx)(I.a,{title:t.styledText||t.name,location:t.location},t.id)},e.getSelectedLocation=function(e){return Object(x.a)((function(){return e.node.location}))?e.node.location:""},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setSelection(),this.setExpandedKeys()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selection,i=t.expandedKeys;n&&e.selection!==n&&n.length>0&&this.setSelection(),i&&e.expandedKeys!==i&&i.length>0&&this.setExpandedKeys()}},{key:"render",value:function(){var e=this,t=this.state,n=t.checkedKeys,i=t.expandedKeys,r=t.expandedFilteredKeys,a=t.filteredTree,o=t.filteredCheckedKeys,s=t.inputValue,c=t.countedVisibleValues,u=t.countedPossibleValues,l=t.selectionLimitReached,d=function t(n){if(n)return e.createTreeNodes(n,t)},p=s?"unfilteredText":"",f=s?r:i,v=s?a:this.props.data,h=s?o:n,b=v.name?d(v):v.children.map(d);return Object(C.jsxs)("div",{className:"object-selector",children:[Object(C.jsxs)("div",{className:"topmenu-wrapper",children:[Object(C.jsx)("div",{className:"w100 text",children:Object(C.jsxs)("div",{className:"infotext",children:[Object(C.jsx)("div",{className:"pr2",children:"Select objects:"}),l?Object(C.jsx)("div",{className:"warning pr2",children:"(Selection limit of ".concat(V," items reached)")}):void 0,s&&b.length>0?Object(C.jsx)("div",{className:"warning",children:"(".concat(c," of ").concat(u," matches are shown)")}):void 0]})}),Object(C.jsx)("div",{className:"w100",children:Object(C.jsx)(O.a,{label:"Filter",type:"text",variant:"outlined",style:{width:"100%"},onChange:this.onChangeFilter,value:this.state.inputValue,InputLabelProps:{classes:{root:this.props.classes.label}}})})]}),Object(C.jsx)("div",{children:b.length>0?Object(C.jsx)(I.b,{checkable:!0,showLine:!0,showIcon:!1,selectable:!1,onExpand:this.onExpand,expandedKeys:f,checkedKeys:h,onCheck:this.onCheck,className:p,children:b}):Object(C.jsx)("div",{className:"text",children:"No filter results"})})]})}}]),n}(c.a.Component);T.defaultProps={singleSelect:!1,onChange:function(){},onExpand:function(){},selection:[]};var N=Object(y.a)((function(){return{label:{fontSize:"1.4rem",transform:"translate(10px, 12px) scale(1)"}}}))(T),E=n(2),P=n.n(E),A=(P.a.shape({}),n(719),function(e){var t=e.children;return Object(C.jsx)("div",{className:"container",children:t})}),M=n(8),D=n(47),L=n(7),R=n(34),_=n(6),F=function(e){var t=e.drawTarget,n=e.zoomFactor,i=e.overlays,r=e.boundingCoordinates,a=e.width,o=e.height,s=e.currentMode;if(i&&0!==i.length){var c=t.getContext("2d");n=n||1,i&&i.length>0&&(c.setLineDash([]),i.forEach((function(e){var t=e.color&&e.color.value||0,i=B(t);c.fillStyle=i;var u=10/n;switch(c.lineWidth=1/n,c.font=u+"px Arial",c.strokeStyle=i,e.boundingShape.shape){case L.a.SvPb.OverlayBoundingShape.fields.rect.name:U(c,n,u,i,e,r,s);break;case L.a.SvPb.OverlayBoundingShape.fields.slice.name:W(c,e,r);break;case L.a.SvPb.OverlayBoundingShape.fields.perspective.name:q(c,n,e,r,a,o);break;default:return void _.a.error("Unknown boundingShape received")}})))}else _.a.error("drawInspectionOverlays expects overlays but did not receive")},U=function(e,t,n,i,r,a,o){var s=Math.abs(a.minX)+r.boundingShape.rect.x.value||0,c=Math.abs(a.minY)+r.boundingShape.rect.y.value||0,u=r.boundingShape.rect.w.value||0,l=r.boundingShape.rect.h.value||0,d=r.displayBounding,p=r.shapeGroups,f=r.name,v=r.boundingShape.rect.angle&&r.boundingShape.rect.angle.value;e.fillText(f,s,c-10/t),p&&p.forEach((function(n){2===n.detailLevel&&o===R.a.runMode.id||n.shapes.forEach((function(n){var r=n.color&&n.color.value,o=B(r),d=n.shape,p=v&&v>0&&d!==L.a.SvPb.OverlayShape.fields.arrow.name;switch(p&&H(e,v,s,c),d){case L.a.SvPb.OverlayShape.fields.arrow.name:var f=Math.abs(a.minX)+n.arrow.x1.value||0,h=Math.abs(a.minY)+n.arrow.y1.value||0,b=Math.abs(a.minX)+n.arrow.x2.value||0,m=Math.abs(a.minY)+n.arrow.y2.value||0,g=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(b-f,m-h);e.beginPath(),e.strokeStyle=o||i,e.moveTo(f,h),e.lineTo(b,m),e.moveTo(b,m);var j=Math.PI*(g+135)/180;e.lineTo(b+15*Math.cos(j),m+15*Math.sin(j)),e.moveTo(b,m);var w=Math.PI*(g-135)/180;e.lineTo(b+15*Math.cos(w),m+15*Math.sin(w)),e.stroke(),e.closePath();break;case L.a.SvPb.OverlayShape.fields.rectArray.name:e.beginPath(),e.strokeStyle=o||i,n.rectArray.rectArray.forEach((function(t){var n=-t.angle;n&&n<0&&H(e,n,s+t.x,c+t.y),e.rect(s+t.x||0,c+t.y||0,t.w||0,t.h||0),n&&n<0&&e.restore()})),e.stroke(),e.closePath();break;case L.a.SvPb.OverlayShape.fields.graph.name:if(e.beginPath(),e.strokeStyle=o||i,n.graph.x.length===n.graph.y.length&&n.graph.x.length>0){e.moveTo(s+n.graph.x[0]*u/n.graph.maxValueX,c+n.graph.y[0]*l/n.graph.maxValueY);for(var O=0;O<n.graph.x.length;O++)e.lineTo(s+n.graph.x[O]*u/n.graph.maxValueX,c+l-n.graph.y[O]*l/n.graph.maxValueY)}e.stroke(),e.closePath();break;case L.a.SvPb.OverlayShape.fields.marker.name:if(e.beginPath(),e.strokeStyle=o||i,1===n.marker.orientationType)if(1===n.marker.sizeType){e.moveTo(s+n.marker.value.value,c+l/2-10),e.lineTo(s+n.marker.value.value,c+l/2+10)}else e.moveTo(s+n.marker.value.value*u/n.marker.maxValue+1,c),e.lineTo(s+n.marker.value.value*u/n.marker.maxValue+1,c+l);else if(1===n.marker.sizeType){e.moveTo(s+u/2-10,c+n.marker.value.value),e.lineTo(s+u/2+10,c+n.marker.value.value)}else e.moveTo(s,c+l-n.marker.value.value*l/n.marker.maxValue+1),e.lineTo(s+u,c+l-n.marker.value.value*l/n.marker.maxValue+1);e.stroke(),e.closePath();break;case L.a.SvPb.OverlayShape.fields.markers.name:if(e.beginPath(),e.strokeStyle=o||i,1===n.markers.orientationType)if(1===n.markers.sizeType)for(var y=0;y<n.markers.value.length;y++)e.moveTo(s+n.markers.value[y],c+l/2-10),e.lineTo(s+n.markers.value[y],c+l/2+10);else for(var S=0;S<n.markers.value.length;S++)e.moveTo(s+n.markers.value[S],c),e.lineTo(s+n.markers.value[S],c+l);else if(1===n.markers.sizeType)for(var k=0;k<n.markers.value.length;k++)e.moveTo(s+u/2-10,c+n.markers.value[k]),e.lineTo(s+u/2+10,c+n.markers.value[k]);else for(var I=0;I<n.markers.value.length;I++)e.moveTo(s,c+n.markers.value[I]),e.lineTo(s+u,c+n.markers.value[I]);e.stroke(),e.closePath();break;case L.a.SvPb.OverlayShape.fields.blockMarker.name:for(var x=n.blockMarker.colors,C=n.blockMarker.changePos,V=0,T=0;T<=C.length;T++)e.beginPath(),e.lineWidth=10/t,e.strokeStyle=B(x[T%x.length]),e.moveTo(s+V,c+l/2),T<C.length?e.lineTo(s+C[T],c+l/2):e.lineTo(s+u,c+l/2),V=C[T],e.stroke(),e.closePath(),e.lineWidth=1/t;break;case L.a.SvPb.OverlayShape.fields.image.name:var N=n.image,E=N.domImage,P=N.x,A=N.y,M=N.w,D=N.h;E&&e.drawImage(E,s+(P&&P.value||0),c+(A&&A.value||0),M&&M.value||100,D&&D.value||100);break;default:_.a.warn("Received unknown overlay shape",d)}p&&e.restore()}))})),d&&(v&&v>0&&H(e,v,s,c),e.save(),e.beginPath(),e.strokeStyle=i,e.rect(s,c,u,l),e.stroke(),e.closePath(),v&&v>0&&e.restore()),e.restore();var h=s+e.measureText(f).width;$(a,s,c-n,Math.max(s+u,h),c+l)},H=function(e,t,n,i){e.save(),e.translate(n,i),e.rotate(t*Math.PI/180),e.translate(-n,-i)},W=function(e,t,n){var i=t.name,r=Math.abs(n.minX)+t.boundingShape.slice.centerX.value,a=Math.abs(n.minY)+t.boundingShape.slice.centerY.value,o=t.boundingShape.slice.innerRadius.value,s=t.boundingShape.slice.outerRadius.value,c=z(t.boundingShape.slice.endAngle.value),u=z(t.boundingShape.slice.startAngle.value);e.fillText(i,r-20,a+20),e.beginPath(),u-c<=2*Math.PI?(e.arc(r,a,o,c,u),e.lineTo(r,a),e.arc(r,a,s,c,u),e.lineTo(r,a)):(e.arc(r,a,o,c,c+1.99*Math.PI),e.arc(r,a,o+1,c+1.99*Math.PI,c+2*Math.PI),e.arc(r,a,o+2,c+2*Math.PI,c+2.01*Math.PI),e.arc(r,a,o+3,c+2.01*Math.PI,u),e.lineTo(r,a),e.arc(r,a,s,c,c+1.99*Math.PI),e.arc(r,a,s+1,c+1.99*Math.PI,c+2*Math.PI),e.arc(r,a,s+2,c+2*Math.PI,c+2.01*Math.PI),e.arc(r,a,s+3,c+2.01*Math.PI,u),e.lineTo(r,a)),e.stroke(),e.closePath();var l=r-20+e.measureText(i).width;$(n,r-s,a-s,Math.max(r+s,l),a+s)},z=function(e){return(360-e)*Math.PI/180},q=function(e,t,n,i,r,a){var o=n.name,s=e.measureText(o).width;e.fillText(o,r/2-s/2,50);var c=Math.abs(i.minX)||0,u=Math.abs(i.minY)||0,l=r||0,d=a||0,p=n.boundingShape.perspective.offset&&n.boundingShape.perspective.offset.value,f=n.boundingShape.perspective.orientation;0===f&&(e.moveTo(c,u+d/2),e.lineTo(c+p,u+1/t),e.lineTo(c+l-p,u+1/t),e.lineTo(c+l,u+d/2),e.lineTo(c+l-p,u+d-1/t),e.lineTo(c+p,u+d-1/t),e.lineTo(c,u+d/2)),1===f&&(e.moveTo(c+1/t,u+p),e.lineTo(c+l/2,u),e.lineTo(c+l-1/t,u+p),e.lineTo(c+l-1/t,u+d-p),e.lineTo(c+l/2,u+d),e.lineTo(c+1/t,u+d-p),e.lineTo(c+1/t,u+p)),e.stroke(),e.closePath()},B=function(e){if("number"!==typeof e||isNaN(e))return _.a.debug("Could not parse value into color."),"pink";var t=e>>8&255,n=e>>16&255;return"rgba(".concat(255&e,", ").concat(t,", ").concat(n,", ").concat(1,")")},G=function(e){var t=e.overlay,n=e.product,i=e.fontSize,r=e.boundingCoordinates,a=e.dispatch,o={x:0,y:0,width:0,height:0};X(n,t,o,a);var s=Y(t.label,i);$(r,o.x,o.y-2*i,Math.max(o.x+o.width,o.x+s),o.y+o.height)},K=function(e){var t=e.overlay,n=e.fontSize,i=e.boundingCoordinates,r={x:0,y:0,width:0,height:0};J(t,r);var a=Y(t.name,n);$(i,r.x,r.y-2*n,Math.max(r.x+r.width,r.x+a),r.y+r.height)},Y=function(e,t){var n=document.createElement("canvas").getContext("2d");return n.font=t+"px Arial",n.measureText(e).width},X=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=Number(Q(e,t.offsetLeftVariable))||t.offsetLeft,a=Number(Q(e,t.xVariable))||t.x;n.x=a+r;var o=Number(Q(e,t.offsetTopVariable))||t.offsetTop,s=Number(Q(e,t.yVariable))||t.y;n.y=s+o,n.width=Number(Q(e,t.widthVariable))||t.width,n.height=Number(Q(e,t.heightVariable))||t.height,0!==t.maxHeightFallback&&0!==t.maxWidthFallback&&0!==t.minHeightFallback&&0!==t.minWidthFallback&&(n.x<t.minWidthFallback&&(n.x=t.minWidthFallback,i(Object(M.o)("X","".concat(t.minWidthFallback,"  -   ").concat(t.maxWidthFallback)))),n.x>t.maxWidthFallback&&(n.x=t.maxWidthFallback,i(Object(M.o)("X","".concat(t.minWidthFallback,"  -   ").concat(t.maxWidthFallback)))),n.y<t.minHeightFallback&&(n.y=t.minHeightFallback,i(Object(M.o)("Y","".concat(t.minHeightFallback,"  -   ").concat(t.maxHeightFallback)))),n.y>t.maxHeightFallback&&(n.y=t.maxHeightFallback,i(Object(M.o)("Y","".concat(t.minHeightFallback,"  -   ").concat(t.maxHeightFallback)))))},J=function(e,t){e.boundingShape.rect&&(t.x=e.boundingShape.rect.x.value||0,t.y=e.boundingShape.rect.y.value||0,t.width=e.boundingShape.rect.w.value||0,t.height=e.boundingShape.rect.h.value||0)},Z=function(e,t){e.x+=Math.abs(t.minX),e.y+=Math.abs(t.minY)},$=function(e,t,n,i,r){t<e.minX&&(e.minX=t),n<e.minY&&(e.minY=n),i>e.maxX&&(e.maxX=i),r>e.maxY&&(e.maxY=r)},Q=function(e,t){if(e&&t){var n=e.getValue(t);return n&&n.value}},ee=function(e,t){if(e&&!e.released){var n=e.getImage(t);if(n)return n&&n.overlays&&n.overlays.overlays&&n.overlays.overlays.length>0&&n.overlays.overlays||[]}},te=n(17),ne=(n(720),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.images,n=e.onImageClick;return Object(C.jsx)("div",{className:"film-strip-container",children:t.map((function(e){return Object(C.jsx)("button",{className:"reject-image",onClick:function(){n(e.product)},children:Object(C.jsx)("img",{src:e.combinedSrc,alt:""})},e.product.trigger)}))})}}]),n}(s.Component)),ie=ne,re=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).onProduct=function(e){var t=e.product;if(i.state.images.find((function(e){return e.product===t})))t.release();else{i.updateImageDimensions(t);var n=[{combinedSrc:i.drawImageAndOverlaysToCanvas({drawTarget:i.canvas,product:t}),product:t}].concat(Object(p.a)(i.state.images));n.sort((function(e,t){return t.product.trigger-e.product.trigger}));var r=[];n.length>i.imageStripLength&&(r=n.splice(i.imageStripLength).map((function(e){return e.product}))),i.setState({images:n}),i.releaseProducts(r)}},i.updateImageDimensions=function(e){if(e)if(e.isReject){var t=i.props.sourceImage,n=e.getImage(t).image;if(n){var r=n.height,a=n.width;i.state.imageWidth&&i.state.imageHeigt&&i.state.imageWidth===a&&i.state.imageHeigt===r||i.setState({imageHeigt:r,imageWidth:a})}else _.a.error("Product does not contain an Image.")}else _.a.error("updateImageDimensions requires product that is a reject.");else _.a.error("updateImageDimensions requires product but did not receive.")},i.setSourceImageIndex=function(e){e?i.props.setSharedStateData("sourceImage",e):_.a.error("OjectSelector did not return a valid id.")},i.drawImageAndOverlaysToCanvas=function(e){var t=e.drawTarget,n=e.product;if(t&&n){var r=i.props.sourceImage,a=n.getImage(r);if(a&&a.domImage){var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.drawImage(a.domImage,0,0);var s=ee(n,r),c={minX:0,minY:0,maxX:a.width||0,maxY:a.height||0};return F({drawTarget:t,overlays:s,zoomFactor:1,boundingCoordinates:c,width:a.width,height:a.height}),i.canvas.toDataURL("image/bmp")}_.a.warn("ImageStrip expected an image onReject but didn't receive")}else _.a.error("drawImageAndOverlaysToCanvas expects drawTarget and product but did not receive.")},i.renderObjectSelector=function(){var e=i.props,t=e.configuration,n=e.inspectionId;if(t&&n){var r=t.getObjectSelectorImagesForInspection(n);return Object(C.jsx)("div",{style:{width:"100%",overflow:"auto"},children:r&&Object(C.jsx)(N,{singleSelect:!0,data:r.tree,onChange:function(e,t){i.setSourceImageIndex(e),i.props.setViewData("windowName",t),i.props.setSaveFlag(!0)}})})}},i.setTitleFromConfig=function(){var e=i.props,t=e.sourceImage,n=e.inspectionId,r=e.configuration;if(r){var a=r.getValueNameForId(n,t);a&&i.props.setViewData("windowName",a)}},i.showPause=function(){var e=i.props,t=e.pausedInspections,n=e.inspectionId,r=!1;return n&&(t.includes(n)||(r=!0)),r},i.renderFilmStrip=function(){var e=i.props,t=e.inspectionId,n=e.myPermissions,r=i.state,a=r.imageWidth,o=r.imageHeigt,s=[];return Object(te.n)(n)&&s.push({type:D.b,id:t,intlId:"imageStripView.play",iconUrl:j.a,onClickHandler:function(){i.resumeStream()},intlIdAlternative:"imageStripView.pause",iconUrlAlternative:g.a,onClickHandlerAlternative:function(){i.pauseStream()},showAlternative:i.showPause()}),Object(C.jsx)("div",{className:"reject-view-container",children:Object(C.jsxs)(A,{children:[Object(C.jsx)("canvas",{style:{display:"none"},width:a,height:o,className:"imageCanvas",ref:function(e){i.canvas=e}}),i.state.images&&i.state.images.length>0&&Object(C.jsx)(ie,{onImageClick:function(e){return i.selectProduct(e)},images:i.state.images}),Object(C.jsx)(w.a,{isViewAction:!0,actions:s})]})})},i.state={images:[],data:null},i.productSub=null,i.imageStripLength=10,i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.subscribeToProductStream(this.props.sourceImage)),t=this.props,n=t.configuration,i=t.proxy,0===n.objectSelectorImages.size&&n.setObjectSelectorImages(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)})),0===n.idNameMappings.size&&n.setIdNameMappings(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.sourceImage&&e.sourceImage!==this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.subscribeToProductStream(e.sourceImage)),void 0!==this.props.isBrowserWindowVisible&&this.props.isBrowserWindowVisible!==e.isBrowserWindowVisible&&(e.isBrowserWindowVisible?this.subscribeToProductStream(e.sourceImage):this.unsubscribeFromProductStream())}},{key:"componentWillUnmount",value:function(){var e=(this.state.images||[]).map((function(e){return e.product}));this.releaseProducts(e),this.unsubscribeFromProductStream()}},{key:"subscribeToProductStream",value:function(e){if(!this.productSub){var t={inspectionId:this.props.inspectionId,startAtTriggerCount:-1*this.imageStripLength,rejectImageIds:[e],allowOldTrigger:!0,manualRelease:!0};this.productSub=this.props.proxy.subscribeToProductStream(t,this.onProduct)}}},{key:"unsubscribeFromProductStream",value:function(){this.productSub&&(this.props.proxy.unsubscribeFromProductStream(this.productSub),this.productSub=null),(this.state.images||[]).forEach((function(e){var t;null===(t=e.product)||void 0===t||t.release()})),this.setState({images:[]})}},{key:"releaseProducts",value:function(e){(e||[]).forEach((function(e){return e.release()}))}},{key:"selectProduct",value:function(e){this.pauseStream(),this.props.proxy.replayProduct(this.props.inspectionId,e)}},{key:"resumeStream",value:function(){this.props.proxy.resumeRejectStream(this.props.inspectionId),this.props.setSaveFlag(!0)}},{key:"pauseStream",value:function(){this.props.proxy.pauseRejectStream(this.props.inspectionId),this.props.setSaveFlag(!0)}},{key:"render",value:function(){var e=this.props,t=e.sourceImage,n=e.myPermissions;this.setTitleFromConfig();var i=Object(te.l)(n);return Object(te.u)(n)||i?Object(C.jsx)("div",{className:"reject-view-container",children:!t&&i?this.renderObjectSelector():this.renderFilmStrip()}):Object(C.jsx)("div",{})}}]),n}(s.Component);re.defaultProps={imageData:[],proxy:void 0,configuration:null};var ae={},oe={sourceImage:0},se=Object(m.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{proxy:e.app.proxy,configuration:e.app.configuration,sourceImage:Number(e.inspections[n].sharedState.views[i].sourceImage),pausedInspections:e.app.pausedInspections,myPermissions:e.app.myPermissions,isBrowserWindowVisible:e.app.isBrowserWindowVisible}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(M.v)(n,i,ae,oe)),{setViewData:function(t,r){return e(Object(M.cb)(n,i,t,r))},setSharedStateData:function(t,r){return e(Object(M.ab)(n,t,r,i))},setSaveFlag:function(t){return e(Object(M.Z)(t))}}}))(re),ce=n(23),ue=n(24),le=n.n(ue),de=n(78),pe=n.n(de),fe=(n(739),n(226)),ve=n.p+"static/media/downloadWithOverlays.0ec8c060.svg",he=n.p+"static/media/fit-to-height.be413aab.svg",be=n.p+"static/media/fit-to-width.ea508053.svg",me=n(227),ge=n.p+"static/media/one.0123db23.svg",je=n(146),we=n(943),Oe=n(72),ye=function(e,t){return t.map((function(t){return t.id===e.id?e:t}))},Se=(n(398),n(741),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={selectAll:!1,selectedRowIndex:-1},e.checkAndUpdateAllSelected=function(){var t=e.props.overlays,n=!0;(t||[]).forEach((function(e){e.isActive||(n=!1)})),e.setState({selectAll:n})},e.handleSelectAll=function(t){e.setState({selectAll:t}),e.props.onSelectAll(t)},e.handleSingleSelect=function(t,n){var i=e.props.overlays,r=Object(o.a)(Object(o.a)({},n),{},{isActive:t}),a=ye(r,i);e.checkAndUpdateAllSelected(a),e.props.updateOverlayList(a)},e.getTableDataFromOverlays=function(){var t=e.props.overlays;return t&&t.map((function(t){return{checkbox:e.getCheckboxDefinition4Cell(t.id),name:t.label,id:t.id}}))},e.getColumnDefinition4OverlayTable=function(){return[{key:"checkbox",dataKey:"checkbox",title:"",width:40},{key:"name",dataKey:"name",title:"Overlays",width:0,flexGrow:1}]},e.getCheckboxDefinition4Cell=function(t){var n=e.props.overlays.filter((function(e){return e.id===t}))[0],i=!!n&&n.isActive;return Object(C.jsx)(we.a,{checked:i,onChange:function(t){return e.handleSingleSelect(t.target.checked,n)},style:{padding:0},color:"primary"},"checkbox_".concat(t))},e.getSelectedRowClass=function(t){return e.props.currentOverlay&&e.props.currentOverlay.id===t?"overlay-table-selected-row":""},e.headerRenderer=function(t){var n=t.columns,i=[];return n.forEach((function(t,r){0===r?i.push(Object(C.jsx)("div",{className:"base-table-header-column",style:{width:n[r].width},children:Object(C.jsx)(we.a,{checked:e.state.selectAll,onChange:function(t){return e.handleSelectAll(t.target.checked)},style:{padding:0},color:"primary"},"select-all-checkbox")},"header_".concat(r))):i.push(Object(C.jsx)("div",{className:"base-table-header-column",style:{padding:" 0 7.5px"},children:n[r].title},"header_".concat(r)))})),i},e.rowEventHandlers={onClick:function(t){var n=t.rowIndex,i=e.props,r=i.overlays,a=i.updateCurrentOverlay;e.setState({selectedRowIndex:n}),a(r.filter((function(e){return e.id===r[n].id}))[0])}},e.setRowClassName=function(t){var n=t.rowIndex;return e.state.selectedRowIndex===n?"overlay-table-selected-row":""},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.checkAndUpdateAllSelected(this.props.overlays),this.props.canSelectRow&&this.setState({selectedRowIndex:0})}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.checkAndUpdateAllSelected(this.props.overlays)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.overlays,i=t.canSelectRow,r=t.hasActionBar;if(!n)return null;var a=this.getTableDataFromOverlays(),o=this.getColumnDefinition4OverlayTable();return Object(C.jsx)(Oe.a,{children:function(t){var n=t.width,s=t.height;return Object(C.jsx)(Oe.c,{headerRenderer:e.headerRenderer,columns:o,data:a,width:n,height:r?s-30:s,headerHeight:30,rowHeight:30,rowEventHandlers:i?e.rowEventHandlers:{},rowClassName:e.setRowClassName},"overlay-table")}},"autoresizer")}}]),n}(s.Component));Se.defaultProps={overlays:[],hasActionBar:!0};var ke=Se,Ie=n(83),xe=n(116),Ce=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={image:new Image,left:0,top:0,zoomFactor:1,currentCursorPosition:{x:0,y:0},canvasDimension:{width:0,height:0}},e.setBoundingCoordinates=function(t,n){var i={minX:0,minY:0,maxX:t.width||0,maxY:t.height||0},r=10/n;return e.getBoundingCoordinatesFromCustomOverlays(i,r),e.getBoundingCoordinatesFromInspectionOverlays(i,r),i},e.setCanvasDimensions=function(t,n,i){var r=Math.abs(n.minX)+n.maxX,a=Math.abs(n.minY)+n.maxY;t.width=Math.ceil(r*i),t.height=Math.ceil(a*i),e.setState({canvasDimension:{width:r,height:a},boundingCoordinates:n})},e.getBoundingCoordinatesFromCustomOverlays=function(t,n){var i,r=e.props,a=r.product,o=r.customOverlays,s=e.state.image,c=null===s||void 0===s?void 0:s.width,u=null===s||void 0===s?void 0:s.height,l=Number(2*-c),d=Number(2*c),p=Number(2*-u),f=Number(2*u);(i=o.filter((function(e){return e.isActive}))).map((function(e){return Object.assign(e,{minWidthFallback:l,maxWidthFallback:d,minHeightFallback:p,maxHeightFallback:f})})),i.forEach((function(i){G({overlay:i,product:a,fontSize:n,boundingCoordinates:t,dispatch:e.props.dispatch})}))},e.getBoundingCoordinatesFromInspectionOverlays=function(t,n){var i=e.props,r=i.product,a=i.imageId,o=ee(r,a);o&&o.forEach((function(e){K({overlay:e,fontSize:n,boundingCoordinates:t})}))},e.setImageInfo=function(){var t=e.props.isImageInfoOpen,n=e.state.currentCursorPosition;if(n&&t){var i=n.x,r=n.y;e.setRgbValues(i,r)}},e.handleScroll=function(t){var n=t.wheelDelta?t.wheelDelta/40:t.detail?-t.detail:0;if(n){var i=t.offsetX,r=t.offsetY;e.zoom(n,i,r)}return t.preventDefault(),!1},e.handleMouseDown=function(t){var n={x:t.pageX,y:t.pageY},i=e.state,r={left:i.left,top:i.top};e.setState({dragging:!0,dragStart:n,dragStartPos:r})},e.handleMouseUp=function(){e.setState({dragging:!1,dragStart:null})},e.handleDrag=function(t){var n=e.state,i=n.dragging,r=n.dragStart,a=n.dragStartPos;if(i){var o=t.pageX-r.x,s=t.pageY-r.y;e.setState({left:a.left+o,top:a.top+s})}},e.handleMouseMove=function(t){if(e.props.isImageInfoOpen){var n=e.getMouseCoordinatesOnElement(t,e.canvas);e.setCursorPosition(n),e.setRgbValues(n.x,n.y)}},e.getMouseCoordinatesOnElement=function(t){for(var n=e.state,i=n.zoomFactor,r=n.boundingCoordinates,a=t.offsetX,o=t.offsetY,s=t.target;s!==e.containerRef;)a+=s.offsetLeft,o+=s.offsetTop,s=s.parentNode;var c=(a-e.canvas.offsetLeft)/i,u=(o-e.canvas.offsetTop)/i;return r&&(c+=r.minX,u+=r.minY),{x:Math.trunc(c),y:Math.trunc(u)}},e.setRgbValues=function(t,n){var i=e.state.image,r=document.createElement("canvas");r.width=i.width,r.height=i.height;var a=r.getContext("2d");a.drawImage(i,0,0);var o=a.getImageData(t,n,1,1).data,s=o[0],c=o[1],u=o[2];e.props.setViewData("rgbValues",{R:s,G:c,B:u})},e.setCursorPosition=function(t){var n=e.state.currentCursorPosition,i=e.trimPositionsOnImageSize(t);e.props.setViewData("cursorPosition",i),n.x===i.x&&n.y===i.y||e.setState({currentCursorPosition:t})},e.trimPositionsOnImageSize=function(t){var n=e.state.image;return t.x<0||t.y<0||t.x>n.width||t.y>n.height?{x:0,y:0}:t},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadViewSettings(),this.props.product.lock(),this.initImage(this.props),this.bindEventListeners()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,i=n.zoomFactor,r=n.left,a=n.top;this.bindEventListeners();var o=e.product!==this.props.product,s=e.currentMode!==this.props.currentMode,c=t.zoomFactor!==i,u=!pe()(this.props.customOverlays,e.customOverlays),l=t.left!==r||t.top!==a;o&&(e.product.release(),this.props.product.lock()),(o||s||c||u)&&this.initImage(this.props),(c||l)&&this.props.saveImageSettings(i,{left:r,top:a})}},{key:"componentWillUnmount",value:function(){this.props.product.release()}},{key:"loadViewSettings",value:function(){var e=this.props.viewSettings,t=e.zoomFactor,n=e.imagePosition;t&&this.setState({zoomFactor:t}),n&&n.left&&this.setState({left:n.left}),n&&n.top&&this.setState({top:n.top})}},{key:"initImage",value:function(e){if(e&&e.product&&e.imageId){var t=e.product.getImage(e.imageId);t&&t.domImage&&this.onImageLoaded(t.domImage)}}},{key:"onImageLoaded",value:function(e){var t=this.state,n=t.zoomFactor,i=t.canvasDimension,r=i.height,a=i.width;this.setState({image:e}),this.initCanvas({canvas:this.canvas,height:r,width:a,zoomFactor:n}),this.props.setViewData("imageDimensions",{width:e.width,height:e.height}),this.draw(this.canvas,e,n),this.setImageInfo()}},{key:"initCanvas",value:function(e){var t=e.canvas,n=e.height,i=e.width,r=e.zoomFactor;t.width=Math.ceil(i*r),t.height=Math.ceil(n*r),this.props.setViewData("imageDimensions",{width:i,height:n})}},{key:"draw",value:function(e,t,n){if(e&&t){var i=this.setBoundingCoordinates(t,n);this.setCanvasDimensions(e,i,n);var r=e.getContext("2d");r.webkitImageSmoothingEnabled=!1,r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1,r.save(),r.clearRect(0,0,Math.abs(i.minX)+i.maxX,Math.abs(i.minY)+i.maxY),r.scale(n,n),r.drawImage(t,Math.abs(i.minX),Math.abs(i.minY)),this.drawOverlays(e,n,i,t.width,t.height),r.restore()}else console.error("Can not draw because we do not have a canvas")}},{key:"drawOverlays",value:function(e,t,n,i,r){var a=this.props,o=a.product,s=a.customOverlays,c=a.imageId,u=a.currentMode,l=ee(o,c);!function(e){var t=e.drawTarget,n=e.customOverlays,i=e.product,r=e.zoomFactor,a=e.boundingCoordinates;if(n&&0!==n.length){var o=t.getContext("2d"),s=n.filter((function(e){return e.isActive}));r=r||1,s.forEach((function(e){o.beginPath();var t={x:0,y:0,width:0,height:0};X(i,e,t),Z(t,a);var n,s=Q(i,e.colorVariable);n=s?B(s):e.color,o.rect(t.x,t.y,t.width,t.height),o.fillStyle=n,o.lineWidth=1/r;var c=10/r;switch(o.font=c+"px Arial",o.fillText(e.label,t.x,t.y-c),e.lineStyle){case"dashed":o.setLineDash([5]);break;case"dotted":o.setLineDash([2,5]);break;default:o.setLineDash([])}o.strokeStyle=n,o.stroke(),o.closePath()}))}}({drawTarget:e,customOverlays:s,product:o,zoomFactor:t,boundingCoordinates:n}),F({drawTarget:e,overlays:l,zoomFactor:t,boundingCoordinates:n,width:i,height:r,currentMode:u})}},{key:"bindEventListeners",value:function(){Object(te.m)(this.props.myPermissions)?(this.containerRef.addEventListener("mousewheel",this.handleScroll),this.containerRef.addEventListener("DOMMouseScroll",this.handleScroll),this.containerRef.addEventListener("mousedown",this.handleMouseDown),this.containerRef.addEventListener("mouseup",this.handleMouseUp),this.containerRef.addEventListener("mouseleave",this.handleMouseUp),this.containerRef.addEventListener("mousemove",this.handleDrag)):(this.containerRef.removeEventListener("mousewheel",this.handleScroll),this.containerRef.removeEventListener("DOMMouseScroll",this.handleScroll),this.containerRef.removeEventListener("mousedown",this.handleMouseDown),this.containerRef.removeEventListener("mouseup",this.handleMouseUp),this.containerRef.removeEventListener("mouseleave",this.handleMouseUp),this.containerRef.removeEventListener("mousemove",this.handleDrag)),this.containerRef.addEventListener("mousemove",this.handleMouseMove)}},{key:"zoom",value:function(e,t,n){var i=Math.pow(1.1,e),r=this.state.zoomFactor*i;if(!(r<.05||r>20)){var a=this.state.canvasDimension;if(!(Math.max(a.width*r,a.height*r)>4096)){var o=this.state,s=o.left,c=o.top,u=t*(1-i),l=n*(1-i);this.setState({left:s+u,top:c+l,zoomFactor:r})}}}},{key:"clamp",value:function(e,t,n){return Math.max(Math.min(e,n),t)}},{key:"resetZoom",value:function(){var e=this.state,t=e.boundingCoordinates,n=e.zoomFactor;this.setState({zoomFactor:1,left:t.minX*n,top:t.minY*n})}},{key:"fitToHeight",value:function(){var e=this.getViewSize().height,t=this.state,n=t.image,i=t.boundingCoordinates,r=t.zoomFactor;this.setState({zoomFactor:e/n.height,left:i.minX*r,top:i.minY*r})}},{key:"fitToWidth",value:function(){var e=this.getViewSize().width,t=this.state,n=t.image,i=t.boundingCoordinates,r=t.zoomFactor;this.setState({zoomFactor:e/n.width,left:i.minX*r,top:i.minY*r})}},{key:"getViewSize",value:function(){return{width:this.containerRef&&this.containerRef.getBoundingClientRect().width||200,height:this.containerRef&&this.containerRef.getBoundingClientRect().height||200}}},{key:"downloadOriginalImage",value:function(){var e=this;Object(x.a)((function(){return e.state.image.src}))?Object(xe.a)(this.state.image.src,"image.bmp"):_.a.info("downloadOriginalImage can not find image source")}},{key:"downloadOriginalImageWithOverlays",value:function(){var e=this.state,t=e.canvasDimension,n=e.image,i=document.createElement("canvas");i.width=t.width,i.height=t.height,this.draw(i,n,1),i.toBlob((function(e){var t=self.URL||self.webkitURL||self,n=t.createObjectURL(e);Object(xe.a)(n),t.revokeObjectURL(n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.zoomFactor,i=t.canvasDimension,r=t.left,a=t.top,o=i.height*n,s=i.width*n;return Object(C.jsx)("div",{style:{height:"100%",width:"100%"},ref:function(t){e.containerRef=t},children:Object(C.jsx)("canvas",{className:"imageCanvas",style:{position:"absolute",left:r,top:a,width:s,height:o},ref:function(t){e.canvas=t}})})}}]),n}(s.Component),Ve=Object(Ie.c)(Object(m.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{customOverlays:e.inspections[n].sharedState.views[i].overlays,currentMode:e.app.currentMode,viewSettings:e.inspections[n].views[i],myPermissions:e.app.myPermissions}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return{setViewData:function(t,r){return e(Object(M.cb)(n,i,t,r))},saveImageSettings:function(t,r){return e(Object(M.G)(n,i,t,r))},dispatch:function(){return e.apply(void 0,arguments)}}}),null,{forwardRef:!0})(Ce)),Te=n(178),Ne=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.imageInfoClass,n=e.cursorPosition,i=e.rgbValues,r=e.imageDimensions;return Object(C.jsx)("div",{className:t,children:Object(C.jsxs)("div",{className:"info-table",children:[Object(C.jsx)("div",{className:"th",children:Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(Te.a,{id:"imageView.info"})})}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(Te.a,{id:"imageView.width"})}),Object(C.jsx)("div",{className:"td",children:r.width})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(Te.a,{id:"imageView.height"})}),Object(C.jsx)("div",{className:"td",children:r.height})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:"".concat(i.R,", ").concat(i.G,", ").concat(i.B)}),Object(C.jsx)("div",{className:"td",style:{backgroundColor:"rgb(".concat(i.R,",").concat(i.G,",").concat(i.B,")")}})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(Te.a,{id:"imageView.x"})}),Object(C.jsx)("div",{className:"td",children:n.x})]}),Object(C.jsxs)("div",{className:"tr",children:[Object(C.jsx)("div",{className:"td",children:Object(C.jsx)(Te.a,{id:"imageView.y"})}),Object(C.jsx)("div",{className:"td",children:n.y})]})]})})}}]),n}(s.Component);Ne.defaultProps={imageInfoClass:"",rgbValues:{R:0,G:0,B:0},cursorPosition:{width:0,height:0},imageDimensions:{width:0,height:0}};var Ee=Object(m.c)((function(e,t){return function(e,t,n,i){return Object.keys(i).reduce((function(i,r){return Object(o.a)(Object(o.a)({},i),{},Object(a.a)({},r,e.inspections[t].views[n][r]))}),{})}(e,t.inspectionId,t.id,{imageDimensions:"imageDimensions",cursorPosition:"cursorPosition",rgbValues:"rgbValues"})}))(Ne),Pe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={viewSizeChangeCounter:e.props.viewSizeChangeCounter,isOverlayInfoOpen:!1,isImageInfoOpen:!1,canvasInitResize:!1,subscribedSource:void 0},e.updateViewSize=function(t){(t>e.state.viewSizeChangeCounter||void 0===e.state.viewSizeChangeCounter)&&e.setState({viewSizeChangeCounter:t})},e.resubscribeToProductStream=function(t,n){t&&(e.unsubscribeFromProductStream(),e.subscribeToProductStream(t,n),e.setState({subscribedSource:t}))},e.subscribeToProductStream=function(t,n){if(!e.productSub){var i={inspectionId:e.props.inspectionId,imageIds:[t],valueIds:e.getUsedVariablesFromOverlay(n),startAtTriggerCount:-1};e.productSub=e.props.proxy.subscribeToProductStream(i,e.onProduct)}},e.unsubscribeFromProductStream=function(){e.productSub&&(e.props.proxy.unsubscribeFromProductStream(e.productSub),e.productSub=null)},e.getUsedVariablesFromOverlay=function(e){var t=[];return e&&e.forEach((function(e){Object.keys(e).forEach((function(n){n.indexOf("Variable")>-1&&e[n]&&!t.includes(e[n])&&t.push(e[n])}))})),t},e.setAllOverlaysActive=function(t){var n=e.props.overlays.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isActive:t})}));e.props.setSharedStateData("overlays",n),e.props.setSaveFlag(!0)},e.createActiveOverlayList=function(e){return e.filter((function(e){return e.isActive}))},e.createActiveOverlayIdList=function(e){return e.filter((function(e){return e.isActive})).map((function(e){return e.id}))},e.onProduct=function(t){var n=t.product,i=e.props.sourceImage;e.setState({imageId:i,product:n}),e.state.canvasInitResize||e.setState({canvasInitResize:!0})},e.toggleOverlayInfo=function(){e.setState({isOverlayInfoOpen:!e.state.isOverlayInfoOpen,isImageInfoOpen:!1})},e.toggleImageInfo=function(){e.setState({isImageInfoOpen:!e.state.isImageInfoOpen,isOverlayInfoOpen:!1})},e.setSourceImageId=function(t){t?e.props.setSharedStateData("sourceImage",t):_.a.error("OjectSelector did not return a valid id ".concat(t,"."))},e.updateOverlayList=function(t){e.props.setSharedStateData("overlays",t),e.props.setSaveFlag(!0)},e.setTitleFromConfig=function(){var t=e.props,n=t.sourceImage,i=t.inspectionId,r=t.configuration;if(r){var a=r.getValueNameForId(i,n);a&&e.props.setViewData("windowName",a)}},e.renderObjectSelector=function(){var t=e.props,n=t.configuration,i=t.inspectionId;if(n&&i){var r=n.getObjectSelectorImagesForInspection(i);return Object(C.jsx)("div",{style:{width:"100%",overflow:"auto"},children:r&&Object(C.jsx)(N,{singleSelect:!0,data:r.tree,onChange:function(t,n){e.setSourceImageId(t),e.props.setViewData("windowName",n),e.props.setSaveFlag(!0)}})})}},e.renderImageView=function(){var t=e.props.viewActions;return Object(C.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(C.jsx)("div",{style:{height:"100%",width:"100%"},children:e.renderImageViewImpl()}),Object(C.jsx)(w.a,{isViewAction:!0,actions:t(Object(ce.a)(e))})]})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.sourceImage&&(this.unsubscribeFromProductStream(),this.resubscribeToProductStream(this.props.sourceImage,this.props.overlays)),t=this.props,n=t.configuration,i=t.proxy,0===n.objectSelectorImages.size&&n.setObjectSelectorImages(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)})),0===n.idNameMappings.size&&n.setIdNameMappings(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateViewSize(e.viewSizeChangeCounter);var t=this.getUsedVariablesFromOverlay(this.props.overlays),n=this.getUsedVariablesFromOverlay(e.overlays);(!pe()(t,n)||this.state.subscribedSource!==e.sourceImage&&e.sourceImage)&&this.resubscribeToProductStream(e.sourceImage,e.overlays),this.props.isBrowserWindowVisible!==e.isBrowserWindowVisible&&(e.isBrowserWindowVisible?this.resubscribeToProductStream(this.props.sourceImage,this.props.overlays):this.unsubscribeFromProductStream())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromProductStream()}},{key:"renderImageViewImpl",value:function(){var e=this.state.product;return!e||e.released?Object(C.jsx)("div",{children:"<UNAVAILABLE>"}):[this.renderImageEditor(),this.renderImageInfo(),this.renderOverlayList()]}},{key:"renderImageEditor",value:function(){var e=this,t=this.props,n=t.inspectionId,i=t.id,r=this.state,a=r.product,o=r.imageId,s=r.isImageInfoOpen;return Object(C.jsx)(Ve,{ref:function(t){e.imageEditor=t},id:i,inspectionId:n,imageId:o,product:a,isImageInfoOpen:s},"ImageEditor".concat(i))}},{key:"renderImageInfo",value:function(){var e=this.props,t=e.inspectionId,n=e.id;if(this.state.isImageInfoOpen)return Object(C.jsx)(Ee,{id:n,inspectionId:t,imageInfoClass:le()({"info-box":!0})},"ImageInfo".concat(n))}},{key:"renderOverlayList",value:function(){var e=this,t=this.props,n=t.overlays,i=t.id;if(this.state.isOverlayInfoOpen)return Object(C.jsx)("div",{className:le()({"info-box":!0}),children:Object(C.jsx)(ke,{overlays:n,updateOverlayList:this.updateOverlayList,canSelectRow:!1,onSelectAll:function(t){return e.setAllOverlaysActive(t)},hasActionBar:!1})},"OverlayList".concat(i))}},{key:"render",value:function(){var e=this.props,t=e.sourceImage,n=e.myPermissions;return this.setTitleFromConfig(),Object(te.v)(n)||Object(te.m)(n)?Object(C.jsx)("div",{className:"image-view-wrapper",children:t?this.renderImageView():this.renderObjectSelector()}):Object(C.jsx)("div",{})}}]),n}(s.Component);Pe.defaultProps={viewActions:function(e){var t=[],n=Object(te.m)(e.props.myPermissions);return n&&(t.push({intlId:"imageView.zoomOut",iconUrl:ge,onClickHandler:function(){e.imageEditor&&e.imageEditor.resetZoom()}}),t.push({intlId:"imageView.fitToWidth",iconUrl:be,onClickHandler:function(){e.imageEditor&&e.imageEditor.fitToWidth()}}),t.push({intlId:"imageView.fitToHeight",iconUrl:he,onClickHandler:function(){e.imageEditor&&e.imageEditor.fitToHeight()}})),(Object(te.v)(e.props.myPermissions)||n)&&(t.push({type:D.a}),t.push({intlId:"imageView.save",iconUrl:fe.a,onClickHandler:function(){e.imageEditor&&e.imageEditor.downloadOriginalImage()}}),t.push({intlId:"imageView.saveWithOverlays",iconUrl:ve,onClickHandler:function(){e.imageEditor&&e.imageEditor.downloadOriginalImageWithOverlays()}}),t.push({type:D.a}),t.push({intlId:"imageView.overlayListToggle",iconUrl:je.a,onClickHandler:function(){e.toggleOverlayInfo()}}),t.push({intlId:"imageView.imageInfoToggle",iconUrl:me.a,onClickHandler:function(){e.toggleImageInfo()}})),t},overlayActions:function(){return[]},inRunMode:!1,currentMode:void 0,proxy:void 0,rgbValues:{R:0,G:0,B:0},cursorPosition:{width:0,height:0}};var Ae={scaleFactor:0,rgbValues:{R:0,G:0,B:0},imageDimensions:{width:0,height:0},cursorPosition:{x:0,y:0}},Me={overlays:[],sourceImage:0},De=Object(m.c)((function(e,t){var n=t.inspectionId,i=t.id,r={proxy:e.app.proxy,configuration:e.app.configuration,currentMode:e.app.currentMode,viewSizeChangeCounter:e.viewSet.viewSizeChangeCounter,myPermissions:e.app.myPermissions,isBrowserWindowVisible:e.app.isBrowserWindowVisible};try{return Object(o.a)(Object(o.a)({},r),{},{overlays:e.inspections[n].sharedState.views[i].overlays,sourceImage:Number(e.inspections[n].sharedState.views[i].sourceImage)})}catch(a){return r}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(M.v)(n,i,Ae,Me)),{setViewData:function(t,r){return e(Object(M.cb)(n,i,t,r))},setSharedStateData:function(t,r){return e(Object(M.ab)(n,t,r,i))},addImageNotAvailableNotification:function(){return e(Object(M.d)())},setSaveFlag:function(t){return e(Object(M.Z)(t))}}}))(Pe),Le=n(20),Re=n(119),_e=n(96),Fe=n.p+"static/media/show-off.8787321d.svg",Ue=n(228),He=n(14),We=n(102),ze=n.p+"static/media/drag.a4b2fa8c.svg",qe=(n(742),["key","index","children","draggable"]),Be=Object(We.d)((function(e){return e.children})),Ge=Object(We.e)((function(e){return e.children})),Ke=Object(We.f)((function(e){return e.children})),Ye=function(e){var t=e.key,n=e.index,i=e.children,r=e.draggable,a=Object(He.a)(e,qe);return r?Object(C.jsx)(Ge,{index:n,children:Object(C.jsxs)("div",Object(o.a)(Object(o.a)({},a),{},{children:[Object(C.jsx)(Ke,{children:Object(C.jsx)("div",{className:"draggable-table-handle",children:Object(C.jsx)("img",{src:ze,alt:"Drag"})})}),i]}))},t):Object(C.jsx)("div",Object(o.a)(Object(o.a)({},a),{},{children:i}))},Xe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={data:e.props.data},e.table=c.a.createRef(),e.getContainer=function(){return e.table.current.getDOMNode().querySelector(".BaseTable__body")},e.getHelperContainer=function(){return e.table.current.getDOMNode().querySelector(".BaseTable__table")},e.rowProps=function(t){var n=Object(Oe.b)(e.props.rowProps);return Object(o.a)(Object(o.a)({},n),{},{draggable:e.props.draggable,tagName:Ye,index:t.rowIndex})},e.handleSortEnd=function(t){var n=t.oldIndex,i=t.newIndex;e.props.onSequenceChange(n,i);var r=Object(p.a)(e.state.data),a=r.splice(n,1),o=Object(Le.a)(a,1)[0];r.splice(i,0,o),e.setState({data:r})},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=Object(p.a)(this.props.data);this.setState({data:t})}}},{key:"render",value:function(){return this.props.draggable?Object(C.jsx)(Be,{useDragHandle:!0,getContainer:this.getContainer,helperContainer:this.getHelperContainer,onSortEnd:this.handleSortEnd,children:Object(C.jsx)(Oe.c,Object(o.a)(Object(o.a)({},this.props),{},{ref:this.table,data:this.state.data,rowProps:this.rowProps,className:"draggable"}))}):Object(C.jsx)(Oe.c,Object(o.a)(Object(o.a)({},this.props),{},{ref:this.table,data:this.state.data,rowProps:this.rowProps}))}}]),n}(c.a.PureComponent);Xe.defaultProps={draggable:!0};var Je=Xe,Ze=n(45),$e=n(476),Qe=n(53),et=n(80),tt=(n(744),Object(Re.c)((function(e){var t=e.open,n=e.onClose,i=e.selectedAlias,r=e.intl;i.alias||(i.alias={});var a=Object(s.useRef)(Object(o.a)({},i.alias)),c=Object(s.useState)(i||{}),u=Object(Le.a)(c,2),l=u[0],d=u[1];l.id!==i.id&&d(i);return Object(C.jsx)(Qe.a,{isInView:!0,isPopup:!0,title:r.messages["listView.AliasEditor.title"],onClose:function(){l.alias=a.current,n(l)},open:t,children:Object(C.jsxs)("div",{className:"alias-editor-wrapper",children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:[Object(C.jsx)(Te.a,{id:"listView.AliasEditor.dottedName"}),":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(O.a,{id:"dottedNameLabel",fullWidth:!0,value:i.name,disabled:!0})})]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:[Object(C.jsx)(Te.a,{id:"listView.AliasEditor.value"}),":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(O.a,{id:"valueLabel",fullWidth:!0,disabled:!0,value:i.value})})]}),function(){var e=[];return(et.b||[]).forEach((function(t){e.push(Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"label",children:["Alias ",t.name,":"]}),Object(C.jsx)("div",{className:"textfield",children:Object(C.jsx)(O.a,{id:"aliasLabel".concat(t.locale),fullWidth:!0,defaultValue:i.alias&&i.alias[t.locale],onChange:function(e){l.alias[t.locale]=e.target.value}})})]},"rowDiv".concat(t.locale).concat(i.id)))})),e}(),Object(C.jsx)("div",{className:"buttons",children:Object(C.jsx)($e.a,{variant:"contained",color:"primary",onClick:function(){return n(l,!0)},children:Object(C.jsx)(Te.a,{id:"listView.AliasEditor.button"})})})]})})}))),nt=(n(745),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).setAliasColumnVisibility=function(e){i.props.updateListViewShowAliases(e),i.props.setSaveFlag(!0),i.setState({showAliases:e})},i.saveNewOrdner=function(e,t){var n=i.props.selection,r=n.splice(e,1),a=Object(Le.a)(r,1)[0];n.splice(t,0,a),i.props.setViewData("selection",n),i.props.setSaveFlag(!0)},i.renderValueSelector=function(){var e=i.props,t=e.configuration,n=e.inspectionId,r=e.selection;if(t&&n){var a=t.getObjectSelectorItemsForInspection(n);if(!a)return Object(C.jsx)("div",{style:{width:"100%",overflow:"auto",height:"100%"}});var o=a.tree;o=t.filterArrayValuesFromTree(o);var s=[],c=t.getInspectionName(n);return s.push("Inspections.".concat(c)),s.push("Inspections".concat(c)),s.push(c),Object(C.jsx)("div",{style:{width:"100%",overflow:"auto",height:"100%"},children:Object(C.jsx)(N,{data:o,onChange:function(e){i.props.setViewData("selection",e),i.props.setSaveFlag(!0)},onExpand:function(e){return i.setState({expandedKeys:e})},selection:r,expandedKeys:i.state.expandedKeys,filterIgnore:s})})}},i.renderList=function(){var e=i.props,t=e.intl,n=e.locale,r=e.myPermissions,a=i.state.showAliases,s=i.getListData(),c=[{key:a?"Alias/Name":"Name",dataKey:"name",title:a?"Alias/Name":"Name",width:0,flexGrow:2},{key:"Values",dataKey:"value",title:"Values",width:0,flexGrow:1}];Object(te.o)(r)&&c.push({key:"",dataKey:"editAlias",title:"",width:50});var u=s.map((function(e){return e.name=a&&e.alias&&e.alias[n]||e.name,Object(o.a)(Object(o.a)({},e),{},{editAlias:Object(C.jsx)(Ze.a,{tooltip:t.messages["listView.AliasEditor.title"],onClick:function(){return i.setState({selectedAlias:e,isAliasEditorOpen:!0})},iconUrl:_e.a},"editAlias")})}));return Object(C.jsxs)("div",{style:{height:"100%"},children:[Object(C.jsx)(Oe.a,{children:function(e){var t=e.width,n=e.height;return Object(C.jsx)(Je,{columns:c,data:u,width:t,height:n,headerHeight:30,rowHeight:30,onSequenceChange:function(e,t){return i.saveNewOrdner(e,t)}})}}),i.renderAliasEditor()]})},i.renderAliasEditor=function(){var e=i.state,t=e.selectedAlias,n=e.listValues,r=e.isAliasEditorOpen,a=(n||[]).find((function(e){return e.id===t.id}));if(a&&r)return Object(C.jsx)(tt,{onClose:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.closeAliasEditor(e,t)},open:i.state.isAliasEditorOpen,selectedAlias:a})},i.getListData=function(){var e=i.props.aliases,t=i.state.listValues;return e&&(t||[]).map((function(t){if(e.has(t.id)){var n=e.get(t.id);if(!n)return _.a.error("Could not load alias for objectId ".concat(t.id)),t;if(!n.alias)return _.a.info("There is no alias value stored for ".concat(n.dottedName,".")),t;t.alias=n.alias}return t})),t},i.closeAliasEditor=function(e,t){if(e){var n=i.props.aliases;Object.keys(e.alias).forEach((function(t){""===e.alias[t]&&delete e.alias[t]}));var r=0===Object.keys(e.alias).length;if(n.has(e.id)){var a=n.get(e.id);a.alias=e.alias,r?n.delete(e.id):n.set(e.id,a)}else r||n.set(e.id,{objectId:e.id,dottedName:e.name,alias:e.alias})}i.setState({isAliasEditorOpen:!1}),t&&i.props.setSaveFlag(!0)},i.state={listValues:[],expandedKeys:[],isAliasEditorOpen:!1,selectedAlias:{},showAliases:!1},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.unsubscribeFromProductStream(),!this.props.isSelectionMode&&this.props.selection.length>0&&this.subscribeToProductStream(),this.props.showAliasesInList&&this.setState({showAliases:!0}),t=this.props,n=t.configuration,i=t.proxy,0===n.objectSelectorItems.size&&n.setObjectSelectorItems(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)})),0===n.idNameMappings.size&&n.setIdNameMappings(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.unsubscribeFromProductStream(),!e.isSelectionMode&&e.selection.length>0&&this.subscribeToProductStream()}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromProductStream()}},{key:"subscribeToProductStream",value:function(){if(!this.productSub){var e=this.props,t={inspectionId:e.inspectionId,valueIds:e.selection,startAtTriggerCount:-1};this.productSub=this.props.proxy.subscribeToProductStream(t,this.onProduct.bind(this))}}},{key:"unsubscribeFromProductStream",value:function(){this.productSub&&(this.props.proxy.unsubscribeFromProductStream(this.productSub),this.productSub=null)}},{key:"onProduct",value:function(e){var t=e.product,n=this.createListValues(t);return this.setState({listValues:n}),Promise.resolve()}},{key:"createListValues",value:function(e){var t=this.props,n=t.configuration,i=t.inspectionId,r=t.selection;return e.getValuesAsString(r).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:n.getValueNameForId(i,e.id)||""})}))}},{key:"render",value:function(){var e=this.props,t=e.viewActions,n=e.isSelectionMode,i=e.myPermissions,r=Object(te.o)(i);return Object(te.x)(i)||r?Object(C.jsxs)("div",{className:"list-view-wrapper",children:[n&&r?this.renderValueSelector():this.renderList(),Object(C.jsx)(w.a,{isViewAction:!0,actions:t(this)})]}):Object(C.jsx)("div",{})}}]),n}(s.Component));nt.defaultProps={viewActions:function(e){var t=[];return Object(te.o)(e.props.myPermissions)&&t.push({intlId:"listView.save",iconUrl:je.a,onClickHandler:function(){e.props.setViewData("isSelectionMode",!e.props.isSelectionMode),e.props.setSaveFlag(!0)}}),t.push({type:D.b,id:e.props.inspectionId,intlId:"listView.Actionbar.showAliases",iconUrl:Ue.a,onClickHandler:function(){e.setAliasColumnVisibility(!0)},intlIdAlternative:"listView.Actionbar.hideAliases",iconUrlAlternative:Fe,onClickHandlerAlternative:function(){e.setAliasColumnVisibility(!1)},showAlternative:e.props.showAliasesInList}),t},currentMode:void 0,proxy:void 0,isSelectionMode:!0,inspections:{},selection:[]};var it={selection:[],isSelectionMode:!0},rt={},at=Object(Re.c)(Object(m.c)((function(e,t){var n=t.inspectionId,i=t.id;try{return{proxy:e.app.proxy,configuration:e.app.configuration,currentMode:e.app.currentMode,selection:e.inspections[n].views[i].selection,isSelectionMode:e.inspections[n].views[i].isSelectionMode,aliases:e.inspections[n].sharedState.listViewAliases,showAliasesInList:e.inspections[n].sharedState.showAliasesInList,locale:e.app.locale,myPermissions:e.app.myPermissions}}catch(r){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(M.v)(n,i,it,rt)),{setViewData:function(t,r){return e(Object(M.cb)(n,i,t,r))},setSharedStateData:function(t,i){return e(Object(M.ab)(n,t,i))},updateListViewShowAliases:function(t){return e(Object(M.hb)(n,t))},setSaveFlag:function(t){return e(Object(M.Z)(t))}}}))(nt)),ot=(n(746),n(747),n.p+"static/media/delete-dustbin.8c1d9e0c.svg"),st=n(229),ct=n(932),ut=n(933),lt=n(471),dt=n(934),pt=n(144),ft=n(214),vt=Object(lt.a)({typography:{useNextVariants:!0,htmlFontSize:10}}),ht=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onChange=function(t){e.props.setSaveFlag(!0),e.props.onChange(t)},e.renderTextField=function(t){var n=t.name,i=t.id,r=t.disabled,o=e.props,s=o.currentOverlay,c=o.classes;return Object(C.jsx)(O.a,{label:n,style:{width:"100%"},id:i,type:"text",variant:"outlined",disabled:r||!s,InputProps:{classes:{input:c.input}},InputLabelProps:{classes:{root:c.label}},value:s&&s[i]||"",onChange:function(t){return e.onChange(Object(a.a)({},i,t.target.value))}})},e.renderNumberField=function(t){var n=t.name,i=t.id,r=t.min,o=t.max,s=t.disabled,c=e.props,u=c.currentOverlay,l=c.classes,d=u&&u[i]||"";return Object(C.jsx)(O.a,{label:n,style:{width:"100%"},id:i,type:"number",variant:"outlined",disabled:s||!u,InputProps:{classes:{input:l.input},inputProps:{min:r,max:o}},InputLabelProps:{classes:{root:l.label}},value:d,onChange:function(t){return e.onChange(Object(a.a)({},i,function(e,t,n){var i=Number(n);return i>t&&(i=t),i<e&&(i=e),i}(r,o,t.target.value)))}})},e.renderSelection=function(t){var n=t.name,i=t.id,r=t.options,a=t.disabled,o=e.props.currentOverlay;return Object(C.jsx)(ft.a,{selectedValue:o&&o[i],values:r,onSelectionChanged:e.onChange,name:n,id:i,disabled:a||!o})},e.renderObjectSelector=function(t){var n=t.name,i=t.id,r=t.disabled,o=e.props,s=o.currentOverlay,c=o.classes,u=o.inspectionId,l=o.configuration,d=s&&s[i]&&l.getValueNameForId(u,s[i])||"";return Object(C.jsx)(O.a,{label:n,style:{width:"100%"},id:i,type:"text",variant:"outlined",disabled:r||!s,InputProps:{classes:{input:c.input},endAdornment:Object(C.jsx)(ct.a,{position:"end",children:Object(C.jsx)(ut.a,{edge:"end","aria-label":"clear",onClick:function(){return e.onChange(Object(a.a)({},i,""))},title:i,children:Object(C.jsx)("img",{src:pt.a,alt:"x"})})})},InputLabelProps:{classes:{root:c.label}},value:d,onFocus:function(){return e.props.openSelection(n,i)}})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.configuration,i=t.proxy,0===n.idNameMappings.size&&n.setIdNameMappings(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.imageDimensions,i=e.myPermissions,r=null===n||void 0===n?void 0:n.width,a=null===n||void 0===n?void 0:n.height,o=Number(2*-r),s=Number(2*r),c=Number(2*-a),u=Number(2*a),l=Object(te.p)(i);return Object(C.jsx)("div",{className:"parameter-view-overlay-overlaypropertylist",children:Object(C.jsxs)(dt.a,{theme:vt,children:[Object(C.jsx)("label",{className:t.header,children:"Overlay parameters"}),this.renderTextField({name:"Label",id:"label",disabled:!l}),this.renderNumberField({name:"X",id:"x",min:o,max:s,disabled:!l}),this.renderObjectSelector({name:"X Variable",id:"xVariable",disabled:!l}),this.renderNumberField({name:"Offset Left",id:"offsetLeft",min:o,max:s,disabled:!l}),this.renderObjectSelector({name:"Offset Left Variable",id:"offsetLeftVariable",disabled:!l}),this.renderNumberField({name:"Y",id:"y",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Y Variable",id:"yVariable",disabled:!l}),this.renderNumberField({name:"Offset Top",id:"offsetTop",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Offset Top Variable",id:"offsetTopVariable",disabled:!l}),this.renderNumberField({name:"Width",id:"width",min:o,max:s,disabled:!l}),this.renderObjectSelector({name:"Width Variable",id:"widthVariable",disabled:!l}),this.renderNumberField({name:"Height",id:"height",min:c,max:u,disabled:!l}),this.renderObjectSelector({name:"Height Variable",id:"heightVariable",disabled:!l}),this.renderTextField({name:"Color",id:"color",disabled:!l}),this.renderObjectSelector({name:"Color Variable",id:"colorVariable",disabled:!l}),this.renderSelection({name:"Line Style",id:"lineStyle",options:["solid","dotted","dashed"],disabled:!l})]})})}}]),n}(s.Component),bt=Object(m.c)((function(e){return{proxy:e.app.proxy,configuration:e.app.configuration,myPermissions:e.app.myPermissions}}),(function(e){return{setSaveFlag:function(t){return e(Object(M.Z)(t))}}}))(Object(y.a)((function(){return{header:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:30},input:{height:37,fontSize:"1.4rem"},label:{fontSize:"1.4rem",transform:"translate(14px, 11px) scale(1)"}}}))(ht)),mt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setSelection=function(t){e.props.onClose(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.configuration,i=t.proxy,0===n.objectSelectorItems.size&&n.setObjectSelectorItems(i.protobuf).then((function(){i.dispatchCurrentConfiguration(n)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.open,i=t.title,r=t.configuration,a=t.inspectionId;if(r&&a){var o=r.getObjectSelectorItemsForInspection(a);if(!o)return Object(C.jsx)("div",{});var s=o.tree;s=r.filterArrayValuesFromTree(s);var c=[],u=r.getInspectionName(a);return c.push("Inspections.".concat(u)),c.push("Inspections".concat(u)),c.push(u),Object(C.jsx)(Qe.a,{isInView:!0,isPopup:!0,title:i,onClose:function(){return e.props.onClose()},open:n,children:Object(C.jsx)("div",{className:"objectselector-in-dialog-wrapper",children:Object(C.jsx)(N,{singleSelect:!0,data:s,onChange:function(t){return e.setSelection(t)},filterIgnore:c})})})}}}]),n}(s.Component);mt.defaultProps={open:!1,title:""};var gt=Object(m.c)((function(e){try{return{proxy:e.app.proxy,configuration:e.app.configuration}}catch(t){return{}}}))(mt),jt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={currentOverlay:void 0,isObjectSelectorOpen:!1,variableName:"Variables",variableId:"",selectedVariables:[]},e.setInitialOverlay=function(t){!e.state.currentOverlay&&t&&t.length>0&&e.setState({currentOverlay:t[0]})},e.setAllOverlaysActive=function(t){try{var n=e.props.overlays.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isActive:t})}));e.props.setSharedStateData("overlays",n),e.props.setSaveFlag(!0)}catch(i){console.error(i)}},e.addNewOverlay=function(){var t=e.props.overlays,n={color:"#ebfc02",height:100,id:Math.floor(1e4*Math.random()),isActive:!0,label:"Overlay",lineStyle:"solid",width:100,x:10,y:20,offsetLeft:null,offsetTop:null};try{e.props.setSharedStateData("overlays",[].concat(Object(p.a)(t),[n])),e.setState({currentOverlay:n})}catch(i){console.error(i)}},e.deleteCurrentOverlay=function(){if(e.state.currentOverlay)try{var t=e.props.overlays,n=t.filter((function(t){return t.id!==e.state.currentOverlay.id}));e.props.setSharedStateData("overlays",n);var i=e.getNeighborOverlayId(e.state.currentOverlay.id,t);e.setState({currentOverlay:t.filter((function(e){return e.id===i}))[0]})}catch(r){console.error(r)}},e.getNeighborOverlayId=function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e){if(t[n-1])return t[n-1].id;if(t[n+1])return t[n+1].id}return-1},e.updateCurrentOverlay=function(t){e.setState({currentOverlay:t})},e.updateOverlayList=function(t){e.props.setSharedStateData("overlays",t),e.props.setSaveFlag(!0)},e.renderPlaceholder=function(){return Object(C.jsx)("div",{className:"parameter-view-overlay-placeholder",children:"Please select a source for this parameter view."})},e.setVariableSelection=function(t){if(t){var n=e.props.overlays,i=e.state,r=i.currentOverlay,s=i.variableId,c=i.selectedVariables,u=Object(o.a)(Object(o.a)({},r),{},Object(a.a)({},s,t));t&&!c.includes(t)&&c.push(t);var l=ye(u,n);e.props.setSharedStateData("overlays",l),e.setState({isObjectSelectorOpen:!1,selectedVariables:c}),e.props.setSaveFlag(!0)}else e.setState({isObjectSelectorOpen:!1})},e.saveChangeToOverlays=function(t,n){var i=e.props.overlays,r=Object(o.a)(Object(o.a)({},n),t),a=ye(r,i);e.props.setSharedStateData("overlays",a)},e}return Object(i.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.overlays&&this.state.currentOverlay){var n=e.overlays.filter((function(e){return e.id===t.state.currentOverlay.id}))[0];this.setState({currentOverlay:n})}e.overlays&&this.setInitialOverlay(e.overlays)}},{key:"render",value:function(){var e=this,t=this.props,n=t.overlayActions,i=t.overlays,r=t.inspectionId,a=t.id,o=t.imageDimensions,s=this.state.currentOverlay;return i?Object(C.jsxs)("div",{className:"parameter-view-overlay-wrapper",children:[Object(C.jsxs)("div",{className:"parameter-view-overlay-table-wrapper",children:[Object(C.jsx)(ke,{overlays:i,currentOverlay:s,updateCurrentOverlay:this.updateCurrentOverlay,updateOverlayList:this.updateOverlayList,canSelectRow:!0,onSelectAll:function(t){return e.setAllOverlaysActive(t)}}),Object(C.jsx)(w.a,{actions:n(this)})]}),Object(C.jsx)(bt,{inspectionId:r,viewId:a,currentOverlay:s,imageDimensions:o,onChange:function(t){return e.saveChangeToOverlays(t,s)},openSelection:function(t,n){e.setState({isObjectSelectorOpen:!0,variableName:t,variableId:n})}}),Object(C.jsx)(gt,{title:this.state.variableName,onClose:function(t){return e.setVariableSelection(t)},open:this.state.isObjectSelectorOpen,inspectionId:r})]}):this.renderPlaceholder()}}]),n}(s.Component),wt={overlayActions:function(e){var t=[],n=Object(te.p)(e.props.myPermissions);return n&&t.push({intlId:"parameterview.overlay.add",iconUrl:st.a,onClickHandler:function(){e.props.setSaveFlag(!0),e.addNewOverlay()}}),n&&t.push({intlId:"parameterview.overlay.delete",iconUrl:ot,onClickHandler:function(){e.props.setSaveFlag(!0),e.deleteCurrentOverlay()}}),t}};P.a.array,D.c,P.a.object;jt.defaultProps=wt;var Ot=Object(m.c)((function(e,t){try{var n=t.inspectionId,i=e.inspections[n].sharedState.editingViewId,r=e.inspections[n].sharedState.views[i].overlays,a=e.inspections[n].views[i].imageDimensions,o=e.app.myPermissions;return{overlays:r,proxy:e.app.proxy,imageDimensions:a,myPermissions:o}}catch(s){return{}}}),(function(e,t){var n=t.inspectionId,i=t.id;return e(Object(M.v)(n,i,{},{})),{setSharedStateData:function(t,i){return e(Object(M.ab)(n,t,i))},setSaveFlag:function(t){return e(Object(M.Z)(t))}}}))(jt),yt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).doSomething=function(){},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parameter,n=e.myPermissions;return Object(te.z)(n)||Object(te.p)(n)?Object(C.jsxs)("div",{className:"parameter-view-wrapper",children:[Object(C.jsx)(A,{children:t.component||Object(C.jsx)(Ot,{inspectionId:this.props.inspectionId,id:this.props.id})}),Object(C.jsx)(w.a,{isViewAction:!0,actions:[]})]}):Object(C.jsx)("div",{})}}]),n}(s.Component);yt.defaultProps={};var St=Object(Re.c)(Object(m.c)((function(e){return{parameter:e.toolSet.parameter,myPermissions:e.app.myPermissions}}))(yt)),kt=n(79),It=n.p+"static/media/before.53297893.svg",xt=n(147),Ct=n(148),Vt=function(e){var t=e.children;return Object(C.jsx)("div",{className:"overflow-scroll absolute w-100 h-100 pa2 top-0 left-0",children:t})},Tt=n(153),Nt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderConfiguration=function(e){return Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("span",{className:"sans-serif mr2 basis-100",children:[Object(C.jsx)(Te.a,{id:e.intlId}),":"]}),Object(C.jsx)("span",{className:"basis-100",children:Object(C.jsx)("select",{className:"bn w-100 tc",children:e.options.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.title},e.title)}))})})]})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.configurations,i=t.viewActions;return Object(C.jsxs)("div",{children:[Object(C.jsx)(Vt,{children:Object(C.jsxs)("div",{className:"pa3 flex items-center",children:[Object(C.jsxs)("div",{className:"basis-100",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(Tt.a,{type:"h3",intlId:"name"}),Object(C.jsx)("input",{type:"text",className:"w-100 bg-near-white mb3 ba b--near-white outline-0 pa1"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)(Tt.a,{type:"h3",intlId:"comment"}),Object(C.jsx)("textarea",{className:"w-100 h4 bg-near-white ba b--near-white outline-0 pa1"})]})]}),Object(C.jsxs)("div",{className:"basis-100 pa4 pt0 self-baseline",children:[Object(C.jsx)(Tt.a,{type:"h3",intlId:"configuration"}),n.map((function(t){return Object(C.jsx)("div",{className:"bb b--near-white pa1 mb1",children:e.renderConfiguration(t)},l.a.generate())}))]})]})}),Object(C.jsx)(w.a,{isViewAction:!0,actions:i})]})}}]),n}(s.Component);Nt.defaultProps={viewActions:[{intlId:"back",iconUrl:kt.a},{intlId:"before",iconUrl:It},{intlId:"save",iconUrl:Ct.a},{intlId:"cancel",iconUrl:xt.a}]};var Et=Object(Re.c)(Nt),Pt=n(935),At=n(454),Mt=n.p+"static/media/archive.b8680473.svg",Dt=n.p+"static/media/arrow-top-right.4113715e.svg",Lt=n.p+"static/media/collapse-all.5ae8f8d4.svg",Rt=n.p+"static/media/copy.1e95e110.svg",_t=n.p+"static/media/cut.bf9e7e56.svg",Ft=n.p+"static/media/cylindrical-wrap.b75ac8f0.svg",Ut=n(230),Ht=n.p+"static/media/expand-all.9aefbbb5.svg",Wt=n.p+"static/media/external.36cd89bf.svg",zt=n.p+"static/media/group.00737002.svg",qt=n(231),Bt=n.p+"static/media/load-image.c627eeb8.svg",Gt=n.p+"static/media/loop.d385a57c.svg",Kt=n.p+"static/media/palette.ebdcc61c.svg",Yt=n.p+"static/media/paste.767ba7ae.svg",Xt=n.p+"static/media/perspective.b5973ac2.svg",Jt=n.p+"static/media/polar-transformation.bca0f07a.svg",Zt=n.p+"static/media/resize.34a01621.svg",$t=n.p+"static/media/shift.788a6731.svg",Qt=n.p+"static/media/statistics.4012e027.svg",en=n.p+"static/media/table-analyzer.edbb56e2.svg",tn=n.p+"static/media/table.8752185b.svg",nn=n.p+"static/media/transformation.6c296033.svg",rn=n.p+"static/media/window.4e0082b0.svg",an=n(117),on=(n(824),n(224)),sn=function(e){var t=e.tools,n=e.intl;return Object(C.jsx)("div",{className:"toolset-bar-wrapper",children:t&&t.map((function(e){return e&&e.type===D.a?Object(C.jsx)("div",{className:"toolset-bar-separator",children:Object(C.jsx)("div",{className:"separator"})},"separator_".concat(l.a.generate())):e&&e.type===D.b?Object(C.jsx)(on.a,{id:e.id,intl:n,intlId:e.intlId,iconUrl:e.iconUrl,onClickHandler:e.onClickHandler,intlIdAlternative:e.intlIdAlternative,iconUrlAlternative:e.iconUrlAlternative,onClickHandlerAlternative:e.onClickHandlerAlternative,showAlternative:e.showAlternative},e.id):Object(C.jsx)(Ze.a,{tooltip:n.messages["".concat(e.intlId)],onClick:function(){e.onClickHandler()},iconUrl:e.iconUrl},e.intlId)}))})};sn.defaultProps={isToolAction:!1};var cn=Object(Re.c)(sn),un=(n(825),n.p+"static/media/down.17f143ff.svg"),ln=n.p+"static/media/take-over.e8760b3a.svg",dn=n.p+"static/media/up.32f62e1a.svg",pn=(P.a.arrayOf(P.a.shape({id:P.a.string,value:P.a.string,onClick:P.a.func})),Object(We.b)((function(e){var t=e.value;return Object(C.jsx)("li",{className:"filter-list-row",children:Object(C.jsx)("span",{className:"filter-list-row-item",children:t})},t)}))),fn=Object(We.a)((function(e){var t=e.items;return Object(C.jsx)("ul",{children:t.map((function(e,t){return Object(C.jsx)(pn,{index:t,value:e.value},e.value)}))})})),vn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex;i.setState({CurrentFilterListItems:Object(We.c)(i.state.CurrentFilterListItems,t,n)})},i.state={CurrentFilterListItems:i.props.CurrentFilterListItems},i}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.AvailableFilterListItems,n=e.AvailableFilterListActions,i=e.CurrentFilterListActions;return Object(C.jsxs)("div",{className:"parameter-view-filter-wrapper",children:[Object(C.jsxs)("div",{className:"available-filters filter-list",children:[Object(C.jsx)("div",{className:"filter-header",children:"Available Filters"}),Object(C.jsx)("ul",{className:"filter-content",children:t.map((function(e){return Object(C.jsx)("li",{className:"filter-list-row",children:Object(C.jsx)("span",{className:"filter-list-row-item",children:e.value})},e.value)}))}),Object(C.jsx)("div",{className:"filter-list-actions",children:Object(C.jsx)(w.a,{actions:n})})]}),Object(C.jsxs)("div",{className:"current-filters filter-list",children:[Object(C.jsx)("div",{className:"filter-header",children:"Available Filters"}),Object(C.jsx)("ul",{className:"filter-content",children:Object(C.jsx)(fn,{helperClass:"filter-list-row-item-on-drag",items:this.state.CurrentFilterListItems,onSortEnd:this.onSortEnd})}),Object(C.jsx)("div",{className:"filter-list-actions",children:Object(C.jsx)(w.a,{actions:i})})]}),Object(C.jsx)("div",{className:"property-container",children:Object(C.jsx)("div",{className:"filter-header",children:"Properties"})})]})}}]),n}(s.Component);vn.defaultProps={AvailableFilterListItems:[{id:"",value:"Closing Filter",onClick:function(){}},{id:"",value:"Custom Filter",onClick:function(){}},{id:"",value:"Custom2 Filter",onClick:function(){}},{id:"",value:"Dilation Filter",onClick:function(){}},{id:"",value:"EdgeDetect Filter",onClick:function(){}},{id:"",value:"EdgeDetect2 Filter",onClick:function(){}},{id:"",value:"Erosion Filter",onClick:function(){}},{id:"",value:"HorizonEdge Filter",onClick:function(){}},{id:"",value:"LaplacianEdge Filter",onClick:function(){}},{id:"",value:"LaplacianEdge2 Filter",onClick:function(){}},{id:"",value:"MAX MIN Filter",onClick:function(){}},{id:"",value:"Opening Filter",onClick:function(){}},{id:"",value:"Ranking Filter",onClick:function(){}},{id:"",value:"Sharpen Filter",onClick:function(){}},{id:"",value:"Sharpen2 Filter",onClick:function(){}},{id:"",value:"Skeleton Filter",onClick:function(){}},{id:"",value:"Smooth Filter",onClick:function(){}},{id:"",value:"Thickening Filter",onClick:function(){}},{id:"",value:"Thinning Filter",onClick:function(){}},{id:"",value:"VertEdge Filter",onClick:function(){}},{id:"",value:"Watershed Filter",onClick:function(){}}],AvailableFilterListActions:[{intlId:"before",iconUrl:ln,onClickHandler:function(){}}],CurrentFilterListActions:[{intlId:"down",iconUrl:un,onClickHandler:function(){}},{intlId:"up",iconUrl:dn,onClickHandler:function(){}},{intlId:"delete",iconUrl:ot,onClickHandler:function(){}}],CurrentFilterListItems:[{id:"",value:"Custom Filter",onClick:function(){}},{id:"",value:"Dilation Filter",onClick:function(){}},{id:"",value:"Closing Filter",onClick:function(){}}]};var hn=vn,bn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setup=function(t){if("Equation"===t.name)e.props.setupParameterView({component:Object(C.jsx)(hn,{})})},e.viewSetFactory=new Pn,e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e){e.node!==this.props.node&&this.setup(this.props.node)}},{key:"render",value:function(){return null}}]),n}(s.Component);bn.defaultProps={node:void 0};var mn=Object(m.c)((function(e){return{currentViewSet:e.viewSet.currentViewSet}}),(function(e){return{setupParameterView:function(t){e(Object(M.U)(t))},setViewSet:function(t){e(Object(M.db)(t))}}}))(bn),gn={tree:{base:{whiteSpace:"nowrap",listStyle:"none",backgroundColor:"transparent",margin:0,padding:0,color:"black",fontFamily:"lucida grande ,tahoma,verdana,arial,sans-serif",fontSize:"14px"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:"rgb(135, 135, 135)"},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-7px 0 0 -7px",height:"10px"},height:10,width:10,arrow:{fill:"#9DA5AB",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:"black"},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"10px"},loading:{color:"#E2C089"}}}},jn=(n(826),Object(Pt.a)((function(){return{label:{fontSize:"1.4rem",transform:"translate(10px, 12px) scale(1)"}}}))),wn=function(e){var t=e.inspectionId,n=Object(m.e)((function(e){return e.app.proxy})),i=Object(m.e)((function(e){return e.app.configuration})),r=Object(m.e)((function(e){return e.app.myPermissions})),a=Object(s.useState)([]),c=Object(Le.a)(a,2),u=c[0],l=c[1],p=Object(s.useState)(void 0),f=Object(Le.a)(p,2),v=f[0],h=f[1],g=Object(s.useState)({}),j=Object(Le.a)(g,2),y=j[0],S=j[1],k=Object(s.useState)([]),I=Object(Le.a)(k,1)[0],x=Object(s.useState)(0),V=Object(Le.a)(x,2),T=V[0],N=V[1],E=Object(s.useState)(!1),P=Object(Le.a)(E,2),A=P[0],M=P[1],D=Object(s.useState)(!1),R=Object(Le.a)(D,2),_=R[0],F=R[1],U=Object(s.useState)(""),H=Object(Le.a)(U,2),W=H[0],z=H[1],q=jn();Object(s.useEffect)((function(){0===i.inspectionToolsetMappings.size&&i.setInspectionIdToToolsetMappings(n.protobuf).then((function(){return n.dispatchCurrentConfiguration(i)}))}),[]),Object(s.useEffect)((function(){var e=i.getConfigTreeByInspectionId(t);N(null===e||void 0===e?void 0:e.toolSetId);var n=function e(t){if(t)return function(e,t){var n=e.name,i=e.isValid,r=e.position,a=e.objectID;return e.children&&e.children.length>0?{name:n,isValid:i,position:r,objectID:a,toggled:!1,children:e.children.map(t)}:{name:n,isValid:i,position:r}}(t,e)}(e);if(n&&n.children){n.children[0].active=!0,S(n.children[0]);var r=n.children.sort(B);l(r)}}),[i,t]);var B=function(e,t){return e.position>t.position?1:-1},G=function(){var e=y.position;u.forEach((function(t){t.position===e+1&&(y.active=!1,t.active=!0,S(t))}))},K=function(){var e=Object(d.a)(b.a.mark((function e(i){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.position,I.push({type:"delete",tool:Object(o.a)(Object(o.a)({},y),{},{active:!1})}),e.next=4,n.deleteTool(t,i);case 4:l(u.filter((function(e){return e.position!==r}))),G();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(b.a.mark((function e(){var i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.objectID,I.push({type:"copy",tool:Object(o.a)(Object(o.a)({},y),{},{active:!1})}),e.next=4,n.copyTool(t,i);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(b.a.mark((function e(){var i,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.position,r=y.objectID,I.push({type:"cut",tool:Object(o.a)(Object(o.a)({},y),{},{active:!1})}),e.next=4,n.cutTool(t,r);case 4:l(u.filter((function(e){return e.position!==i}))),G();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(b.a.mark((function e(){var i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.objectID,I.push({type:"paste",tool:Object(o.a)(Object(o.a)({},y),{},{active:!1})}),e.next=4,n.pasteTool(t,i);case 4:M(!A);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(b.a.mark((function e(i){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.position,e.next=3,n.addTool(t,T,i,r);case 3:a=e.sent,I.push({type:"add",position:r,toolId:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=[{intlId:"copy",iconUrl:Rt,onClickHandler:function(){return Y()}},{intlId:"cut",iconUrl:_t,onClickHandler:function(){return X()}},{intlId:"paste",iconUrl:Yt,onClickHandler:function(){return J()}},{intlId:"delete",iconUrl:Ut.a,onClickHandler:function(){return F(!0)}},{intlId:"expandAll",iconUrl:Ht,onClickHandler:function(){return u.forEach((function(e){e.toggled=!0})),void M(!A)}},{intlId:"collapseAll",iconUrl:Lt,onClickHandler:function(){return u.forEach((function(e){e.toggled=!1})),void M(!A)}}],Q=[{intlId:"toolsetView.windowTool",iconUrl:rn,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.WindowToolClassId)}},{intlId:"toolsetView.mathTool",iconUrl:ge,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.MathToolClassId)}},{intlId:"toolsetView.statisticsTool",iconUrl:Qt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.StatisticsToolClassId)}},{intlId:"toolsetView.ringBufferTool",iconUrl:Dt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.RingBufferToolClassId)}},{intlId:"toolsetView.archiveTool",iconUrl:Mt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ArchiveToolClassId)}},{intlId:"toolsetView.acquisitionTool",iconUrl:Dt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.AcquisitionToolClassId)}},{intlId:"toolsetView.transformationTool",iconUrl:nn,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.TransformationToolClassId)}},{intlId:"toolsetView.shiftTool",iconUrl:$t,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ShiftToolClassId)}},{intlId:"toolsetView.cylindricalWarpTool",iconUrl:Ft,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.CylindricalWarpToolClassId)}},{intlId:"toolsetView.perspectiveTool",iconUrl:Xt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.PerspectiveToolClassId)}},{intlId:"toolsetView.imageTool",iconUrl:qt.a,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ImageToolClassId)}},{intlId:"toolsetView.linearTool",iconUrl:Dt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.LinearToolClassId)}},{intlId:"toolsetView.colorTool",iconUrl:Kt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ColorToolClassId)}},{intlId:"toolsetView.resizeTool",iconUrl:Zt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ResizeToolId)}},{intlId:"toolsetView.loadImageTool",iconUrl:Bt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.LoadImageToolClassId)}},{intlId:"toolsetView.tableTool",iconUrl:tn,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.TableToolClassId)}},{intlId:"toolsetView.tableAnalyzerTool",iconUrl:en,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.TableAnalyzerToolClassId)}},{intlId:"toolsetView.polarTransformationTool",iconUrl:Jt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.PolarTransformationToolClassId)}},{intlId:"toolsetView.loopTool",iconUrl:Gt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.LoopToolClassId)}},{intlId:"toolsetView.externalTool",iconUrl:Wt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.ExternalToolClassId)}},{intlId:"toolsetView.groupTool",iconUrl:zt,onClickHandler:function(){return Z(L.a.SvPb.ClassIdEnum.GroupToolClassId)}}];return Object(te.C)(r)||Object(te.r)(r)?Object(C.jsxs)("div",{className:"toolset-wrapper",children:[Object(C.jsx)(an.a,{open:_,onClose:function(e){return function(e){e&&K(y.objectID),F(!1)}(e)},message:Object(C.jsx)(Te.a,{id:"toolsetView.confirmDelete",values:{toolName:y.name}})}),Object(C.jsx)(cn,{tools:Q}),Object(C.jsx)("div",{className:"overflow-auto h-100 w-100",children:Object(C.jsxs)("div",{children:[Object(C.jsx)(mn,{node:y}),Object(C.jsx)("div",{className:"w100",children:Object(C.jsx)(O.a,{label:"Filter",type:"text",variant:"outlined",style:{width:"100%"},onChange:function(e){var t=e.target.value;""===t&&h(void 0),z(t),h(u.filter((function(e){return e.name.indexOf(t)>-1})))},value:W,InputLabelProps:{classes:{root:q.label}}})}),Object(C.jsx)(At.Treebeard,{data:void 0!==v?v:u,onToggle:function(e,t){u.forEach((function(e){e.active=!1})),e.active=!0,e.children&&(e.toggled=t),I.push({type:"select",from:y.position,to:e.position}),S(e),M(!A)},style:gn})]})}),Object(C.jsx)(w.a,{isViewAction:!0,actions:$})]}):Object(C.jsx)("div",{})},On=function(e){return e.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},t.id,t))}),{})},yn=[{title:"No. of Cameras",intlId:"noOfCameras",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]},{title:"No. of Triggers",intlId:"noOfTriggers",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]},{title:"No. of MonitorLists",intlId:"noOfMonitors",options:[{title:"1",value:1},{title:"2",value:2},{title:"3",value:3},{title:"4",value:4}]}],Sn="CONFIG_VIEW",kn="TOOLSET_VIEW",In="IMAGE_VIEW",xn="PARAMETER_VIEW",Cn="LIST_VIEW",Vn="IMAGE_STRIP_VIEW",Tn="DEFAULT_RECIPE_VIEWSET",Nn="DEFAULT_VIEWSET",En="Initial",Pn=Object(i.a)((function e(){var t=this;Object(r.a)(this,e),this.getViewSet=function(e){return e===Nn?t.buildEmptyViewSet():null},this.createViewInstance=function(e,n){var i=t.getViewById(e.viewComponentClassId);if(!i)return!1;var r="".concat(e.viewComponentClassId,"_").concat(e.id,"_").concat(e.inspectionId),a=Object(o.a)(Object(o.a)({},i.passedProps),n);switch(i.viewComponentClassId){case Sn:return Object(s.createElement)(Et,Object(o.a)(Object(o.a)({},a),{},{key:r}));case kn:return Object(s.createElement)(wn,Object(o.a)(Object(o.a)({},a),{},{key:r}));case In:return Object(s.createElement)(De,Object(o.a)(Object(o.a)({},a),{},{key:r}));case xn:return Object(s.createElement)(St,Object(o.a)(Object(o.a)({},a),{},{key:r}));case Vn:return Object(s.createElement)(se,Object(o.a)(Object(o.a)({},a),{},{key:r}));case Cn:return Object(s.createElement)(at,Object(o.a)(Object(o.a)({},a),{},{key:r}));default:return Object(C.jsxs)("div",{children:["Unknown Component ",i.viewComponentClassId]})}},this.getViewById=function(e){switch(e){case Sn:return{id:l.a.generate(),titleId:"recipeViewInspectionTemplate",viewComponentClassId:Sn,passedProps:{configurations:yn}};case kn:return{id:l.a.generate(),titleId:"toolsetView.inspectionTemplate",viewComponentClassId:kn};case In:return{id:l.a.generate(),titleId:"imageView.inspectionTemplate",viewComponentClassId:In};case xn:return{id:l.a.generate(),titleId:"parameterView.inspectionTemplate",viewComponentClassId:xn};case Vn:return{id:l.a.generate(),titleId:"imageStripView.inspectionTemplate",viewComponentClassId:Vn};case Cn:return{id:l.a.generate(),titleId:"listView.inspectionTemplate",viewComponentClassId:Cn};default:return null}},this.buildRecipeViewSet=function(){var e=[t.getViewById(In),t.getViewById(Cn),t.getViewById(Vn)];return{id:Tn,viewSet:On(e),initialValue:{first:{direction:"row",splitPercentage:60,first:e[0].id,second:e[1].id},direction:"column",splitPercentage:75,second:e[2].id}}},this.buildEmptyViewSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=l.a.generate();return{id:e,name:e,viewSet:Object(a.a)({},t,{}),initialValue:t}},this.buildEditViewSet=function(){var e=[t.getViewById(kn),t.getViewById(In),t.getViewById(xn)];return{id:Nn,viewSet:On(e),initialValue:{direction:"row",first:e[0].id,splitPercentage:30,second:{direction:"column",splitPercentage:45,first:e[1].id,second:e[2].id}}}},this.createNewViewSet=function(){var e=[{id:l.a.generate(),viewComponentClassId:kn,titleId:"toolsetViewInspectionTemplate"}];return{id:"NEW_VIEWSET",viewSet:On(e),initialValue:e[0].id}}}))},34:function(e,t,n){"use strict";var i=n(96),r=n(225),a=n.p+"static/media/regression.f027695f.svg",o=n.p+"static/media/run.eb40f6de.svg",s=n.p+"static/media/stop.44c5645f.svg",c=n.p+"static/media/test.47d9c7ad.svg",u={unknownMode:{id:"UNKNOWN_MODE",iconSrc:r.a,text:""},runMode:{id:"RUN_MODE",iconSrc:o,text:""},stopMode:{id:"STOP_MODE",iconSrc:s,text:""},regressionMode:{id:"REGRESSION_MODE",iconSrc:a,text:""},testMode:{id:"TEST_MODE",iconSrc:c,text:""},editMode:{id:"EDIT_MODE",iconSrc:i.a,text:""}};t.a=u},418:function(e,t,n){},44:function(e,t,n){"use strict";n(0);var i=n(119),r=n(38),a=n.n(r),o=(n(660),n(47)),s=n(224),c=n(45),u=n(1),l=function(e){var t=e.actions,n=e.intl,i=e.isViewAction;return Object(u.jsx)("div",{className:"action-bar-wrapper",style:{position:i?"absolute":"relative"},children:t&&t.map((function(e){return e&&e.type===o.a?Object(u.jsx)("div",{className:"action-bar-separator",children:Object(u.jsx)("div",{className:"separator"})},"separator_".concat(a.a.generate())):e&&e.type===o.b?Object(u.jsx)(s.a,{id:e.id,intl:n,intlId:e.intlId,iconUrl:e.iconUrl,onClickHandler:e.onClickHandler,intlIdAlternative:e.intlIdAlternative,iconUrlAlternative:e.iconUrlAlternative,onClickHandlerAlternative:e.onClickHandlerAlternative,showAlternative:e.showAlternative},e.id):Object(u.jsx)(c.a,{tooltip:n.messages["".concat(e.intlId)],onClick:function(){e.onClickHandler()},iconUrl:e.iconUrl},e.intlId)}))})};l.defaultProps={isViewAction:!1},t.a=Object(i.c)(l)},45:function(e,t,n){"use strict";var i=n(3),r=(n(0),n(445)),a=(n(662),n(1)),o=function(e){var t=e.iconUrl,n=e.onClick,o=e.tooltip,s=e.style;return Object(a.jsx)("div",{className:"icon-button-wrapper",children:Object(a.jsx)(r.Tooltip,{title:o,trigger:"mouseenter",duration:1,delay:1e3,children:Object(a.jsx)("button",{style:Object(i.a)(Object(i.a)({},s),{},{backgroundImage:"url(".concat(t,")"),backgroundPosition:"center",backgroundSize:"100% 100%"}),onClick:n,className:"icon-button"})})})};o.defaultProps={tooltip:void 0},t.a=o},456:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return V}));var i=n(12),r=n(20),a=n(5),o=n.n(a),s=n(0),c=n(240),u=n(314),l=n(15),d=n(35),p=n(226),f=n(225),v=n(227),h=n(457),b=n(458),m=n(148),g=n(459),j=n(460),w=n(461),O=n(8),y=n(116),S=n(17),k=n(462),I=n(149),x=n(472),C=n(1),V=function(){var t=Object(l.d)(),n=Object(l.e)((function(e){return e})),a=Object(l.e)((function(e){return e.app})),V=a.user,T=a.protobuf,N=a.myPermissions,E=a.proxy,P=Object(l.e)((function(e){return e.viewSet.unsavedChanges})),A=Object(u.a)(),M=Object(d.f)(),D=Object(s.useRef)(null),L=Object(s.useState)(!1),R=Object(r.a)(L,2),_=R[0],F=R[1],U=Object(s.useState)(!1),H=Object(r.a)(U,2),W=H[0],z=H[1],q=Object(s.useState)(!1),B=Object(r.a)(q,2),G=B[0],K=B[1],Y=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.downloadSVOConfig();case 2:t=e.sent,n=new Blob([t],{type:"application/octet-stream"}),i=URL.createObjectURL(n),Object(y.a)(i,"SVOConfig_".concat((new Date).toISOString(),".svz"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=[{id:"help",icon:f.a,content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{children:A.messages["topNavigation.help"]}),Object(C.jsx)(c.a,{container:document.body,children:Object(C.jsx)(I.a,{open:W,onClose:function(){return z(!1)}})})]}),onClick:function(){return!W&&z(!0)}},{id:"shortcutHelp",icon:g.a,content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{children:A.messages["topNavigation.shortcut"]}),Object(C.jsx)(c.a,{container:document.body,children:Object(C.jsx)(x.a,{open:_,onClose:function(){return F(!1)}})})]}),onClick:function(){return!_&&F(!0)}},{id:"about",icon:v.a,content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{children:A.messages["topNavigation.about"]}),Object(C.jsx)(c.a,{container:document.body,children:Object(C.jsx)(k.a,{open:G,onClose:function(){return K(!1)}})})]}),onClick:function(){return!G&&K(!0)}},{id:"logout",icon:h.a,content:A.messages["topNavigation.logout"],onClick:function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(){return window.location.href="".concat(window.location.origin,"/logout")}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}];return Object(S.G)(N)&&X.unshift({id:"upload",content:Object(C.jsxs)(C.Fragment,{children:[A.messages["topNavigation.upload"],Object(C.jsx)("input",{type:"file",id:"file",ref:D,style:{display:"none"},onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){var i=new FileReader;i.readAsArrayBuffer(n),i.onload=function(e){var t,i=null===(t=e.target)||void 0===t?void 0:t.result,r=i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array;E.uploadSVOConfig(n.name,r)}}}})]}),icon:j.a,onClick:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=D.current)||void 0===t||null===(n=t.click)||void 0===n?void 0:n.call(t));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Object(S.A)(N)&&X.unshift({id:"download",content:A.messages["topNavigation.download"],icon:p.a,onClick:Y}),(Object(S.D)(N)||Object(S.s)(N))&&X.unshift({id:"permissions",content:A.messages["topNavigation.permissions"],icon:b.a,onClick:function(){return M.push("/permissions")}}),P&&Object(S.F)(N)&&X.unshift({id:"saveConfig",content:A.messages["topNavigation.saveConfig"],icon:m.a,onClick:function(){return t(Object(O.F)(T,n))}}),{id:"user-info",icon:w.a,content:V.fullname,children:X}}}).call(this,n(181).setImmediate)},457:function(e,t,n){"use strict";t.a=n.p+"static/media/logout.34533d8e.svg"},458:function(e,t,n){"use strict";t.a=n.p+"static/media/permissions.ce764429.svg"},459:function(e,t,n){"use strict";t.a=n.p+"static/media/shortcut-help.d16d3001.svg"},460:function(e,t,n){"use strict";t.a=n.p+"static/media/upload.6f61d1e9.svg"},461:function(e,t,n){"use strict";t.a=n.p+"static/media/user.71fbff7c.svg"},462:function(e,t,n){"use strict";var i=n(11),r=n(10),a=n(19),o=n(21),s=n(0),c=n(178),u=n(119),l=n(15),d=n(232),p=n(53),f=n(233),v=(n(848),n(1)),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,i=e.intl,r=e.configuration;return r?Object(v.jsxs)(p.a,{title:Object(v.jsx)(c.a,{id:"aboutView"}),onClose:t,open:n,children:[Object(v.jsx)("div",{className:"appname",children:"SVOWebApp"}),Object(v.jsxs)("div",{className:"table",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:i.messages["aboutView.applicationVersion"]}),Object(v.jsx)("div",{className:"cell",children:r.getWebAppVersion()})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:i.messages["aboutView.svoVersion"]}),Object(v.jsx)("div",{className:"cell",children:r.getSvObserverVersion()})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"cell",children:i.messages["aboutView.gatewayVersion"]}),Object(v.jsx)("div",{className:"cell",children:r.getGatewayVersion()})]})]}),Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)(f.a,{src:d.a,title:"logo"})})]}):Object(v.jsx)("div",{})}}]),n}(s.Component);h.defaultProps={open:!1};t.a=Object(l.c)((function(e){try{return{configuration:e.app.configuration}}catch(t){return{}}}))(Object(u.c)(h))},465:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var i=n(12),r=n(10),a=n(11),o=n(5),s=n.n(o),c=n(8),u=n(6),l=n(7),d=n(466),p=Object(r.a)((function t(n,r,o){var p=this;Object(a.a)(this,t),this.connect=function(){p.disconnect(),p.authToken?p.websocketConnector=new d.a(p.onConnect,p.onMessage,p.onClose,p.onError,p.url,p.authToken):u.a.info("[ProtobufConnector] cannot connect yet. no auth token available")},this.connectWithToken=function(e){p.authToken=e,p.connect()},this.disconnect=function(){p.websocketConnector&&(p.websocketConnector.closeSocket(),p.websocketConnector=null)},this.onMessage=function(e){p.protobuf.readMessage(e)},this.onConnect=function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p.connectionLost){t.next=4;break}return p.connectionLost=!1,e((function(){window.location.href="".concat(window.location.origin,"/")})),t.abrupt("return");case 4:p.dispatch(Object(c.W)(p.protobuf,n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onClose=function(){p.connectionLost=!0,p.dispatch(Object(c.W)(p.protobuf,null))},this.onError=function(e){console.error("Websocket error: ",e)},this.url=n,this.dispatch=r,this.protobuf=new l.a,this.websocketConnector=null,this.connectionLost=!1,this.authToken=o,this.connect()}))}).call(this,n(181).setImmediate)},466:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(11),r=n(10),a=n(467),o=function(){function e(t,n,r,o,s,c){var u=this;Object(i.a)(this,e),this.onClose=r;var l=c?["access_token",c]:void 0;this.socket=new a.a(s,l,{debug:!1}),this.socket.binaryType="arraybuffer",this.socket.onopen=function(){t&&t(u.socket)},this.socket.onmessage=function(e){return n&&n(e.data,u.socket)},this.socket.onerror=function(e){return o&&o(e)},this.socket.onclose=function(){return r&&r(u.socket)},this.socket.onconnecting=function(e){return console.log("CONNECTING!",e)}}return Object(r.a)(e,[{key:"closeSocket",value:function(){this.socket&&this.socket.close()}}]),e}()},468:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var i=n(3),r=n(12),a=n(11),o=n(10),s=n(5),c=n.n(s),u=n(178),l=n(8),d=n(469),p=n(56),f=n(6),v=n(34),h=n(17),b=n(123),m=n(156),g=n(238),j=n(473),w=n(7),O=n(474),y=n(1),S=function(){function t(e){var n=this;Object(a.a)(this,t),this.sendLogsToServer=function(){var e=Object(r.a)(c.a.mark((function e(t){var i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.map((function(e){return n.mapLogEntry(e)})),r=w.a.SvPb.StoreClientLogsRequest.create({client:"WebApp",logs:i}),e.prev=2,!n.protobuf){e.next=6;break}return e.next=6,n.protobuf.request(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Error while sending logs to server:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this.loadProject=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.loading){e.next=3;break}return n.loadProjectRequested=!0,e.abrupt("return");case 3:return n.loading=!0,n.showLoadingSplashScreen(),e.prev=5,e.next=8,n.discoverConfiguration();case 8:return e.next=10,n.discoverDeviceMode();case 10:if(n.subscribeToNotificationAndMessageStreams(),!n.currentConfiguration){e.next=19;break}return n.dispatch(Object(l.Y)(!0)),e.next=15,n.currentConfiguration.discoverInspectionsWithConfigName(n.protobuf);case 15:return e.next=17,n.loadClientChunk();case 17:e.next=22;break;case 19:return e.next=21,n.resetClientChunk();case 21:n.dispatch(Object(l.Y)(!1));case 22:n.hideLoadingSplashScreen(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),n.showLoadingErrorOverlay(e.t0);case 28:if(n.loading=!1,n.configLoadedFromCache||!n.currentConfiguration){e.next=40;break}e.prev=30,n.dispatchCurrentConfiguration(n.currentConfiguration),n.setUpProductHistories(n.currentConfiguration),n.currentConfiguration.discoverPartsInBackground(n.protobuf).then((function(){n.dispatchCurrentConfiguration(n.currentConfiguration)})),e.next=40;break;case 36:return e.prev=36,e.t1=e.catch(30),f.a.error({err:e.t1},"Error loading configuration"),e.abrupt("return");case 40:n.loadProjectRequested&&(n.loadProjectRequested=!1,n.loadProject());case 41:case"end":return e.stop()}}),e,null,[[5,25],[30,36]])}))),this.discoverDeviceMode=Object(r.a)(c.a.mark((function e(){var t,i,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,i=null,e.prev=2,r=w.a.SvPb.GetDeviceModeRequest.create({}),e.next=6,n.protobuf.request(r);case 6:a=e.sent,i=a.mode,t=Object(g.b)(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),f.a.error({err:e.t0},"Error while fetching mode");case 14:if(null!==t&&n.mode!==t){e.next=16;break}return e.abrupt("return");case 16:if(null!==n.mode){e.next=19;break}return n.mode=t,e.abrupt("return");case 19:return f.a.info({oldMode:n.mode,newMode:t,newModeName:i},"Discovered new mode"),n.mode=t,n.dispatch(Object(l.g)(t)),e.abrupt("return",n.dispatch(Object(l.N)(t)));case 23:case"end":return e.stop()}}),e,null,[[2,11]])}))),this.dispatch=e,this.configInfo=null,this.configLoadedFromCache=!1,this.currentConfiguration=null,this.lock=null,this.loading=!1,this.mode=null,this.protobuf=null,this.protobufInitialized=!1,this.observerNotificationSubscription=null,this.observerMessageSubscription=null,this.lockAcquisitionSubscription=null,this.gatewayNotificationSubscription=null,this.gatewayMessageSubscription=null,this.nextSubId=0,this.productHistoryManager=new j.a,this.subscriptionManager=new O.a({productHistoryManager:this.productHistoryManager}),this.showConnectingSplashScreen()}return Object(o.a)(t,[{key:"setMode",value:function(e){this.onCurrentModeChanged(e)}},{key:"setProtobufStaticInitialized",value:function(){this.protobufInitialized=!0,this.onProtobufChangedImpl()}},{key:"setProtobuf",value:function(e){this.protobuf=e,this.subscriptionManager.setProtobuf(e),this.onProtobufChangedImpl()}},{key:"onProtobufChangedImpl",value:function(){var t=this;this.protobuf&&this.protobuf.isConnected()&&this.protobufInitialized?(this.hideConnectingSplashScreen(),e((function(){return t.loadProject()}))):this.showConnectingSplashScreen()}},{key:"mapLogEntry",value:function(e){return{severity:Object(g.a)(e.levelName),message:JSON.stringify(e)}}},{key:"updateConfigLockStatus",value:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.lock||(this.lock=new m.a({})),this.lock.owner=t.owner,this.lock.lockDescription=t.description,this.lock.host=t.host,this.lock.status=t.status,this.dispatchConfigurationLock(this.lock);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispatchCurrentConfiguration",value:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dispatch(Object(l.K)(new b.a(t))),b.a.saveToCache(this.currentConfiguration,this.configInfo);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dispatchConfigurationLock",value:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dispatch(Object(l.J)(new m.a(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showConnectingSplashScreen",value:function(){var t=this;e((function(){t.dispatch(Object(l.eb)({message:Object(y.jsx)("p",{children:"Connecting"})}))}))}},{key:"hideConnectingSplashScreen",value:function(){var t=this;e((function(){t.dispatch(Object(l.t)())}))}},{key:"showLoadingSplashScreen",value:function(){this.dispatch(Object(l.eb)({message:Object(y.jsx)("p",{children:"Loading Configuration"})}))}},{key:"showLoadingErrorOverlay",value:function(e){this.dispatch(Object(l.eb)({message:Object(y.jsxs)("p",{children:["Error while loading Configuration: ","".concat(e)]})}))}},{key:"hideLoadingSplashScreen",value:function(){this.dispatch(Object(l.t)())}},{key:"getConfigurationInfo",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.protobuf.request(w.a.SvPb.GetConfigurationInfoRequest.create());case 3:if(t=e.sent,0!==Object.keys(t).length){e.next=7;break}return f.a.warn("Empty response for GetConfigurationInfoRequest, configuration in SVO not loaded"),e.abrupt("return",null);case 7:return t.lastModified||(t=Object(i.a)(Object(i.a)({},t),{},{lastModified:t.loadedSince})),e.abrupt("return",t);case 11:e.prev=11,e.t0=e.catch(0),f.a.error("GetConfigurationInfoRequest ERROR",e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"discoverConfiguration",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,this.getConfigurationInfo();case 3:if(this.configInfo=e.sent,this.configInfo&&this.configInfo.loadedSince){e.next=7;break}return this.currentConfiguration=null,e.abrupt("return");case 7:return e.prev=7,e.next=10,JSON.parse(localStorage.getItem(p.c));case 10:t=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),f.a.error({err:e.t0},"Timestamp request failed");case 16:if(n=null,!this.configInfo||!t||t.hash!==this.configInfo.hash||Number(t.lastModified)!==this.configInfo.lastModified){e.next=26;break}return e.next=20,b.a.loadFromCache();case 20:n=e.sent,this.dispatch(Object(l.K)(n)),this.setUpProductHistories(n),this.configLoadedFromCache=!0,e.next=29;break;case 26:n=new b.a({}),this.dispatch(Object(l.K)(n)),this.dispatch(Object(l.r)());case 29:this.currentConfiguration=n;case 30:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"onCurrentModeChanged",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mode=v.a.unknownMode.id,n=Object(g.c)(t),i=w.a.SvPb.SetDeviceModeRequest.create({mode:n}),r=null,e.prev=4,e.next=7,this.protobuf.request(i);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),f.a.error({err:e.t0},"Error while changing the mode"),e.abrupt("return");case 14:if(!r.hResult){e.next=17;break}return f.a.error({hResult:r.hResult},"Error while changing the mode"),e.abrupt("return");case 17:setTimeout(this.discoverDeviceMode,500);case 18:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadClientChunk",value:function(){return this.dispatch(Object(l.w)(this))}},{key:"resetClientChunk",value:function(){return this.dispatch(Object(l.E)(this.protobuf))}},{key:"subscribeToNotificationAndMessageStreams",value:function(){this.subscribeToObserverNotificationStream(),this.subscribeToObserverMessageStream(),this.subscribeToGatewayNotificationStream(),this.subscribeToGatewayMessageStream()}},{key:"subscribeToObserverNotificationStream",value:function(){var e=this;this.unsubscribeFromObserverNotificationStream();var t=w.a.SvPb.GetNotificationStreamRequest.create({});this.observerNotificationSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onObserverNotification(t)},error:function(t){return e.onObserverNotificationError(t)},complete:function(){return f.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromObserverNotificationStream",value:function(){this.observerNotificationSubscription&&this.observerNotificationSubscription.unsubscribe()}},{key:"onObserverNotification",value:function(e){var t,n,i=e.type,r=e.parameter;switch(i){case w.a.SvPb.NotifyType.currentMode:var a=this.getVariantValue(r);f.a.debug({mode:a},"Notification currentMode"),this.discoverDeviceMode();break;case w.a.SvPb.NotifyType.lastModified:var o=1e3*this.getVariantValue(r);f.a.debug({timestamp:new Date(o)},"Notification lastModified"),this.dispatch(Object(l.i)()),this.loadProject();break;case w.a.SvPb.NotifyType.configLoaded:t=this.getVariantValue(r),n=b.a.extractConfigNameFromFileName(t),f.a.debug({fileName:t,configName:n},"Notification configLoaded"),this.dispatch(Object(l.h)(t)),this.loadProject();break;case w.a.SvPb.NotifyType.configUnloaded:t=this.getVariantValue(r),n=b.a.extractConfigNameFromFileName(t),f.a.debug({fileName:t,configName:n},"Notification configUnloaded"),this.dispatch(Object(l.j)(t)),this.loadProject();break;default:f.a.warn({type:i,parameter:r},"Unknown notification type")}}},{key:"getVariantValue",value:function(e){return e&&e[e.data]}},{key:"formatMessageNotification",value:function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsx)(u.a,{id:"notifications.checkSvimOutput"}),e&&Object(y.jsxs)("div",{children:[t?"(".concat(t,")"):" "," ",e]})]})}},{key:"onObserverNotificationError",value:function(e){f.a.error({err:e},"Notification error"),this.unsubscribeFromObserverNotificationStream()}},{key:"subscribeToObserverMessageStream",value:function(){var e=this;this.unsubscribeFromObserverMessageStream();var t=w.a.SvPb.GetMessageStreamRequest.create({});this.observerMessageSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onObserverMessage(t)},error:function(t){return e.onObserverMessageError(t)},complete:function(){return f.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromObserverMessageStream",value:function(){this.observerMessageSubscription&&this.observerMessageSubscription.unsubscribe()}},{key:"onObserverMessage",value:function(e){var t=this,n=e.type,r=e.messageList.messages;switch(f.a.debug(Object(i.a)({},e),"SVObserver message stream event"),n){case w.a.SvPb.MessageType.startMsgBox:if(!r||1!==r.length)return void f.a.warn({type:n,messages:r},"Expected exactly one message in the message event");var a=r[0],o=this.formatMessageNotification(a.messageText,a.messageCode);this.dispatch(Object(l.eb)({message:o}));break;case w.a.SvPb.MessageType.endMsgBox:this.dispatch(Object(l.t)());break;case w.a.SvPb.MessageType.msgLog:(r||[]).forEach((function(e){var n=e.messageCode,i=e.messageText;t.dispatch(Object(l.l)(i,n))}));break;default:f.a.warn({type:n},"Unknown message event type")}}},{key:"onObserverMessageError",value:function(e){f.a.error({err:e},"SVObserver message stream error"),this.unsubscribeFromObserverMessageStream()}},{key:"subscribeToLockAcquisitionStream",value:function(e){var t=this;e.requestTakeover&&(this.lock.waitForTakeoverResponse(),this.dispatchConfigurationLock(this.lock));var n=w.a.SvPb.LockAcquisitionStreamRequest.create(e);this.lockAcquisitionSubscription=this.protobuf.stream(n).subscribe({next:function(e){return t.onLockAcquisition(e)},error:function(e){return t.onLockAcquisitionError(e)},complete:function(){return f.a.debug("Lock acquisition observable completed")}})}},{key:"unsubscribeFromLockAcquisitionStream",value:function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lockAcquisitionSubscription){e.next=6;break}return this.lockAcquisitionSubscription.unsubscribe(),this.lock=new m.a({}),this.dispatchConfigurationLock(this.lock),e.next=6,this.getMyPermissions();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLockAcquisition",value:function(e){var t=e[e.message];switch(f.a.debug("message type: "+JSON.stringify(e,void 0,2)),e.message){case"lockAcquiredNotification":this.onLockAcquiredNotification(t);break;case"lockTakeoverNotification":this.onLockTakeoverNotification(t);break;case"lockReleasedNotification":this.onLockReleasedNotification();break;case"lockAlreadyLockedNotification":this.onLockAlreadyLockedNotification(t);break;case"lockTakeoverRejectedNotification":this.onLockTakeoverRejectedNotification();break;default:f.a.warn({type:e.message},"Unknown lock acquisition notification type")}}},{key:"onLockAcquisitionError",value:function(e){f.a.error({err:e},"Lock acquisition error: "+JSON.stringify(e,void 0,2)),403===e.code?this.dispatch(Object(l.a)()):404===e.code?this.dispatch(Object(l.m)()):this.dispatch(Object(l.e)(e.code))}},{key:"onLockAcquiredNotification",value:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lock.handleLockAcquiredNotification(t),this.dispatchConfigurationLock(this.lock),e.next=4,this.getMyPermissions();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLockTakeoverNotification",value:function(e){this.lock.handleLockTakeoverNotification(e),this.dispatchConfigurationLock(this.lock)}},{key:"onLockReleasedNotification",value:function(){this.lock.handleLockReleasedNotification(),this.dispatchConfigurationLock(this.lock)}},{key:"onLockAlreadyLockedNotification",value:function(e){this.lock.handleLockAlreadyLockedNotification(e),this.dispatchConfigurationLock(this.lock)}},{key:"onLockTakeoverRejectedNotification",value:function(){this.lock.handleLockTakeoverRejectedNotification(),this.dispatchConfigurationLock(this.lock)}},{key:"closeAlertDialogs",value:function(){this.lock.resetAlertDialogFlags(),this.dispatchConfigurationLock(this.lock)}},{key:"passConfigLock",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=w.a.SvPb.LockTakeoverRequest.create(t);try{this.protobuf.request(n),this.lock.resetTakeoverAttempt(),this.lock.lockedInSameAppInstance=!1}catch(i){this.dispatch(Object(l.f)(i.code)),f.a.error({err:i},"Error while perfroming config lock takeover")}case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retainConfigLock",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.a.SvPb.LockTakeoverRejectedRequest.create(t),e.prev=1,e.next=4,this.protobuf.request(n);case 4:this.lock.resetTakeoverAttempt(),this.dispatchConfigurationLock(this.lock),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),this.dispatch(Object(l.f)(e.t0.code)),f.a.error({err:e.t0},"Error while perfroming config lock takeover");case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToGatewayNotificationStream",value:function(){var e=this;this.unsubscribeFromGatewayNotificationStream();var t=w.a.SvPb.GetGatewayNotificationStreamRequest.create({});this.gatewayNotificationSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onGatewayNotification(t)},error:function(t){return e.onGatewayNotificationError(t)},complete:function(){return f.a.debug("Gateway Notification observable completed")}})}},{key:"unsubscribeFromGatewayNotificationStream",value:function(){this.gatewayNotificationSubscription&&this.gatewayNotificationSubscription.unsubscribe()}},{key:"onGatewayNotification",value:function(e){var t=e[e.message];switch(e.message){case"rejectStreamPaused":var n=t.pausedInspectionIds;f.a.debug({pausedInspectionIds:n},"Notification rejectStreamPaused"),this.onPauseNotification(n);break;case"configurationLockStatus":f.a.debug({value:t},"Notification configurationLockStatus"),this.updateConfigLockStatus(t),this.getMyPermissions();break;default:f.a.warn({type:e.message},"Unknown gateway notification type")}}},{key:"onGatewayNotificationError",value:function(e){f.a.error({err:e},"Gateway Notification error"),this.unsubscribeFromGatewayNotificationStream()}},{key:"subscribeToGatewayMessageStream",value:function(){var e=this;this.unsubscribeFromGatewayMessageStream();var t=w.a.SvPb.GetGatewayMessageStreamRequest.create({});this.GatewayMessageSubscription=this.protobuf.stream(t).subscribe({next:function(t){return e.onGatewayMessage(t)},error:function(t){return e.onGatewayMessageError(t)},complete:function(){return f.a.debug("Notification observable completed")}})}},{key:"unsubscribeFromGatewayMessageStream",value:function(){this.GatewayMessageSubscription&&this.GatewayMessageSubscription.unsubscribe()}},{key:"onGatewayMessage",value:function(e){var t=this,n=e.type,r=e.messageList.messages,a=void 0===r?[]:r;switch(f.a.debug(Object(i.a)({},e),"Gateway message stream event"),n){case w.a.SvPb.MessageType.startMsgBox:if(1!==a.length)return void f.a.warn({type:n,messages:a},"Expected exactly one message in the message event");var o=a[0],s=this.formatMessageNotification(o.messageText,o.messageCode);this.dispatch(Object(l.eb)({message:s}));break;case w.a.SvPb.MessageType.endMsgBox:this.dispatch(Object(l.t)());break;case w.a.SvPb.MessageType.msgLog:a.forEach((function(e){var n=e.messageCode,i=e.messageText;t.dispatch(Object(l.l)(i,n))}));break;default:f.a.warn({type:n},"Unknown message event type")}}},{key:"onGatewayMessageError",value:function(e){f.a.error({err:e},"Gateway message stream error"),this.unsubscribeFromGatewayMessageStream()}},{key:"subscribeToProductStream",value:function(e,t){var n=this._getNextSubId();return this.subscriptionManager.addSubscription(n,e,t),n}},{key:"unsubscribeFromProductStream",value:function(e){this.subscriptionManager.removeSubscription(e)}},{key:"_getNextSubId",value:function(){return"".concat(++this.nextSubId)}},{key:"setUpProductHistories",value:function(e){var t=e.getInspections();this.productHistoryManager.init(t)}},{key:"replayProduct",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchMissingProductData(t,n);case 2:this.subscriptionManager.replayProduct(t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchMissingProductData",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i,r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getMissingProductImages(t,n),r=this.getMissingProductValues(t,n),0!==i.length||0!==r.length){e.next=4;break}return e.abrupt("return");case 4:return a=w.a.SvPb.GetProductDataRequest.create({inspectionId:t,trigger:n.trigger,imageIds:i,valueIds:r,includeOverlays:!0}),e.prev=5,e.next=8,this.protobuf.request(a);case 8:return o=e.sent,e.next=11,n.addData({trigger:o.trigger,imageIds:i,images:o.images,overlays:o.overlays,valueIds:r,values:o.values});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),f.a.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMissingProductImages",value:function(e,t){return this.subscriptionManager.getSubscribedImages(e).filter((function(e){return void 0===t.getImage(e)}))}},{key:"getMissingProductValues",value:function(e,t){return this.subscriptionManager.getSubscribedValues(e).filter((function(e){return void 0===t.getValue(e)}))}},{key:"onPauseNotification",value:function(e){this.dispatch(Object(l.k)(e)),this.subscriptionManager.updatePausedInspections(e),this.dispatch(Object(l.V)(e))}},{key:"pauseRejectStream",value:function(e){this.pauseRejectStreamImpl(!0,e)}},{key:"resumeRejectStream",value:function(e){this.pauseRejectStreamImpl(!1,e)}},{key:"pauseRejectStreamImpl",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.SetRejectStreamPauseStateRequest.create({inspectionId:n||void 0,pause:t}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),f.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMyPermissions",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,n=w.a.SvPb.GetMyPermissionsRequest.create(),e.next=5,this.protobuf.request(n);case 5:t=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),f.a.error("Cannot get my permissions, fall back to default permissions"),t=d.a;case 12:if(t&&t.permissions){e.next=15;break}return f.a.error("Cannot get my permissions"),e.abrupt("return",!1);case 15:if(i=new Set,Object(h.H)(t.permissions,i,""),this.disablePermissionsWhenConfigLocked(i),this.dispatch(Object(l.T)(i)),!Object(h.D)(i)&&!Object(h.s)(i)){e.next=22;break}return e.next=22,this.getGroupPermissions();case 22:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"disablePermissionsWhenConfigLocked",value:function(e){(this.lock.isUnlocked()||this.lock.isLockedInDifferentAppInstance())&&e.forEach((function(t){(t.endsWith(".save")||t.endsWith(".edit")||t.endsWith(".write")||t.endsWith(".remove")||t.endsWith(".add"))&&e.delete(t)}))}},{key:"getGroupPermissions",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.SvPb.GetGroupDetailsRequest.create(),e.next=3,this.protobuf.request(t);case 3:if((n=e.sent)&&n.groupDetails){e.next=7;break}return f.a.error("Cannot get group permissions"),e.abrupt("return",!1);case 7:i=this.flattenPermissions(n.groupDetails),this.dispatch(Object(l.R)(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"flattenPermissions",value:function(e){var t=new Map;return(e||[]).forEach((function(e){var n=new Set;Object(h.H)(e.permissions,n,""),t.set(e.name,{groupPermissions:n,users:e.users})})),t}},{key:"setUserPermissions",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.a.SvPb.UpdateGroupPermissionsRequest.create({groupPermissions:t}),e.prev=1,!this.protobuf){e.next=7;break}return e.next=5,this.protobuf.request(n);case 5:return e.next=7,this.getGroupPermissions();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),f.a.error({e:e.t0},"Error while setting user permissions");case 12:f.a.info("Successfully saved user permissions");case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addTool",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n,i,r){var a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.a.SvPb.InspectionCmdRequest.create({inspectionID:t,createObjectRequest:{ownerId:n,classId:i,taskObjectPos:r}}),e.prev=1,e.next=4,this.protobuf.request(a);case 4:return s=e.sent,e.abrupt("return",null===s||void 0===s||null===(o=s.createObjectResponse)||void 0===o?void 0:o.objectId);case 8:e.prev=8,e.t0=e.catch(1),f.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"deleteTool",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.InspectionCmdRequest.create({inspectionID:t,deleteObjectRequest:{objectID:n}}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),f.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"downloadSVOConfig",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.SvPb.GetConfigRequest.create({}),e.prev=1,e.next=4,this.protobuf.request(t);case 4:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.fileData);case 8:e.prev=8,e.t0=e.catch(1),f.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"uploadSVOConfig",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.PutConfigRequest.create({fileName:t,fileData:n}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:(r=e.sent).hResult&&f.a.error({hResult:r.hResult},"Could not load SVO configuration file"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"copyTool",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.ConfigCommandRequest.create({inspectionID:t,clipboardRequest:{action:w.a.SvPb.ClipboardActionEnum.Copy,objectID:n}}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),f.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"cutTool",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.ConfigCommandRequest.create({inspectionID:t,clipboardRequest:{action:w.a.SvPb.ClipboardActionEnum.Cut,objectID:n}}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),f.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"pasteTool",value:function(){var e=Object(r.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=w.a.SvPb.ConfigCommandRequest.create({inspectionID:t,clipboardRequest:{action:w.a.SvPb.ClipboardActionEnum.Paste,objectID:n}}),e.prev=1,e.next=4,this.protobuf.request(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),f.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(181).setImmediate)},469:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={permissions:{webapp:{configuration:{save:!0},logs:{read:!0},viewset:{add:!0,read:!0,edit:!0,remove:!0},view:[{type:0,add:!0,read:!0,edit:!0,remove:!0}]},svobserver:{mode:{read:!0,edit:!0},inspectionstate:{read:!0,edit:!0},value:{read:!0,edit:!0},tool:{read:!0,edit:!0,add:!0,remove:!0},configuration:{read:!0,write:!0},notifications:{subscribe:!0},clientlogs:{store:!0},file:{read:!0,write:!0},machinestate:{set:!0},command:{execute:!0}},usermanagement:{userpermissions:{read:!1,edit:!1}}}}},47:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n(2),r=n.n(i),a=r.a.arrayOf(r.a.shape({intlId:r.a.string,iconUrl:r.a.string})),o=r.a.oneOfType([a,r.a.func]),s="TOGGLE_BUTTON",c="SEPARATOR";t.c=o},472:function(e,t,n){"use strict";n(0);var i=n(178),r=n(53),a=n(38),o=n.n(a),s=(n(849),n(2)),c=n.n(s),u=(n(850),n(153)),l=n(1),d=(c.a.node.isRequired,c.a.node.isRequired,function(e){var t=e.title,n=e.description;return Object(l.jsxs)("li",{className:"shortcut-list-item",children:[Object(l.jsx)(u.a,{type:"h3",intlId:t}),Object(l.jsx)(i.a,{id:n})]})}),p=function(e){var t=e.shortcuts;return Object(l.jsx)("ul",{className:"shortcut-list",children:t.map((function(e){return Object(l.jsx)(d,{title:e.title,description:e.description},o.a.generate())}))})},f=[{title:"shortcutView.fullscreenTitle",description:"shortcutView.fullscreenDescription"},{title:"shortcutView.helpTitle",description:"shortcutView.helpDescription"}],v=function(e){var t=e.open,n=e.onClose;return Object(l.jsx)(r.a,{title:Object(l.jsx)(i.a,{id:"shortcutView.title"}),onClose:n,open:t,children:Object(l.jsx)(p,{shortcuts:f})})};v.defaultProps={open:!1};t.a=v},473:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(12),r=n(11),a=n(10),o=n(5),s=n.n(o),c=n(223),u=function(){function e(t){Object(r.a)(this,e),this.inspectionId=t,this.history=[]}return Object(a.a)(e,[{key:"addProductData",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,i,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.trigger,i=t.isReject,r=this.history.find((function(e){return e.trigger===n})),a=null,r?a=r.product:(a=new c.a({trigger:n,isReject:i,history:this}),this.history.push({trigger:n,product:a})),e.next=6,a.addData(t);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"releaseProduct",value:function(e){var t=this.history.find((function(t){return t.trigger===e}));t&&(t.product.releaseImpl()&&(this.history=this.history.filter((function(e){return e!==t}))))}}]),e}(),l=function(){function e(){Object(r.a)(this,e),this.productHistories=new Map}return Object(a.a)(e,[{key:"init",value:function(e){var t=this;this.productHistories.clear(),(e||[]).forEach((function(e){var n=e.id,i=new u(n);t.productHistories.set(n,i)}))}},{key:"addProductData",value:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.productHistories.get(t)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,i.addProductData(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},474:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(20),r=n(114),a=n(11),o=n(10),s=n(6),c=n(12),u=n(5),l=n.n(u),d=n(311),p=n.n(d),f=n(7),v=function(){function e(t){var n=t.inspectionId,i=t.productHistoryManager,r=t.protobuf,o=t.paused;Object(a.a)(this,e),this.inspectionId=n,this.productHistoryManager=i,this.protobuf=r,this.lastTrigger=-1,this.subsById=new Map,this.paused=o,this.selectedTrigger=null,this.baseSub=null}return Object(o.a)(e,[{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.selectedTrigger=null}},{key:"replayProduct",value:function(e){this.selectedTrigger=e.trigger,this.emitProductToAllSubscriptions(e)}},{key:"addSubscription",value:function(e,t,n){var i={id:e,desc:t,cb:n};this.subsById.set(e,i);var r=t.inspectionId;if(this.inspectionId!==r)throw new Error("Insection id does not match");this.resubscribeToStream()}},{key:"removeSubscription",value:function(e){var t=this.subsById.get(e);t?(this.swapLastProduct(t,null),this.subsById.delete(e),this.resubscribeToStream()):s.a.warn({id:e},"Unable to unsubscribe listener: unknown id")}},{key:"isEmpty",value:function(){return 0===this.subsById.size}},{key:"getSubscribedImages",value:function(){return this.uniqueIds("imageIds")}},{key:"getSubscribedValues",value:function(){return this.uniqueIds("valueIds")}},{key:"setProtobuf",value:function(e){this.protobuf=e}},{key:"resubscribeToStream",value:function(){this.unsubscribeFromStream(),this.isEmpty()||this.subscribeToStream()}},{key:"subscribeToStream",value:function(){var e=this,t=this.buildReqParams(),n=f.a.SvPb.GetProductStreamRequest.create(t);this.baseSub=this.protobuf.stream(n).subscribe({next:function(t){return e.onStreamEvent(n,t)},error:function(t){return e.onStreamError(t)},complete:function(){return s.a.debug("Product observable completed")}})}},{key:"buildReqParams",value:function(){return{inspectionId:this.inspectionId,startAtTriggerCount:this.getStartAtTriggerCount(),includeFailStatusValues:!0,valueIds:this.uniqueIds("valueIds"),imageIds:this.uniqueIds("imageIds"),rejectValueIds:this.uniqueIds("rejectValueIds"),rejectImageIds:this.uniqueIds("rejectImageIds"),rejectsOnly:this.isRejectsOnly(),imageFormat:f.a.SvPb.ImageFormatEnum.bmp,includeOverlays:!0}}},{key:"getStartAtTriggerCount",value:function(){var e=0;return this.subsById.forEach((function(t){!isNaN(t.desc.startAtTriggerCount)&&t.desc.startAtTriggerCount<e&&(e=t.desc.startAtTriggerCount)})),-1===e&&this.trigger>0?this.trigger:e}},{key:"isRejectsOnly",value:function(){var e=!0;return this.subsById.forEach((function(t){t.desc.rejectsOnly||(e=!1)})),e}},{key:"uniqueIds",value:function(e){var t=new Set;return this.subsById.forEach((function(n){p()(n.desc[e],(function(e){return t.add(e)}))})),Array.from(t)}},{key:"unsubscribeFromStream",value:function(){this.baseSub&&this.baseSub.unsubscribe&&this.baseSub.unsubscribe(),this.baseSub=null}},{key:"onStreamEvent",value:function(){var e=Object(c.a)(l.a.mark((function e(t,n){var i,r,a,o,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.trigger,r=n.isReject,a=this.gatherImages(t,n),o=this.gatherValues(t,n),s={trigger:i,isReject:r,images:a,values:o},e.next=6,this.productHistoryManager.addProductData(this.inspectionId,s);case 6:c=e.sent,this.lastTrigger=i,this.emitProductToAllSubscriptions(c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"gatherImages",value:function(e,t){var n=e.imageIds,i=e.rejectImageIds,r=t.isReject,a=t.images,o=t.rejectImages,s=t.overlays,c=t.rejectOverlays,u=new Map;return n.forEach((function(e,t){var n=(a||[])[t],i=(s||[])[t];n&&u.set(e,{id:e,image:n,overlays:i})})),r&&i.forEach((function(e,t){var n=(o||[])[t],i=(c||[])[t];n&&u.set(e,{id:e,image:n,overlays:i})})),u}},{key:"gatherValues",value:function(e,t){var n=e.valueIds,i=e.rejectValueIds,r=t.isReject,a=t.values,o=t.rejectValues,s=new Map;return n.forEach((function(e,t){var n=(a||[])[t];n&&s.set(e,{id:e,value:n})})),r&&i.forEach((function(e,t){var n=(o||[])[t];n&&s.set(e,{id:e,value:n})})),s}},{key:"emitProductToAllSubscriptions",value:function(e){var t=this;this.subsById.forEach((function(n){t.emitProductToSubscription(n,e)}))}},{key:"emitProductToSubscription",value:function(e,t){var n=this.hasAllRequestedDataForSubscription(t,e),i=this.isInterestedInNewPorduct(t,e);n&&i&&(t.lock(),e.cb({product:t}),this.swapLastProduct(e,t))}},{key:"hasAllRequestedDataForSubscription",value:function(e,t){return!!(t.desc.imageIds||t.desc.valueIds||e.isReject)&&(this.hasDataForSubscriptionInList(t.desc.valueIds,e.values)||this.hasDataForSubscriptionInList(t.desc.rejectValueIds,e.values)||this.hasDataForSubscriptionInList(t.desc.imageIds,e.images)||this.hasDataForSubscriptionInList(t.desc.rejectImageIds,e.images))}},{key:"isInterestedInNewPorduct",value:function(e,t){return this.selectedTrigger?this.selectedTrigger===e.trigger:!t.lastProduct||(t.desc.allowOldTrigger||t.lastProduct.trigger<e.trigger)}},{key:"hasDataForSubscriptionInList",value:function(e,t){for(var n=e||[],i=0;i<n.length;++i)if(!t.has(n[i]))return!1;return!0}},{key:"swapLastProduct",value:function(e,t){e.lastProduct&&!e.desc.manualRelease&&e.lastProduct.release(),e.lastProduct=t}},{key:"onStreamError",value:function(e){s.a.error({err:e},"Stream error")}}]),e}(),h=function(){function e(t){var n=t.productHistoryManager;Object(a.a)(this,e),this.productHistoryManager=n,this.inspectionIdBySubId=new Map,this.subsByInspectionId=new Map,this.pausedInspectionIds=[],this.protobuf=null}return Object(o.a)(e,[{key:"updatePausedInspections",value:function(e){this.pausedInspectionIds=e;var t,n=Object(r.a)(this.subsByInspectionId.entries());try{for(n.s();!(t=n.n()).done;){var a=Object(i.a)(t.value,2),o=a[0],s=a[1];e.includes(o)?s.pause():s.resume()}}catch(c){n.e(c)}finally{n.f()}}},{key:"replayProduct",value:function(e,t){var n=this.subsByInspectionId.get(e);n&&n.replayProduct(t)}},{key:"addSubscription",value:function(e,t,n){var i=t.inspectionId,r=t.startAtTriggerCount;this.inspectionIdBySubId.set(e,i);var a=this.pausedInspectionIds.includes(i),o=this.subsByInspectionId.get(i);o||(o=new v({inspectionId:i,startAtTriggerCount:r,productHistoryManager:this.productHistoryManager,paused:a,protobuf:this.protobuf}),this.subsByInspectionId.set(i,o)),o.addSubscription(e,t,n)}},{key:"removeSubscription",value:function(e){var t=this.inspectionIdBySubId.get(e);if(t){var n=this.subsByInspectionId.get(t);n?(n.removeSubscription(e),n.isEmpty()&&this.subsByInspectionId.delete(t)):s.a.warn({id:e},"Unable to unsubscribe listener: unknown inspection id")}else s.a.warn({id:e},"Unable to unsubscribe listener: unknown id")}},{key:"getSubscribedImages",value:function(e){var t=this.subsByInspectionId.get(e);return t?t.getSubscribedImages():[]}},{key:"getSubscribedValues",value:function(e){var t=this.subsByInspectionId.get(e);return t?t.getSubscribedValues():[]}},{key:"setProtobuf",value:function(e){this.protobuf=e,this.subsByInspectionId.forEach((function(t){return t.setProtobuf(e)}))}}]),e}()},521:function(e,t){},523:function(e,t){},53:function(e,t,n){"use strict";var i=n(11),r=n(10),a=n(19),o=n(21),s=n(0),c=n(24),u=n.n(c),l=n(119),d=(n(743),n(147)),p=n(44),f=(n(47),n(45)),v=n(1),h=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClose,i=e.dialogActions,r=e.title,a=e.intl,o=e.open,s=e.isInView,c=e.isHeight100,l=e.isFullscreen,h=e.isPopup,b=u()({dialog:!0,"dialog--open":o,"is-in-view":s,"is-height-100":c}),m=u()({"dialog-wrapper":!0,"is-height-100":s||l,"is-width-100":l,isPopup:h}),g=u()({"dialog-content-wrapper":!0,"is-padding-0":s,isPopup:h});return!!o&&Object(v.jsx)("div",{className:b,children:Object(v.jsxs)("div",{className:m,children:[Object(v.jsxs)("div",{className:"dialog-toolbar",children:[Object(v.jsx)("div",{className:"dialog-title",children:r}),Object(v.jsx)("div",{className:"dialog-controll-wrapper",children:Object(v.jsx)(f.a,{tooltip:a.messages["viewSetManager.close"],iconUrl:d.a,onClick:function(){n()}})})]}),Object(v.jsx)("div",{className:g,children:t}),Object(v.jsx)("div",{className:"dialog-action-wrapper",children:i&&Object(v.jsx)(p.a,{isViewAction:!0,actions:i})})]})})}}]),n}(s.Component);h.defaultProps={open:!1,title:void 0,dialogActions:void 0,isInView:!1,isFullscreen:!1,isPopup:!1},t.a=Object(l.c)(h)},552:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},56:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l}));var i="svAuthToken",r="svObserverUser",a="configInfo",o="configChunk_",s="configChunkList",c=function(){var e=localStorage.getItem(i);if(!e)return{};var t,n=localStorage.getItem(r);try{t=JSON.parse(n)}catch(a){return{}}return t?{authToken:e,user:t}:{}},u=function(){localStorage.removeItem(i),localStorage.removeItem(r),localStorage.removeItem(a),localStorage.removeItem(s)},l=function(e,t){localStorage.setItem(i,e),localStorage.setItem(r,JSON.stringify(t))}},6:function(e,t,n){"use strict";var i=n(3),r=n(11),a=n(10),o=n(438),s=n(439),c=n.n(s),u=n(440),l=n.n(u),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,e),this.proxy=null,this.pendingMessages=[],this.opts=t,this.start()}return Object(a.a)(e,[{key:"start",value:function(){var e=this,t=this.opts.throttleInterval;!function n(){e.currentThrottleTimeout=setTimeout((function(){var t=e.pendingMessages;e.pendingMessages=[],t.length>0&&(e.proxy?e.proxy.sendLogsToServer(t):e.pendingMessages=t),n()}),t)}()}},{key:"setProxy",value:function(e){this.proxy=e,this.proxy&&this.pendingMessages.length>0&&(this.proxy.sendLogsToServer(this.pendingMessages),this.pendingMessages=[])}},{key:"removeProxy",value:function(){this.proxy=null,this.pendingMessages=[]}},{key:"write",value:function(e){if(this.currentThrottleTimeout){var t=this.pendingMessages.findIndex((function(t){return t.level===e.level&&t.msg===e.msg}));t>=0?(this.pendingMessages[t].sameMessageCount||(this.pendingMessages[t]=Object(i.a)(Object(i.a)({},this.pendingMessages[t]),{},{sameMessageCount:1})),this.pendingMessages[t].sameMessageCount++):this.pendingMessages.push(e)}}}]),e}(),p=function(){function e(){Object(r.a)(this,e);var t=c()({label:!1});this.impl=l()({outputMode:"short",color:!1},t)}return Object(a.a)(e,[{key:"write",value:function(e){this.impl.write(JSON.stringify(e))}}]),e}(),f=new d({throttleInterval:3e3}),v=new p,h=Object(o.a)({name:"SvWebApp",streams:[{level:"warn",stream:f,type:"raw"},{level:"debug",stream:v,type:"stream"}]});h.setProxy=function(e){return f.setProxy(e)},h.removeProxy=function(e){return f.removeProxy(e)},t.a=h},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){try{return e()}catch(t){return}}},659:function(e,t,n){},660:function(e,t,n){},662:function(e,t,n){},663:function(e,t,n){},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(9),r=n(114),a=n(12),o=n(11),s=n(10),c=n(5),u=n.n(c),l=n(150),d=n.n(l),p=n(6),f=function(){function e(t){Object(o.a)(this,e),this.closed=!1,this.observable=t}return Object(s.a)(e,[{key:"next",value:function(e){return this.observable.onNext(e)}},{key:"error",value:function(e){return this.observable.onError(e)}},{key:"complete",value:function(){return this.observable.onComplete()}}]),e}(),v=function(){function e(t){Object(o.a)(this,e),this._onSubscribe=t,this._next=function(){},this._error=function(){},this._complete=function(){}}return Object(s.a)(e,[{key:"subscribe",value:function(e){var t=this;"function"===typeof e.next&&(this._next=e.next),"function"===typeof e.error&&(this._error=e.error),"function"===typeof e.complete&&(this._complete=e.complete);var n=new f(this),i=this._onSubscribe(n);return{unsubscribe:function(){"function"===typeof i&&i(),t._next=function(){},t._error=function(){},t._complete=function(){}}}}},{key:"onNext",value:function(e){return this._next(e)}},{key:"onError",value:function(e){return this._error(e)}},{key:"onComplete",value:function(){return this._complete()}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),h=function(){function e(){Object(o.a)(this,e),this.pendingRequests=new Map,this.openStreams=new Map,this.socket=null}return Object(s.a)(e,[{key:"isConnected",value:function(){return!!this.socket}},{key:"onConnect",value:function(e){var t=this.socket;this.socket=e,t!==e&&this.cancelAllPendingRequests(new Error("Connection changed"))}},{key:"readMessage",value:function(){var t=Object(a.a)(u.a.mark((function t(n){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.SvPenv.Envelope.decode(new Uint8Array(n));case 2:i=t.sent,t.t0=i.type,t.next=t.t0===e.SvPenv.MessageType.response?6:t.t0===e.SvPenv.MessageType.errorResponse?8:t.t0===e.SvPenv.MessageType.streamResponse?10:t.t0===e.SvPenv.MessageType.streamErrorResponse?12:t.t0===e.SvPenv.MessageType.streamFinish?14:t.t0===e.SvPenv.MessageType.streamCancel?16:18;break;case 6:return this.onResponse(i),t.abrupt("break",19);case 8:return this.onErrorResponse(i),t.abrupt("break",19);case 10:return this.onStreamResponse(i),t.abrupt("break",19);case 12:return this.onStreamErrorResponse(i),t.abrupt("break",19);case 14:return this.onStreamFinish(i),t.abrupt("break",19);case 16:return this.onStreamCancel(i),t.abrupt("break",19);case 18:p.a.error({type:i.type},"Received message with unexpected type");case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onResponse",value:function(e){var t=e.transactionId,n=this.pendingRequests.get(t);if(n){var i=this.unwrapResponse(e);this.pendingRequests.delete(t),n.handled||(clearTimeout(n.timeout),n.resolve(i))}else p.a.error({txId:t},"Received response for unknown transaction id")}},{key:"onErrorResponse",value:function(e){var t=e.transactionId,n=this.unwrapErrorResponse(e);return this.onErrorResponseImpl(t,n)}},{key:"onErrorResponseImpl",value:function(e,t){var n=this.pendingRequests.get(e);n?(this.pendingRequests.delete(e),n.handled||(clearTimeout(n.timeout),n.reject(t))):p.a.error({txId:e},"Received response for unknown transaction id")}},{key:"cancelAllPendingRequests",value:function(e){var t,n=Object(r.a)(this.pendingRequests.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.onErrorResponseImpl(i,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"onRequestTimeout",value:function(e){var t=this.pendingRequests.get(e);t?(t.handled=!0,t.reject(new Error("Request timed out"))):p.a.error({txId:e},"Received response for unknown transaction id")}},{key:"onStreamResponse",value:function(){var e=Object(a.a)(u.a.mark((function e(t){var n,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.transactionId,i=this.openStreams.get(n)){e.next=5;break}return p.a.info({streamId:n},"Received update for unknown stream id"),e.abrupt("return");case 5:return r=this.unwrapResponse(t),e.next=8,i.observer.next(r);case 8:this.ackStreamResponse(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onStreamErrorResponse",value:function(e){var t=e.transactionId,n=this.openStreams.get(t);if(n){var i=this.unwrapErrorResponse(e);this.openStreams.delete(t),n.observer.error(i)}else p.a.error({streamId:t},"Received error for unknown stream id")}},{key:"onStreamFinish",value:function(e){var t=e.transactionId,n=this.openStreams.get(t);n?(this.openStreams.delete(t),n.observer.complete()):p.a.error({streamId:t},"Received finish for unknown stream id")}},{key:"onStreamCancel",value:function(){}},{key:"request",value:function(t){var n=this;return new Promise((function(i,r){if(!n.socket)return r(new Error("No socket available"));e.nextTxId+=1;var a=e.nextTxId,o=n.wrapMessage(t,a,e.SvPenv.MessageType.request),s=n.serializeEnvelope(o),c=setTimeout(n.onRequestTimeout.bind(n,a),6e4);n.pendingRequests.set(a,{resolve:i,reject:r,timeout:c}),n.socket.send(s)}))}},{key:"stream",value:function(t){var n=this;return v.create((function(i){if(!n.socket)return i.error(new Error("No socket available"));e.nextStreamId+=1;var r=e.nextStreamId,a=n.wrapMessage(t,r,e.SvPenv.MessageType.streamRequest),o=n.serializeEnvelope(a);return n.openStreams.set(r,{observer:i}),n.socket.send(o),function(){n.openStreams.delete(r),n.cancelStream(r)}}))}},{key:"cancelStream",value:function(t){if(this.socket){var n={transactionId:t,type:e.SvPenv.MessageType.streamCancel},i=e.SvPenv.Envelope.fromObject(n),r=this.serializeEnvelope(i);this.socket.send(r)}}},{key:"ackStreamResponse",value:function(t){var n=e.SvPenv.Envelope.fromObject({transactionId:t.transactionId,sequenceNumber:t.sequenceNumber,type:e.SvPenv.MessageType.streamAck}),i=this.serializeEnvelope(n);this.socket.send(i)}},{key:"wrapMessage",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.SvPenv.MessageType.request,r=this.wrapOneOf(t),a=e.SvPenv.Envelope.fromObject({payloadType:this.getPayloadTypeForOneOfMessage(r),payload:this.packToAny(r),transactionId:n,type:i});return a}},{key:"unwrapResponse",value:function(e){var t=this.unpackFromAny(e.payload);return this.unwrapOneOf(t)}},{key:"unwrapErrorResponse",value:function(e){var t=new Error(e.error.message);if(t.code=e.error.errorCode,e.error.payload){var n=this.unpackFromAny(e.error.payload);t.payload=n}return t}},{key:"wrapOneOf",value:function(t){var n=this.getFieldNameForSVRCMessage(t);return e.SvPb.SVRCMessages.create(Object(i.a)({},n,t))}},{key:"unwrapOneOf",value:function(e){return e[e.message]}},{key:"getFieldNameForSVRCMessage",value:function(e){var t=e.$type.name;return t.substr(0,1).toLowerCase()+t.substr(1)}},{key:"getPayloadTypeForOneOfMessage",value:function(e){var t=e.message;return e.$type.fields[t].id}},{key:"packToAny",value:function(e){var t=e.$type,n=t.fullName.slice(1),i=t.encode(e).finish();return{type_url:"".concat("type.googleapis.com","/").concat(n),value:i}}},{key:"unpackFromAny",value:function(t){var n=t.type_url,i=n.indexOf("/");-1!==i&&(n=n.slice(i+1));var r=e.SvPb.lookup(n);if(r)return r.decode(t.value);p.a.error({type:t.type_url},"Received message with unknown payload type")}},{key:"serializeEnvelope",value:function(t){var n=e.SvPenv.Envelope.encode(t).finish();return n.buffer.slice(n.byteOffset,n.byteOffset+n.length)}}],[{key:"init",value:function(){var t=Object(a.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadProto("/res/proto/Envelope.proto","SvPenv");case 2:return e.SvPenv=t.sent,t.next=5,e.loadProto("/res/proto/SVRC.proto","SvPb");case 5:return e.SvPb=t.sent,t.next=8,e.loadProto("/res/proto/SVRC.proto","SvAuth");case 8:e.SvAuth=t.sent,e.initialized=!0;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"loadProto",value:function(){var e=Object(a.a)(u.a.mark((function e(t,n){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.load(t);case 2:return i=e.sent,e.abrupt("return",i.lookup(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();h.SvPenv={},h.SvPb={},h.nextTxId=0,h.nextStreamId=0,h.initialized=!1},718:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},739:function(e,t,n){},741:function(e,t,n){},742:function(e,t,n){},743:function(e,t,n){},744:function(e,t,n){},745:function(e,t,n){},746:function(e,t,n){},747:function(e,t,n){},748:function(e,t,n){},79:function(e,t,n){"use strict";t.a=n.p+"static/media/back.c6197e51.svg"},8:function(e,t,n){"use strict";n.d(t,"S",(function(){return M})),n.d(t,"X",(function(){return D})),n.d(t,"W",(function(){return L})),n.d(t,"K",(function(){return R})),n.d(t,"J",(function(){return _})),n.d(t,"d",(function(){return U})),n.d(t,"b",(function(){return H})),n.d(t,"c",(function(){return W})),n.d(t,"g",(function(){return z})),n.d(t,"n",(function(){return q})),n.d(t,"h",(function(){return B})),n.d(t,"j",(function(){return G})),n.d(t,"i",(function(){return K})),n.d(t,"l",(function(){return Y})),n.d(t,"k",(function(){return X})),n.d(t,"o",(function(){return J})),n.d(t,"a",(function(){return Z})),n.d(t,"m",(function(){return $})),n.d(t,"f",(function(){return Q})),n.d(t,"e",(function(){return ee})),n.d(t,"p",(function(){return te})),n.d(t,"x",(function(){return ne})),n.d(t,"eb",(function(){return ie})),n.d(t,"t",(function(){return re})),n.d(t,"db",(function(){return ae})),n.d(t,"D",(function(){return oe})),n.d(t,"fb",(function(){return se})),n.d(t,"U",(function(){return ce})),n.d(t,"gb",(function(){return ue})),n.d(t,"u",(function(){return le})),n.d(t,"H",(function(){return de})),n.d(t,"bb",(function(){return pe})),n.d(t,"O",(function(){return fe})),n.d(t,"y",(function(){return ve})),n.d(t,"Z",(function(){return be})),n.d(t,"F",(function(){return me})),n.d(t,"w",(function(){return ge})),n.d(t,"E",(function(){return je})),n.d(t,"Y",(function(){return Oe})),n.d(t,"B",(function(){return ye})),n.d(t,"r",(function(){return Se})),n.d(t,"C",(function(){return ke})),n.d(t,"q",(function(){return Ie})),n.d(t,"L",(function(){return xe})),n.d(t,"M",(function(){return Ce})),n.d(t,"N",(function(){return Ve})),n.d(t,"V",(function(){return Te})),n.d(t,"v",(function(){return Ne})),n.d(t,"cb",(function(){return Ee})),n.d(t,"G",(function(){return Pe})),n.d(t,"ab",(function(){return Ae})),n.d(t,"P",(function(){return Me})),n.d(t,"hb",(function(){return Le})),n.d(t,"Q",(function(){return Re})),n.d(t,"A",(function(){return _e})),n.d(t,"z",(function(){return Fe})),n.d(t,"s",(function(){return Ue})),n.d(t,"R",(function(){return We})),n.d(t,"T",(function(){return ze})),n.d(t,"I",(function(){return qe}));var i=n(12),r=n(5),a=n.n(r),o=(n(0),n(178)),s=n(175),c=n(20),u=n(9),l=n(49),d=n.n(l),p=n(7),f=n(150),v=n.n(f),h=function(e){var t=v.a.util.utf8.length(e),n=new Uint8Array(t);return v.a.util.utf8.write(e,n,0),n},b=function(e){return v.a.util.utf8.read(e,0,e.length)},m=n(6),g=n(29),j=new g.h,w="WebApp.json",O="WebAppIds.json",y="5.0.0",S={VERSION:"version",SV_OBSERVER_VERSION:"svObserverVersion",GATEWAY_VERSION:"gatewayVersion",WEBAPP_VERSION:"webAppVersion",CREATED_VIEW_SETS:"createdViewSets",CURRENT_VIEW_SETS:"currentViewSet",INSPECTION_OVERLAYS:"inspectionOverlays",INSPECTION_LIST_SELECTION:"inspectionListSelection",INSPECTION_EDITING_VIEW_IDS:"inspectionEditingViewIds",INSPECTION_LIST_ALIASES:"inspectionListAliases",INSPECTION_IMAGE_VIEW_SETTINGS:"inspectionImageViewSettings"},k=function(e,t,n){return function(){var r=Object(i.a)(a.a.mark((function i(r){var o,s,c,l,d,f,v,b,g,j,O;return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=n.setSaveOperationInProcess,c=n.setSaveFlag,l=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,overlays:Object.keys(i.sharedState.views).map((function(e){return{viewId:e,overlays:i.sharedState.views[e]&&i.sharedState.views[e].overlays,sourceImage:i.sharedState.views[e]&&i.sharedState.views[e].sourceImage}}))}})),d=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,listSelection:Object.keys(i.views).map((function(e){return{viewId:e,selection:i.views[e]&&i.views[e].selection,isSelectionMode:i.views[e]&&i.views[e].isSelectionMode,selectAll:i.views[e]&&i.views[e].selectAll}}))}})),f=Object.keys(t.inspections).map((function(e){return{inspectionId:parseInt(e,10),editingViewId:t.inspections[e].sharedState.editingViewId}})),v=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return i.sharedState.listViewAliases?{inspectionId:n,aliases:I(i.sharedState.listViewAliases),showInList:i.sharedState.showAliasesInList}:{}})),b=Object.keys(t.inspections).map((function(e){var n=parseInt(e,10),i=t.inspections[e];return{inspectionId:n,imageViewSettings:Object.keys(i.views).map((function(e){return{viewId:e,zoomFactor:i.views[e]&&i.views[e].zoomFactor,imagePosition:i.views[e]&&i.views[e].imagePosition}}))}})),o={},Object(u.a)(o,S.VERSION,y),Object(u.a)(o,S.SV_OBSERVER_VERSION,t.app.configuration.getSvObserverVersion()),Object(u.a)(o,S.GATEWAY_VERSION,t.app.configuration.getGatewayVersion()),Object(u.a)(o,S.WEBAPP_VERSION,t.app.configuration.getWebAppVersion()),Object(u.a)(o,S.CREATED_VIEW_SETS,t.viewSet.createdViewSets),Object(u.a)(o,S.CURRENT_VIEW_SETS,t.viewSet.currentViewSet),Object(u.a)(o,S.INSPECTION_OVERLAYS,l),Object(u.a)(o,S.INSPECTION_LIST_SELECTION,d),Object(u.a)(o,S.INSPECTION_EDITING_VIEW_IDS,f),Object(u.a)(o,S.INSPECTION_LIST_ALIASES,v),Object(u.a)(o,S.INSPECTION_IMAGE_VIEW_SETTINGS,b),g=o,j=JSON.stringify(g),i.next=10,r(s(!0));case 10:return i.prev=10,O=p.a.SvPb.PutFileRequest.create({destinationPath:w,fileData:h(j),saveInConfig:!0}),i.next=14,e.request(O);case 14:i.next=20;break;case 16:return i.prev=16,i.t0=i.catch(10),m.a.error({err:i.t0},"Error while saving client chunk"),i.abrupt("return");case 20:return i.next=22,r(s(!1));case 22:r(c(!1));case 23:case"end":return i.stop()}}),i,null,[[10,16]])})));return function(e){return r.apply(this,arguments)}}()},I=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t},x=function(e,t){return function(){var n=Object(i.a)(a.a.mark((function n(i){var r,o,s,c,u,l,f,v,h,g,j,O,k,I,x,C,T;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.setSharedStateData,o=t.setClientChunk,s=t.setViewData,c=t.setEditingFocus,u=t.addIncompatibilityDetectedNotification,l=t.setListViewAliases,f=t.saveImageSettings,v=p.a.SvPb.GetFileRequest.create({sourcePath:w}),h=null,n.prev=3,n.next=6,e.protobuf.request(v);case 6:h=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),m.a.error({err:n.t0},"Error while loading client chunk");case 12:if(!h.hResult){n.next=15;break}return m.a.info("There is no web app configuration to restore"),n.abrupt("return");case 15:return g=b(h.fileData),j=JSON.parse(g.toString()),n.next=19,V(e.protobuf,j);case 19:if(j=n.sent,P(e,j),O=d.a.coerce(j.version),k=O.version,!d.a.satisfies(k,"<5.0.0")){n.next=24;break}throw new Error("Unable to load deprecated config file");case 24:for(I=Object.keys(j),x=Object.keys(S).map((function(e){return S[e]})),C=0;C<x.length;C++)T=x[C],I.includes(T)||m.a.warn('"'.concat(T,'" can not be found in loaded config'));if(d.a.valid(k)){n.next=30;break}throw m.a.error("Config version is invalid!"),new Error("Selected config version is invalid");case 30:if("major"!==d.a.diff(y,k)){n.next=33;break}throw m.a.error("Selected config is not compatible with the current Web App version"),new Error("Selected config is not compatible with the current Web App version");case 33:"minor"===d.a.diff(y,k)&&d.a.gt(k,y)&&i(u()),d.a.satisfies(k,">=3.0.0")&&(j.inspectionOverlays.forEach((function(e){return e.overlays.forEach((function(t){i(r(e.inspectionId,"overlays",t.overlays,t.viewId)),i(r(e.inspectionId,"sourceImage",t.sourceImage,t.viewId))}))})),j.inspectionListSelection.forEach((function(e){return e.listSelection.forEach((function(t){i(s(e.inspectionId,t.viewId,"selection",t.selection)),i(s(e.inspectionId,t.viewId,"isSelectionMode",t.isSelectionMode)),i(s(e.inspectionId,t.viewId,"selectAll",t.selectAll))}))}))),d.a.satisfies(k,">=3.1.0")&&j.inspectionEditingViewIds.forEach((function(e){e.inspectionId&&e.editingViewId&&i(c(e.inspectionId,e.editingViewId))})),d.a.satisfies(k,">=5.0.0")&&((j.inspectionListAliases||[]).forEach((function(e){if(e.inspectionId&&Array.isArray(e.aliases)){var t=new Map;e.aliases.forEach((function(e){return t.set(e.objectId,e)})),i(l(e.inspectionId,t,e.showInList))}})),(j.inspectionImageViewSettings||[]).forEach((function(e){(e.imageViewSettings||[]).forEach((function(t){i(f(e.inspectionId,t.viewId,t.zoomFactor,t.imagePosition))}))}))),i(o(j));case 38:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}()},C=function(e,t){return function(){var e=Object(i.a)(a.a.mark((function e(n){var i,r,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.setClientChunk,o=g.b,s=j.buildEmptyViewSet(o),c=Object(u.a)({},o,s),i={},Object(u.a)(i,S.VERSION,y),Object(u.a)(i,S.SV_OBSERVER_VERSION,"UNDEFINED"),Object(u.a)(i,S.GATEWAY_VERSION,"UNDEFINED"),Object(u.a)(i,S.WEBAPP_VERSION,"UNDEFINED"),Object(u.a)(i,S.CREATED_VIEW_SETS,c),Object(u.a)(i,S.CURRENT_VIEW_SETS,s),Object(u.a)(i,S.INSPECTION_OVERLAYS,[]),Object(u.a)(i,S.INSPECTION_LIST_SELECTION,[]),Object(u.a)(i,S.INSPECTION_EDITING_VIEW_IDS,[]),Object(u.a)(i,S.INSPECTION_LIST_ALIASES,[]),Object(u.a)(i,S.INSPECTION_IMAGE_VIEW_SETTINGS,[]),n(r(i));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var i,r,o,s,c,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.a.coerce(n.version),r=i.version,!d.a.satisfies(r,">=5.0.0")&&!d.a.satisfies(r,"<4.0.0")){e.next=3;break}return e.abrupt("return",n);case 3:return O,o=p.a.SvPb.GetFileRequest.create({sourcePath:"WebAppIds.json"}),e.prev=5,e.next=8,t.request(o);case 8:s=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),m.a.error({err:e.t0},"Error while loading id mapping"),new Error("Unable to load id mapping file");case 15:if(!s.hResult){e.next=18;break}throw m.a.info('The file "'.concat(O,'" does not exist.')),new Error("Unable to load id mapping file");case 18:e.prev=18,u=b(s.fileData),c=JSON.parse(u.toString()),e.next=27;break;case 23:return e.prev=23,e.t1=e.catch(18),m.a.error({err:e.t1},"Error while parsing content of ".concat(O)),e.abrupt("return",n);case 27:if(l=T(c.guidToObjectIdMapping),E(n,l,f={hasError:!1}),n.version="5.0.0",n.patchedIds=!0,!f.hasError){e.next=36;break}throw new Error("Selected config is not compatible with the current Web App version (could not migrate all string GUIDs to int ObjectIds)");case 36:m.a.debug("Successfully migrated string GUIDs to int ObjectIds");case 37:return e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,null,[[5,11],[18,23]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){var t=new Map;return Object.entries(e||{}).forEach((function(e){var n=Object(c.a)(e,2),i=n[0],r=n[1],a=i.toLowerCase().replace("{","").replace("}","");t.set(a,r)})),t},N=function(e,t){if(t.has(e))return t.get(e);var n=e.toLowerCase();return t.has(n)?t.get(n):void 0},E=function e(t,n,i){for(var r in t)if("object"===typeof t[r]&&null!==t[r])"selection"===r&&(t[r]=t[r].map((function(e){var t=N(e,n);return t||(i.hasError=!0,void m.a.error("There is a guid in the config which is not included in the mapping: ".concat(e)))})).filter((function(e){return!!e}))),e(t[r],n,i);else if("inspectionId"===r||"sourceImage"===r||"xVariable"===r||"offsetLeftVariable"===r||"yVariable"===r||"offsetTopVariable"===r||"widthVariable"===r||"heightVariable"===r||"colorVariable"===r){var a=N(t[r],n);a?t[r]=a:(t[r]=void 0,i.hasError=!0,m.a.error("There is a guid in the config which is not included in the mapping: ".concat(t[r])))}},P=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var i,r,o,s,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,r=!1,o=!1,s=!1,c=0,u=Object.values(n.currentViewSet.viewSet);case 5:if(!(c<u.length)){e.next=22;break}l=u[c],e.t0=l.viewComponentClassId,e.next=e.t0===g.g?10:e.t0===g.d?12:e.t0===g.e?14:e.t0===g.c?16:18;break;case 10:return i||0!==t.currentConfiguration.inspectionToolsetMappings.size||(t.currentConfiguration.setInspectionIdToToolsetMappings(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),i=!0),e.abrupt("break",19);case 12:return r||(0===t.currentConfiguration.objectSelectorImages.size&&t.currentConfiguration.setObjectSelectorImages(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),0===t.currentConfiguration.idNameMappings.size&&t.currentConfiguration.setIdNameMappings(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),r=!0),e.abrupt("break",19);case 14:return o||(0===t.currentConfiguration.objectSelectorItems.size&&t.currentConfiguration.setObjectSelectorItems(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),0===t.currentConfiguration.idNameMappings.size&&t.currentConfiguration.setIdNameMappings(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),o=!0),e.abrupt("break",19);case 16:return s||(0===t.currentConfiguration.objectSelectorImages.size&&t.currentConfiguration.setObjectSelectorImages(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),0===t.currentConfiguration.idNameMappings.size&&t.currentConfiguration.setIdNameMappings(t.protobuf).then((function(){t.dispatchCurrentConfiguration(t.currentConfiguration)})),s=!0),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:c++,e.next=5;break;case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=n(1),M=function(e){return{type:"SET_LOCALE",locale:e}},D=function(){return{type:"SET_PROTOBUF_STATIC_INITIALIZED"}},L=function(e,t){return{type:"SET_PROTOBUF",protobuf:e,socket:t}},R=function(e){return{type:"SET_CONFIGURATION",configuration:e}},_=function(e){return{type:"SET_CONFIGURATION_LOCK",configurationLock:e}},F=function(e,t){return{type:"ADD_NOTIFICATION",notification:{type:e,message:t}}},U=function(){return F("warning",Object(A.jsx)(o.a,{id:"imageNotAvailable"}))},H=function(){return F("info",Object(A.jsx)(o.a,{id:"notifications.websocket.connectionEstablished"}))},W=function(){return F("warning",Object(A.jsx)(o.a,{id:"notifications.websocket.connectionLost"}))},z=function(e){return F("info",Object(A.jsxs)("span",{children:[Object(A.jsx)(o.a,{id:"notifications.modeSwitch.userSwitchedModeTo"})," ",e]}))},q=function(e){return F("info",Object(A.jsxs)("span",{children:[Object(A.jsx)(o.a,{id:"notifications.userSwitchedLanguage"}),e]}))},B=function(e){return F("info",'A new project was loaded: "'.concat(e,'"'))},G=function(e){return F("info",'The project was unloaded: "'.concat(e,'"'))},K=function(){return F("info","Project was modified. Reloading.")},Y=function(e,t){return F("info","Server reported: ".concat(e," ").concat(t))},X=function(e){return F("info",Array.isArray(e)&&e.length>0?Object(A.jsx)(o.a,{id:"notifications.rejectStreamPaused"}):Object(A.jsx)(o.a,{id:"notifications.rejectStreamResumed"}))},J=function(e,t){return F("warning",Object(A.jsx)(o.a,{id:"notifications.variableValueShouldBeInTheRange",values:{variableName:e,range:t}}))},Z=function(){return F("warning",Object(A.jsx)(o.a,{id:"notifications.configAlreadyLockedBySameUser"}))},$=function(){return F("warning",Object(A.jsx)(o.a,{id:"notifications.takeoverCandidateNotFound"}))},Q=function(e){return F("warning",Object(A.jsx)(o.a,{id:"notifications.lockTakeoverError",values:{code:e}}))},ee=function(e){return F("warning",Object(A.jsx)(o.a,{id:"notifications.lockAcquisitionError",values:{code:e}}))},te=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){var i,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)(e);case 2:return i=t.sent,r=i.authToken,o=i.user,t.abrupt("return",n({type:"LOG_IN",authToken:r,user:o}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ne=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.c)(e);case 2:return t.abrupt("return",n({type:"LOG_OUT"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ie=function(e){return{type:"SHOW_GLOBAL_MESSAGE_OVERLAY",message:e.message}},re=function(){return{type:"HIDE_GLOBAL_MESSAGE_OVERLAY"}},ae=function(e,t){return{type:"SET_VIEWSET",viewSet:e,viewSetId:t}},oe=function(e,t,n){return{type:"REPLACE_VIEW_IN_CURRENT_VIEWSET",viewId:e,replacementComponentId:t,inspectionId:n}},se=function(e){return{type:"SWITCH_VIEWSET",viewSet:e}},ce=function(e){return{type:"SET_PARAMETER",parameter:e}},ue=function(e){return{type:"TOGGLE_FULLSCREEN_MODE",componentDescriptor:{id:e.props.id,setFullscreen:e.setFullscreen}}},le=function(){return{type:"INCREASE_VIEW_SIZE_CHANGE_COUNTER"}},de=function(e){return{type:"SET_BOTTOM_NAV_HIDDEN",hidden:!!e}},pe=function(e){return{type:"SET_TOP_NAV_HIDDEN",hidden:!!e}},fe=function(e){return{type:"SET_DEFAULT_VIEWSET_NAME",name:e}},ve=function(e,t){return{type:"NEW_VIEW_SET",name:e,mode:t}},he=function(e){return{type:"UPDATE_SAVE_OPERATION_IN_PROCESS",inProcess:e}},be=function(e){return{type:"SET_SAVE_FLAG",hasChanges:e}},me=function(e,t){return function(){var n=Object(i.a)(a.a.mark((function n(i){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={setSaveOperationInProcess:he,setSaveFlag:be},n.next=3,i(k(e,t,r));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(i.a)(a.a.mark((function t(n){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={setSharedStateData:Ae,setClientChunk:we,setViewData:Ee,setEditingFocus:Me,addIncompatibilityDetectedNotification:He,setListViewAliases:De,saveImageSettings:Pe,setSVOConfigLoaded:Oe},t.next=3,n(x(e,i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={setClientChunk:we,setSVOConfigLoaded:Oe},e.next=3,t(C(0,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},we=function(e){return{type:"LOAD_CLIENT_CHUNK",chunk:e}},Oe=function(e){return{type:"SET_SVO_CONFIG_LOADED",isLoaded:e}},ye=function(e){return{type:"REMOVE_VIEWSET",name:e}},Se=function(){return{type:"CLEAR_CURRENT_VIEW"}},ke=function(e,t){return{type:"RENAME_VIEWSET",oldName:e,newName:t}},Ie=function(e){return{type:"CHANGE_VIEWSET_AFTER_LOADING",name:e}},xe=function(e){return{type:"SET_CURRENT_LAYOUT",layout:e}},Ce=function(e){return{type:"SET_CURRENT_MODE",mode:e}},Ve=function(e){return{type:"SET_CURRENT_MODE_DONE",mode:e}},Te=function(e){return{type:"SET_PAUSED_INSPECTIONS",pausedInspections:e}},Ne=function(e,t,n,i){return{type:"INIT_VIEW_STATE",inspectionId:e,viewId:t,initState:n,initSharedState:i}},Ee=function(e,t,n,i){return{type:"SET_VIEW_DATA",inspectionId:e,viewId:t,key:n,data:i}},Pe=function(e,t,n,i){return{type:"SAVE_IMAGE_SETTINGS",inspectionId:e,viewId:t,zoomFactor:n,imagePosition:i}},Ae=function(e,t,n,i){return{type:"SET_SHARED_STATE_DATA",inspectionId:e,key:t,data:n,viewId:i}},Me=function(e,t){return{type:"SET_EDITING_FOCUS",inspectionId:e,viewId:t}},De=function(e,t,n){return{type:"SET_LIST_VIEW_ALIASES",inspectionId:e,aliases:t,showInList:n}},Le=function(e,t){return{type:"UPDATE_LIST_VIEW_SHOW_ALIASES",inspectionId:e,showInList:t}},Re=function(e){return{type:"SET_FOCUSED_VIEW_TYPE",viewType:e}},_e=function(e,t){return{type:"PURGE_VIEW_STATE",inspectionId:e,viewId:t}},Fe=function(){return{type:"OPEN_HELP_VIEW",isHelpViewOpen:!0}},Ue=function(){return{type:"CLOSE_HELP_VIEW",isHelpViewOpen:!1}},He=function(){return F("info",Object(A.jsx)(o.a,{id:"incompatibilityNotification"}))},We=function(e){return{type:"SET_GROUP_PERMISSIONS",groupPermissions:e}},ze=function(e){return{type:"SET_MY_PERMISSIONS",myPermissions:e}},qe=function(e){return{type:"SET_BROWSER_WINDOW_VISIBILITY",visible:e}}},80:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var i=n(3),r=(n(0),n(178)),a={"topNavigation.language.german":"Deutsch","topNavigation.language.english":"Englisch","topNavigation.lock":"Lock","topNavigation.takeover":"Takeover","topNavigation.release":"Release","topNavigation.logout":"Abmelden","topNavigation.help":"Hilfe","topNavigation.about":"Info","topNavigation.shortcut":"Shortcut","topNavigation.download":"SVO Konfiguration herunterladen","topNavigation.upload":"SVO Konfiguration hochladen","topNavigation.inspectionState":"Inspektionsstatus ({runningInspections} von {numberOfInspections} aktiv)","topNavigation.permissions":"Rechte","topNavigation.saveConfig":"Konfiguration speichern",editMode:"Edit Mode",unknownMode:"Unbekannter Mode",runMode:"Run Mode",stopMode:"Stop Mode",regressionMode:"Regression Mode",testMode:"Test Mode","lockStateHandler.alertDialog.lockAlreadyLocked":"Configuration lock is already owned by: {user}","lockStateHandler.alertDialog.lockDescription":"Lock description: {description}","lockStateHandler.alertDialog.waitingForTakeoverResponse":"Waiting for response from: {user}","lockStateHandler.alertDialog.waitingForResponseInfo":"Current configuration lock owner has been notified of your request and has 30 seconds to respond from now on. If there is no response until then, you will automatically takeover the lock.","lockStateHandler.alertDialog.ownerRejectedTakeover":"{user} rejected the configuration lock takeover","lockStateHandler.alertDialog.takeoverAttempt":"{user} wants to take over configuration lock","lockStateHandler.alertDialog.takeoverMessage":"Takeover message: {message}","lockStateHandler.formDialog.lockConfigRequestTitle":"Lock configuration request","lockStateHandler.formDialog.takeoverConfigRequestTitle":"Takeover configuration request","lockStateHandler.formDialog.lockConfigRequestContent":"To lock or takeover the configuration, please enter all details here. SVOGateway will send updates occasionally.","lockStateHandler.formDialog.lockScope":"Lock scope","lockStateHandler.formDialog.lockTimeout":"Lock timeout","lockStateHandler.formDialog.lockDescription":"Lock description","lockStateHandler.formDialog.takeoverRequest":"Takeover request","lockStateHandler.formDialog.takeoverMessage":"Takeover message","imageStripView.inspectionTemplate":"{inspectionName} Filmstreifen","imageStripView.play":"Play","imageStripView.pause":"Pause",listView:"Liste","listView.inspectionTemplate":"{inspectionName} Liste","listView.AliasEditor.title":"Bearbeite Alias f\xfcr den Pfadnamen","listView.Actionbar.hideAliases":"Zeige Namen","listView.Actionbar.showAliases":"Zeige Aliase","listView.AliasEditor.dottedName":"Pfadname","listView.AliasEditor.value":"Wert","listView.AliasEditor.button":"Speichern",helpView:"Hilfe",aboutView:"\xdcber","aboutView.applicationName":"Applicationsname:","aboutView.applicationVersion":"Applikationsversion:","aboutView.svoVersion":"SVObserver-Version:","aboutView.gatewayVersion":"Gateway-Version:","viewTypeSelection.imageStripView":"Filmstreifen","viewTypeSelection.imageView":"Bild","viewTypeSelection.parameterView":"Parameter","viewTypeSelection.ListView":"Liste","viewTypeSelection.toolset":"Toolset","viewTypeSelection.back":"Zur\xfcck","viewTypeSelection.cancel":"Abbrechen","viewTypeSelection.chooseViewTooltip":"View-Typ ausw\xe4hlen","viewTypeSelection.selectViewType":"W\xe4hlen Sie einen Typ f\xfcr diese View:","inspectionSelection.selectInspection":"W\xe4hlen Sie eine Inspektion f\xfcr diese View:","parameterview.overlay.delete":"L\xf6schen","parameterview.overlay.add":"Hinzuf\xfcgen","parameterview.overlay.showAll":"Alle einblenden","parameterview.overlay.hideAll":"Alle ausblenden","imageView.inspectionTemplate":"{inspectionName} Bild","imageView.zoomIn":"Hineinzoomen","imageView.zoomOut":"Herauszoomen","imageView.fitToWidth":"An Breite anpassen","imageView.fitToHeight":"An H\xf6he anpassen","imageView.saveWithOverlays":"Bild mit Overlays herunterladen","imageView.overlayListToggle":"Overlay-Liste","imageView.imageInfoToggle":"Bildinfo","imageView.save":"Bild herunterladen","imageView.showOverlays":"Overlays anzeigen","imageView.hideOverlays":"Overlays ausblenden","imageView.info":"Info","imageView.width":"Breite:","imageView.height":"H\xf6he:","imageView.x":"X:","imageView.y":"Y:",parameterView:"Parameter","parameterView.inspectionTemplate":"{inspectionName} Parameter","toolsetView.inspectionTemplate":"{inspectionName} Toolset","toolsetView.confirmDelete":"Wollen Sie das Tool {toolName} wirklich entfernen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden.","toolsetView.windowTool":"Window tool","toolsetView.mathTool":"Math tool","toolsetView.statisticsTool":"Statistics tool","toolsetView.ringBufferTool":"RingBuffer tool","toolsetView.archiveTool":"Archive tool","toolsetView.acquisitionTool":"Acquisition tool","toolsetView.transformationTool":"Transformation tool","toolsetView.shiftTool":"Shift tool","toolsetView.cylindricalWarpTool":"CylindricalWarp tool","toolsetView.perspectiveTool":"Perspective tool","toolsetView.imageTool":"Image tool","toolsetView.linearTool":"Linear tool","toolsetView.colorTool":"Color tool","toolsetView.resizeTool":"Resize tool","toolsetView.loadImageTool":"LoadImage tool","toolsetView.tableTool":"Table tool","toolsetView.tableAnalyzerTool":"TableAnalyzer tool","toolsetView.polarTransformationTool":"PolarTransformation tool","toolsetView.loopTool":"Loop tool","toolsetView.externalTool":"External tool","toolsetView.groupTool":"Group tool","aboutView.title":"\xdcber ",viewSetManager:"ViewSet Manager","viewSetManager.title":"View Set Manager","viewSetManager.remove":"Entfernen","viewSetManager.viewSetName":"Name","viewSetManager.save":"Alle View Sets speichern","viewSetManager.close":"Schlie\xdfen","viewSetManager.editViewSetHeadline":"Viewsets editieren:","viewSetManager.newViewSet":"Neues Viewset erstellen","viewSetManager.editViewSetName":"Viewset-Namen editieren","viewSetManager.changeViewSetName":"Viewset-Namen \xe4ndern","viewSetManager.apply":"\xc4nderungen \xfcbernehmen","viewSetManager.export":"Aktuelle Ansicht exportieren","viewSetManager.import":"Ansicht aus Datei importieren","viewSetManager.importConfirm.title":"Aktuelle Ansicht \xfcberschreiben","viewSetManager.importConfirm.message":"Das Importieren einer Ansicht aus einer Datei \xfcberschreibt die aktuelle Ansicht. Wollen Sie das wirklich?","viewSetManager.deleteConfirm.message":"Wollen Sie das Viewset {viewsetName} wirklich entfernen?","viewSetManager.deleteIconTooltip":"Viewset l\xf6schen","shortcutView.title":"Shortcuts","shortcutView.fullscreenTitle":"Vollbild","shortcutView.fullscreenDescription":"Dr\xfccken Sie in einer aktiven View STRG-F","shortcutView.helpTitle":"Hilfe","shortcutView.helpDescription":"Dr\xfccken Sie in einer aktiven View F1","notifications.modeSwitch.userSwitchedModeTo":"Benutzer hat Mode ge\xe4ndert zu:","notifications.websocket.connectionEstablished":"Websocket-Verbindung ge\xf6ffnet auf Port:","notifications.websocket.connectionLost":"Websocket-Verbindung verloren","notifications.userSwitchedLanguage":"Benutzer hat Sprache ge\xe4ndert zu:","notifications.rejectStreamPaused":"Reject stream wurde angehalten","notifications.rejectStreamResumed":"Reject stream wurde fortgesetzt","notifications.checkSvimOutput":"Bitte Ausgabe am SVIM \xfcberpr\xfcfen","notifications.incompatibilityWarning":"Ausgew\xe4hlte Konfiguration ist m\xf6glicherweise nicht mit der aktuellen WebApp version kompatibel","notifications.errorOccurred":"Ein Fehler ist aufgetreten","notifications.error.loadingFile":"Daten aus der Datei konnten nicht geladen werden.","notifications.successfulAction":"Erfolgreiche Aktion","notifications.successfullyLoadedFile":"Ansicht konnte erfolgreich aus der Datei geladen werden.","notifications.viewsetVersionIncompatibleTitle":"Datei-Version inkompatibel","notifications.viewsetVersionIncompatibleMessage":"Die Datei-Version ist inkompatibel. Die Ansicht kann nicht geladen werden.","notifications.minorVersionDiffTitle":"Unterversion weicht ab","notifications.minorVersionDiffMessage":"Aufgrund unterschiedlicher Unterversionen zwischen Applikation und Datei kann es zu inkorrekter Darstellung der Ansicht kommen.","notifications.variableValueShouldBeInTheRange":"Der Wert der eingegebenen Variable {variableName} muss im Bereich von {range} liegen.","notifications.configAlreadyLockedBySameUser":"You have already locked the configuration! (Translate)","notifications.takeoverCandidateNotFound":"Could not find takeover candidate! You still own the config lock. (Translate)","notifications.lockTakeoverError":"Error while perfroming config lock takeover! Error code: {code} (Translate)","notifications.lockAcquisitionError":"Error while requesting config lock! Error code : {code} (Translate)","listView.save":"Speichern","svoView.emptyViewInspectionTemplate":"{inspectionName}","svoView.closeView":"View schlie\xdfen","svoView.closeViewConfirmation":"Wollen Sie die View wirklich schlie\xdfen?",cancel:"Abbrechen",submit:"Submit (translate)",close:"Close (translate)",accept:"Akzeptieren",reject:"Ablehnen",milliseconds:"milliseconds (translate)",noConfigName:"[Keine Konfiguration]",unknownConfigName:"[Unbekannte Konfiguration]",noConfigLoaded:"Keine Konfiguration geladen im SVObserver",up:"Vorheriges",down:"N\xe4chstes",copy:"Kopieren",cut:"Ausschneiden",paste:"Einf\xfcgen",save:"Speichern",delete:"L\xf6schen",undo:"R\xfcckg\xe4ngig",expandAll:"Alles ausklappen",collapseAll:"Alles einklappen","permissions.backToWebApp":"Zur\xfcck zur WebApp","permissions.helpText":"Sie k\xf6nnen die aufgelisteten Rechte f\xfcr die jeweilige Gruppe (Spalte) anpassen. Rechte der Gruppe Common werden allen anderen Gruppen zugeordnet. Die Rechte haben m\xf6glicherweise Auswirkungen auf die WebApp und/oder den SVObserver.","permissions.permissions":"Rechte","permissions.permissionManagement":"Rechte-Verwaltung","permissions.description":"Beschreibung","permissionDescription.webapp.configuration.save":"Nutzer kann aktuelle Konfiguration mit allen View Sets speichern","permissionDescription.webapp.logs.read":"Nutzer kann Logs sehen in der oberen Navigationsleiste","permissionDescription.webapp.viewset.add":"Nutzer kann View Sets hinzuf\xfcgen","permissionDescription.webapp.viewset.read":"Nutzer kann View Sets sehen(Wechseln zwischen View Sets, ViewSet Manager \xf6ffnen)","permissionDescription.webapp.viewset.edit":"Nutzer kann View Sets sehen und editieren(Gr\xf6\xdfe der Views ver\xe4ndern, neue Views hinzuf\xfcgen, Wechseln zwischen View Sets, ViewSet Manager \xf6ffnen, View Set umbenennen)","permissionDescription.webapp.viewset.remove":"Nutzer kann ein View Set entfernen","permissionDescription.webapp.view[type=AnyView].add":"Nutzer kann Views eines BELIEBIGEN Typs hinzuf\xfcgen","permissionDescription.webapp.view[type=AnyView].read":"Nutzer kann Views eines BELIEBIGEN Typs sehen","permissionDescription.webapp.view[type=AnyView].edit":"Nutzer kann Views eines BELIEBIGEN Typs sehen und editieren","permissionDescription.webapp.view[type=AnyView].remove":"Nutzer kann Views eines BELIEBIGEN Typs entfernen","permissionDescription.webapp.view[type=ImageView].add":"Nutzer kann Views des Typs IMAGE hinzuf\xfcgen","permissionDescription.webapp.view[type=ImageView].read":"Nutzer kann Views des Typs IMAGE sehen(auch Bilder herunterladen, Liste eigener Overlays sehen, Bildinfos sehen)","permissionDescription.webapp.view[type=ImageView].edit":"Nutzer kann Views des Typs IMAGE sehen und editieren(Auswahl von Inspektion und Tool, \xc4ndern der Bildgr\xf6\xdfe, Bilder herunterladen, Liste eigener Overlays sehen, Bildinfos sehen)","permissionDescription.webapp.view[type=ImageView].remove":"Nutzer kann Views des Typs IMAGE entfernen","permissionDescription.webapp.view[type=ListView].add":"Nutzer kann Views des Typs LIST hinzuf\xfcgen","permissionDescription.webapp.view[type=ListView].read":"Nutzer kann Views des Typs LIST sehen","permissionDescription.webapp.view[type=ListView].edit":"Nutzer kann Views des Typs LIST sehen und editieren(Auswahl von Inspektion und Tool, Editieren von Aliasen)","permissionDescription.webapp.view[type=ListView].remove":"Nutzer kann Views des Typs LIST entfernen","permissionDescription.webapp.view[type=ImageStripView].add":"Nutzer kann Views des Typs IMAGE STRIP hinzuf\xfcgen","permissionDescription.webapp.view[type=ImageStripView].read":"Nutzer kann Views des Typs IMAGE STRIP sehen","permissionDescription.webapp.view[type=ImageStripView].edit":"Nutzer kann Views des Typs IMAGE STRIP sehen und editieren(Auswahl von Inspektion und Tool)","permissionDescription.webapp.view[type=ImageStripView].remove":"Nutzer kann Views des Typs IMAGE STRIP entfernen","permissionDescription.webapp.view[type=ParameterView].add":"Nutzer kann Views des Typs PARAMETER hinzuf\xfcgen","permissionDescription.webapp.view[type=ParameterView].read":"Nutzer kann Views des Typs PARAMETER sehen","permissionDescription.webapp.view[type=ParameterView].edit":"Nutzer kann Views des Typs PARAMETER sehen und editieren(Hinzuf\xfcgen / editieren / entfernen von eigenen Overlays)","permissionDescription.webapp.view[type=ParameterView].remove":"Nutzer kann Views des Typs PARAMETER entfernen","permissionDescription.webapp.view[type=ToolSetView].add":"Nutzer kann Views des Typs TOOLSET hinzuf\xfcgen","permissionDescription.webapp.view[type=ToolSetView].read":"Nutzer kann Views des Typs TOOLSET sehen","permissionDescription.webapp.view[type=ToolSetView].edit":"Nutzer kann Views des Typs TOOLSET sehen und editieren","permissionDescription.webapp.view[type=ToolSetView].remove":"Nutzer kann Views des Typs TOOLSET entfernen","permissionDescription.svobserver.mode.read":"Nutzer kann den aktuellen Mode vom SVObserver in der oberen Navigationsleiste sehen","permissionDescription.svobserver.mode.edit":"Nutzer kann den aktuellen Mode vom SVObserver in der oberen Navigationsleiste sehen und \xe4ndern","permissionDescription.svobserver.inspectionstate.read":"Nutzer kann den Status aller Inspektionen in der oberen Navigationsleiste sehen","permissionDescription.svobserver.inspectionstate.edit":"Nutzer kann den Status aller Inspektionen in der oberen Navigationsleiste sehen / \xe4ndern und den Status im IMAGE STRIP View wechseln","permissionDescription.svobserver.value.read":"SVObserver pr\xfcft, ob Nutzer Werte sehen darf","permissionDescription.svobserver.value.edit":"SVObserver pr\xfcft, ob Nutzer Werte editieren darf","permissionDescription.svobserver.tool.add":"SVObserver pr\xfcft, ob Nutzer neue Tool hinzuf\xfcgen darf","permissionDescription.svobserver.tool.read":"SVObserver pr\xfcft, ob Nutzer Tools lesen darf","permissionDescription.svobserver.tool.edit":"SVObserver pr\xfcft, ob Nutzer existierende Tools editieren darf","permissionDescription.svobserver.tool.remove":"SVObserver pr\xfcft, ob Nutzer Tools entfernen darf","permissionDescription.svobserver.configuration.read":"SVObserver pr\xfcft, ob Nutzer die SVObserver Konfiguration lesen darf","permissionDescription.svobserver.configuration.write":"SVObserver pr\xfcft, ob Nutzer die SVObserver Konfiguration speichern darf","permissionDescription.svobserver.notifications.subscribe":"SVObserver pr\xfcft, ob Nutzer SVObserver Nachrichten erhalten darf","permissionDescription.svobserver.clientlogs.store":"SVObserver pr\xfcft, ob Nutzer Client Logs an den SVObserver senden darf","permissionDescription.svobserver.file.read":"SVObserver pr\xfcft, ob Nutzer Dateien im SVIM RUN Ordner lesen darf","permissionDescription.svobserver.file.write":"SVObserver pr\xfcft, ob Nutzer Dateien im SVIM RUN Ordner schreiben darf","permissionDescription.svobserver.machinestate.set":"SVObserver pr\xfcft, ob Nutzer den Maschinenstatus setzen darf (Herunterfahren oder Neustarten des SVIMs)","permissionDescription.svobserver.command.execute":"SVObserver pr\xfcft, ob Nutzer Kommandos ausf\xfchren darf","permissionDescription.usermanagement.userpermissions.read":"Nutzer kann Gruppen-Rechte vom SVObserver laden, den Men\xfc-Eintrag zum Wechsel in die Rechte-Verwaltung sehen, alle Rechte in Rechte-Verwaltung sehen","permissionDescription.usermanagement.userpermissions.edit":"Nutzer kann Gruppen-Rechte vom SVObserver laden, den Men\xfc-Eintrag zum Wechsel in die Rechte-Verwaltung sehen, alle Rechte in Rechte-Verwaltung sehen und editieren","debugger.title":"Debugger","debugger.backToWebApp":"Zur\xfcck zur WebApp","debugger.requestsListHeader":"Request list","debugger.noParametersMessage":"This request has no parameters","debugger.noItemsMessage":"(no items)","debugger.nothingToConfigureMessage":"(nothing to configure)","debugger.addItemButtonText":"Add","debugger.sendRequest":"Send request","debugger.noFilteredResultsMessage":"No filtered results","debugger.copyToClipboard":"Copy to clipboard"},o={"topNavigation.language.german":"German","topNavigation.language.english":"English","topNavigation.lock":"Lock","topNavigation.takeover":"Takeover","topNavigation.release":"Release","topNavigation.logout":"Logout","topNavigation.help":"Help","topNavigation.about":"Info","topNavigation.shortcut":"Shortcut","topNavigation.download":"Download SVO configuration","topNavigation.upload":"Upload SVO configuration","topNavigation.inspectionState":"Inspection state ({runningInspections} of {numberOfInspections} running)","topNavigation.permissions":"Permissions","topNavigation.saveConfig":"Save config",editMode:"Edit Mode",unknownMode:"Unknown mode",runMode:"Run Mode",stopMode:"Stop Mode",regressionMode:"Regression Mode",testMode:"Test Mode","lockStateHandler.alertDialog.lockAlreadyLocked":"Configuration lock is already owned by: {user}","lockStateHandler.alertDialog.lockDescription":"Lock description: {description}","lockStateHandler.alertDialog.waitingForTakeoverResponse":"Waiting for response from: {user}","lockStateHandler.alertDialog.waitingForResponseInfo":"Current configuration lock owner has been notified of your request and has 30 seconds to respond from now on. If there is no response until then, you will automatically takeover the lock.","lockStateHandler.alertDialog.ownerRejectedTakeover":"{user} rejected the configuration lock takeover","lockStateHandler.alertDialog.takeoverAttempt":"{user} wants like to take over configuration lock","lockStateHandler.alertDialog.takeoverMessage":"Takeover message: {message}","lockStateHandler.formDialog.lockConfigRequestTitle":"Lock configuration request","lockStateHandler.formDialog.takeoverConfigRequestTitle":"Takeover configuration request","lockStateHandler.formDialog.lockConfigRequestContent":"To lock or takeover the configuration, please enter all details here. SVOGateway will send updates occasionally.","lockStateHandler.formDialog.lockScope":"Lock scope","lockStateHandler.formDialog.lockTimeout":"Lock timeout","lockStateHandler.formDialog.lockDescription":"Lock description","lockStateHandler.formDialog.takeoverRequest":"Takeover request","lockStateHandler.formDialog.takeoverMessage":"Takeover message","imageStripView.inspectionTemplate":"{inspectionName} Image Strip","imageStripView.play":"Play","imageStripView.pause":"Pause",listView:"List","listView.inspectionTemplate":"{inspectionName} List","listView.AliasEditor.title":"Set alias for dotted name","listView.Actionbar.hideAliases":"Hide aliases","listView.Actionbar.showAliases":"Show aliases","listView.AliasEditor.dottedName":"Dotted name","listView.AliasEditor.value":"Value","listView.AliasEditor.button":"Save",helpView:"Help",aboutView:"About","aboutView.applicationName":"Application name:","aboutView.applicationVersion":"Application version:","aboutView.svoVersion":"SVObserver version:","aboutView.gatewayVersion":"Gateway version:","viewTypeSelection.imageStripView":"Image Strip","viewTypeSelection.imageView":"Image","viewTypeSelection.parameterView":"Parameter","viewTypeSelection.ListView":"List","viewTypeSelection.toolset":"Tool Set","viewTypeSelection.back":"Back","viewTypeSelection.cancel":"Cancel","viewTypeSelection.chooseViewTooltip":"Choose view type","viewTypeSelection.selectViewType":"Select a type for this view:","inspectionSelection.selectInspection":"Select an inspection for this view:","parameterview.overlay.delete":"Delete","parameterview.overlay.add":"Add","parameterview.overlay.showAll":"Show all","parameterview.overlay.hideAll":"Hide all","imageView.inspectionTemplate":"{inspectionName} Image","imageView.zoomIn":"Zoom in","imageView.zoomOut":"Zoom out","imageView.fitToWidth":"Fit to width","imageView.fitToHeight":"Fit to height","imageView.saveWithOverlays":"Download image with overlays","imageView.overlayListToggle":"Overlay list","imageView.imageInfoToggle":"Image info","imageView.save":"Download image","imageView.showOverlays":"Show overlays","imageView.hideOverlays":"Hide overlays","imageView.info":"Info","imageView.width":"Width:","imageView.height":"Height:","imageView.x":"X:","imageView.y":"Y:",parameterView:"Parameter","parameterView.inspectionTemplate":"{inspectionName} Parameter","toolsetView.inspectionTemplate":"{inspectionName} Tool Set","toolsetView.confirmDelete":"Do you really want to delete {toolName}? This cannot be undone.","aboutView.title":"About ",viewSetManager:"View Set Manager","viewSetManager.title":"View Set Manager","viewSetManager.viewSetName":"Name","viewSetManager.remove":"Remove","viewSetManager.save":"Save all view sets","viewSetManager.close":"Close","viewSetManager.editViewSetHeadline":"Edit view sets:","viewSetManager.newViewSet":"Create new view set","viewSetManager.editViewSetName":"Edit view set name","viewSetManager.changeViewSetName":"Change view set name","viewSetManager.apply":"Apply changes","viewSetManager.export":"Export current view layout","viewSetManager.import":"Import a view layout from file","viewSetManager.importConfirm.title":"Overwriting view set","viewSetManager.importConfirm.message":"Importing a view set from file will overwrite your existing viewset. Do you want to continue?","viewSetManager.deleteConfirm.message":"Do you really want to delete view set {viewsetName}?","viewSetManager.deleteIconTooltip":"Delete view set","shortcutView.title":"Shortcuts","shortcutView.fullscreenTitle":"Full screen","shortcutView.fullscreenDescription":"Focus a view and press CTRL-F","shortcutView.helpTitle":"Help","shortcutView.helpDescription":"Focus a view and press F1","notifications.modeSwitch.userSwitchedModeTo":"User switched mode to:","notifications.websocket.connectionEstablished":"Websocket connection established on port:","notifications.websocket.connectionLost":"Websocket connection lost","notifications.userSwitchedLanguage":"User switched language to: ","notifications.rejectStreamPaused":"Reject stream was paused","notifications.rejectStreamResumed":"Reject stream was resumed","notifications.checkSvimOutput":"Please check output on SVIM","notifications.incompatibilityWarning":"Selected config might not be compatible with the current WebApp","notifications.errorOccurred":"An error occurred","notifications.error.loadingFile":"Could not load data from file.","notifications.successfulAction":"Successful action","notifications.successfullyLoadedFile":"Successfully loaded viewset from file.","notifications.viewsetVersionIncompatibleTitle":"File version incompatible","notifications.viewsetVersionIncompatibleMessage":"The file version is incompatible. Can not load viewset.","notifications.minorVersionDiffTitle":"Minor version differs","notifications.minorVersionDiffMessage":"Minor version differs between application and file. The presentation of the viewset might be incorrect.","notifications.variableValueShouldBeInTheRange":"Value of the variable {variableName} should be in the range of {range}.","notifications.configAlreadyLockedBySameUser":"You have already locked the configuration!","notifications.takeoverCandidateNotFound":"Could not find takeover candidate! You still own the config lock.","notifications.lockTakeoverError":"Error while perfroming config lock takeover! Error code: {code}","notifications.lockAcquisitionError":"Error while requesting config lock! Error code : {code}","listView.save":"Save","svoView.emptyViewInspectionTemplate":"{inspectionName}","svoView.closeView":"Close view","svoView.closeViewConfirmation":"Do you really want to close this view?",cancel:"Cancel",submit:"Submit",close:"Close",accept:"Accept",reject:"Reject",milliseconds:"milliseconds",noConfigName:"[No configuration]",unknownConfigName:"[Unknown configuration]",noConfigLoaded:"No configuration loaded in SVObserver",up:"Up",down:"Down",save:"Save",copy:"Copy",cut:"Cut",paste:"Paste",delete:"Delete",undo:"Undo",expandAll:"Expand all",collapseAll:"Collapse all","permissions.backToWebApp":"Back to WebApp","permissions.helpText":"You can change the listed permissions for each group (column). Common permissions are applied to all other groups. Permissions may have effect on the WebApp and/or the SVObserver.","permissions.permissions":"Permissions","permissions.permissionManagement":"Permission Management","permissions.description":"Description","permissionDescription.webapp.configuration.save":"User can save the current configuration with all view sets","permissionDescription.webapp.logs.read":"User can see logs in top navigation bar","permissionDescription.webapp.viewset.add":"User can add new view sets","permissionDescription.webapp.viewset.read":"User can see view sets (switch between view sets, open View Set Manager)","permissionDescription.webapp.viewset.edit":"User can see and edit view sets (change size of views, add new views to view set, switch between view sets, open View Set Manager, rename view sets)","permissionDescription.webapp.viewset.remove":"User can remove a view set","permissionDescription.webapp.view[type=AnyView].add":"User can add views of any type","permissionDescription.webapp.view[type=AnyView].read":"User can see views of any type","permissionDescription.webapp.view[type=AnyView].edit":"User can see and edit views of any type","permissionDescription.webapp.view[type=AnyView].remove":"User can remove views of any type","permissionDescription.webapp.view[type=ImageView].add":"User can add views of type Image","permissionDescription.webapp.view[type=ImageView].read":"User can see views of type Image (also download image, see custom overlay list, see image info)","permissionDescription.webapp.view[type=ImageView].edit":"User can see and edit views of type Image (choose inspection and tool, change size of image, download image, see custom overlay list, see image info)","permissionDescription.webapp.view[type=ImageView].remove":"User can remove views of type Image","permissionDescription.webapp.view[type=ListView].add":"User can add views of type List","permissionDescription.webapp.view[type=ListView].read":"User can see views of type List","permissionDescription.webapp.view[type=ListView].edit":"User can see and edit views of type List (choose inspection and tool, edit aliases)","permissionDescription.webapp.view[type=ListView].remove":"User can remove views of type List","permissionDescription.webapp.view[type=ImageStripView].add":"User can add views of type Image Strip","permissionDescription.webapp.view[type=ImageStripView].read":"User can see views of type Image Strip","permissionDescription.webapp.view[type=ImageStripView].edit":"User can see and edit views of type Image Strip (choose inspection and tool)","permissionDescription.webapp.view[type=ImageStripView].remove":"User can remove views of type Image Strip","permissionDescription.webapp.view[type=ParameterView].add":"User can add views of type Parameter","permissionDescription.webapp.view[type=ParameterView].read":"User can see views of type Parameter","permissionDescription.webapp.view[type=ParameterView].edit":"User can see and edit views of type Parameter (add/edit/delete custom overlays)","permissionDescription.webapp.view[type=ParameterView].remove":"User can remove views of type Parameter","permissionDescription.webapp.view[type=ToolSetView].add":"User can add views of type Tool Set","permissionDescription.webapp.view[type=ToolSetView].read":"User can see views of type Tool Set","permissionDescription.webapp.view[type=ToolSetView].edit":"User can see and edit views of type Tool Set","permissionDescription.webapp.view[type=ToolSetView].remove":"User can remove views of type Tool Set","permissionDescription.svobserver.mode.read":"User can see the current mode of SVObserver in top navigation bar","permissionDescription.svobserver.mode.edit":"User can see and change the current mode of SVObserver in top navigation bar","permissionDescription.svobserver.inspectionstate.read":"User can see the inspection state of all inspections in the top navigation bar","permissionDescription.svobserver.inspectionstate.edit":"User can see and change the inspection state of all inspections in the top navigation bar and toggle the state in Image Strip View","permissionDescription.svobserver.value.read":"SVObserver checks if user is allowed to see values","permissionDescription.svobserver.value.edit":"SVObserver checks if user is allowed to edit values","permissionDescription.svobserver.tool.add":"SVObserver checks if user is allowed to add new tools","permissionDescription.svobserver.tool.read":"SVObserver checks if user is allowed to read tools","permissionDescription.svobserver.tool.edit":"SVObserver checks if user is allowed to edit existing tools","permissionDescription.svobserver.tool.remove":"SVObserver checks if user is allowed to remove tools","permissionDescription.svobserver.configuration.read":"SVObserver checks if user is allowed to read the SVObserver configuration","permissionDescription.svobserver.configuration.write":"SVObserver checks if user is allowed to save the SVObserver configuration","permissionDescription.svobserver.notifications.subscribe":"SVObserver checks if user is allowed to subscribe to SVObserver notifications","permissionDescription.svobserver.clientlogs.store":"SVObserver checks if user is allowed to send client logs to the SVObserver","permissionDescription.svobserver.file.read":"SVObserver checks if user is allowed to read arbitrary files in SVIM RUN folder","permissionDescription.svobserver.file.write":"SVObserver checks if user is allowed to write arbitrary files in SVIM RUN folder","permissionDescription.svobserver.machinestate.set":"SVObserver checks if user is allowed to set the machine state (shutdown or restart of SVIM)","permissionDescription.svobserver.command.execute":"SVObserver checks if user is allowed to execute commands","permissionDescription.usermanagement.userpermissions.read":"User can load group permissions from backend/can see menu entry to switch to permission management page/can see all permissions in permission management","permissionDescription.usermanagement.userpermissions.edit":"User can load group permissions from backend/can see menu entry to switch to permission management page/can see all permissions in permission management/can edit permissions","debugger.title":"Debugger","debugger.backToWebApp":"Back to WebApp","debugger.requestsListHeader":"Request list","debugger.noParametersMessage":"This request has no parameters","debugger.noItemsMessage":"(no items)","debugger.nothingToConfigureMessage":"(nothing to configure)","debugger.addItemButtonText":"Add","debugger.sendRequest":"Send request","debugger.noFilteredResultsMessage":"No filtered results","debugger.copyToClipboard":"Copy to clipboard","toolsetView.windowTool":"Window Tool","toolsetView.mathTool":"Math Tool","toolsetView.statisticsTool":"Statistics Tool","toolsetView.ringBufferTool":"Ring Buffer Tool","toolsetView.archiveTool":"Archive Tool","toolsetView.acquisitionTool":"Acquisition Tool","toolsetView.transformationTool":"Transformation Tool","toolsetView.shiftTool":"Shift Tool","toolsetView.cylindricalWarpTool":"Cylindrical Warp Tool","toolsetView.perspectiveTool":"Perspective Tool","toolsetView.imageTool":"Image Tool","toolsetView.linearTool":"Linear Tool","toolsetView.colorTool":"Color Tool","toolsetView.resizeTool":"Resize Tool","toolsetView.loadImageTool":"Load Image Tool","toolsetView.tableTool":"Table Tool","toolsetView.tableAnalyzerTool":"Table Analyzer Tool","toolsetView.polarTransformationTool":"Polar Transformation Tool","toolsetView.loopTool":"Loop Tool","toolsetView.externalTool":"External Tool","toolsetView.groupTool":"Group Tool"},s=n(1),c={de:Object(i.a)({},a),en:Object(i.a)({},o)},u=[{locale:"de",name:Object(s.jsx)(r.a,{id:"topNavigation.language.german"})},{locale:"en",name:Object(s.jsx)(r.a,{id:"topNavigation.language.english"})}];t.a=c},823:function(e,t,n){},824:function(e,t,n){},825:function(e,t,n){},826:function(e,t,n){},827:function(e,t,n){},828:function(e,t,n){},833:function(e,t,n){},834:function(e,t,n){},835:function(e,t,n){},836:function(e,t,n){},837:function(e,t,n){},838:function(e,t,n){},839:function(e,t,n){},840:function(e,t,n){},841:function(e,t,n){},847:function(e,t,n){},848:function(e,t,n){},849:function(e,t,n){},850:function(e,t,n){},851:function(e,t,n){},852:function(e,t,n){},853:function(e,t,n){},854:function(e,t,n){},855:function(e,t,n){},885:function(e,t,n){},886:function(e,t,n){},887:function(e,t,n){},888:function(e,t,n){},889:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(934),o=n(27),s=n.n(o),c=(n(332),n(12)),u=n(20),l=n(5),d=n.n(l),p=n(15),f=n(470),v=n(83),h=n(3),b=n(112),m=n(35),g=n(942),j=n(9),w=n(476),O=n(178),y=n(79),S=n(7),k=n(33),I=n(113),x=(n(552),n(932)),C=n(933),V=n(144),T=n(214),N=n(1),E=function(e){var t=e.value,n=e.options,r=e.labels,a=e.changeCallback,o=e.removeCallback;Object(i.useEffect)((function(){"undefined"===typeof t&&a&&a(n[0])}));var s=[];return r?(n.forEach((function(e,t){return s.push({option:e,label:r[t]})})),s=s.sort((function(e,t){return e.label.localeCompare(t.label)})),n=s.map((function(e){return e.option})),r=s.map((function(e){return e.label}))):n=n.sort(),Object(N.jsx)(T.a,{selectedValue:t,values:n,labels:r,onSelectionChanged:function(e){a&&a(e.param)},id:"param",InputProps:o?{endAdornment:Object(N.jsx)(x.a,{position:"end",children:Object(N.jsx)(C.a,{edge:"end","aria-label":"remove",onClick:function(){return o()},title:"Remove",children:Object(N.jsx)("img",{src:V.a,alt:"x"})})})}:null})},P=function(e){for(var t=e.value,n=e.changeCallback,i=e.typeName,r=e.defaultValue,a=e.options,o=e.labels,s=e.SingleParameterComponent,c=t&&t.length||0,u=[],l=function(e){u.push(Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsxs)("div",{className:"field-name-type",children:[e,Object(N.jsx)("small",{children:i})]}),Object(N.jsx)("div",{className:"field-settings",children:Object(N.jsx)(s,{value:t[e],changeCallback:function(i){var r=Object(k.a)(t||[]);r[e]=i,n(r)},options:a,labels:o,removeCallback:function(){return function(e){var i=Object(k.a)(t);i.splice(e,1),n(i)}(e)}})})]},"".concat(i,"_array_").concat(e)))},d=0;d<c;d++)l(d);return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"field-container is-array",children:u.length?u:Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsx)("div",{className:"field-name-type",children:Object(N.jsx)("em",{children:Object(N.jsx)(O.a,{id:"debugger.noItemsMessage"})})}),Object(N.jsx)("div",{className:"field-settings"})]})}),Object(N.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){n([].concat(Object(k.a)(t||[]),[r]))},children:Object(N.jsx)(O.a,{id:"debugger.addItemButtonText"})})]})},A=function(e){var t=e.value,n=e.changeCallback;return Object(N.jsx)(E,{value:t&&"false"!==t?"true":"false",options:["true","false"],changeCallback:function(e){return n("true"===e)}})},M=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(N.jsx)(P,{value:t,changeCallback:n,typeName:i,defaultValue:!1,SingleParameterComponent:A})},D=n(946),L=function(e){var t=e.value,n=e.changeCallback;return Object(N.jsx)(D.a,{fullWidth:!0,type:"file",variant:"outlined",value:t||"",onChange:function(e){return n&&n(e.target.value)}})},R=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback,r=e.fieldType,a=e.defaultValue;return Object(N.jsx)(D.a,{fullWidth:!0,type:r,variant:"outlined",value:t||a,onChange:function(e){return n&&n(e.target.value)},InputProps:i?{endAdornment:Object(N.jsx)(x.a,{position:"end",children:Object(N.jsx)(C.a,{edge:"end","aria-label":"remove",onClick:function(){return i()},title:"Remove",children:Object(N.jsx)("img",{src:V.a,alt:"x"})})})}:null})},_=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback;return Object(N.jsx)(R,{value:t,changeCallback:n,removeCallback:i,fieldType:"number",defaultValue:0})},F=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(N.jsx)(P,{value:t,changeCallback:n,typeName:i,defaultValue:0,SingleParameterComponent:_})},U=function(e){var t=e.value,n=e.options,i=e.changeCallback;return Object(N.jsx)(P,{value:(t||[]).map((function(e){return String(e)})),changeCallback:i,options:Object.values(n),labels:Object.keys(n),SingleParameterComponent:E})},H=function(e){var t=e.value,n=e.options,i=e.changeCallback;return Object(N.jsx)(E,{value:String(t),options:Object.values(n),labels:Object.keys(n),changeCallback:function(e){return i(e)}})},W=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback;return Object(N.jsx)(R,{value:t,changeCallback:n,removeCallback:i,fieldType:"number",defaultValue:0})},z=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(N.jsx)(P,{value:t,changeCallback:n,typeName:i,defaultValue:0,SingleParameterComponent:W})},q=function(e){var t=e.value,n=e.changeCallback,i=e.removeCallback,r=e.typeName;return Object(N.jsx)(R,{value:t,typeName:r,changeCallback:n,removeCallback:i,fieldType:"text",defaultValue:""})},B=function(e){var t=e.value,n=e.changeCallback,i=e.typeName;return Object(N.jsx)(P,{value:t,changeCallback:n,typeName:i,defaultValue:"",SingleParameterComponent:q})},G=function(e){var t=e.name,n=e.onResponse,r=Object(p.e)((function(e){return e.app.protobuf})),a=Object(i.useState)({}),o=Object(u.a)(a,2),s=o[0],l=o[1],f=Object(i.useState)({}),v=Object(u.a)(f,2),b=v[0],m=v[1],g=Object(i.useState)(""),y=Object(u.a)(g,2),x=y[0],C=y[1];if(Object(i.useEffect)((function(){x!==t&&(l({}),m({}),C(t))}),[t,x]),!S.a.SvPb[t])return Object(N.jsx)("div",{});var V=function(){var e=Object(c.a)(d.a.mark((function e(){var i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(""),"MyDummyRequest"!==t){e.next=4;break}return n(s),e.abrupt("return");case 4:return i=S.a.SvPb[t].create(s),console.dir(s),e.prev=6,e.next=9,r.request(i);case 9:a=e.sent,n(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),n("An error occured: ".concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),T=function(e,t,n){var i,r,a=(i=s,(r=n?"".concat(n,".").concat(e.name):e.name)?Object(I.get)(i,r):i);switch(e.type){case"string":return t?function(e,t,n){return Object(N.jsx)(B,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,n)}})}(e,n,a):function(e,t,n){return Object(N.jsx)(q,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,n)}},"txt_".concat(e.name))}(e,n,a);case"bool":return t?function(e,t,n){return Object(N.jsx)(M,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,n)}})}(e,n,a):function(e,t,n){return Object(N.jsx)(A,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,n)}},"bool_".concat(e.name))}(e,n,a);case"int32":case"int64":case"uint32":case"uint64":case"sint32":case"sint64":case"fixed32":case"fixed64":case"sfixed32":case"sfixed64":return t?function(e,t,n){return Object(N.jsx)(z,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,Number(n))}})}(e,n,a):function(e,t,n){return Object(N.jsx)(W,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,Number(n))}},"integer_".concat(e.name))}(e,n,a);case"double":case"float":return t?function(e,t,n){return Object(N.jsx)(F,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,Number(n))}})}(e,n,a):function(e,t,n){return Object(N.jsx)(_,{typeName:e.type,value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,Number(n))}},"decimal_".concat(e.name))}(e,n,a);case"bytes":return function(e,t,n){return Object(N.jsx)(L,{value:n,changeCallback:function(n){return P(t?"".concat(t,".").concat(e.name):e.name,n)}},"bytes_".concat(e.name))}(e,n,a);default:var o=S.a.SvPb.lookup(e.type);if(o&&"Enum"===o.constructor.name)return t?function(e,t,n,i){return Object(N.jsx)(U,{value:i,options:e.values,changeCallback:function(e){P(n?"".concat(n,".").concat(t.name):t.name,e)}})}(o,e,n,a):function(e,t,n,i){return Object(N.jsx)(H,{value:i,options:e.values,changeCallback:function(e){P(n?"".concat(n,".").concat(t.name):t.name,e)}})}(o,e,n,a);var c=n?"".concat(n,".").concat(e.name):e.name;return t?R(o,c,a):D(o,c,a)}},P=function(e,t){var n=Object(I.cloneDeep)(s);Object(I.set)(n,e,t),l(n)},D=function(e,t){var n=[],i=null!==e&&void 0!==e&&e.fields?Object.keys(e.fields):[];return e.oneofs&&Object.keys(e.oneofs).forEach((function(i){n.push(Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsxs)("div",{className:"field-name-type",children:[i,Object(N.jsx)("small",{children:"oneof type"})]}),Object(N.jsx)("div",{className:"field-settings",children:Object(N.jsx)(E,{value:b["".concat(t,".").concat(i)],options:e.oneofs[i].oneof,changeCallback:function(e){m(Object(h.a)(Object(h.a)({},b),{},Object(j.a)({},"".concat(t,".").concat(i),e)))}})})]},"div_".concat(i)))})),i.forEach((function(i){var r=e.fields[i];r&&(r.partOf&&r.name!==b["".concat(t,".").concat(r.partOf.name)]||n.push(Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsxs)("div",{className:"field-name-type",children:[r.name,Object(N.jsxs)("small",{children:[r.rule," ",r.type,r.required?"*":""]})]}),Object(N.jsx)("div",{className:"field-settings",children:T(r,"repeated"===r.rule,t)})]},"div_".concat(r.name))))})),!i.length&&t.length&&n.push(Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsx)("div",{className:"field-name-type",children:Object(N.jsx)("em",{children:Object(N.jsx)(O.a,{id:"debugger.nothingToConfigureMessage"})})}),Object(N.jsx)("div",{className:"field-settings"})]},"div_type.name")),n},R=function(e,t,n){var i=[];return(n||[]).forEach((function(r,a){i.push(Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsxs)("div",{className:"field-name-type",children:[a,Object(N.jsx)("small",{children:e.name})]}),Object(N.jsx)("div",{className:"field-settings",children:D(e,t?"".concat(t,".").concat(a):a,n[a])})]},"".concat(e.name,"_array_").concat(a)))})),Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"field-container is-array",children:i.length?i:Object(N.jsxs)("div",{className:"field-container",children:[Object(N.jsx)("div",{className:"field-name-type",children:Object(N.jsx)("em",{children:Object(N.jsx)(O.a,{id:"debugger.noItemsMessage"})})}),Object(N.jsx)("div",{className:"field-settings"})]})}),Object(N.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){return function(e,t){var n=t?Object(k.a)(t):[];n.push({}),P(e,n)}(t,n)},children:"Add"})]})},G=D(S.a.SvPb[t],"");return Object(N.jsxs)("div",{className:"request-parameters-container",children:[Object(N.jsxs)("div",{className:"request-name-type",children:[t,Object(N.jsx)("small",{children:"Request"})]}),Object(N.jsx)("div",{className:"request-parameters-fields-container",children:G&&G.length?G:Object(N.jsx)(O.a,{id:"debugger.noParametersMessage"})}),Object(N.jsx)(w.a,{className:"send-button",variant:"contained",color:"primary",onClick:function(){return V()},children:Object(N.jsx)(O.a,{id:"debugger.sendRequest"})})]})},K=n(223),Y=(n(554),function(e){var t=e.response,n=Object(i.useState)(""),r=Object(u.a)(n,2),a=r[0],o=r[1],s=Object(i.useState)(""),l=Object(u.a)(s,2),p=l[0],f=l[1];Object(i.useEffect)((function(){if(t&&t.imageData){var e=new K.a({history:null,trigger:null,isReject:!1});o(e.buildUrl(t.imageData))}else o("")}),[t]),Object(i.useEffect)((function(){if(t&&t.fileData){var e=new Blob(t.fileData,{type:"octet/stream"});f(window.URL.createObjectURL(e))}else f("")}),[t]);var v=function(){var e=Object(c.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.clipboard){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.clipboard.writeText(h);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=t?JSON.stringify(t,null,2):"";return Object(N.jsxs)("div",{className:"response-body-container",children:[Object(N.jsxs)("div",{className:"response-body-header",children:[Object(N.jsxs)("div",{className:"response-name-type",children:[t?t.constructor.name:"Response",Object(N.jsx)("small",{children:"Response"})]}),Object(N.jsx)("div",{children:Object(N.jsx)(w.a,{variant:"contained",color:"primary",onClick:v,disabled:!h,children:Object(N.jsx)(O.a,{id:"debugger.copyToClipboard"})})})]}),Object(N.jsxs)("div",{className:"response-content",children:[a?Object(N.jsx)("img",{src:a,alt:""}):void 0,p?Object(N.jsx)("a",{href:p,children:"Download"}):void 0,Object(N.jsx)("pre",{className:"response-formatter",children:h})]})]})}),X=(n(555),function(e){var t=e.proto,n=e.chooseCallback,r=Object(i.useState)(""),a=Object(u.a)(r,2),o=a[0],s=a[1],c=Object(i.useState)(null),l=Object(u.a)(c,2),d=l[0],p=l[1],f=Object.keys(t).sort().reduce((function(e,t){return t.toLowerCase().includes(o)?[].concat(Object(k.a)(e),[Object(N.jsx)("li",{requestname:t,className:d===t?"active":"",onClick:function(){n(t),p(t)},children:t},"li_".concat(t))]):e}),[]);return Object(i.useEffect)((function(){d||(n(f[0].props.requestname),p(f[0].props.requestname))}),[d,n,f]),Object(N.jsxs)("div",{className:"requests-list",children:[Object(N.jsxs)("div",{className:"request-list-header",children:[Object(N.jsx)(O.a,{id:"debugger.requestsListHeader"}),Object(N.jsx)("small",{children:"Choose one from the list below"})]}),Object(N.jsx)("div",{className:"requests-filter",children:Object(N.jsx)(D.a,{fullWidth:!0,type:"text",variant:"outlined",value:o,onChange:function(e){return s(e.target.value.toLowerCase())},placeholder:"Search..."})}),Object(N.jsx)("div",{className:"requests",children:Object(N.jsx)("ul",{children:f})})]})}),J=(n(556),function(){var e=Object(i.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),o=Object(u.a)(a,2),s=o[0],c=o[1],l=Object.keys(S.a.SvPb).sort().reduce((function(e,t){return t.endsWith("Request")?t.endsWith("StreamRequest")||S.a.SvPb[t].filename.includes("InspectionCommands")&&"InspectionCmdRequest"!==t||S.a.SvPb[t].filename.includes("ConfigCommands")&&"ConfigCommandRequest"!==t?e:Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},t,S.a.SvPb[t])):e}),{});return Object(N.jsxs)("div",{className:"debugger-wrapper",children:[Object(N.jsx)("div",{className:"debugger-header",children:Object(N.jsxs)(w.a,{component:b.b,variant:"contained",color:"primary",to:"/app",children:[Object(N.jsx)("img",{src:y.a,alt:"back",className:"image-item"}),Object(N.jsx)(O.a,{id:"debugger.backToWebApp"})]})}),Object(N.jsx)("div",{className:"request-list-container",children:Object(N.jsx)(X,{proto:l,chooseCallback:function(e){r(e),c(null)}})}),Object(N.jsx)("div",{className:"request-container",children:Object(N.jsx)(G,{name:n,onResponse:function(e){return c(e)}})}),Object(N.jsx)("div",{className:"response-container",children:Object(N.jsx)(Y,{response:s})})]})}),Z=n(80),$=function(){var e=Object(p.e)((function(e){return e.app})).locale;return Object(N.jsx)(g.a,{locale:e,messages:Z.a[e],children:Object(N.jsx)(J,{})})},Q=n(11),ee=n(10),te=n(19),ne=n(21),ie=n(8),re=n(6),ae=function(e){var t={};try{e.substr(1).split("&").forEach((function(e){var n=e.split("="),i=n[0],r=n[1]&&decodeURIComponent(n[1]);t[i]=r}))}catch(n){re.a.error(n)}return t},oe=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).state={authenticated:!1,queryParams:ae(i.props.location.search)},i}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setTopNavHidden("true"===this.state.queryParams.hideTopNavigation),this.props.setBottomNavHidden("true"===this.state.queryParams.hideBottomNavigation),this.props.setLocale(this.state.queryParams.locale||"en"),this.props.setDefaultViewSetName(this.state.queryParams.viewSet||null),this.state.queryParams.token&&this.props.authenticate(this.state.queryParams.token).then((function(){return e.setState({authenticated:!0})})).catch((function(t){return e.setState({authError:t})}))}},{key:"render",value:function(){return this.state.queryParams.token?this.state.authError?Object(N.jsxs)("div",{children:["Invalid token provided. Error: ",null===(e=this.state.authError.response)||void 0===e?void 0:e.status," Status:"," ",null===(t=this.state.authError.response)||void 0===t?void 0:t.statusText]}):this.state.authenticated?Object(N.jsx)(m.a,{to:{pathname:"/app",state:{viewSetTemplate:this.state.queryParams.viewSet}}}):Object(N.jsx)("div",{children:"Fetching auth token for provided access token"}):Object(N.jsx)("div",{children:"Malformed query params"});var e,t}}]),n}(i.Component),se=Object(p.c)(null,(function(e){return{setLocale:function(t){return e(Object(ie.S)(t))},authenticate:function(t){return e(Object(ie.p)(t))},setTopNavHidden:function(t){return e(Object(ie.bb)(t))},setBottomNavHidden:function(t){return e(Object(ie.H)(t))},setDefaultViewSetName:function(t){return e(Object(ie.O)(t))}}}))(oe),ce=n(56),ue=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).state={loggedOut:!1},i}return Object(ee.a)(n,[{key:"render",value:function(){var e=this;return this.props.onLogOut().then((function(){e.setState({loggedOut:!0})})),this.state.loggedOut?(Object(ce.e)(),this.props.onLoggedOut(),Object(N.jsx)(m.a,{to:{pathname:"/",state:{loggedOut:!0}}})):null}}]),n}(i.Component),le=Object(p.c)(null,(function(e){return{onLogOut:function(){return e(Object(ie.x)())}}}))(ue),de=n(29),pe=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleKeyEvent=function(t){switch("".concat(t.ctrlKey?"ctrl+":"").concat(t.key)){case"ctrl+f":t.preventDefault(),e.props.dispatch(Object(ie.gb)(e.props.view));break;case"F1":t.preventDefault(),e.props.dispatch(Object(ie.z)());break;default:return}t.stopPropagation()},e.handleClick=function(){var t=e.props,n=t.view,i=t.editingViewIds,r=t.dispatch,a=t.helpSection;if(n)try{var o=n.props.id,s=n.props.views.viewSet[o].inspectionId,c=n.props.views.viewSet[o].viewComponentClassId;c===de.d&&(r(Object(ie.P)(s,o)),i.includes(o)||r(Object(ie.Z)(!0))),r(Object(ie.Q)(c))}catch(u){console.error(u)}else a&&r(Object(ie.Q)(a))},e}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.node.addEventListener("keydown",this.handleKeyEvent),this.node.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){this.node.removeEventListener("keydown",this.handleKeyEvent),this.node.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this,t=this.props.children;return Object(N.jsx)("div",{tabIndex:0,style:{width:"100%",height:"100%"},ref:function(t){e.node=t},children:t&&t})}}]),n}(i.Component);pe.defaultProps={children:void 0};var fe=n(114),ve=n(943),he=n(237),be=n.n(he),me=n(17),ge=(n(827),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).loadCurrentPermissions=function(e){if(e){var t=e,n=be()(t);i.setState({initiallySelectedPermissions:t,currentSelectedPermissions:n})}},i.savePermissions=function(e){var t=Object(me.J)(e);i.props.proxy.setUserPermissions(t)},i.onSaveClicked=function(){i.savePermissions(i.state.currentSelectedPermissions)},i.onResetClicked=function(){i.setState({currentSelectedPermissions:be()(i.state.initiallySelectedPermissions)})},i.allAvailablePermissions=new Set,i.state={redirect:!1,initiallySelectedPermissions:new Map,currentSelectedPermissions:new Map},i}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){S.a.SvPb.Permissions&&(this.allAvailablePermissions=Object(me.I)(S.a.SvPb.Permissions),this.loadCurrentPermissions(this.props.groupPermissions))}},{key:"componentDidUpdate",value:function(e){(void 0===e.groupPermissions&&this.props.groupPermissions||e.groupPermissions!==this.props.groupPermissions)&&this.loadCurrentPermissions(this.props.groupPermissions)}},{key:"onCheck",value:function(e,t,n){var i=be()(this.state.currentSelectedPermissions);i.has(e)||i.set(e,{groupPermissions:new Set,users:[]}),n?i.get(e).groupPermissions.add(t):i.get(e).groupPermissions.delete(t),this.setState({currentSelectedPermissions:i})}},{key:"mapsAreEqual",value:function(e,t){if(e.size!==t.size)return!1;var n,i=Object(fe.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!t.has(r[0]))return!1;var a=t.get(r[0]).groupPermissions;if(r[1].groupPermissions.size!==a.size)return!1;var o,s=Object(fe.a)(r[1].groupPermissions);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(!a.has(c))return!1}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return!0}},{key:"getColGroup",value:function(){var e=this.state.currentSelectedPermissions,t=[];return t.push(Object(N.jsx)("col",{style:{width:"200px"}},"col_permissions")),e.forEach((function(e,n){t.push(Object(N.jsx)("col",{style:{width:"80px"}},"col_".concat(n)))})),t.push(Object(N.jsx)("col",{style:{width:"*"}},"col_descriptions")),t}},{key:"getTableHead",value:function(){var e=this.state.currentSelectedPermissions,t=[];return t.push(Object(N.jsx)("td",{children:Object(N.jsx)("div",{className:"permission-management-permissions-header-left",children:Object(N.jsx)(O.a,{id:"permissions.permissions"})})},"header_td_permissions")),e.forEach((function(e,n){t.push(Object(N.jsxs)("td",{children:[Object(N.jsx)("div",{className:"permission-management-permissions-header",children:n}),Object(N.jsx)("div",{className:"permission-management-permissions-subheader",children:Array.isArray(e.users)&&e.users.length>0?"(".concat(e.users.join(", "),")"):void 0})]},"header_td_".concat(n)))})),t.push(Object(N.jsx)("td",{children:Object(N.jsx)("div",{className:"permission-management-permissions-header",children:Object(N.jsx)(O.a,{id:"permissions.description"})})},"header_td_description")),Object(N.jsx)("tr",{children:t})}},{key:"getData",value:function(e){var t=this,n=this.state.currentSelectedPermissions,i=[];return this.allAvailablePermissions.forEach((function(r){var a=[];a.push(Object(N.jsx)("td",{children:Object(N.jsx)("div",{className:"permission-management-label",children:r})},"body_td_permission_".concat(r))),n.forEach((function(n,i){var o=n.groupPermissions.has(r);a.push(Object(N.jsx)("td",{children:Object(N.jsx)(ve.a,{type:"checkbox",checked:o,name:"checkbox_".concat(i,"_").concat(r),color:"primary",className:"permission-management-checkbox",onClick:function(n){return e&&"sdm"!==i?t.onCheck(i,r,n.target.checked):void 0},disabled:!e||"sdm"===i})},"body_td_".concat(i,"_").concat(r)))})),a.push(Object(N.jsx)("td",{children:Object(N.jsx)("div",{className:"permission-management-label",children:Object(N.jsx)(O.a,{id:"permissionDescription.".concat(r)})})},"body_td_description_".concat(r))),i.push(Object(N.jsx)("tr",{children:a},"body_tr_".concat(r)))})),i}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirect,i=t.initiallySelectedPermissions,r=t.currentSelectedPermissions,a=this.props.myPermissions,o=Object(me.D)(a),s=Object(me.s)(a);if(n)return Object(N.jsx)(m.a,{to:"/app"});var c=!this.mapsAreEqual(i,r),u=this.getColGroup(),l=this.getTableHead(),d=this.getData(s);return Object(N.jsxs)("div",{className:"permission-management-wrapper",children:[Object(N.jsxs)("div",{className:"permission-management-fixed-header",children:[Object(N.jsxs)(w.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({redirect:!0})},children:[Object(N.jsx)("img",{src:y.a,alt:"back",className:"image-item"}),Object(N.jsx)(O.a,{id:"permissions.backToWebApp"})]}),Object(N.jsx)(w.a,{variant:"contained",color:"primary",disabled:!c,onClick:this.onSaveClicked,children:"Save"}),Object(N.jsx)(w.a,{variant:"contained",color:"primary",disabled:!c,onClick:this.onResetClicked,children:"Reset"})]}),Object(N.jsx)("h1",{children:Object(N.jsx)(O.a,{id:"permissions.permissionManagement"})}),Object(N.jsx)("h3",{children:Object(N.jsx)(O.a,{id:"permissions.helpText"})}),o||s?Object(N.jsxs)("table",{className:"permission-management-table-wrapper",children:[Object(N.jsx)("colgroup",{children:u}),Object(N.jsx)("thead",{children:l}),Object(N.jsx)("tbody",{children:d})]}):void 0]})}}]),n}(i.Component)),je=Object(p.c)((function(e){return{groupPermissions:e.app.groupPermissions,proxy:e.app.proxy,user:e.app.user,myPermissions:e.app.myPermissions}}),null)(ge),we=n(149),Oe=n(154),ye=function(){var e=Object(p.d)(),t=Object(p.e)((function(e){return e.app})),n=t.isHelpViewOpen,i=t.locale;return Object(N.jsx)(g.a,{locale:i,messages:Z.a[i],children:Object(N.jsxs)(pe,{dispatch:e,helpSection:Oe.a.PERMISSIONS,children:[Object(N.jsx)(je,{}),Object(N.jsx)(we.a,{open:n,onClose:function(){return e(Object(ie.s)())}})]})})},Se=n(312),ke=n.n(Se),Ie=n(2),xe=n.n(Ie),Ce=(n(833),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.message;return!!t&&Object(N.jsx)("div",{className:"modal-fullscreen-style",children:Object(N.jsx)("div",{className:"modal-fullscreen-inner",children:n})})}}]),n}(i.Component));Ce.defaultProps={visible:!1,message:void 0};var Ve=Ce,Te=(xe.a.shape({request:xe.a.func.isRequired}),n(119)),Ne=(n(834),n.p+"static/media/view-manager.8d715a8f.svg"),Ee=n(72),Pe=n(49),Ae=n.n(Pe),Me=n.p+"static/media/check.069f9f99.svg",De=n(230),Le=n(96),Re=n.p+"static/media/export.6f1edad0.svg",_e=n.p+"static/media/import.2817cb78.svg",Fe=n(229),Ue=n(148),He=n(117),We=n(53),ze=(n(835),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.open,i=e.title,r=e.message;return Object(N.jsx)("div",{children:Object(N.jsxs)(We.a,{title:i,onClose:t,open:n,children:[Object(N.jsx)("div",{className:"message-wrapper",children:r}),Object(N.jsx)("div",{className:"button-wrapper",children:Object(N.jsx)(w.a,{color:"primary",onClick:t,children:"Okay"})})]})})}}]),n}(i.Component)),qe=ze,Be=n(45),Ge=n(116),Ke=(n(836),Object(Te.c)((function(e){var t=e.onClose,n=e.onSave,r=e.intl,a=Object(i.useRef)(null),o=Object(p.d)(),s=Object(p.e)((function(e){return e.viewSet.createdViewSets})),l=Object(p.e)((function(e){return e.viewSet.currentViewSet})),f=Object(p.e)((function(e){return e.inspections})),v=Object(p.e)((function(e){return e.app.configuration})),h=Object(p.e)((function(e){return e.app.myPermissions})),b=Object(me.t)(h),m=Object(me.k)(h),g=Object(i.useState)(l.name),j=Object(u.a)(g,2),w=j[0],y=j[1],S=Object(i.useState)(!1),k=Object(u.a)(S,2),I=k[0],x=k[1],C=Object(i.useState)(""),V=Object(u.a)(C,2),T=V[0],E=V[1],P=Object(i.useState)(null),A=Object(u.a)(P,2),M=A[0],L=A[1],R=Object(i.useState)(!1),_=Object(u.a)(R,2),F=_[0],U=_[1],H=Object(i.useState)(""),W=Object(u.a)(H,2),z=W[0],q=W[1],B=Object(i.useState)(""),G=Object(u.a)(B,2),K=G[0],Y=G[1],X=Object(i.useState)(!1),J=Object(u.a)(X,2),Z=J[0],$=J[1],Q=Object(i.useState)(""),ee=Object(u.a)(Q,2),te=ee[0],ne=ee[1],ae="1.0.0",oe=function(e){return Object.keys(s).filter((function(t){return t===e})).length>0},se=function(){var e=function(e){for(var t=e,n=1;oe(t);)t="".concat(e).concat(n),n++;return t}("Initial");o(Object(ie.y)(e))},ce=function(){var e=Object(c.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.getWebAppVersion(),n={currentViewSet:l,editingViewIds:ue(),timestamp:new Date,version:"1.0.0",webAppVersion:t},e.next=4,le(n);case 4:je();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=[];return Object.keys(f).forEach((function(t){var n=parseInt(t,10);f[t]&&f[t].sharedState&&f[t].sharedState.editingViewId&&e.push({inspectionId:n,editingViewId:f[t].sharedState.editingViewId})})),e},le=function(){var e=Object(c.a)(d.a.mark((function e(t){var n,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),i=new Blob([n],{type:"application/json"}),e.next=4,URL.createObjectURL(i);case 4:r=e.sent,Object(Ge.a)(r,"viewset.json");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e){try{var t=JSON.parse(e);if(ve(t.currentViewSet.id))return x(!0),void L(t);he(t)}catch(n){Oe(),re.a.error(n)}},pe=function(e){E(""),e&&o(Object(ie.B)(T))},fe=function(){he(M)},ve=function(e){return l.id===e},he=function(e){return we(),be(e.version)?(ge(e.version)&&Se(),e.currentViewSet.id?(o(Object(ie.db)(e.currentViewSet,e.currentViewSet.id)),e.editingViewIds&&e.editingViewIds.forEach((function(e){o(Object(ie.P)(e.inspectionId,e.editingViewId))})),o(Object(ie.A)()),void ke()):(Oe(),void re.a.error("Could not load viewset id."))):(ye(),void re.a.error("Version of file is not valid."))},be=function(e){return ae===e||!(!Ae.a.valid(e)||"major"===Ae.a.diff(ae,e))},ge=function(e){return"minor"===Ae.a.diff(ae,e)&&Ae.a.gt(e,ae)},je=function(){t()},we=function(){q(Object(N.jsx)(O.a,{id:"notifications.successfulAction"})),Y(Object(N.jsx)(O.a,{id:"notifications.successfullyLoadedFile"})),$(!0)},Oe=function(){q(Object(N.jsx)(O.a,{id:"notifications.errorOccurred"})),Y(Object(N.jsx)(O.a,{id:"notifications.error.loadingFile"})),U(!0)},ye=function(){q(Object(N.jsx)(O.a,{id:"notifications.viewsetVersionIncompatibleTitle"})),Y(Object(N.jsx)(O.a,{id:"notifications.viewsetVersionIncompatibleMessage"})),U(!0)},Se=function(){q(Object(N.jsx)(O.a,{id:"notifications.minorVersionDiffTitle"})),Y(Object(N.jsx)(O.a,{id:"notifications.minorVersionDiffMessage"})),$(!0)},ke=function(){U(!0)},Ie=function(e){if(b)return te!==e?Object(N.jsx)(Be.a,{onClick:function(){ne(e),y(e)},tooltip:r.messages["viewSetManager.editViewSetName"],iconUrl:Le.a}):Object(N.jsx)(Be.a,{onClick:function(){te!==w&&Object.keys(s).includes(w)?alert("Viewset with this name already exists."):(o(Object(ie.C)(te,w)),ne(""),y(""))},tooltip:r.messages["viewSetManager.changeViewSetName"],iconUrl:Me})},xe=function(e){var t=e.columns,n=[];return t.forEach((function(e,i){"delete"===e.key?n.push(Object(N.jsx)("div",{style:{width:t[i].width,paddingRight:3},children:Object(N.jsx)(Be.a,{tooltip:r.messages["viewSetManager.newViewSet"],iconUrl:Fe.a,onClick:function(){return se()}})},"header_".concat(i))):n.push(Object(N.jsx)("div",{className:"viewsetmanager-header-wrapper",children:t[i].title},"header_".concat(i)))})),n},Ce=function(){var e=[];return Object(me.F)(h)&&e.push({intlId:"viewSetManager.save",iconUrl:Ue.a,onClickHandler:function(){n(),je()}}),Object(me.E)(h)&&e.push({intlId:"viewSetManager.export",iconUrl:Re,onClickHandler:function(){ce()}}),b&&e.push({intlId:"viewSetManager.import",iconUrl:_e,onClickHandler:function(){a.current.click()}}),e}(),Ve=s&&Object.keys(s).map((function(e){return{edit:Ie(e),delete:m?Object(N.jsx)(Be.a,{onClick:function(){return E(e)},tooltip:r.messages["viewSetManager.deleteIconTooltip"],iconUrl:De.a}):void 0,name:te===e?Object(N.jsx)("div",{className:"viewsetmanager-edit-viewset-name-wrapper",children:Object(N.jsx)(D.a,{fullWidth:!0,type:"text",inputProps:{style:{height:29}},value:w,onChange:function(e){return y(e.target.value.substring(0,20))}})}):e,id:e}})),Te=[{key:"name",dataKey:"name",title:"Name",width:0,flexGrow:1},{key:"edit",dataKey:"edit",title:"",width:40},{key:"delete",dataKey:"delete",title:"",width:40}];return Object(N.jsxs)("div",{children:[Object(N.jsxs)(We.a,{title:Object(N.jsx)(O.a,{id:"viewSetManager.title"}),dialogActions:Ce,onClose:function(){je()},open:!0,children:[Object(N.jsx)("div",{className:"viewsetmanager-headline-wrapper",children:Object(N.jsx)(O.a,{id:"viewSetManager.editViewSetHeadline"})}),Object(N.jsx)("div",{className:"viewsetmanager-table-wrapper",children:Object(N.jsx)(Ee.a,{children:function(e){var t=e.width,n=e.height;return Object(N.jsx)(Ee.c,{headerRenderer:xe,columns:Te,data:Ve,width:t,height:n-20,headerHeight:30,rowHeight:30},"viewset-table")}},"autoresizer")})]}),Object(N.jsx)(He.a,{open:I,onClose:function(e){return function(e){x(!1),e?fe():a.current.value=""}(e)},title:Object(N.jsx)(O.a,{id:"viewSetManager.importConfirm.title"}),message:Object(N.jsx)(O.a,{id:"viewSetManager.importConfirm.message"})}),Object(N.jsx)(He.a,{open:""!==T,onClose:function(e){return pe(e)},message:Object(N.jsx)(O.a,{id:"viewSetManager.deleteConfirm.message",values:{viewsetName:T}})}),Object(N.jsx)(qe,{onClose:function(){U(!1),Z&&je()},open:F,title:z,message:K}),Object(N.jsx)("input",{ref:a,style:{display:"none"},type:"file",onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsText(t),n.onload=function(e){de(e.target.result)}}}})]})}))),Ye=(n(837),xe.a.shape({id:xe.a.string})),Xe=(xe.a.oneOfType([Ye,xe.a.string]),n(24)),Je=n.n(Xe),Ze=(n(838),n(839),function(e){var t=e.children;return Object(N.jsx)("div",{className:"box-wrapper",children:t})});Ze.defaultProps={children:void 0};var $e=Ze,Qe=function(e){var t=e.id,n=e.title,i=e.onClick,r=e.active,a=Je()({"preset-button":!0,"preset-button-active":r});return Object(N.jsx)($e,{children:Object(N.jsx)("button",{id:t,onClick:i,className:a,children:Object(N.jsx)("span",{children:n})})})};Qe.defaultProps={id:void 0,onClick:function(){},active:!1};var et=Qe,tt=function(e){var t=e.currentViewSet,n=e.createdViewSets,i=e.switchViewSet,r=e.myPermissions;return Object(me.E)(r)||Object(me.t)(r)?Object(N.jsx)("div",{className:"preset-slider-wrapper",children:n&&n.map((function(e){return Object(N.jsx)(et,{title:e.name||e.id,onClick:function(){return i(e)},active:t&&t.id===e.id},e.id)}))}):Object(N.jsx)("div",{})};tt.defaultProps={currentViewSet:void 0,createdViewSets:[]};var nt=Object(p.c)((function(e){return{createdViewSets:Object.keys(e.viewSet.createdViewSets).map((function(t){return e.viewSet.createdViewSets[t]})),currentViewSet:e.viewSet.currentViewSet,myPermissions:e.app.myPermissions}}),(function(e){return{switchViewSet:function(t){return e(Object(ie.fb)(t))}}}))(tt),it=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={selectedIndex:0,viewSetManagerOpen:!1},e.select=function(t){return e.setState({selectedIndex:t})},e}return Object(ee.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSave,i=t.bottomNavHidden,r=t.isSVOConfigLoaded,a=t.myPermissions;return Object(N.jsxs)("div",{className:"bottom-nav-wrapper ".concat(i?"bottom-nav-hidden":""),children:[Object(N.jsxs)("div",{className:"bottom-nav",children:[r&&Object(N.jsx)(nt,{}),r&&(Object(me.E)(a)||Object(me.t)(a))?Object(N.jsxs)("div",{className:"view-manager",onClick:function(){e.setState({viewSetManagerOpen:!e.state.viewSetManagerOpen})},children:[Object(N.jsx)("img",{src:Ne,alt:""}),Object(N.jsx)(O.a,{id:"viewSetManager"})]}):void 0]}),Object(N.jsx)("button",{className:"bottom-hider",onClick:function(){e.props.setBottomNavHidden(!i)},children:i?"show":"hide"}),r&&Object(N.jsx)("div",{children:this.state.viewSetManagerOpen&&Object(N.jsx)(Ke,{onClose:function(){return e.setState({viewSetManagerOpen:!1})},onSave:n})})]})}}]),n}(i.Component),rt=Object(Te.c)(Object(p.c)((function(e){return{fullscreenMode:e.viewSet.fullscreenMode,bottomNavHidden:e.viewSet.bottomNavHidden,isSVOConfigLoaded:e.viewSet.isSVOConfigLoaded,myPermissions:e.app.myPermissions}}),(function(e){return{setBottomNavHidden:function(t){return e(Object(ie.H)(t))}}}))(it)),at=n(314),ot=n(146),st=n(232),ct=n(233),ut=n(936),lt=n(937),dt=n(931),pt=n(18),ft=(n(841),function e(t){var n,r,a,o,s=t.item,c=t.nested,l=Object(i.useRef)(null),d=Object(i.useState)(!1),p=Object(u.a)(d,2),f=p[0],v=p[1],h=!(null===(n=s.children)||void 0===n||!n.length);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:Object(pt.a)("navigation-item",s.className),ref:l,children:Object(N.jsxs)("button",{className:Object(pt.a)(h&&"show-arrow",c&&"nested arrow-right",f&&"active",(h||s.onClick)&&"clickable"),onClick:function(){s.onClick?s.onClick():h&&v(!0)},children:[s.icon&&Object(N.jsx)("img",{src:s.icon}),Object(N.jsx)("span",{children:s.content})]})}),Object(N.jsx)(ut.a,{open:f,anchorEl:l.current,placement:c?"right-start":"bottom",style:{zIndex:9},children:Object(N.jsx)(lt.a,{onClickAway:function(){return v(!1)},children:Object(N.jsx)(dt.a,{elevation:4,className:"navigation-item-children-list",style:{minWidth:null!==(r=null===(a=l.current)||void 0===a?void 0:a.getBoundingClientRect().width)&&void 0!==r?r:0},children:(null!==(o=s.children)&&void 0!==o?o:[]).map((function(t){return t&&Object(N.jsx)(e,{item:t,nested:!0},t.id)}))})})})]})}),vt=n(317),ht=n.n(vt),bt=(n(847),function(){return Object(N.jsx)($e,{children:Object(N.jsxs)("div",{className:"date-time-wrapper",children:[Object(N.jsx)(ht.a,{className:"date",format:"DD.MM.YYYY",ticking:!0}),Object(N.jsx)(ht.a,{className:"time",format:"HH:mm:ss",ticking:!0})]})})}),mt=n(176),gt=n.p+"static/media/play-multiple.92160d4a.svg",jt=n(177),wt=n.p+"static/media/language.0be28bcb.svg",Ot=n(945),yt=n(941),St=n(939),kt=n(940),It=n(938),xt=n.p+"static/media/icons8-lock.b22b5188.svg",Ct=n.p+"static/media/icons8-padlock.048e7769.svg",Vt=function(e){var t=e.open,n=e.title,i=e.contentText,r=e.children;return Object(N.jsxs)(Ot.a,{open:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableEscapeKeyDown:!0,children:[Object(N.jsx)(It.a,{id:"alert-dialog-title",children:n}),Object(N.jsx)(St.a,{children:Object(N.jsx)(kt.a,{id:"alert-dialog-description",children:i})}),Object(N.jsx)(yt.a,{children:r})]})},Tt=(n(418),function(e){var t=e.open,n=e.onAccept,r=Object(i.useState)(30),a=Object(u.a)(r,2),o=a[0],s=a[1];return Object(i.useEffect)((function(){var e=null;return t?(e=setInterval((function(){s((function(e){return e-1}))}),1e3),o<=0&&(n(),clearInterval(e),s(30))):(null!==e&&clearInterval(e),s(30)),function(){null!==e&&clearInterval(e)}}),[t,n,o]),Object(N.jsxs)(Ot.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(It.a,{id:"alert-dialog-title",children:e.title}),Object(N.jsx)(St.a,{children:Object(N.jsx)(kt.a,{id:"alert-dialog-description",children:e.contentText})}),Object(N.jsx)(w.a,{onClick:e.onAccept,color:"primary",children:Object(N.jsx)(O.a,{id:"accept"})}),Object(N.jsx)(w.a,{onClick:e.onReject,color:"primary",children:Object(N.jsx)(O.a,{id:"reject"})}),Object(N.jsx)("div",{className:"auto-accept-container",children:Object(N.jsxs)("p",{children:["(auto accept in ",o," seconds)"]})})]})}),Nt=function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},t.name,t.value))},Et=n(34),Pt=Object.keys(Et.a).filter((function(e){return"unknownMode"!==e})),At=function(){var e,t=Object(p.d)(),n=Object(p.e)((function(e){return e.viewSet.isSVOConfigLoaded})),r=Object(p.e)((function(e){return e.app})),a=r.myPermissions,o=r.currentMode,s=r.proxy,c=Object(me.B)(a),u=Object(me.q)(a),l=Object(i.useMemo)((function(){var e,t=null!==(e=null!==o&&void 0!==o?o:s.mode)&&void 0!==e?e:Et.a.unknownMode.id;return Object.keys(Et.a).find((function(e){return Et.a[e].id===t}))}),[o,s.mode]),d=Object(i.useMemo)((function(){return Pt.map((function(e){return{id:e,onClick:function(){var n;n=Et.a[e].id,t(Object(ie.M)(n))},content:Object(N.jsx)(O.a,{id:e}),icon:Et.a[e].iconSrc}}))}),[t]);if(n&&(c||u))return{id:"mode-switch",icon:null===(e=Et.a[l])||void 0===e?void 0:e.iconSrc,content:Object(N.jsx)(O.a,{id:l}),children:d}},Mt=n(38),Dt=n.n(Mt),Lt=n.p+"static/media/description.7b05d18e.svg",Rt=n(456),_t=function(){var e=Object(Rt.a)(),t=function(){var e=Object(p.d)(),t=Object(p.e)((function(e){return e.app.locale})),n=Object(i.useMemo)((function(){return Z.b.map((function(t){return{id:t.locale,content:t.name,onClick:function(){e(Object(ie.S)(t.locale)),e(Object(ie.n)(t.locale))}}}))}),[e]);return{id:"language-chooser",icon:wt,content:null!==t&&void 0!==t?t:"",children:n}}(),n=function(){var e=Object(at.a)(),t=Object(p.e)((function(e){return e.app.proxy})),n=Object(p.e)((function(e){return e.app.configurationLock})),r=Object(p.e)((function(e){return e.app.user})),a=Object(i.useReducer)(Nt,{scope:1}),o=Object(u.a)(a,2),s=o[0],c=o[1],l=Object(i.useState)(!1),d=Object(u.a)(l,2),f=d[0],v=d[1],h=Object(i.useCallback)((function(){return n.isLockedBySameUser(r)?e.messages["topNavigation.release"]:n.isLockedByOtherUser(r)?e.messages["topNavigation.takeover"]:e.messages["topNavigation.lock"]}),[n,e.messages,r]),b=function(e){c({name:e.target.name,value:e.target.value})},m=function(e){e.stopPropagation(),v(!1)};return{id:"lock-state-handler",icon:n.isLockedBySameUser(r)?Ct:xt,content:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"lock-state-handler",children:[Object(N.jsx)("p",{children:h()}),Object(N.jsxs)("div",{className:"lock-status",children:[Object(N.jsxs)("p",{children:["Status: ",n.isLocked()?"Locked":"Unlocked"]}),Object(N.jsxs)("p",{children:["User: ",n.owner]}),Object(N.jsxs)("p",{children:["Host: ",n.isLocked()?n.host:"0.0.0.0"]})]})]}),Object(N.jsxs)(Ot.a,{open:f,onClose:m,"aria-labelledby":"form-dialog-title",children:[Object(N.jsx)(It.a,{id:"form-dialog-title",children:n.isLockedByOtherUser(r)?Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.takeoverConfigRequestTitle"}):Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.lockConfigRequestTitle"})}),Object(N.jsxs)(St.a,{children:[Object(N.jsx)(kt.a,{children:Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.lockConfigRequestContent"})}),Object(N.jsx)(D.a,{InputLabelProps:{shrink:!0},autoFocus:!0,margin:"dense",id:"lock-scope-id",name:"scope",label:Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.lockScope"}),type:"number",defaultValue:"1",disabled:!0,onChange:b,fullWidth:!0}),Object(N.jsx)(D.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"lock-description-id",name:"description",label:Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.lockDescription"}),type:"text",onChange:b,fullWidth:!0}),n.isLockedByOtherUser(r)&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(D.a,{InputLabelProps:{shrink:!0},margin:"dense",id:"takeover-message-id",name:"takeoverMessage",label:Object(N.jsx)(O.a,{id:"lockStateHandler.formDialog.takeoverMessage"}),type:"text",onChange:b,fullWidth:!0})})]}),Object(N.jsxs)(yt.a,{children:[Object(N.jsx)(w.a,{onClick:m,color:"primary",children:Object(N.jsx)(O.a,{id:"cancel"})}),Object(N.jsx)(w.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),v(!1),s.requestTakeover=n.isLockedByOtherUser(r),t.subscribeToLockAcquisitionStream(s)},color:"primary",children:Object(N.jsx)(O.a,{id:"submit"})})]})]}),Object(N.jsx)(Vt,{open:n.isConfigAlreadyLocked(),title:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.lockAlreadyLocked",values:{user:n.owner}}),contentText:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.lockDescription",values:{description:n.lockDescription}}),children:Object(N.jsx)(w.a,{onClick:function(){t.closeAlertDialogs()},color:"primary",children:Object(N.jsx)(O.a,{id:"close"})})}),Object(N.jsx)(Vt,{open:n.isOwnerRejectedTakeover(),title:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.ownerRejectedTakeover",values:{user:n.owner}}),contentText:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.lockDescription",values:{description:n.lockDescription}}),children:Object(N.jsx)(w.a,{onClick:function(){t.closeAlertDialogs()},color:"primary",children:Object(N.jsx)(O.a,{id:"close"})})}),Object(N.jsx)(Vt,{open:n.isWaitingForTakeoverResponse(),title:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.waitingForTakeoverResponse",values:{user:n.owner}}),contentText:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.waitingForResponseInfo"})}),Object(N.jsx)(Tt,{open:n.isTakeoverAttemptFromOtherUser(),title:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.takeoverAttempt",values:{user:n.takeoverUser}}),contentText:Object(N.jsx)(O.a,{id:"lockStateHandler.alertDialog.takeoverMessage",values:{message:n.takeoverMessage}}),onAccept:function(){t.passConfigLock({lockId:n.lockId,takeoverId:n.takeoverId})},onReject:function(){t.retainConfigLock({takeoverId:n.takeoverId})}})]}),onClick:function(){n.isLockedBySameUser(r)?t.unsubscribeFromLockAcquisitionStream():v(!0)}}}(),r=function(){var e=Object(p.e)((function(e){return e.viewSet.isSVOConfigLoaded})),t=Object(p.e)((function(e){return e.app})),n=t.proxy,r=t.configuration,a=t.pausedInspections,o=t.myPermissions,s=Object(i.useMemo)((function(){return r&&r.getInspections()||[]}),[r]),c=0===a.length,u=Object(me.w)(o),l=Object(me.n)(o),d=Object(i.useMemo)((function(){var e=s.map((function(e){var t=(a||[]).includes(e.id);return{id:e.id,onClick:function(){t?n.resumeRejectStream(e.id):n.pauseRejectStream(e.id)},content:e.name,icon:t?jt.a:mt.a,className:t?"paused-inspection":void 0}}));return e.unshift({id:"globalResumePause",onClick:function(){c?n.pauseRejectStream():n.resumeRejectStream()},content:c?"Pause all inspections":"Resume all inspections",icon:c?mt.a:jt.a,className:"all-inspections"}),e}),[c,s,a,n]);if(e&&(u||l))return{id:"inspection-state-navigation",icon:gt,content:Object(N.jsx)(O.a,{id:"topNavigation.inspectionState",values:{runningInspections:s.length-a.length,numberOfInspections:s.length}}),children:l?d:void 0}}(),a=function(){var e,t=Object(p.e)((function(e){return e.app})),n=t.notifications,i=t.myPermissions;if(Object(me.y)(i))return{id:"status-report",icon:Lt,content:null===(e=n[0])||void 0===e?void 0:e.message,children:n.map((function(e){var t,n;return{id:null!==(t=null!==(n=e.id)&&void 0!==n?n:e.timestamp)&&void 0!==t?t:Dt.a.generate(),content:Object(N.jsxs)("p",{className:"".concat(e.type," status"),children:[e.timestamp,": ",Object(N.jsx)("b",{children:e.message})," ",e.count>1?"(".concat(e.count,")"):""]},Dt.a.generate())}}))}}(),o=At();return{navigation:[null!==o&&void 0!==o?o:void 0,null!==a&&void 0!==a?a:void 0,null!==r&&void 0!==r?r:void 0,null,n,e,t].filter((function(e){return void 0!==e}))}},Ft=(n(851),function(){var e=Object(p.e)((function(e){return e.viewSet})),t=e.topNavHidden,n=e.isSVOConfigLoaded,r=e.unsavedChanges,a=Object(p.e)((function(e){return e.app.configuration})),o=Object(p.d)(),s=_t().navigation,c=Object(at.a)(),u=Je()({nav:!0,"nav-hidden":t}),l=Object(i.useMemo)((function(){return n?a&&a.name?Object(N.jsx)("span",{children:a.name}):c.messages.unknownConfigName:c.messages.noConfigName}),[a,c.messages,n]);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:u,children:[Object(N.jsx)("button",{className:"hider",onClick:function(){return o(Object(ie.bb)(!t))},children:t?"show":"hide"}),Object(N.jsxs)("div",{className:"config-wrapper",children:[Object(N.jsx)(ct.a,{src:st.a,title:"logo"}),r?Object(N.jsxs)("div",{style:{fontStyle:"italic"},children:[l,"*"]}):l]}),Object(N.jsx)("div",{className:"flex-container",children:s.map((function(e,t){return e?Object(N.jsx)(ft,{item:e},e.id):Object(N.jsx)("span",{className:"spacer"},t)}))}),Object(N.jsx)("div",{className:"responsive-menu",children:Object(N.jsx)(ft,{item:{id:"responsive-menu",content:"Menu",icon:ot.a,children:s}},"menu")}),Object(N.jsx)("div",{className:"separator",children:Object(N.jsx)(bt,{})})]})})}),Ut=n(155),Ht=(n(852),n(147)),Wt=n(64),zt=(n(853),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{className:"no-config-loaded-wrapper",children:Object(N.jsx)(O.a,{id:"noConfigLoaded"})})}}]),n}(i.Component)),qt=zt,Bt=n(228),Gt=(n(854),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.headline,n=e.selectionItems,i=e.onSelection,r=e.cancelButtonProps,a=e.showCancel;return Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:t}),Object(N.jsxs)("ul",{className:"list-wrapper",children:[n.map((function(e){return Object(N.jsx)("li",{className:"selection-item",children:Object(N.jsxs)(w.a,{variant:"outlined",onClick:function(){return i(e.id)},children:[e.icon&&Object(N.jsx)("img",{src:e.icon,alt:"inspection.name",className:"image-item"}),e.text]},"button".concat(e.id))},"li".concat(e.id))})),a?Object(N.jsx)("li",{className:"selection-item",children:Object(N.jsxs)(w.a,{variant:"contained",color:"primary",onClick:r.goBack,children:[r.icon&&Object(N.jsx)("img",{src:r.icon,alt:"type.id",className:"image-item"}),r.text]})},"liCancel"):null]})]})}}]),n}(i.Component));Gt.defaultProps={showCancel:!1,headline:"",selectionItems:[],cancelButtonProps:{}};var Kt=Gt,Yt=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).getSelectionItems=function(){var t=e.props.configuration;return(t&&t.getInspections()||[]).map((function(e){return{id:e.id,text:e.name,icon:Bt.a}}))},e}return Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onSelection,n=e.goBack,i=e.showCancel,r={text:Object(N.jsx)(O.a,{id:"viewTypeSelection.back"}),icon:y.a,goBack:n},a=this.getSelectionItems();return Object(N.jsx)("div",{children:Object(N.jsx)(Kt,{headline:Object(N.jsx)(O.a,{id:"inspectionSelection.selectInspection"}),onSelection:t,cancelButtonProps:r,showCancel:i,selectionItems:a})})}}]),n}(i.Component);Yt.defaultProps={};var Xt=Object(p.c)((function(e){return{configuration:e.app.configuration}}))(Yt),Jt=n.p+"static/media/filmstrip.c43ef800.svg",Zt=n(231),$t=n.p+"static/media/list.7380903e.svg",Qt=n.p+"static/media/parameter.417d04e6.svg",en=n.p+"static/media/toolset.f1f1d3b2.svg",tn=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object(Q.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onSelection,n=e.goBack,i=e.myPermissions,r=[];Object(me.b)(i)&&r.push({id:de.d,text:Object(N.jsx)(O.a,{id:"viewTypeSelection.imageView"}),icon:Zt.a}),Object(me.d)(i)&&r.push({id:de.f,text:Object(N.jsx)(O.a,{id:"viewTypeSelection.parameterView"}),icon:Qt}),Object(me.a)(i)&&r.push({id:de.c,text:Object(N.jsx)(O.a,{id:"viewTypeSelection.imageStripView"}),icon:Jt}),Object(me.c)(i)&&r.push({id:de.e,text:Object(N.jsx)(O.a,{id:"viewTypeSelection.ListView"}),icon:$t}),Object(me.e)(i)&&r.push({id:de.g,text:Object(N.jsx)(O.a,{id:"viewTypeSelection.toolset"}),icon:en});var a={text:Object(N.jsx)(O.a,{id:"viewTypeSelection.back"}),icon:y.a,goBack:n};return Object(N.jsx)("div",{children:Object(N.jsx)(Kt,{headline:Object(N.jsx)(O.a,{id:"viewTypeSelection.selectViewType"}),onSelection:t,cancelButtonProps:a,showCancel:!0,selectionItems:r})})}}]),n}(i.Component);tn.defaultProps={};var nn=Object(p.c)((function(e){return{myPermissions:e.app.myPermissions}}))(tn),rn=(n(855),function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={visibleComponent:"ViewTypeSelection",selectedInspectionId:0,selectedViewType:""},e.setSelectedInspectionId=function(t){e.setState({visibleComponent:"",selectedInspectionId:t}),e.props.changeTitle(t),e.updateView(t)},e.setSelectedViewType=function(t){e.setState({visibleComponent:"InspectionSelection",selectedViewType:t})},e.goBackToViewTypeSelection=function(){e.setState({visibleComponent:"ViewTypeSelection",selectedInspectionId:0})},e.cancelViewSelection=function(){(0,e.props.changeContent)()},e.updateView=function(t){var n=e.props,i=n.replaceViewInCurrentViewSet,r=n.viewId,a=n.changeContent;i(r,e.state.selectedViewType,t),a()},e}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.viewToShowWithoutInspection;e&&this.setState({visibleComponent:"InspectionSelection",selectedViewType:e})}},{key:"render",value:function(){var e=this,t=this.props.showCancel,n=this.state.visibleComponent;return Object(N.jsx)("div",{className:"view-selection-wrapper",children:function(){switch(n){case"InspectionSelection":return Object(N.jsx)(Xt,{onSelection:e.setSelectedInspectionId,goBack:e.goBackToViewTypeSelection,showCancel:t});case"ViewTypeSelection":return Object(N.jsx)(nn,{onSelection:e.setSelectedViewType,goBack:e.cancelViewSelection});default:return Object(N.jsx)("div",{})}}()})}}]),n}(i.Component)),an=Object(p.c)(null,(function(e){return{replaceViewInCurrentViewSet:function(t,n,i){e(Object(ie.A)(void 0,t)),e(Object(ie.D)(t,n,i))}}}))(rn),on=new de.h,sn=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).setFullscreen=function(e){return setTimeout((function(){return i.setState({isFullscreen:e})}),0)},i.resetView=function(){i.setState({resetView:!0})},i.removeIdsForUnknownInspectionIds=function(e,t){var n=e.viewSet;Object.keys(n).forEach((function(e){var i=n[e].inspectionId;t.includes(i)||(delete n[e].id,delete n[e].inspectionId)}))},i.canEditCurrentView=function(){var e=i.props,t=e.id,n=e.views,r=e.myPermissions;if(n&&n.viewSet&&n.viewSet[t])switch(n.viewSet[t].viewComponentClassId){case de.d:return Object(me.m)(r);case de.e:return Object(me.o)(r);case de.c:return Object(me.l)(r);case de.f:return Object(me.p)(r);case de.g:return Object(me.r)(r);default:return!1}return!1},i.canDeleteCurrentView=function(){var e=i.props,t=e.id,n=e.views,r=e.myPermissions;if(n&&n.viewSet&&n.viewSet[t])switch(n.viewSet[t].viewComponentClassId){case de.d:return Object(me.g)(r);case de.e:return Object(me.h)(r);case de.c:return Object(me.f)(r);case de.f:return Object(me.i)(r);case de.g:return Object(me.j)(r);default:return!1}return!1},i.getInspectionId=function(){var e=i.props,t=e.id,n=e.views;return i.state.selectedInspectionId||n.viewSet[t]&&n.viewSet[t].inspectionId},i.state={isFullscreen:!1,resetView:!1,selectedInspectionId:0,isConfirmOpen:!1},i}return Object(ee.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.configuration,i=t.id,r=t.path,a=t.views,o=t.dispatch,s=t.editingViewIds,c=t.intl,u=t.windowName,l=t.isSVOConfigLoaded,d=t.myPermissions,p=this.state,f=p.isFullscreen,v=p.resetView,b=p.selectedInspectionId,m=Je()({fullscreen:f,"editing-focus":s.includes(i)}),g=this.getInspectionId(),j="<UNKNOWN INSPECTION>";if(n){var w=n.getInspectionName(g);w&&w.length>0&&(j="[".concat(w,"]")),u&&!v&&(j="".concat(j," ").concat(u));var O=n&&n.inspections&&n.inspections.map((function(e){return e.id}));O&&this.removeIdsForUnknownInspectionIds(a,O)}var y=a.viewSet&&a.viewSet[i]&&a.viewSet[i].inspectionId,S=!y&&a.viewSet&&a.viewSet[i]&&a.viewSet[i].viewComponentClassId,k=[];return Object(me.t)(d)&&k.push(Object(N.jsx)(Ut.SplitButton,{},"splitButton")),this.canEditCurrentView()&&k.push(Object(N.jsx)(Be.a,{tooltip:c.messages["viewTypeSelection.chooseViewTooltip"],onClick:function(){return e.resetView(i)},iconUrl:Le.a},"swapButton")),(v||!y||this.canDeleteCurrentView())&&k.push(Object(N.jsx)(Be.a,{tooltip:c.messages["svoView.closeView"],onClick:function(){return e.props.onCloseView()},iconUrl:Ht.a,style:{width:"18px",height:"18px"}},"customRemoveButton")),Object(N.jsx)(Ut.MosaicWindow,{className:m,createNode:function(){return Dt.a.generate()},title:(b||a.viewSet&&a.viewSet[i]&&a.viewSet[i].titleId)&&this.props.intl.formatMessage({id:b||u?"svoView.emptyViewInspectionTemplate":a.viewSet[i].titleId},{inspectionName:j}),toolbarControls:l?k:[],path:r,draggable:Object(me.t)(d),children:Object(N.jsx)(pe,{view:this,dispatch:o,editingViewIds:s,children:!v&&y?on.createViewInstance(a.viewSet[i],Object(h.a)(Object(h.a)({},a.viewSet[i].passedProps),{},{id:i,inspectionId:a.viewSet[i].inspectionId})):l?Object(N.jsx)(an,{viewId:i,changeContent:function(){return e.setState({resetView:!1,selectedInspectionId:0})},changeTitle:function(t){return e.setState({selectedInspectionId:t})},showCancel:v,viewToShowWithoutInspection:S}):Object(N.jsx)(qt,{})})})}}]),n}(i.Component);sn.defaultProps={editingViewIds:[]};var cn=Object(p.c)((function(e,t){var n=t.views,i=t.id,r=Object(Wt.a)((function(){return n.viewSet[i].inspectionId})),a=e.app.configuration,o=e.viewSet.isSVOConfigLoaded,s=e.app.myPermissions,c=Object(Wt.a)((function(){return e.inspections[r].views[i].windowName}));if(c){var u=a.getInspectionName(r);return{configuration:a,windowName:c=c.replace("Inspections.".concat(u,"."),""),isSVOConfigLoaded:o,myPermissions:s}}return{configuration:a,isSVOConfigLoaded:o,myPermissions:s}}),(function(){return{}}))(Object(Te.c)(sn)),un=function(e){var t=e.views,n=e.onChange,r=e.topNavHidden,a=e.bottomNavHidden,o=e.increaseChangeCounter,s=e.dispatch,c=e.inspections,l=e.myPermissions,d=Object(i.useRef)(null),p=Object(i.useState)(void 0),f=Object(u.a)(p,2),v=f[0],h=f[1],b=Je()({"view-set-wrapper":!0,"bottom-nav-offset":!a,"top-nav-hidden":!r});if(!t)return!1;var m=Object.keys(c).map((function(e){return c[e].sharedState&&c[e].sharedState.editingViewId})),g=function(){var e=v.viewId,n=v.path,i=v.remove,r=t.viewSet[e]&&t.viewSet[e].inspectionId;"string"===typeof t.initialValue&&s(Object(ie.r)()),s(Object(ie.A)(r,e)),i(n)};return Object(N.jsxs)("div",{className:b,children:[Object(N.jsx)(He.a,{open:void 0!==v,onClose:function(e){return function(e){e&&g(),h(void 0)}(e)},message:Object(N.jsx)(O.a,{id:"svoView.closeViewConfirmation"})}),Object(N.jsx)(Ut.Mosaic,{onChange:function(e){n(e),o()},ref:d,renderTile:function(e,n){return Object(N.jsx)(Ut.MosaicContext.Consumer,{children:function(i){var r=i.mosaicActions.remove;return Object(N.jsx)(cn,{id:e,path:n,views:t,dispatch:s,editingViewIds:m,onCloseView:function(){h({viewId:e,path:n,remove:r})}})}})},initialValue:t.initialValue,resize:Object(me.t)(l)?"":"DISABLED"})]})};un.defaultProps={topNavHidden:!1,bottomNavHidden:!1,views:void 0};var ln=Object(p.c)((function(e){return{inspections:e.inspections,myPermissions:e.app.myPermissions}}),(function(e){return{increaseChangeCounter:function(){return e(Object(ie.u)())},dispatch:function(t){return e(t)}}}))(un),dn=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object(Q.a)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={viewSetFactory:new de.h,throttledWindwResizeHandler:ke()((function(){return e.props.increaseChangeCounter()}),500)},e.onWebsocketConnect=Object(c.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.addConnectionEstablishedNotification();case 1:case"end":return t.stop()}}),t)}))),e.onWebsocketDisconnect=function(){e.props.addConnectionLostNotification()},e}return Object(ee.a)(n,[{key:"handleBeforeUnload",value:function(e){e.preventDefault(),e.returnValue=""}},{key:"componentDidMount",value:function(){if(!this.props.currentViewSet){var e=de.a,t=this.state.viewSetFactory.getViewSet(e);this.props.setViewSet(t,t.id)}this.props.defaultViewSetName&&this.props.changeViewSetAfterLoading(this.props.defaultViewSetName),this.props.protobuf&&this.props.socket&&this.onWebsocketConnect(this.props.protobuf),window.addEventListener("resize",this.state.throttledWindwResizeHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.state.throttledWindwResizeHandler)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.socket!==this.props.socket&&e.protobuf&&e.socket&&this.onWebsocketConnect(e.protobuf),e.socket===this.props.socket||e.socket||this.onWebsocketDisconnect()}},{key:"componentDidUpdate",value:function(e){this.props.unsavedChanges&&e.currentViewSet?window.addEventListener("beforeunload",this.handleBeforeUnload):window.removeEventListener("beforeunload",this.handleBeforeUnload)}},{key:"saveConfiguration",value:function(){var e=this.context.store.getState();this.props.saveClientChunk(this.props.protobuf,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,i=t.currentViewSet,r=t.bottomNavHidden,a=t.topNavHidden,o=t.modalNotificationData,s=t.isHelpViewOpen,c=t.closeHelpView;return this.props.user&&this.props.authToken?Object(N.jsx)(g.a,{locale:n,messages:Z.a[n],children:Object(N.jsxs)("div",{className:"vh-100 center",children:[Object(N.jsx)(Ve,{visible:!!o,message:o&&o.message}),Object(N.jsx)(Ft,{onLoggedOut:this.props.onLoggedOut}),Object(N.jsx)(ln,{views:i,onChange:function(t){e.props.setLayout(t)},bottomNavHidden:r,topNavHidden:a}),Object(N.jsx)(rt,{onSave:function(){return e.saveConfiguration()}}),Object(N.jsx)(we.a,{open:s,onClose:function(){return c()}})]})}):Object(N.jsx)(m.a,{to:"/"})}}]),n}(i.Component);dn.contextType=p.b,dn.defaultProps={bottomNavHidden:!1,topNavHidden:!1,protobuf:void 0,viewSetTemplate:void 0,user:void 0,authToken:void 0,location:{state:{}},currentViewSet:void 0};var pn=Object(p.c)((function(e){return{isHelpViewOpen:e.app.isHelpViewOpen,locale:e.app.locale,protobuf:e.app.protobuf,socket:e.app.socket,user:e.app.user,authToken:e.app.authToken,currentViewSet:e.viewSet.currentViewSet,bottomNavHidden:e.viewSet.bottomNavHidden,topNavHidden:e.viewSet.topNavHidden,defaultViewSetName:e.viewSet.defaultViewSetName,createdViewSets:e.app.createdViewSets,modalNotificationData:e.app.modalNotificationData,increaseChangeCounter:xe.a.func.isRequired,unsavedChanges:e.viewSet.unsavedChanges}}),(function(e){return{closeHelpView:function(){e(Object(ie.s)())},setViewSet:function(t,n){e(Object(ie.db)(t,n))},setLayout:function(t){e(Object(ie.L)(t))},addConnectionEstablishedNotification:function(){e(Object(ie.b)())},addConnectionLostNotification:function(){e(Object(ie.c)())},saveClientChunk:function(t,n){e(Object(ie.F)(t,n))},increaseChangeCounter:function(){e(Object(ie.u)())},changeViewSetAfterLoading:function(t){e(Object(ie.q)(t))}}}))(dn),fn=function(e){var t=e.user,n=e.authToken,i=e.onLoggedOut;return Object(p.d)()({type:"LOG_IN",authToken:n,user:t}),Object(N.jsx)(b.a,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)(m.b,{exact:!0,path:"/",render:function(){return Object(N.jsx)(m.a,{to:"/app"})}}),Object(N.jsx)(m.b,{path:"/app",render:function(e){return Object(N.jsx)(pn,Object(h.a)(Object(h.a)({},e),{},{onLoggedOut:i}))}}),Object(N.jsx)(m.b,{path:"/hmi-v1",component:se}),Object(N.jsx)(m.b,{path:"/permissions",component:ye}),Object(N.jsx)(m.b,{path:"/logout",render:function(e){return Object(N.jsx)(le,Object(h.a)(Object(h.a)({},e),{},{onLoggedOut:i}))}}),Object(N.jsx)(m.b,{path:"/debugger",component:$})]})})},vn=n(175),hn={width:400,margin:20,padding:25,display:"inline-block"},bn=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(e){var i;return Object(Q.a)(this,n),(i=t.call(this,e)).onSubmit=function(e){e.preventDefault(),Object(vn.b)(i.state.username,i.state.password).then((function(e){return i.props.onLogin(e)})).catch((function(){return i.setState({loginFailed:!0})}))},i.state={username:null,password:null},i}return Object(ee.a)(n,[{key:"render",value:function(){var e=this;return Object(N.jsx)("div",{className:"flex items-center justify-center",id:"login-page",children:Object(N.jsxs)(dt.a,{elevation:5,style:hn,children:[this.state.loginFailed?Object(N.jsx)("p",{className:"red",children:"Log In failed"}):null,Object(N.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(N.jsx)(D.a,{label:"Username",style:{width:"100%"},margin:"dense",type:"username",onChange:function(t){e.setState({username:t.target.value})}}),Object(N.jsx)("br",{}),Object(N.jsx)(D.a,{label:"Password",style:{width:"100%"},autoComplete:"current-password",margin:"dense",type:"password",onChange:function(t){e.setState({password:t.target.value})}}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(w.a,{variant:"contained",color:"primary",type:"submit",children:"LogIn"})]})]})})}}]),n}(i.Component),mn=n(464),gn=n(78),jn=n.n(gn),wn=n(156),On=n(465),yn=n(468);function Sn(e,t){var n=Object(k.a)(t.notifications),i=function(e,t){var n=new Date,i={day:"2-digit",month:"2-digit",year:"numeric"},r={hour:"2-digit",minute:"2-digit",second:"2-digit"},a="".concat(n.toLocaleString(t,i)," ").concat(n.toLocaleString(t,r));return e=Object(h.a)(Object(h.a)({},e),{},{timestamp:a})}(e,t.locale);return function(e,t){if(t&&t.length>0)return jn()(e.message,t[0].message);return!1}(i,n)?n[0]=kn(n[0]):(i=kn(i),n.unshift(i)),n&&n.length>50&&n.splice(-1,1),n}function kn(e){var t=e.count;return void 0===t?t=1:t++,e=Object(h.a)(Object(h.a)({},e),{},{count:t})}var In=function(e){var t=function(e){var t=e.websocketUrl,n=e.dispatch,i=e.user,r=e.authToken,a=new On.a(t,n,r),o=new yn.a(n),s=new wn.a({}),c=localStorage.getItem("CURRENT_LOCALE");return re.a.setProxy(o),{connection:null,notifications:[],mode:0,navigationHidden:!1,locale:c||"en",authToken:r,user:i,currentMode:null,pausedInspections:[],connector:a,protobuf:void 0,socket:void 0,proxy:o,saveOperationInProcess:!1,currentClientChunkRevision:0,modalNotificationData:null,focusedViewType:null,isHelpViewOpen:!1,configuration:null,configurationLock:s,isBrowserWindowVisible:!0}}(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_PROTOBUF_STATIC_INITIALIZED":return e.proxy.setProtobufStaticInitialized(),e;case"SET_PROTOBUF":var i=n.protobuf,r=n.socket;return i.onConnect(r),e.proxy.setProtobuf(i),Object.assign({},e,{protobuf:i,socket:r});case"ADD_NOTIFICATION":var a=Sn(n.notification,e);return Object.assign({},e,{notifications:a});case"LOG_IN":return Object(ce.f)(n.authToken,n.user),e.connector.connectWithToken(n.authToken),Object(h.a)(Object(h.a)({},e),{},{authToken:n.authToken,user:n.user});case"LOG_OUT":return Object(ce.e)(),setTimeout((function(){return e.connector.disconnect()})),e;case"AUTH_TOKEN_EXPIRED":return Object(ce.e)(),Object(h.a)(Object(h.a)({},e),{},{authToken:void 0,user:void 0});case"SET_LOCALE":return localStorage.setItem("CURRENT_LOCALE",n.locale),Object(h.a)(Object(h.a)({},e),{},{locale:n.locale});case"ON_NAVIGATION_HIDDEN":return Object.assign({},e,{navigationHidden:!e.navigationHidden});case"SHOW_GLOBAL_MESSAGE_OVERLAY":var o=n.message;return re.a.info({message:o},"Showing global message overlay"),Object(h.a)(Object(h.a)({},e),{},{modalNotificationData:{message:o}});case"HIDE_GLOBAL_MESSAGE_OVERLAY":return re.a.info("Hiding global message overlay"),Object(h.a)(Object(h.a)({},e),{},{modalNotificationData:null});case"SET_CURRENT_MODE":return e.proxy.setMode(n.mode),e;case"SET_CURRENT_MODE_DONE":return Object(h.a)(Object(h.a)({},e),{},{currentMode:n.mode});case"SET_PAUSED_INSPECTIONS":return Object(h.a)(Object(h.a)({},e),{},{pausedInspections:n.pausedInspections});case"UPDATE_CLIENT_CHUNK_REVISION":return Object(h.a)(Object(h.a)({},e),{},{currentClientChunkRevision:n.revision});case"UPDATE_SAVE_OPERATION_IN_PROCESS":return Object(h.a)(Object(h.a)({},e),{},{saveOperationInProcess:n.inProcess});case"SET_CONFIGURATION":return Object(h.a)(Object(h.a)({},e),{},{configuration:n.configuration});case"SET_CONFIGURATION_LOCK":return Object(h.a)(Object(h.a)({},e),{},{configurationLock:n.configurationLock});case"SET_FOCUSED_VIEW_TYPE":return Object(h.a)(Object(h.a)({},e),{},{focusedViewType:n.viewType});case"OPEN_HELP_VIEW":case"CLOSE_HELP_VIEW":return Object(h.a)(Object(h.a)({},e),{},{isHelpViewOpen:n.isHelpViewOpen});case"SET_GROUP_PERMISSIONS":return Object(h.a)(Object(h.a)({},e),{},{groupPermissions:n.groupPermissions});case"SET_MY_PERMISSIONS":return Object(h.a)(Object(h.a)({},e),{},{myPermissions:n.myPermissions});case"SET_BROWSER_WINDOW_VISIBILITY":return Object(h.a)(Object(h.a)({},e),{},{isBrowserWindowVisible:n.visible});default:return e}}},xn={parameter:[]},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;return"SET_PARAMETER"===t.type?Object(h.a)(Object(h.a)({},e),{},{parameter:t.parameter}):e},Vn=n(213),Tn=n.n(Vn),Nn=function(e,t){return Object.keys(t).find((function(n){return t[n]&&t[n].views&&!!t[n].views[e]}))},En=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.inspectionId,i=t.viewId,r=t.key;switch(t.type){case"PURGE_VIEW_STATE":var a=t.inspectionId||Nn(t.viewId,e);return a?Tn()(e,["".concat(a,".sharedState.views.").concat(t.viewId),"".concat(a,".views.").concat(t.viewId),e[a].sharedState.editingViewId===t.viewId&&"".concat(a,".sharedState.editingViewId")]):e;case"SET_EDITING_FOCUS":return e[n]?Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{sharedState:Object(h.a)(Object(h.a)({},e[n].sharedState),{},{editingViewId:i})}))):e;case"SET_LIST_VIEW_ALIASES":return e[n]?Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{sharedState:Object(h.a)(Object(h.a)({},e[n].sharedState),{},{listViewAliases:t.aliases,showAliasesInList:t.showInList})}))):e;case"UPDATE_LIST_VIEW_SHOW_ALIASES":return e[n]?Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{sharedState:Object(h.a)(Object(h.a)({},e[n].sharedState),{},{showAliasesInList:t.showInList})}))):e;case"SET_VIEW_DATA":return Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{views:Object(h.a)(Object(h.a)({},e[n]?e[n].views:{}),{},Object(j.a)({},i,Object(h.a)(Object(h.a)({},e[n]&&e[n].views?e[n].views[i]:{}),{},Object(j.a)({},r,t.data))))})));case"SAVE_IMAGE_SETTINGS":return Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{views:Object(h.a)(Object(h.a)({},e[n]?e[n].views:{}),{},Object(j.a)({},i,Object(h.a)(Object(h.a)({},e[n]&&e[n].views?e[n].views[i]:{}),{},{zoomFactor:t.zoomFactor,imagePosition:t.imagePosition})))})));case"SET_SHARED_STATE_DATA":var o=t.viewId||e[n].sharedState.editingViewId,s=Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{sharedState:Object(h.a)(Object(h.a)({},e[n]?e[n].sharedState:{}),{},{views:Object(h.a)(Object(h.a)({},e[n]?e[n].sharedState.views:{}),{},Object(j.a)({},o,Object(h.a)(Object(h.a)({},e[n]?e[n].sharedState.views[o]:{}),{},Object(j.a)({},r,t.data))))})})));return s;case"INIT_VIEW_STATE":var c=t.initState,u=t.initSharedState,l=Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{sharedState:Object(h.a)(Object(h.a)({},e[n]?e[n].sharedState:{}),{},{views:Object(h.a)(Object(h.a)({},e[n]?e[n].sharedState.views:{}),{},Object(j.a)({},i,Object(Wt.a)((function(){return e[n].sharedState.views[i]}))?Object(h.a)(Object(h.a)({},u),e[n].sharedState.views[i]):u))}),views:Object(h.a)(Object(h.a)({},e[n]?e[n].views:{}),{},Object(j.a)({},i,Object(Wt.a)((function(){return e[n].views[i]}))?Object(h.a)(Object(h.a)({},c),e[n].views[i]):c))}))),d=l[n]&&l[n].sharedState&&(l[n].sharedState.listViewAliases||new Map);return l[n].sharedState.listViewAliases=d,l;default:return e}},Pn=new de.h,An=function(){return{currentViewSet:void 0,createdViewSets:{},fullscreenMode:!1,fullscreenComponentDescriptor:void 0,viewSizeChangeCounter:0,bottomNavHidden:"true"===localStorage.getItem("BOTTOM_NAVIGATION_HIDDEN")||!1,topNavHidden:"true"===localStorage.getItem("TOP_NAVIGATION_HIDDEN")||!1,defaultViewSetName:localStorage.getItem("DEFAULT_VIEWSET_NAME")||null,isSVOConfigLoaded:!1,unsavedChanges:!1}},Mn=function(e,t){return e.setFullscreen(!0),Object(h.a)(Object(h.a)({},t),{},{fullscreenMode:!0,fullscreenComponentDescriptor:e})},Dn=function(e,t){return e.setFullscreen(!1),Object(h.a)(Object(h.a)({},t),{},{fullscreenMode:!1,fullscreenComponentDescriptor:void 0})},Ln=function(e,t){var n=Object.keys(t).find((function(n){return t[n]&&t[n].name===e}));return n&&t[n]},Rn=function(e,t){var n=e.id,i=t.createdViewSets[n],r=i||Pn.getViewSet(n),a=i?{}:Object(j.a)({},n,r);return Object(h.a)(Object(h.a)({},t),{},{currentViewSet:r,createdViewSets:Object.assign({},t.createdViewSets,a)})},_n=function(e,t,n){return Object(h.a)(Object(h.a)({},e),{},{currentViewSet:t,createdViewSets:Object(h.a)(Object(h.a)({},e.createdViewSets),{},Object(j.a)({},n,t)),unsavedChanges:!0})},Fn=function(e,t){var n=e.createdViewSets,i=Object.keys(n).filter((function(e){return e!==t})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(j.a)({},t,n[t]))}),{});if(0===Object.keys(i).length){var r=de.b;i=Object(j.a)({},r,Pn.buildEmptyViewSet(r))}return{createdViewSets:i,currentViewSet:i[Object.keys(i)[0]],unsavedChanges:!0}},Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_OUT":return An();case"SET_VIEWSET":return _n(e,t.viewSet,t.viewSetId);case"REPLACE_VIEW_IN_CURRENT_VIEWSET":var n=t.viewId,i=t.inspectionId,r=t.replacementComponentId,a=Pn.getViewById(r);a.inspectionId=i;var o=e.currentViewSet.id,s=Object(h.a)(Object(h.a)({},e.currentViewSet),{},{viewSet:Object(h.a)(Object(h.a)({},e.currentViewSet.viewSet),{},Object(j.a)({},n,a))});return _n(e,s,o);case"SWITCH_VIEWSET":return Rn(t.viewSet,e);case"ENTER_FULLSCREEN_MODE":return e.fullscreenComponentDescriptor&&e.fullscreenComponentDescriptor.id!==t.componentDescriptor.id&&Dn(e.fullscreenComponentDescriptor,e),Mn(t.componentDescriptor,e);case"LEAVE_FULLSCREEN_MODE":return Dn(t.componentDescriptor,e);case"TOGGLE_FULLSCREEN_MODE":return e.fullscreenComponentDescriptor?e.fullscreenComponentDescriptor.id===t.componentDescriptor.id?e.fullscreenMode?Dn(t.componentDescriptor,e):Mn(t.componentDescriptor,e):e:Mn(t.componentDescriptor,e);case"INCREASE_VIEW_SIZE_CHANGE_COUNTER":return Object(h.a)(Object(h.a)({},e),{},{viewSizeChangeCounter:e.viewSizeChangeCounter+1});case"SET_BOTTOM_NAV_HIDDEN":return localStorage.setItem("BOTTOM_NAVIGATION_HIDDEN",t.hidden),Object(h.a)(Object(h.a)({},e),{},{bottomNavHidden:t.hidden});case"CHANGE_VIEWSET_AFTER_LOADING":return Object(h.a)(Object(h.a)({},e),{},{changeViewSetToName:t.name});case"SET_TOP_NAV_HIDDEN":return localStorage.setItem("TOP_NAVIGATION_HIDDEN",t.hidden),Object(h.a)(Object(h.a)({},e),{},{topNavHidden:t.hidden});case"SET_DEFAULT_VIEWSET_NAME":return localStorage.setItem("DEFAULT_VIEWSET_NAME",t.name),Object(h.a)(Object(h.a)({},e),{},{defaultViewSetName:t.name});case"NEW_VIEW_SET":var c=Object(j.a)({},t.name,Pn.buildEmptyViewSet(t.name));return Object(h.a)(Object(h.a)({},e),{},{createdViewSets:Object(h.a)(Object(h.a)({},e.createdViewSets),c),unsavedChanges:!0});case"REMOVE_VIEWSET":var u=Fn(e,t.name),l=u.createdViewSets,d=u.currentViewSet;return Object(h.a)(Object(h.a)({},e),{},{currentViewSet:d,createdViewSets:l,unsavedChanges:!0});case"CLEAR_CURRENT_VIEW":var p;if(null===e||void 0===e||null===(p=e.currentViewSet)||void 0===p||!p.name)return e;var f=Pn.buildEmptyViewSet(e.currentViewSet.name);return e.createdViewSets[e.currentViewSet.name]=f,Object(h.a)(Object(h.a)({},e),{},{currentViewSet:f,unsavedChanges:!0});case"RENAME_VIEWSET":var v=e.createdViewSets[t.oldName],b=Object(h.a)(Object(h.a)({},v),{},{id:t.newName,name:t.newName}),m=Object.keys(e.createdViewSets).reduce((function(n,i){return i===t.oldName?Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},t.newName,b)):Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},i,e.createdViewSets[i]))}),{});return t.oldName===e.currentViewSet.name?Object(h.a)(Object(h.a)({},e),{},{createdViewSets:m,currentViewSet:b,unsavedChanges:!0}):Object(h.a)(Object(h.a)({},e),{},{createdViewSets:m,unsavedChanges:!0});case"SET_CURRENT_LAYOUT":return t.layout?Object(h.a)(Object(h.a)({},e),{},{createdViewSets:Object.assign({},e.createdViewSets,Object(j.a)({},e.currentViewSet.id,Object(h.a)(Object(h.a)({},e.currentViewSet),{},{initialValue:t.layout}))),currentViewSet:Object(h.a)(Object(h.a)({},e.currentViewSet),{},{initialValue:t.layout}),currentLayout:t.layout,unsavedChanges:!0}):e;case"LOAD_CLIENT_CHUNK":if(e.changeViewSetToName){var g=Ln(e.changeViewSetToName,t.chunk.createdViewSets);if(g){var w=Object(h.a)(Object(h.a)({},e),{},{currentViewSet:g,createdViewSets:t.chunk.createdViewSets,changeViewSetToName:void 0});return Rn(g,w)}}var O={createdViewSets:t.chunk.createdViewSets,currentViewSet:t.chunk.currentViewSet};return Object(h.a)(Object(h.a)({},e),O);case"SET_SVO_CONFIG_LOADED":return Object(h.a)(Object(h.a)({},e),{},{isSVOConfigLoaded:t.isLoaded,unsavedChanges:!1});case"SET_SAVE_FLAG":return Object(h.a)(Object(h.a)({},e),{},{unsavedChanges:t.hasChanges});default:return e}};var Hn=function(e){return Object(v.b)({app:In(e),viewSet:Un,toolSet:Cn,inspections:En,routing:mn.routerReducer})},Wn=n(120),zn=(n(885),n(886),n(887),function(){var e=Object(i.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(""),o=Object(u.a)(a,2),s=o[0],l=o[1],h=Object(i.useState)(null),b=Object(u.a)(h,2),m=b[0],g=b[1],j=function(){var e=Object(c.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return function(t){return function(n){if(Wn.a.enableAutoSave){var i=e.getState();if("SET_"===n.type.substr(0,4)&&!i.app.saveOperationInProcess&&i.app.protobuf){var r=i.app,a=r.currentClientChunkRevision,o=r.protobuf,s=r.user;e.dispatch(Object(ie.F)(o,s,i,a))}}return t(n)}}},n=Object(v.d)(Hn({websocketUrl:Wn.a.websocketServerUrl,dispatch:function(e){return n.dispatch(e)}}),Object(v.c)(Object(v.a)(f.a,t),window.devToolsExtension?window.devToolsExtension():function(e){return e})),e.next=4,S.a.init();case 4:n.dispatch(Object(ie.X)()),g(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){(n&&s||"/hmi-v1"===window.location.pathname)&&j()}),[n,s]);var w=Object(ce.d)();return w&&(w.user&&!n&&r(w.user),w.authToken&&!s&&l(w.authToken)),n&&s||"/hmi-v1"===window.location.pathname?m?(document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?(m.dispatch(Object(ie.I)(!0)),clearTimeout(this.hibernateTimer)):this.hibernateTimer=setTimeout((function(){m.dispatch(Object(ie.I)(!1))}),1e4)})),Object(N.jsx)(p.a,{store:m,children:Object(N.jsx)(fn,{user:n,authToken:s,onLoggedOut:function(){return r(null),void l("")}})})):Object(N.jsx)("div",{}):Object(N.jsx)(bn,{onLogin:function(e){return function(e){e&&e.user&&e.authToken&&(r(e.user),l(e.authToken))}(e)}})}),qn=n(471),Bn=Object(qn.a)({palette:{primary:{main:"rgb(135, 135, 135)"}},typography:{useNextVariants:!0,htmlFontSize:10}}),Gn=(n(888),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,948)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))});s.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(a.a,{theme:Bn,children:Object(N.jsx)(zn,{})})}),document.getElementById("root")),Gn()},96:function(e,t,n){"use strict";t.a=n.p+"static/media/edit.962e7af9.svg"}},[[889,1,2]]]);
//# sourceMappingURL=main.5312dba2.chunk.js.map